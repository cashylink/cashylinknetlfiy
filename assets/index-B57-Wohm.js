const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LandingPage-vSQ8G7oB.js","./card-BCHo6Lhz.js","./BrandLogo-D6TVwdDb.js","./brandingService-By3Mhy5o.js","./whatsappService-C5XNCobX.js","./arrow-left-Duqnc2ct.js","./star-CrC3frMc.js","./crown-CGDz5Zhc.js","./download-zFfPcKvb.js","./zap-C3bQf2v-.js","./shield-hmgtIOlg.js","./chart-column-DLUdr6SB.js","./circle-check-big-DHRBy8Pa.js","./SubscriptionsPage-CvXHRbwE.js","./contentService-gvXnaU2d.js","./calendar-BvvA9b6y.js","./AuthPage-BWp4rE13.js","./TopUpPage-4f2yYFX-.js","./select-D6Ah4lQV.js","./index-B--99Iwc.js","./AdminTopupsPage-BN6E2Ecj.js","./AdminNotificationsPage-CChrvdzW.js","./label-Dkhmstw-.js","./textarea-D0BJ26YZ.js","./link-BwF9rdcQ.js","./UserRegisterPage-ByETEFA7.js","./alert-D5zW3joC.js","./wallet-DxinjWf1.js","./user-plus-BTL2kGNc.js","./share-2-CMHZyluU.js","./phone-C-OPspnn.js","./store-DAt19Spf.js","./UserAccountSetupPage-Cvvsooed.js","./DashboardLoginPage-DUgGSI9P.js","./ProtectedDashboard-DAuzppEj.js","./badge-DEy_1pxq.js","./MasterPinDialog-B4FD2nGL.js","./circle-alert-uZVrFUUg.js","./profitService-CxuHBzDm.js","./dollar-sign-CVGL3Wlx.js","./circle-x-DxOBYhRS.js","./ProtectedUserDashboard-BVShzh0K.js","./broadcastService-CXD7174W.js","./MerchantDashboard-81qdxLu5.js","./dropdown-menu-D6d97Dzq.js","./index--_dyLmUx.js","./WalletsManagement-C9rcBxWR.js","./progress-DUtoimDl.js","./walletDailyLimitsService-C0svnn_N.js","./square-pen-Dl9ynU6I.js","./PendingApprovalPage-Bwxd0Ysk.js","./gift-YnkGvO51.js","./refresh-cw-D0S1rEFy.js","./AdminLogin-BaRP2NOk.js","./ProtectedAdminDashboard-CVot5YyJ.js","./ProfileIcon-C62GfL_n.js","./switch-Bf9i02Wh.js","./separator-DYEwUSxG.js","./save-_Rkgmb6D.js","./copy-DpOXe6za.js","./users-CMWQMm4o.js","./AuthTestPage-BC6tZkO_.js","./ProfileSettingsPage-Btj1LN2Y.js","./walletSelectionPinService-4BJUi-uQ.js","./TransactionsPage-Dp_5tzS-.js","./MaintenanceDialog-CJuRjy50.js","./WalletAdditionPage-DygVodvU.js","./ReferralsPage-CghT8fpi.js","./CPanelPage-DWM5nWJj.js","./CPanelLoginPage-BQMx5VFn.js"])))=>i.map(i=>d[i]);
var f2=Object.defineProperty;var Y0=t=>{throw TypeError(t)};var p2=(t,e,n)=>e in t?f2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var X0=(t,e,n)=>p2(t,typeof e!="symbol"?e+"":e,n),hg=(t,e,n)=>e.has(t)||Y0("Cannot "+n);var W=(t,e,n)=>(hg(t,e,"read from private field"),n?n.call(t):e.get(t)),Le=(t,e,n)=>e.has(t)?Y0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),_e=(t,e,n,r)=>(hg(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Xt=(t,e,n)=>(hg(t,e,"access private method"),n);var ih=(t,e,n,r)=>({set _(s){_e(t,e,s,n)},get _(){return W(t,e,r)}});function m2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Aw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dx={exports:{}},Up={},hx={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wd=Symbol.for("react.element"),g2=Symbol.for("react.portal"),y2=Symbol.for("react.fragment"),v2=Symbol.for("react.strict_mode"),w2=Symbol.for("react.profiler"),_2=Symbol.for("react.provider"),E2=Symbol.for("react.context"),T2=Symbol.for("react.forward_ref"),I2=Symbol.for("react.suspense"),S2=Symbol.for("react.memo"),b2=Symbol.for("react.lazy"),J0=Symbol.iterator;function A2(t){return t===null||typeof t!="object"?null:(t=J0&&t[J0]||t["@@iterator"],typeof t=="function"?t:null)}var fx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},px=Object.assign,mx={};function Hl(t,e,n){this.props=t,this.context=e,this.refs=mx,this.updater=n||fx}Hl.prototype.isReactComponent={};Hl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Hl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function gx(){}gx.prototype=Hl.prototype;function xw(t,e,n){this.props=t,this.context=e,this.refs=mx,this.updater=n||fx}var Pw=xw.prototype=new gx;Pw.constructor=xw;px(Pw,Hl.prototype);Pw.isPureReactComponent=!0;var Z0=Array.isArray,yx=Object.prototype.hasOwnProperty,Rw={current:null},vx={key:!0,ref:!0,__self:!0,__source:!0};function wx(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)yx.call(e,r)&&!vx.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:wd,type:t,key:i,ref:o,props:s,_owner:Rw.current}}function x2(t,e){return{$$typeof:wd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Cw(t){return typeof t=="object"&&t!==null&&t.$$typeof===wd}function P2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var eT=/\/+/g;function fg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?P2(""+t.key):e.toString(36)}function Hh(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case wd:case g2:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+fg(o,0):r,Z0(s)?(n="",t!=null&&(n=t.replace(eT,"$&/")+"/"),Hh(s,e,n,"",function(c){return c})):s!=null&&(Cw(s)&&(s=x2(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(eT,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Z0(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+fg(i,a);o+=Hh(i,e,n,l,s)}else if(l=A2(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+fg(i,a++),o+=Hh(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function oh(t,e,n){if(t==null)return t;var r=[],s=0;return Hh(t,r,"","",function(i){return e.call(n,i,s++)}),r}function R2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var vn={current:null},Kh={transition:null},C2={ReactCurrentDispatcher:vn,ReactCurrentBatchConfig:Kh,ReactCurrentOwner:Rw};function _x(){throw Error("act(...) is not supported in production builds of React.")}ke.Children={map:oh,forEach:function(t,e,n){oh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return oh(t,function(){e++}),e},toArray:function(t){return oh(t,function(e){return e})||[]},only:function(t){if(!Cw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ke.Component=Hl;ke.Fragment=y2;ke.Profiler=w2;ke.PureComponent=xw;ke.StrictMode=v2;ke.Suspense=I2;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C2;ke.act=_x;ke.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=px({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Rw.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)yx.call(e,l)&&!vx.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:wd,type:t.type,key:s,ref:i,props:r,_owner:o}};ke.createContext=function(t){return t={$$typeof:E2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:_2,_context:t},t.Consumer=t};ke.createElement=wx;ke.createFactory=function(t){var e=wx.bind(null,t);return e.type=t,e};ke.createRef=function(){return{current:null}};ke.forwardRef=function(t){return{$$typeof:T2,render:t}};ke.isValidElement=Cw;ke.lazy=function(t){return{$$typeof:b2,_payload:{_status:-1,_result:t},_init:R2}};ke.memo=function(t,e){return{$$typeof:S2,type:t,compare:e===void 0?null:e}};ke.startTransition=function(t){var e=Kh.transition;Kh.transition={};try{t()}finally{Kh.transition=e}};ke.unstable_act=_x;ke.useCallback=function(t,e){return vn.current.useCallback(t,e)};ke.useContext=function(t){return vn.current.useContext(t)};ke.useDebugValue=function(){};ke.useDeferredValue=function(t){return vn.current.useDeferredValue(t)};ke.useEffect=function(t,e){return vn.current.useEffect(t,e)};ke.useId=function(){return vn.current.useId()};ke.useImperativeHandle=function(t,e,n){return vn.current.useImperativeHandle(t,e,n)};ke.useInsertionEffect=function(t,e){return vn.current.useInsertionEffect(t,e)};ke.useLayoutEffect=function(t,e){return vn.current.useLayoutEffect(t,e)};ke.useMemo=function(t,e){return vn.current.useMemo(t,e)};ke.useReducer=function(t,e,n){return vn.current.useReducer(t,e,n)};ke.useRef=function(t){return vn.current.useRef(t)};ke.useState=function(t){return vn.current.useState(t)};ke.useSyncExternalStore=function(t,e,n){return vn.current.useSyncExternalStore(t,e,n)};ke.useTransition=function(){return vn.current.useTransition()};ke.version="18.3.1";hx.exports=ke;var b=hx.exports;const z=Aw(b),kw=m2({__proto__:null,default:z},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k2=b,D2=Symbol.for("react.element"),N2=Symbol.for("react.fragment"),O2=Object.prototype.hasOwnProperty,L2=k2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,V2={key:!0,ref:!0,__self:!0,__source:!0};function Ex(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)O2.call(e,r)&&!V2.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:D2,type:t,key:i,ref:o,props:s,_owner:L2.current}}Up.Fragment=N2;Up.jsx=Ex;Up.jsxs=Ex;dx.exports=Up;var x=dx.exports,Tx={exports:{}},Jn={},Ix={exports:{}},Sx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,F){var H=U.length;U.push(F);e:for(;0<H;){var ae=H-1>>>1,te=U[ae];if(0<s(te,F))U[ae]=F,U[H]=te,H=ae;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var F=U[0],H=U.pop();if(H!==F){U[0]=H;e:for(var ae=0,te=U.length,le=te>>>1;ae<le;){var ue=2*(ae+1)-1,Se=U[ue],Xe=ue+1,he=U[Xe];if(0>s(Se,H))Xe<te&&0>s(he,Se)?(U[ae]=he,U[Xe]=H,ae=Xe):(U[ae]=Se,U[ue]=H,ae=ue);else if(Xe<te&&0>s(he,H))U[ae]=he,U[Xe]=H,ae=Xe;else break e}}return F}function s(U,F){var H=U.sortIndex-F.sortIndex;return H!==0?H:U.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,m=!1,T=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(U){for(var F=n(c);F!==null;){if(F.callback===null)r(c);else if(F.startTime<=U)r(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(c)}}function A(U){if(y=!1,v(U),!T)if(n(l)!==null)T=!0,ee(R);else{var F=n(c);F!==null&&G(A,F.startTime-U)}}function R(U,F){T=!1,y&&(y=!1,w(S),S=-1),m=!0;var H=f;try{for(v(F),h=n(l);h!==null&&(!(h.expirationTime>F)||U&&!k());){var ae=h.callback;if(typeof ae=="function"){h.callback=null,f=h.priorityLevel;var te=ae(h.expirationTime<=F);F=t.unstable_now(),typeof te=="function"?h.callback=te:h===n(l)&&r(l),v(F)}else r(l);h=n(l)}if(h!==null)var le=!0;else{var ue=n(c);ue!==null&&G(A,ue.startTime-F),le=!1}return le}finally{h=null,f=H,m=!1}}var L=!1,I=null,S=-1,P=5,C=-1;function k(){return!(t.unstable_now()-C<P)}function O(){if(I!==null){var U=t.unstable_now();C=U;var F=!0;try{F=I(!0,U)}finally{F?D():(L=!1,I=null)}}else L=!1}var D;if(typeof p=="function")D=function(){p(O)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,X=B.port2;B.port1.onmessage=O,D=function(){X.postMessage(null)}}else D=function(){_(O,0)};function ee(U){I=U,L||(L=!0,D())}function G(U,F){S=_(function(){U(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){T||m||(T=!0,ee(R))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var H=f;f=F;try{return U()}finally{f=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,F){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var H=f;f=U;try{return F()}finally{f=H}},t.unstable_scheduleCallback=function(U,F,H){var ae=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?ae+H:ae):H=ae,U){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=H+te,U={id:d++,callback:F,priorityLevel:U,startTime:H,expirationTime:te,sortIndex:-1},H>ae?(U.sortIndex=H,e(c,U),n(l)===null&&U===n(c)&&(y?(w(S),S=-1):y=!0,G(A,H-ae))):(U.sortIndex=te,e(l,U),T||m||(T=!0,ee(R))),U},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(U){var F=f;return function(){var H=f;f=F;try{return U.apply(this,arguments)}finally{f=H}}}})(Sx);Ix.exports=Sx;var M2=Ix.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F2=b,Qn=M2;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bx=new Set,xu={};function ha(t,e){gl(t,e),gl(t+"Capture",e)}function gl(t,e){for(xu[t]=e,t=0;t<e.length;t++)bx.add(e[t])}var Cs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ay=Object.prototype.hasOwnProperty,U2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tT={},nT={};function j2(t){return Ay.call(nT,t)?!0:Ay.call(tT,t)?!1:U2.test(t)?nT[t]=!0:(tT[t]=!0,!1)}function B2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $2(t,e,n,r){if(e===null||typeof e>"u"||B2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Gt[t]=new wn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Gt[e]=new wn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Gt[t]=new wn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Gt[t]=new wn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Gt[t]=new wn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Gt[t]=new wn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Gt[t]=new wn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Gt[t]=new wn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Gt[t]=new wn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Dw=/[\-:]([a-z])/g;function Nw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Dw,Nw);Gt[e]=new wn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Dw,Nw);Gt[e]=new wn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Dw,Nw);Gt[e]=new wn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Gt[t]=new wn(t,1,!1,t.toLowerCase(),null,!1,!1)});Gt.xlinkHref=new wn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Gt[t]=new wn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ow(t,e,n,r){var s=Gt.hasOwnProperty(e)?Gt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($2(e,n,s,r)&&(n=null),r||s===null?j2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Bs=F2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ah=Symbol.for("react.element"),Fa=Symbol.for("react.portal"),Ua=Symbol.for("react.fragment"),Lw=Symbol.for("react.strict_mode"),xy=Symbol.for("react.profiler"),Ax=Symbol.for("react.provider"),xx=Symbol.for("react.context"),Vw=Symbol.for("react.forward_ref"),Py=Symbol.for("react.suspense"),Ry=Symbol.for("react.suspense_list"),Mw=Symbol.for("react.memo"),di=Symbol.for("react.lazy"),Px=Symbol.for("react.offscreen"),rT=Symbol.iterator;function xc(t){return t===null||typeof t!="object"?null:(t=rT&&t[rT]||t["@@iterator"],typeof t=="function"?t:null)}var ht=Object.assign,pg;function zc(t){if(pg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);pg=e&&e[1]||""}return`
`+pg+t}var mg=!1;function gg(t,e){if(!t||mg)return"";mg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{mg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zc(t):""}function z2(t){switch(t.tag){case 5:return zc(t.type);case 16:return zc("Lazy");case 13:return zc("Suspense");case 19:return zc("SuspenseList");case 0:case 2:case 15:return t=gg(t.type,!1),t;case 11:return t=gg(t.type.render,!1),t;case 1:return t=gg(t.type,!0),t;default:return""}}function Cy(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ua:return"Fragment";case Fa:return"Portal";case xy:return"Profiler";case Lw:return"StrictMode";case Py:return"Suspense";case Ry:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xx:return(t.displayName||"Context")+".Consumer";case Ax:return(t._context.displayName||"Context")+".Provider";case Vw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Mw:return e=t.displayName||null,e!==null?e:Cy(t.type)||"Memo";case di:e=t._payload,t=t._init;try{return Cy(t(e))}catch{}}return null}function q2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cy(e);case 8:return e===Lw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $i(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Rx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function W2(t){var e=Rx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function lh(t){t._valueTracker||(t._valueTracker=W2(t))}function Cx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Rx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function bf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ky(t,e){var n=e.checked;return ht({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function sT(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=$i(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kx(t,e){e=e.checked,e!=null&&Ow(t,"checked",e,!1)}function Dy(t,e){kx(t,e);var n=$i(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ny(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ny(t,e.type,$i(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function iT(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ny(t,e,n){(e!=="number"||bf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var qc=Array.isArray;function Ya(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+$i(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Oy(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return ht({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function oT(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(qc(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:$i(n)}}function Dx(t,e){var n=$i(e.value),r=$i(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function aT(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Nx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ly(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Nx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ch,Ox=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ch=ch||document.createElement("div"),ch.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ch.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Pu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var tu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},H2=["Webkit","ms","Moz","O"];Object.keys(tu).forEach(function(t){H2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),tu[e]=tu[t]})});function Lx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||tu.hasOwnProperty(t)&&tu[t]?(""+e).trim():e+"px"}function Vx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Lx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var K2=ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vy(t,e){if(e){if(K2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function My(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fy=null;function Fw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Uy=null,Xa=null,Ja=null;function lT(t){if(t=Td(t)){if(typeof Uy!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=qp(e),Uy(t.stateNode,t.type,e))}}function Mx(t){Xa?Ja?Ja.push(t):Ja=[t]:Xa=t}function Fx(){if(Xa){var t=Xa,e=Ja;if(Ja=Xa=null,lT(t),e)for(t=0;t<e.length;t++)lT(e[t])}}function Ux(t,e){return t(e)}function jx(){}var yg=!1;function Bx(t,e,n){if(yg)return t(e,n);yg=!0;try{return Ux(t,e,n)}finally{yg=!1,(Xa!==null||Ja!==null)&&(jx(),Fx())}}function Ru(t,e){var n=t.stateNode;if(n===null)return null;var r=qp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var jy=!1;if(Cs)try{var Pc={};Object.defineProperty(Pc,"passive",{get:function(){jy=!0}}),window.addEventListener("test",Pc,Pc),window.removeEventListener("test",Pc,Pc)}catch{jy=!1}function G2(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var nu=!1,Af=null,xf=!1,By=null,Q2={onError:function(t){nu=!0,Af=t}};function Y2(t,e,n,r,s,i,o,a,l){nu=!1,Af=null,G2.apply(Q2,arguments)}function X2(t,e,n,r,s,i,o,a,l){if(Y2.apply(this,arguments),nu){if(nu){var c=Af;nu=!1,Af=null}else throw Error(Q(198));xf||(xf=!0,By=c)}}function fa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function $x(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function cT(t){if(fa(t)!==t)throw Error(Q(188))}function J2(t){var e=t.alternate;if(!e){if(e=fa(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return cT(s),t;if(i===r)return cT(s),e;i=i.sibling}throw Error(Q(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Q(189))}}if(n.alternate!==r)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function zx(t){return t=J2(t),t!==null?qx(t):null}function qx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=qx(t);if(e!==null)return e;t=t.sibling}return null}var Wx=Qn.unstable_scheduleCallback,uT=Qn.unstable_cancelCallback,Z2=Qn.unstable_shouldYield,eL=Qn.unstable_requestPaint,Et=Qn.unstable_now,tL=Qn.unstable_getCurrentPriorityLevel,Uw=Qn.unstable_ImmediatePriority,Hx=Qn.unstable_UserBlockingPriority,Pf=Qn.unstable_NormalPriority,nL=Qn.unstable_LowPriority,Kx=Qn.unstable_IdlePriority,jp=null,ts=null;function rL(t){if(ts&&typeof ts.onCommitFiberRoot=="function")try{ts.onCommitFiberRoot(jp,t,void 0,(t.current.flags&128)===128)}catch{}}var Ir=Math.clz32?Math.clz32:oL,sL=Math.log,iL=Math.LN2;function oL(t){return t>>>=0,t===0?32:31-(sL(t)/iL|0)|0}var uh=64,dh=4194304;function Wc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Rf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Wc(a):(i&=o,i!==0&&(r=Wc(i)))}else o=n&~s,o!==0?r=Wc(o):i!==0&&(r=Wc(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ir(e),s=1<<n,r|=t[n],e&=~s;return r}function aL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lL(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ir(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=aL(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function $y(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Gx(){var t=uh;return uh<<=1,!(uh&4194240)&&(uh=64),t}function vg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _d(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ir(e),t[e]=n}function cL(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ir(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function jw(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ir(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var $e=0;function Qx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Yx,Bw,Xx,Jx,Zx,zy=!1,hh=[],xi=null,Pi=null,Ri=null,Cu=new Map,ku=new Map,fi=[],uL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dT(t,e){switch(t){case"focusin":case"focusout":xi=null;break;case"dragenter":case"dragleave":Pi=null;break;case"mouseover":case"mouseout":Ri=null;break;case"pointerover":case"pointerout":Cu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ku.delete(e.pointerId)}}function Rc(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Td(e),e!==null&&Bw(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function dL(t,e,n,r,s){switch(e){case"focusin":return xi=Rc(xi,t,e,n,r,s),!0;case"dragenter":return Pi=Rc(Pi,t,e,n,r,s),!0;case"mouseover":return Ri=Rc(Ri,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Cu.set(i,Rc(Cu.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ku.set(i,Rc(ku.get(i)||null,t,e,n,r,s)),!0}return!1}function e1(t){var e=xo(t.target);if(e!==null){var n=fa(e);if(n!==null){if(e=n.tag,e===13){if(e=$x(n),e!==null){t.blockedOn=e,Zx(t.priority,function(){Xx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Fy=r,n.target.dispatchEvent(r),Fy=null}else return e=Td(n),e!==null&&Bw(e),t.blockedOn=n,!1;e.shift()}return!0}function hT(t,e,n){Gh(t)&&n.delete(e)}function hL(){zy=!1,xi!==null&&Gh(xi)&&(xi=null),Pi!==null&&Gh(Pi)&&(Pi=null),Ri!==null&&Gh(Ri)&&(Ri=null),Cu.forEach(hT),ku.forEach(hT)}function Cc(t,e){t.blockedOn===e&&(t.blockedOn=null,zy||(zy=!0,Qn.unstable_scheduleCallback(Qn.unstable_NormalPriority,hL)))}function Du(t){function e(s){return Cc(s,t)}if(0<hh.length){Cc(hh[0],t);for(var n=1;n<hh.length;n++){var r=hh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(xi!==null&&Cc(xi,t),Pi!==null&&Cc(Pi,t),Ri!==null&&Cc(Ri,t),Cu.forEach(e),ku.forEach(e),n=0;n<fi.length;n++)r=fi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<fi.length&&(n=fi[0],n.blockedOn===null);)e1(n),n.blockedOn===null&&fi.shift()}var Za=Bs.ReactCurrentBatchConfig,Cf=!0;function fL(t,e,n,r){var s=$e,i=Za.transition;Za.transition=null;try{$e=1,$w(t,e,n,r)}finally{$e=s,Za.transition=i}}function pL(t,e,n,r){var s=$e,i=Za.transition;Za.transition=null;try{$e=4,$w(t,e,n,r)}finally{$e=s,Za.transition=i}}function $w(t,e,n,r){if(Cf){var s=qy(t,e,n,r);if(s===null)Pg(t,e,r,kf,n),dT(t,r);else if(dL(s,t,e,n,r))r.stopPropagation();else if(dT(t,r),e&4&&-1<uL.indexOf(t)){for(;s!==null;){var i=Td(s);if(i!==null&&Yx(i),i=qy(t,e,n,r),i===null&&Pg(t,e,r,kf,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Pg(t,e,r,null,n)}}var kf=null;function qy(t,e,n,r){if(kf=null,t=Fw(r),t=xo(t),t!==null)if(e=fa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=$x(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return kf=t,null}function t1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tL()){case Uw:return 1;case Hx:return 4;case Pf:case nL:return 16;case Kx:return 536870912;default:return 16}default:return 16}}var Ti=null,zw=null,Qh=null;function n1(){if(Qh)return Qh;var t,e=zw,n=e.length,r,s="value"in Ti?Ti.value:Ti.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Qh=s.slice(t,1<r?1-r:void 0)}function Yh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function fh(){return!0}function fT(){return!1}function Zn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?fh:fT,this.isPropagationStopped=fT,this}return ht(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fh)},persist:function(){},isPersistent:fh}),e}var Kl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qw=Zn(Kl),Ed=ht({},Kl,{view:0,detail:0}),mL=Zn(Ed),wg,_g,kc,Bp=ht({},Ed,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ww,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==kc&&(kc&&t.type==="mousemove"?(wg=t.screenX-kc.screenX,_g=t.screenY-kc.screenY):_g=wg=0,kc=t),wg)},movementY:function(t){return"movementY"in t?t.movementY:_g}}),pT=Zn(Bp),gL=ht({},Bp,{dataTransfer:0}),yL=Zn(gL),vL=ht({},Ed,{relatedTarget:0}),Eg=Zn(vL),wL=ht({},Kl,{animationName:0,elapsedTime:0,pseudoElement:0}),_L=Zn(wL),EL=ht({},Kl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),TL=Zn(EL),IL=ht({},Kl,{data:0}),mT=Zn(IL),SL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=AL[t])?!!e[t]:!1}function Ww(){return xL}var PL=ht({},Ed,{key:function(t){if(t.key){var e=SL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Yh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bL[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ww,charCode:function(t){return t.type==="keypress"?Yh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),RL=Zn(PL),CL=ht({},Bp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gT=Zn(CL),kL=ht({},Ed,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ww}),DL=Zn(kL),NL=ht({},Kl,{propertyName:0,elapsedTime:0,pseudoElement:0}),OL=Zn(NL),LL=ht({},Bp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),VL=Zn(LL),ML=[9,13,27,32],Hw=Cs&&"CompositionEvent"in window,ru=null;Cs&&"documentMode"in document&&(ru=document.documentMode);var FL=Cs&&"TextEvent"in window&&!ru,r1=Cs&&(!Hw||ru&&8<ru&&11>=ru),yT=" ",vT=!1;function s1(t,e){switch(t){case"keyup":return ML.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function i1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ja=!1;function UL(t,e){switch(t){case"compositionend":return i1(e);case"keypress":return e.which!==32?null:(vT=!0,yT);case"textInput":return t=e.data,t===yT&&vT?null:t;default:return null}}function jL(t,e){if(ja)return t==="compositionend"||!Hw&&s1(t,e)?(t=n1(),Qh=zw=Ti=null,ja=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return r1&&e.locale!=="ko"?null:e.data;default:return null}}var BL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!BL[t.type]:e==="textarea"}function o1(t,e,n,r){Mx(r),e=Df(e,"onChange"),0<e.length&&(n=new qw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var su=null,Nu=null;function $L(t){y1(t,0)}function $p(t){var e=za(t);if(Cx(e))return t}function zL(t,e){if(t==="change")return e}var a1=!1;if(Cs){var Tg;if(Cs){var Ig="oninput"in document;if(!Ig){var _T=document.createElement("div");_T.setAttribute("oninput","return;"),Ig=typeof _T.oninput=="function"}Tg=Ig}else Tg=!1;a1=Tg&&(!document.documentMode||9<document.documentMode)}function ET(){su&&(su.detachEvent("onpropertychange",l1),Nu=su=null)}function l1(t){if(t.propertyName==="value"&&$p(Nu)){var e=[];o1(e,Nu,t,Fw(t)),Bx($L,e)}}function qL(t,e,n){t==="focusin"?(ET(),su=e,Nu=n,su.attachEvent("onpropertychange",l1)):t==="focusout"&&ET()}function WL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $p(Nu)}function HL(t,e){if(t==="click")return $p(e)}function KL(t,e){if(t==="input"||t==="change")return $p(e)}function GL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xr=typeof Object.is=="function"?Object.is:GL;function Ou(t,e){if(xr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ay.call(e,s)||!xr(t[s],e[s]))return!1}return!0}function TT(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function IT(t,e){var n=TT(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=TT(n)}}function c1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?c1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function u1(){for(var t=window,e=bf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=bf(t.document)}return e}function Kw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function QL(t){var e=u1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&c1(n.ownerDocument.documentElement,n)){if(r!==null&&Kw(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=IT(n,i);var o=IT(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var YL=Cs&&"documentMode"in document&&11>=document.documentMode,Ba=null,Wy=null,iu=null,Hy=!1;function ST(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Hy||Ba==null||Ba!==bf(r)||(r=Ba,"selectionStart"in r&&Kw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),iu&&Ou(iu,r)||(iu=r,r=Df(Wy,"onSelect"),0<r.length&&(e=new qw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ba)))}function ph(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $a={animationend:ph("Animation","AnimationEnd"),animationiteration:ph("Animation","AnimationIteration"),animationstart:ph("Animation","AnimationStart"),transitionend:ph("Transition","TransitionEnd")},Sg={},d1={};Cs&&(d1=document.createElement("div").style,"AnimationEvent"in window||(delete $a.animationend.animation,delete $a.animationiteration.animation,delete $a.animationstart.animation),"TransitionEvent"in window||delete $a.transitionend.transition);function zp(t){if(Sg[t])return Sg[t];if(!$a[t])return t;var e=$a[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in d1)return Sg[t]=e[n];return t}var h1=zp("animationend"),f1=zp("animationiteration"),p1=zp("animationstart"),m1=zp("transitionend"),g1=new Map,bT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function eo(t,e){g1.set(t,e),ha(e,[t])}for(var bg=0;bg<bT.length;bg++){var Ag=bT[bg],XL=Ag.toLowerCase(),JL=Ag[0].toUpperCase()+Ag.slice(1);eo(XL,"on"+JL)}eo(h1,"onAnimationEnd");eo(f1,"onAnimationIteration");eo(p1,"onAnimationStart");eo("dblclick","onDoubleClick");eo("focusin","onFocus");eo("focusout","onBlur");eo(m1,"onTransitionEnd");gl("onMouseEnter",["mouseout","mouseover"]);gl("onMouseLeave",["mouseout","mouseover"]);gl("onPointerEnter",["pointerout","pointerover"]);gl("onPointerLeave",["pointerout","pointerover"]);ha("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ha("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ha("onBeforeInput",["compositionend","keypress","textInput","paste"]);ha("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ha("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ha("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZL=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hc));function AT(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,X2(r,e,void 0,t),t.currentTarget=null}function y1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;AT(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;AT(s,a,c),i=l}}}if(xf)throw t=By,xf=!1,By=null,t}function et(t,e){var n=e[Xy];n===void 0&&(n=e[Xy]=new Set);var r=t+"__bubble";n.has(r)||(v1(e,t,2,!1),n.add(r))}function xg(t,e,n){var r=0;e&&(r|=4),v1(n,t,r,e)}var mh="_reactListening"+Math.random().toString(36).slice(2);function Lu(t){if(!t[mh]){t[mh]=!0,bx.forEach(function(n){n!=="selectionchange"&&(ZL.has(n)||xg(n,!1,t),xg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[mh]||(e[mh]=!0,xg("selectionchange",!1,e))}}function v1(t,e,n,r){switch(t1(e)){case 1:var s=fL;break;case 4:s=pL;break;default:s=$w}n=s.bind(null,e,n,t),s=void 0,!jy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Pg(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=xo(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Bx(function(){var c=i,d=Fw(n),h=[];e:{var f=g1.get(t);if(f!==void 0){var m=qw,T=t;switch(t){case"keypress":if(Yh(n)===0)break e;case"keydown":case"keyup":m=RL;break;case"focusin":T="focus",m=Eg;break;case"focusout":T="blur",m=Eg;break;case"beforeblur":case"afterblur":m=Eg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=pT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=yL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=DL;break;case h1:case f1:case p1:m=_L;break;case m1:m=OL;break;case"scroll":m=mL;break;case"wheel":m=VL;break;case"copy":case"cut":case"paste":m=TL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=gT}var y=(e&4)!==0,_=!y&&t==="scroll",w=y?f!==null?f+"Capture":null:f;y=[];for(var p=c,v;p!==null;){v=p;var A=v.stateNode;if(v.tag===5&&A!==null&&(v=A,w!==null&&(A=Ru(p,w),A!=null&&y.push(Vu(p,A,v)))),_)break;p=p.return}0<y.length&&(f=new m(f,T,null,n,d),h.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==Fy&&(T=n.relatedTarget||n.fromElement)&&(xo(T)||T[ks]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(T=n.relatedTarget||n.toElement,m=c,T=T?xo(T):null,T!==null&&(_=fa(T),T!==_||T.tag!==5&&T.tag!==6)&&(T=null)):(m=null,T=c),m!==T)){if(y=pT,A="onMouseLeave",w="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(y=gT,A="onPointerLeave",w="onPointerEnter",p="pointer"),_=m==null?f:za(m),v=T==null?f:za(T),f=new y(A,p+"leave",m,n,d),f.target=_,f.relatedTarget=v,A=null,xo(d)===c&&(y=new y(w,p+"enter",T,n,d),y.target=v,y.relatedTarget=_,A=y),_=A,m&&T)t:{for(y=m,w=T,p=0,v=y;v;v=Ta(v))p++;for(v=0,A=w;A;A=Ta(A))v++;for(;0<p-v;)y=Ta(y),p--;for(;0<v-p;)w=Ta(w),v--;for(;p--;){if(y===w||w!==null&&y===w.alternate)break t;y=Ta(y),w=Ta(w)}y=null}else y=null;m!==null&&xT(h,f,m,y,!1),T!==null&&_!==null&&xT(h,_,T,y,!0)}}e:{if(f=c?za(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var R=zL;else if(wT(f))if(a1)R=KL;else{R=WL;var L=qL}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(R=HL);if(R&&(R=R(t,c))){o1(h,R,n,d);break e}L&&L(t,f,c),t==="focusout"&&(L=f._wrapperState)&&L.controlled&&f.type==="number"&&Ny(f,"number",f.value)}switch(L=c?za(c):window,t){case"focusin":(wT(L)||L.contentEditable==="true")&&(Ba=L,Wy=c,iu=null);break;case"focusout":iu=Wy=Ba=null;break;case"mousedown":Hy=!0;break;case"contextmenu":case"mouseup":case"dragend":Hy=!1,ST(h,n,d);break;case"selectionchange":if(YL)break;case"keydown":case"keyup":ST(h,n,d)}var I;if(Hw)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else ja?s1(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(r1&&n.locale!=="ko"&&(ja||S!=="onCompositionStart"?S==="onCompositionEnd"&&ja&&(I=n1()):(Ti=d,zw="value"in Ti?Ti.value:Ti.textContent,ja=!0)),L=Df(c,S),0<L.length&&(S=new mT(S,t,null,n,d),h.push({event:S,listeners:L}),I?S.data=I:(I=i1(n),I!==null&&(S.data=I)))),(I=FL?UL(t,n):jL(t,n))&&(c=Df(c,"onBeforeInput"),0<c.length&&(d=new mT("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=I))}y1(h,e)})}function Vu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Df(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ru(t,n),i!=null&&r.unshift(Vu(t,i,s)),i=Ru(t,e),i!=null&&r.push(Vu(t,i,s))),t=t.return}return r}function Ta(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xT(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Ru(n,i),l!=null&&o.unshift(Vu(n,l,a))):s||(l=Ru(n,i),l!=null&&o.push(Vu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var eV=/\r\n?/g,tV=/\u0000|\uFFFD/g;function PT(t){return(typeof t=="string"?t:""+t).replace(eV,`
`).replace(tV,"")}function gh(t,e,n){if(e=PT(e),PT(t)!==e&&n)throw Error(Q(425))}function Nf(){}var Ky=null,Gy=null;function Qy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Yy=typeof setTimeout=="function"?setTimeout:void 0,nV=typeof clearTimeout=="function"?clearTimeout:void 0,RT=typeof Promise=="function"?Promise:void 0,rV=typeof queueMicrotask=="function"?queueMicrotask:typeof RT<"u"?function(t){return RT.resolve(null).then(t).catch(sV)}:Yy;function sV(t){setTimeout(function(){throw t})}function Rg(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Du(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Du(e)}function Ci(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function CT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Gl=Math.random().toString(36).slice(2),Qr="__reactFiber$"+Gl,Mu="__reactProps$"+Gl,ks="__reactContainer$"+Gl,Xy="__reactEvents$"+Gl,iV="__reactListeners$"+Gl,oV="__reactHandles$"+Gl;function xo(t){var e=t[Qr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ks]||n[Qr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=CT(t);t!==null;){if(n=t[Qr])return n;t=CT(t)}return e}t=n,n=t.parentNode}return null}function Td(t){return t=t[Qr]||t[ks],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function za(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function qp(t){return t[Mu]||null}var Jy=[],qa=-1;function to(t){return{current:t}}function tt(t){0>qa||(t.current=Jy[qa],Jy[qa]=null,qa--)}function Qe(t,e){qa++,Jy[qa]=t.current,t.current=e}var zi={},ln=to(zi),kn=to(!1),Xo=zi;function yl(t,e){var n=t.type.contextTypes;if(!n)return zi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Dn(t){return t=t.childContextTypes,t!=null}function Of(){tt(kn),tt(ln)}function kT(t,e,n){if(ln.current!==zi)throw Error(Q(168));Qe(ln,e),Qe(kn,n)}function w1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Q(108,q2(t)||"Unknown",s));return ht({},n,r)}function Lf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||zi,Xo=ln.current,Qe(ln,t),Qe(kn,kn.current),!0}function DT(t,e,n){var r=t.stateNode;if(!r)throw Error(Q(169));n?(t=w1(t,e,Xo),r.__reactInternalMemoizedMergedChildContext=t,tt(kn),tt(ln),Qe(ln,t)):tt(kn),Qe(kn,n)}var ys=null,Wp=!1,Cg=!1;function _1(t){ys===null?ys=[t]:ys.push(t)}function aV(t){Wp=!0,_1(t)}function no(){if(!Cg&&ys!==null){Cg=!0;var t=0,e=$e;try{var n=ys;for($e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ys=null,Wp=!1}catch(s){throw ys!==null&&(ys=ys.slice(t+1)),Wx(Uw,no),s}finally{$e=e,Cg=!1}}return null}var Wa=[],Ha=0,Vf=null,Mf=0,rr=[],sr=0,Jo=null,Es=1,Ts="";function go(t,e){Wa[Ha++]=Mf,Wa[Ha++]=Vf,Vf=t,Mf=e}function E1(t,e,n){rr[sr++]=Es,rr[sr++]=Ts,rr[sr++]=Jo,Jo=t;var r=Es;t=Ts;var s=32-Ir(r)-1;r&=~(1<<s),n+=1;var i=32-Ir(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Es=1<<32-Ir(e)+s|n<<s|r,Ts=i+t}else Es=1<<i|n<<s|r,Ts=t}function Gw(t){t.return!==null&&(go(t,1),E1(t,1,0))}function Qw(t){for(;t===Vf;)Vf=Wa[--Ha],Wa[Ha]=null,Mf=Wa[--Ha],Wa[Ha]=null;for(;t===Jo;)Jo=rr[--sr],rr[sr]=null,Ts=rr[--sr],rr[sr]=null,Es=rr[--sr],rr[sr]=null}var Wn=null,$n=null,it=!1,Er=null;function T1(t,e){var n=ir(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function NT(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wn=t,$n=Ci(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wn=t,$n=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Jo!==null?{id:Es,overflow:Ts}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ir(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Wn=t,$n=null,!0):!1;default:return!1}}function Zy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ev(t){if(it){var e=$n;if(e){var n=e;if(!NT(t,e)){if(Zy(t))throw Error(Q(418));e=Ci(n.nextSibling);var r=Wn;e&&NT(t,e)?T1(r,n):(t.flags=t.flags&-4097|2,it=!1,Wn=t)}}else{if(Zy(t))throw Error(Q(418));t.flags=t.flags&-4097|2,it=!1,Wn=t}}}function OT(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wn=t}function yh(t){if(t!==Wn)return!1;if(!it)return OT(t),it=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Qy(t.type,t.memoizedProps)),e&&(e=$n)){if(Zy(t))throw I1(),Error(Q(418));for(;e;)T1(t,e),e=Ci(e.nextSibling)}if(OT(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$n=Ci(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$n=null}}else $n=Wn?Ci(t.stateNode.nextSibling):null;return!0}function I1(){for(var t=$n;t;)t=Ci(t.nextSibling)}function vl(){$n=Wn=null,it=!1}function Yw(t){Er===null?Er=[t]:Er.push(t)}var lV=Bs.ReactCurrentBatchConfig;function Dc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var r=n.stateNode}if(!r)throw Error(Q(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function vh(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function LT(t){var e=t._init;return e(t._payload)}function S1(t){function e(w,p){if(t){var v=w.deletions;v===null?(w.deletions=[p],w.flags|=16):v.push(p)}}function n(w,p){if(!t)return null;for(;p!==null;)e(w,p),p=p.sibling;return null}function r(w,p){for(w=new Map;p!==null;)p.key!==null?w.set(p.key,p):w.set(p.index,p),p=p.sibling;return w}function s(w,p){return w=Oi(w,p),w.index=0,w.sibling=null,w}function i(w,p,v){return w.index=v,t?(v=w.alternate,v!==null?(v=v.index,v<p?(w.flags|=2,p):v):(w.flags|=2,p)):(w.flags|=1048576,p)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,p,v,A){return p===null||p.tag!==6?(p=Mg(v,w.mode,A),p.return=w,p):(p=s(p,v),p.return=w,p)}function l(w,p,v,A){var R=v.type;return R===Ua?d(w,p,v.props.children,A,v.key):p!==null&&(p.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===di&&LT(R)===p.type)?(A=s(p,v.props),A.ref=Dc(w,p,v),A.return=w,A):(A=rf(v.type,v.key,v.props,null,w.mode,A),A.ref=Dc(w,p,v),A.return=w,A)}function c(w,p,v,A){return p===null||p.tag!==4||p.stateNode.containerInfo!==v.containerInfo||p.stateNode.implementation!==v.implementation?(p=Fg(v,w.mode,A),p.return=w,p):(p=s(p,v.children||[]),p.return=w,p)}function d(w,p,v,A,R){return p===null||p.tag!==7?(p=Ho(v,w.mode,A,R),p.return=w,p):(p=s(p,v),p.return=w,p)}function h(w,p,v){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Mg(""+p,w.mode,v),p.return=w,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case ah:return v=rf(p.type,p.key,p.props,null,w.mode,v),v.ref=Dc(w,null,p),v.return=w,v;case Fa:return p=Fg(p,w.mode,v),p.return=w,p;case di:var A=p._init;return h(w,A(p._payload),v)}if(qc(p)||xc(p))return p=Ho(p,w.mode,v,null),p.return=w,p;vh(w,p)}return null}function f(w,p,v,A){var R=p!==null?p.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return R!==null?null:a(w,p,""+v,A);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ah:return v.key===R?l(w,p,v,A):null;case Fa:return v.key===R?c(w,p,v,A):null;case di:return R=v._init,f(w,p,R(v._payload),A)}if(qc(v)||xc(v))return R!==null?null:d(w,p,v,A,null);vh(w,v)}return null}function m(w,p,v,A,R){if(typeof A=="string"&&A!==""||typeof A=="number")return w=w.get(v)||null,a(p,w,""+A,R);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case ah:return w=w.get(A.key===null?v:A.key)||null,l(p,w,A,R);case Fa:return w=w.get(A.key===null?v:A.key)||null,c(p,w,A,R);case di:var L=A._init;return m(w,p,v,L(A._payload),R)}if(qc(A)||xc(A))return w=w.get(v)||null,d(p,w,A,R,null);vh(p,A)}return null}function T(w,p,v,A){for(var R=null,L=null,I=p,S=p=0,P=null;I!==null&&S<v.length;S++){I.index>S?(P=I,I=null):P=I.sibling;var C=f(w,I,v[S],A);if(C===null){I===null&&(I=P);break}t&&I&&C.alternate===null&&e(w,I),p=i(C,p,S),L===null?R=C:L.sibling=C,L=C,I=P}if(S===v.length)return n(w,I),it&&go(w,S),R;if(I===null){for(;S<v.length;S++)I=h(w,v[S],A),I!==null&&(p=i(I,p,S),L===null?R=I:L.sibling=I,L=I);return it&&go(w,S),R}for(I=r(w,I);S<v.length;S++)P=m(I,w,S,v[S],A),P!==null&&(t&&P.alternate!==null&&I.delete(P.key===null?S:P.key),p=i(P,p,S),L===null?R=P:L.sibling=P,L=P);return t&&I.forEach(function(k){return e(w,k)}),it&&go(w,S),R}function y(w,p,v,A){var R=xc(v);if(typeof R!="function")throw Error(Q(150));if(v=R.call(v),v==null)throw Error(Q(151));for(var L=R=null,I=p,S=p=0,P=null,C=v.next();I!==null&&!C.done;S++,C=v.next()){I.index>S?(P=I,I=null):P=I.sibling;var k=f(w,I,C.value,A);if(k===null){I===null&&(I=P);break}t&&I&&k.alternate===null&&e(w,I),p=i(k,p,S),L===null?R=k:L.sibling=k,L=k,I=P}if(C.done)return n(w,I),it&&go(w,S),R;if(I===null){for(;!C.done;S++,C=v.next())C=h(w,C.value,A),C!==null&&(p=i(C,p,S),L===null?R=C:L.sibling=C,L=C);return it&&go(w,S),R}for(I=r(w,I);!C.done;S++,C=v.next())C=m(I,w,S,C.value,A),C!==null&&(t&&C.alternate!==null&&I.delete(C.key===null?S:C.key),p=i(C,p,S),L===null?R=C:L.sibling=C,L=C);return t&&I.forEach(function(O){return e(w,O)}),it&&go(w,S),R}function _(w,p,v,A){if(typeof v=="object"&&v!==null&&v.type===Ua&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case ah:e:{for(var R=v.key,L=p;L!==null;){if(L.key===R){if(R=v.type,R===Ua){if(L.tag===7){n(w,L.sibling),p=s(L,v.props.children),p.return=w,w=p;break e}}else if(L.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===di&&LT(R)===L.type){n(w,L.sibling),p=s(L,v.props),p.ref=Dc(w,L,v),p.return=w,w=p;break e}n(w,L);break}else e(w,L);L=L.sibling}v.type===Ua?(p=Ho(v.props.children,w.mode,A,v.key),p.return=w,w=p):(A=rf(v.type,v.key,v.props,null,w.mode,A),A.ref=Dc(w,p,v),A.return=w,w=A)}return o(w);case Fa:e:{for(L=v.key;p!==null;){if(p.key===L)if(p.tag===4&&p.stateNode.containerInfo===v.containerInfo&&p.stateNode.implementation===v.implementation){n(w,p.sibling),p=s(p,v.children||[]),p.return=w,w=p;break e}else{n(w,p);break}else e(w,p);p=p.sibling}p=Fg(v,w.mode,A),p.return=w,w=p}return o(w);case di:return L=v._init,_(w,p,L(v._payload),A)}if(qc(v))return T(w,p,v,A);if(xc(v))return y(w,p,v,A);vh(w,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,p!==null&&p.tag===6?(n(w,p.sibling),p=s(p,v),p.return=w,w=p):(n(w,p),p=Mg(v,w.mode,A),p.return=w,w=p),o(w)):n(w,p)}return _}var wl=S1(!0),b1=S1(!1),Ff=to(null),Uf=null,Ka=null,Xw=null;function Jw(){Xw=Ka=Uf=null}function Zw(t){var e=Ff.current;tt(Ff),t._currentValue=e}function tv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function el(t,e){Uf=t,Xw=Ka=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(xn=!0),t.firstContext=null)}function cr(t){var e=t._currentValue;if(Xw!==t)if(t={context:t,memoizedValue:e,next:null},Ka===null){if(Uf===null)throw Error(Q(308));Ka=t,Uf.dependencies={lanes:0,firstContext:t}}else Ka=Ka.next=t;return e}var Po=null;function e_(t){Po===null?Po=[t]:Po.push(t)}function A1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,e_(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ds(t,r)}function Ds(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var hi=!1;function t_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function x1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function bs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ki(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Me&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ds(t,n)}return s=r.interleaved,s===null?(e.next=e,e_(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ds(t,n)}function Xh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jw(t,n)}}function VT(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function jf(t,e,n,r){var s=t.updateQueue;hi=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var f=a.lane,m=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var T=t,y=a;switch(f=e,m=n,y.tag){case 1:if(T=y.payload,typeof T=="function"){h=T.call(m,h,f);break e}h=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=y.payload,f=typeof T=="function"?T.call(m,h,f):T,f==null)break e;h=ht({},h,f);break e;case 2:hi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=h):d=d.next=m,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ea|=o,t.lanes=o,t.memoizedState=h}}function MT(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Q(191,s));s.call(r)}}}var Id={},ns=to(Id),Fu=to(Id),Uu=to(Id);function Ro(t){if(t===Id)throw Error(Q(174));return t}function n_(t,e){switch(Qe(Uu,e),Qe(Fu,t),Qe(ns,Id),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ly(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ly(e,t)}tt(ns),Qe(ns,e)}function _l(){tt(ns),tt(Fu),tt(Uu)}function P1(t){Ro(Uu.current);var e=Ro(ns.current),n=Ly(e,t.type);e!==n&&(Qe(Fu,t),Qe(ns,n))}function r_(t){Fu.current===t&&(tt(ns),tt(Fu))}var ut=to(0);function Bf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var kg=[];function s_(){for(var t=0;t<kg.length;t++)kg[t]._workInProgressVersionPrimary=null;kg.length=0}var Jh=Bs.ReactCurrentDispatcher,Dg=Bs.ReactCurrentBatchConfig,Zo=0,dt=null,Dt=null,$t=null,$f=!1,ou=!1,ju=0,cV=0;function Jt(){throw Error(Q(321))}function i_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!xr(t[n],e[n]))return!1;return!0}function o_(t,e,n,r,s,i){if(Zo=i,dt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Jh.current=t===null||t.memoizedState===null?fV:pV,t=n(r,s),ou){i=0;do{if(ou=!1,ju=0,25<=i)throw Error(Q(301));i+=1,$t=Dt=null,e.updateQueue=null,Jh.current=mV,t=n(r,s)}while(ou)}if(Jh.current=zf,e=Dt!==null&&Dt.next!==null,Zo=0,$t=Dt=dt=null,$f=!1,e)throw Error(Q(300));return t}function a_(){var t=ju!==0;return ju=0,t}function zr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?dt.memoizedState=$t=t:$t=$t.next=t,$t}function ur(){if(Dt===null){var t=dt.alternate;t=t!==null?t.memoizedState:null}else t=Dt.next;var e=$t===null?dt.memoizedState:$t.next;if(e!==null)$t=e,Dt=t;else{if(t===null)throw Error(Q(310));Dt=t,t={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},$t===null?dt.memoizedState=$t=t:$t=$t.next=t}return $t}function Bu(t,e){return typeof e=="function"?e(t):e}function Ng(t){var e=ur(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=Dt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Zo&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,dt.lanes|=d,ea|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,xr(r,e.memoizedState)||(xn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,dt.lanes|=i,ea|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Og(t){var e=ur(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);xr(i,e.memoizedState)||(xn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function R1(){}function C1(t,e){var n=dt,r=ur(),s=e(),i=!xr(r.memoizedState,s);if(i&&(r.memoizedState=s,xn=!0),r=r.queue,l_(N1.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||$t!==null&&$t.memoizedState.tag&1){if(n.flags|=2048,$u(9,D1.bind(null,n,r,s,e),void 0,null),zt===null)throw Error(Q(349));Zo&30||k1(n,e,s)}return s}function k1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=dt.updateQueue,e===null?(e={lastEffect:null,stores:null},dt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function D1(t,e,n,r){e.value=n,e.getSnapshot=r,O1(e)&&L1(t)}function N1(t,e,n){return n(function(){O1(e)&&L1(t)})}function O1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!xr(t,n)}catch{return!0}}function L1(t){var e=Ds(t,1);e!==null&&Sr(e,t,1,-1)}function FT(t){var e=zr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bu,lastRenderedState:t},e.queue=t,t=t.dispatch=hV.bind(null,dt,t),[e.memoizedState,t]}function $u(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=dt.updateQueue,e===null?(e={lastEffect:null,stores:null},dt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function V1(){return ur().memoizedState}function Zh(t,e,n,r){var s=zr();dt.flags|=t,s.memoizedState=$u(1|e,n,void 0,r===void 0?null:r)}function Hp(t,e,n,r){var s=ur();r=r===void 0?null:r;var i=void 0;if(Dt!==null){var o=Dt.memoizedState;if(i=o.destroy,r!==null&&i_(r,o.deps)){s.memoizedState=$u(e,n,i,r);return}}dt.flags|=t,s.memoizedState=$u(1|e,n,i,r)}function UT(t,e){return Zh(8390656,8,t,e)}function l_(t,e){return Hp(2048,8,t,e)}function M1(t,e){return Hp(4,2,t,e)}function F1(t,e){return Hp(4,4,t,e)}function U1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function j1(t,e,n){return n=n!=null?n.concat([t]):null,Hp(4,4,U1.bind(null,e,t),n)}function c_(){}function B1(t,e){var n=ur();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&i_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function $1(t,e){var n=ur();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&i_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function z1(t,e,n){return Zo&21?(xr(n,e)||(n=Gx(),dt.lanes|=n,ea|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,xn=!0),t.memoizedState=n)}function uV(t,e){var n=$e;$e=n!==0&&4>n?n:4,t(!0);var r=Dg.transition;Dg.transition={};try{t(!1),e()}finally{$e=n,Dg.transition=r}}function q1(){return ur().memoizedState}function dV(t,e,n){var r=Ni(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},W1(t))H1(e,n);else if(n=A1(t,e,n,r),n!==null){var s=pn();Sr(n,t,r,s),K1(n,e,r)}}function hV(t,e,n){var r=Ni(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(W1(t))H1(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,xr(a,o)){var l=e.interleaved;l===null?(s.next=s,e_(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=A1(t,e,s,r),n!==null&&(s=pn(),Sr(n,t,r,s),K1(n,e,r))}}function W1(t){var e=t.alternate;return t===dt||e!==null&&e===dt}function H1(t,e){ou=$f=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function K1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jw(t,n)}}var zf={readContext:cr,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useInsertionEffect:Jt,useLayoutEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useMutableSource:Jt,useSyncExternalStore:Jt,useId:Jt,unstable_isNewReconciler:!1},fV={readContext:cr,useCallback:function(t,e){return zr().memoizedState=[t,e===void 0?null:e],t},useContext:cr,useEffect:UT,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Zh(4194308,4,U1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Zh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Zh(4,2,t,e)},useMemo:function(t,e){var n=zr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=zr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=dV.bind(null,dt,t),[r.memoizedState,t]},useRef:function(t){var e=zr();return t={current:t},e.memoizedState=t},useState:FT,useDebugValue:c_,useDeferredValue:function(t){return zr().memoizedState=t},useTransition:function(){var t=FT(!1),e=t[0];return t=uV.bind(null,t[1]),zr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=dt,s=zr();if(it){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),zt===null)throw Error(Q(349));Zo&30||k1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,UT(N1.bind(null,r,i,t),[t]),r.flags|=2048,$u(9,D1.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=zr(),e=zt.identifierPrefix;if(it){var n=Ts,r=Es;n=(r&~(1<<32-Ir(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ju++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=cV++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},pV={readContext:cr,useCallback:B1,useContext:cr,useEffect:l_,useImperativeHandle:j1,useInsertionEffect:M1,useLayoutEffect:F1,useMemo:$1,useReducer:Ng,useRef:V1,useState:function(){return Ng(Bu)},useDebugValue:c_,useDeferredValue:function(t){var e=ur();return z1(e,Dt.memoizedState,t)},useTransition:function(){var t=Ng(Bu)[0],e=ur().memoizedState;return[t,e]},useMutableSource:R1,useSyncExternalStore:C1,useId:q1,unstable_isNewReconciler:!1},mV={readContext:cr,useCallback:B1,useContext:cr,useEffect:l_,useImperativeHandle:j1,useInsertionEffect:M1,useLayoutEffect:F1,useMemo:$1,useReducer:Og,useRef:V1,useState:function(){return Og(Bu)},useDebugValue:c_,useDeferredValue:function(t){var e=ur();return Dt===null?e.memoizedState=t:z1(e,Dt.memoizedState,t)},useTransition:function(){var t=Og(Bu)[0],e=ur().memoizedState;return[t,e]},useMutableSource:R1,useSyncExternalStore:C1,useId:q1,unstable_isNewReconciler:!1};function mr(t,e){if(t&&t.defaultProps){e=ht({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function nv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ht({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Kp={isMounted:function(t){return(t=t._reactInternals)?fa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pn(),s=Ni(t),i=bs(r,s);i.payload=e,n!=null&&(i.callback=n),e=ki(t,i,s),e!==null&&(Sr(e,t,s,r),Xh(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pn(),s=Ni(t),i=bs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ki(t,i,s),e!==null&&(Sr(e,t,s,r),Xh(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pn(),r=Ni(t),s=bs(n,r);s.tag=2,e!=null&&(s.callback=e),e=ki(t,s,r),e!==null&&(Sr(e,t,r,n),Xh(e,t,r))}};function jT(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ou(n,r)||!Ou(s,i):!0}function G1(t,e,n){var r=!1,s=zi,i=e.contextType;return typeof i=="object"&&i!==null?i=cr(i):(s=Dn(e)?Xo:ln.current,r=e.contextTypes,i=(r=r!=null)?yl(t,s):zi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Kp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function BT(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Kp.enqueueReplaceState(e,e.state,null)}function rv(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},t_(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=cr(i):(i=Dn(e)?Xo:ln.current,s.context=yl(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(nv(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Kp.enqueueReplaceState(s,s.state,null),jf(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function El(t,e){try{var n="",r=e;do n+=z2(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Lg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function sv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var gV=typeof WeakMap=="function"?WeakMap:Map;function Q1(t,e,n){n=bs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Wf||(Wf=!0,pv=r),sv(t,e)},n}function Y1(t,e,n){n=bs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){sv(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){sv(t,e),typeof r!="function"&&(Di===null?Di=new Set([this]):Di.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function $T(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new gV;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=CV.bind(null,t,e,n),e.then(t,t))}function zT(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function qT(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=bs(-1,1),e.tag=2,ki(n,e,1))),n.lanes|=1),t)}var yV=Bs.ReactCurrentOwner,xn=!1;function hn(t,e,n,r){e.child=t===null?b1(e,null,n,r):wl(e,t.child,n,r)}function WT(t,e,n,r,s){n=n.render;var i=e.ref;return el(e,s),r=o_(t,e,n,r,i,s),n=a_(),t!==null&&!xn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ns(t,e,s)):(it&&n&&Gw(e),e.flags|=1,hn(t,e,r,s),e.child)}function HT(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!y_(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,X1(t,e,i,r,s)):(t=rf(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ou,n(o,r)&&t.ref===e.ref)return Ns(t,e,s)}return e.flags|=1,t=Oi(i,r),t.ref=e.ref,t.return=e,e.child=t}function X1(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ou(i,r)&&t.ref===e.ref)if(xn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(xn=!0);else return e.lanes=t.lanes,Ns(t,e,s)}return iv(t,e,n,r,s)}function J1(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(Qa,Mn),Mn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Qe(Qa,Mn),Mn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Qe(Qa,Mn),Mn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Qe(Qa,Mn),Mn|=r;return hn(t,e,s,n),e.child}function Z1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function iv(t,e,n,r,s){var i=Dn(n)?Xo:ln.current;return i=yl(e,i),el(e,s),n=o_(t,e,n,r,i,s),r=a_(),t!==null&&!xn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ns(t,e,s)):(it&&r&&Gw(e),e.flags|=1,hn(t,e,n,s),e.child)}function KT(t,e,n,r,s){if(Dn(n)){var i=!0;Lf(e)}else i=!1;if(el(e,s),e.stateNode===null)ef(t,e),G1(e,n,r),rv(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=cr(c):(c=Dn(n)?Xo:ln.current,c=yl(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&BT(e,o,r,c),hi=!1;var f=e.memoizedState;o.state=f,jf(e,r,o,s),l=e.memoizedState,a!==r||f!==l||kn.current||hi?(typeof d=="function"&&(nv(e,n,d,r),l=e.memoizedState),(a=hi||jT(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,x1(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:mr(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=cr(l):(l=Dn(n)?Xo:ln.current,l=yl(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&BT(e,o,r,l),hi=!1,f=e.memoizedState,o.state=f,jf(e,r,o,s);var T=e.memoizedState;a!==h||f!==T||kn.current||hi?(typeof m=="function"&&(nv(e,n,m,r),T=e.memoizedState),(c=hi||jT(e,n,c,r,f,T,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return ov(t,e,n,r,i,s)}function ov(t,e,n,r,s,i){Z1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&DT(e,n,!1),Ns(t,e,i);r=e.stateNode,yV.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=wl(e,t.child,null,i),e.child=wl(e,null,a,i)):hn(t,e,a,i),e.memoizedState=r.state,s&&DT(e,n,!0),e.child}function eP(t){var e=t.stateNode;e.pendingContext?kT(t,e.pendingContext,e.pendingContext!==e.context):e.context&&kT(t,e.context,!1),n_(t,e.containerInfo)}function GT(t,e,n,r,s){return vl(),Yw(s),e.flags|=256,hn(t,e,n,r),e.child}var av={dehydrated:null,treeContext:null,retryLane:0};function lv(t){return{baseLanes:t,cachePool:null,transitions:null}}function tP(t,e,n){var r=e.pendingProps,s=ut.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Qe(ut,s&1),t===null)return ev(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Yp(o,r,0,null),t=Ho(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=lv(n),e.memoizedState=av,t):u_(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return vV(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Oi(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Oi(a,i):(i=Ho(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?lv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=av,r}return i=t.child,t=i.sibling,r=Oi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function u_(t,e){return e=Yp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function wh(t,e,n,r){return r!==null&&Yw(r),wl(e,t.child,null,n),t=u_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function vV(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Lg(Error(Q(422))),wh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Yp({mode:"visible",children:r.children},s,0,null),i=Ho(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&wl(e,t.child,null,o),e.child.memoizedState=lv(o),e.memoizedState=av,i);if(!(e.mode&1))return wh(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Q(419)),r=Lg(i,r,void 0),wh(t,e,o,r)}if(a=(o&t.childLanes)!==0,xn||a){if(r=zt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ds(t,s),Sr(r,t,s,-1))}return g_(),r=Lg(Error(Q(421))),wh(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=kV.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,$n=Ci(s.nextSibling),Wn=e,it=!0,Er=null,t!==null&&(rr[sr++]=Es,rr[sr++]=Ts,rr[sr++]=Jo,Es=t.id,Ts=t.overflow,Jo=e),e=u_(e,r.children),e.flags|=4096,e)}function QT(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),tv(t.return,e,n)}function Vg(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function nP(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(hn(t,e,r.children,n),r=ut.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&QT(t,n,e);else if(t.tag===19)QT(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Qe(ut,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Bf(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Vg(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Bf(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Vg(e,!0,n,null,i);break;case"together":Vg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ef(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ns(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ea|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=Oi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Oi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function wV(t,e,n){switch(e.tag){case 3:eP(e),vl();break;case 5:P1(e);break;case 1:Dn(e.type)&&Lf(e);break;case 4:n_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Qe(Ff,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Qe(ut,ut.current&1),e.flags|=128,null):n&e.child.childLanes?tP(t,e,n):(Qe(ut,ut.current&1),t=Ns(t,e,n),t!==null?t.sibling:null);Qe(ut,ut.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return nP(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Qe(ut,ut.current),r)break;return null;case 22:case 23:return e.lanes=0,J1(t,e,n)}return Ns(t,e,n)}var rP,cv,sP,iP;rP=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};cv=function(){};sP=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ro(ns.current);var i=null;switch(n){case"input":s=ky(t,s),r=ky(t,r),i=[];break;case"select":s=ht({},s,{value:void 0}),r=ht({},r,{value:void 0}),i=[];break;case"textarea":s=Oy(t,s),r=Oy(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Nf)}Vy(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(xu.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(xu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&et("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};iP=function(t,e,n,r){n!==r&&(e.flags|=4)};function Nc(t,e){if(!it)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Zt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function _V(t,e,n){var r=e.pendingProps;switch(Qw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(e),null;case 1:return Dn(e.type)&&Of(),Zt(e),null;case 3:return r=e.stateNode,_l(),tt(kn),tt(ln),s_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(yh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Er!==null&&(yv(Er),Er=null))),cv(t,e),Zt(e),null;case 5:r_(e);var s=Ro(Uu.current);if(n=e.type,t!==null&&e.stateNode!=null)sP(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Q(166));return Zt(e),null}if(t=Ro(ns.current),yh(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Qr]=e,r[Mu]=i,t=(e.mode&1)!==0,n){case"dialog":et("cancel",r),et("close",r);break;case"iframe":case"object":case"embed":et("load",r);break;case"video":case"audio":for(s=0;s<Hc.length;s++)et(Hc[s],r);break;case"source":et("error",r);break;case"img":case"image":case"link":et("error",r),et("load",r);break;case"details":et("toggle",r);break;case"input":sT(r,i),et("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},et("invalid",r);break;case"textarea":oT(r,i),et("invalid",r)}Vy(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&gh(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&gh(r.textContent,a,t),s=["children",""+a]):xu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&et("scroll",r)}switch(n){case"input":lh(r),iT(r,i,!0);break;case"textarea":lh(r),aT(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Nf)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Nx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Qr]=e,t[Mu]=r,rP(t,e,!1,!1),e.stateNode=t;e:{switch(o=My(n,r),n){case"dialog":et("cancel",t),et("close",t),s=r;break;case"iframe":case"object":case"embed":et("load",t),s=r;break;case"video":case"audio":for(s=0;s<Hc.length;s++)et(Hc[s],t);s=r;break;case"source":et("error",t),s=r;break;case"img":case"image":case"link":et("error",t),et("load",t),s=r;break;case"details":et("toggle",t),s=r;break;case"input":sT(t,r),s=ky(t,r),et("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ht({},r,{value:void 0}),et("invalid",t);break;case"textarea":oT(t,r),s=Oy(t,r),et("invalid",t);break;default:s=r}Vy(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Vx(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Ox(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Pu(t,l):typeof l=="number"&&Pu(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(xu.hasOwnProperty(i)?l!=null&&i==="onScroll"&&et("scroll",t):l!=null&&Ow(t,i,l,o))}switch(n){case"input":lh(t),iT(t,r,!1);break;case"textarea":lh(t),aT(t);break;case"option":r.value!=null&&t.setAttribute("value",""+$i(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ya(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ya(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Nf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zt(e),null;case 6:if(t&&e.stateNode!=null)iP(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Q(166));if(n=Ro(Uu.current),Ro(ns.current),yh(e)){if(r=e.stateNode,n=e.memoizedProps,r[Qr]=e,(i=r.nodeValue!==n)&&(t=Wn,t!==null))switch(t.tag){case 3:gh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&gh(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qr]=e,e.stateNode=r}return Zt(e),null;case 13:if(tt(ut),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(it&&$n!==null&&e.mode&1&&!(e.flags&128))I1(),vl(),e.flags|=98560,i=!1;else if(i=yh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Q(317));i[Qr]=e}else vl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zt(e),i=!1}else Er!==null&&(yv(Er),Er=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ut.current&1?Ot===0&&(Ot=3):g_())),e.updateQueue!==null&&(e.flags|=4),Zt(e),null);case 4:return _l(),cv(t,e),t===null&&Lu(e.stateNode.containerInfo),Zt(e),null;case 10:return Zw(e.type._context),Zt(e),null;case 17:return Dn(e.type)&&Of(),Zt(e),null;case 19:if(tt(ut),i=e.memoizedState,i===null)return Zt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Nc(i,!1);else{if(Ot!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Bf(t),o!==null){for(e.flags|=128,Nc(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Qe(ut,ut.current&1|2),e.child}t=t.sibling}i.tail!==null&&Et()>Tl&&(e.flags|=128,r=!0,Nc(i,!1),e.lanes=4194304)}else{if(!r)if(t=Bf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Nc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!it)return Zt(e),null}else 2*Et()-i.renderingStartTime>Tl&&n!==1073741824&&(e.flags|=128,r=!0,Nc(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Et(),e.sibling=null,n=ut.current,Qe(ut,r?n&1|2:n&1),e):(Zt(e),null);case 22:case 23:return m_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mn&1073741824&&(Zt(e),e.subtreeFlags&6&&(e.flags|=8192)):Zt(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function EV(t,e){switch(Qw(e),e.tag){case 1:return Dn(e.type)&&Of(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _l(),tt(kn),tt(ln),s_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return r_(e),null;case 13:if(tt(ut),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));vl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return tt(ut),null;case 4:return _l(),null;case 10:return Zw(e.type._context),null;case 22:case 23:return m_(),null;case 24:return null;default:return null}}var _h=!1,rn=!1,TV=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Ga(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){gt(t,e,r)}else n.current=null}function uv(t,e,n){try{n()}catch(r){gt(t,e,r)}}var YT=!1;function IV(t,e){if(Ky=Cf,t=u1(),Kw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Gy={focusedElem:t,selectionRange:n},Cf=!1,ne=e;ne!==null;)if(e=ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ne=t;else for(;ne!==null;){e=ne;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var y=T.memoizedProps,_=T.memoizedState,w=e.stateNode,p=w.getSnapshotBeforeUpdate(e.elementType===e.type?y:mr(e.type,y),_);w.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(A){gt(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,ne=t;break}ne=e.return}return T=YT,YT=!1,T}function au(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&uv(e,n,i)}s=s.next}while(s!==r)}}function Gp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function dv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function oP(t){var e=t.alternate;e!==null&&(t.alternate=null,oP(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qr],delete e[Mu],delete e[Xy],delete e[iV],delete e[oV])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function aP(t){return t.tag===5||t.tag===3||t.tag===4}function XT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||aP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Nf));else if(r!==4&&(t=t.child,t!==null))for(hv(t,e,n),t=t.sibling;t!==null;)hv(t,e,n),t=t.sibling}function fv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(fv(t,e,n),t=t.sibling;t!==null;)fv(t,e,n),t=t.sibling}var Wt=null,wr=!1;function ni(t,e,n){for(n=n.child;n!==null;)lP(t,e,n),n=n.sibling}function lP(t,e,n){if(ts&&typeof ts.onCommitFiberUnmount=="function")try{ts.onCommitFiberUnmount(jp,n)}catch{}switch(n.tag){case 5:rn||Ga(n,e);case 6:var r=Wt,s=wr;Wt=null,ni(t,e,n),Wt=r,wr=s,Wt!==null&&(wr?(t=Wt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Wt.removeChild(n.stateNode));break;case 18:Wt!==null&&(wr?(t=Wt,n=n.stateNode,t.nodeType===8?Rg(t.parentNode,n):t.nodeType===1&&Rg(t,n),Du(t)):Rg(Wt,n.stateNode));break;case 4:r=Wt,s=wr,Wt=n.stateNode.containerInfo,wr=!0,ni(t,e,n),Wt=r,wr=s;break;case 0:case 11:case 14:case 15:if(!rn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&uv(n,e,o),s=s.next}while(s!==r)}ni(t,e,n);break;case 1:if(!rn&&(Ga(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){gt(n,e,a)}ni(t,e,n);break;case 21:ni(t,e,n);break;case 22:n.mode&1?(rn=(r=rn)||n.memoizedState!==null,ni(t,e,n),rn=r):ni(t,e,n);break;default:ni(t,e,n)}}function JT(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new TV),e.forEach(function(r){var s=DV.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function fr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Wt=a.stateNode,wr=!1;break e;case 3:Wt=a.stateNode.containerInfo,wr=!0;break e;case 4:Wt=a.stateNode.containerInfo,wr=!0;break e}a=a.return}if(Wt===null)throw Error(Q(160));lP(i,o,s),Wt=null,wr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){gt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cP(e,t),e=e.sibling}function cP(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(fr(e,t),$r(t),r&4){try{au(3,t,t.return),Gp(3,t)}catch(y){gt(t,t.return,y)}try{au(5,t,t.return)}catch(y){gt(t,t.return,y)}}break;case 1:fr(e,t),$r(t),r&512&&n!==null&&Ga(n,n.return);break;case 5:if(fr(e,t),$r(t),r&512&&n!==null&&Ga(n,n.return),t.flags&32){var s=t.stateNode;try{Pu(s,"")}catch(y){gt(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&kx(s,i),My(a,o);var c=My(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?Vx(s,h):d==="dangerouslySetInnerHTML"?Ox(s,h):d==="children"?Pu(s,h):Ow(s,d,h,c)}switch(a){case"input":Dy(s,i);break;case"textarea":Dx(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Ya(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Ya(s,!!i.multiple,i.defaultValue,!0):Ya(s,!!i.multiple,i.multiple?[]:"",!1))}s[Mu]=i}catch(y){gt(t,t.return,y)}}break;case 6:if(fr(e,t),$r(t),r&4){if(t.stateNode===null)throw Error(Q(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){gt(t,t.return,y)}}break;case 3:if(fr(e,t),$r(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Du(e.containerInfo)}catch(y){gt(t,t.return,y)}break;case 4:fr(e,t),$r(t);break;case 13:fr(e,t),$r(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(f_=Et())),r&4&&JT(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(rn=(c=rn)||d,fr(e,t),rn=c):fr(e,t),$r(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(ne=t,d=t.child;d!==null;){for(h=ne=d;ne!==null;){switch(f=ne,m=f.child,f.tag){case 0:case 11:case 14:case 15:au(4,f,f.return);break;case 1:Ga(f,f.return);var T=f.stateNode;if(typeof T.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(y){gt(r,n,y)}}break;case 5:Ga(f,f.return);break;case 22:if(f.memoizedState!==null){eI(h);continue}}m!==null?(m.return=f,ne=m):eI(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Lx("display",o))}catch(y){gt(t,t.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){gt(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fr(e,t),$r(t),r&4&&JT(t);break;case 21:break;default:fr(e,t),$r(t)}}function $r(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(aP(n)){var r=n;break e}n=n.return}throw Error(Q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Pu(s,""),r.flags&=-33);var i=XT(t);fv(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=XT(t);hv(t,a,o);break;default:throw Error(Q(161))}}catch(l){gt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function SV(t,e,n){ne=t,uP(t)}function uP(t,e,n){for(var r=(t.mode&1)!==0;ne!==null;){var s=ne,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||_h;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||rn;a=_h;var c=rn;if(_h=o,(rn=l)&&!c)for(ne=s;ne!==null;)o=ne,l=o.child,o.tag===22&&o.memoizedState!==null?tI(s):l!==null?(l.return=o,ne=l):tI(s);for(;i!==null;)ne=i,uP(i),i=i.sibling;ne=s,_h=a,rn=c}ZT(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ne=i):ZT(t)}}function ZT(t){for(;ne!==null;){var e=ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:rn||Gp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!rn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:mr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&MT(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}MT(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Du(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}rn||e.flags&512&&dv(e)}catch(f){gt(e,e.return,f)}}if(e===t){ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,ne=n;break}ne=e.return}}function eI(t){for(;ne!==null;){var e=ne;if(e===t){ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ne=n;break}ne=e.return}}function tI(t){for(;ne!==null;){var e=ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Gp(4,e)}catch(l){gt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){gt(e,s,l)}}var i=e.return;try{dv(e)}catch(l){gt(e,i,l)}break;case 5:var o=e.return;try{dv(e)}catch(l){gt(e,o,l)}}}catch(l){gt(e,e.return,l)}if(e===t){ne=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ne=a;break}ne=e.return}}var bV=Math.ceil,qf=Bs.ReactCurrentDispatcher,d_=Bs.ReactCurrentOwner,or=Bs.ReactCurrentBatchConfig,Me=0,zt=null,xt=null,Kt=0,Mn=0,Qa=to(0),Ot=0,zu=null,ea=0,Qp=0,h_=0,lu=null,An=null,f_=0,Tl=1/0,gs=null,Wf=!1,pv=null,Di=null,Eh=!1,Ii=null,Hf=0,cu=0,mv=null,tf=-1,nf=0;function pn(){return Me&6?Et():tf!==-1?tf:tf=Et()}function Ni(t){return t.mode&1?Me&2&&Kt!==0?Kt&-Kt:lV.transition!==null?(nf===0&&(nf=Gx()),nf):(t=$e,t!==0||(t=window.event,t=t===void 0?16:t1(t.type)),t):1}function Sr(t,e,n,r){if(50<cu)throw cu=0,mv=null,Error(Q(185));_d(t,n,r),(!(Me&2)||t!==zt)&&(t===zt&&(!(Me&2)&&(Qp|=n),Ot===4&&pi(t,Kt)),Nn(t,r),n===1&&Me===0&&!(e.mode&1)&&(Tl=Et()+500,Wp&&no()))}function Nn(t,e){var n=t.callbackNode;lL(t,e);var r=Rf(t,t===zt?Kt:0);if(r===0)n!==null&&uT(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&uT(n),e===1)t.tag===0?aV(nI.bind(null,t)):_1(nI.bind(null,t)),rV(function(){!(Me&6)&&no()}),n=null;else{switch(Qx(r)){case 1:n=Uw;break;case 4:n=Hx;break;case 16:n=Pf;break;case 536870912:n=Kx;break;default:n=Pf}n=vP(n,dP.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function dP(t,e){if(tf=-1,nf=0,Me&6)throw Error(Q(327));var n=t.callbackNode;if(tl()&&t.callbackNode!==n)return null;var r=Rf(t,t===zt?Kt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Kf(t,r);else{e=r;var s=Me;Me|=2;var i=fP();(zt!==t||Kt!==e)&&(gs=null,Tl=Et()+500,Wo(t,e));do try{PV();break}catch(a){hP(t,a)}while(!0);Jw(),qf.current=i,Me=s,xt!==null?e=0:(zt=null,Kt=0,e=Ot)}if(e!==0){if(e===2&&(s=$y(t),s!==0&&(r=s,e=gv(t,s))),e===1)throw n=zu,Wo(t,0),pi(t,r),Nn(t,Et()),n;if(e===6)pi(t,r);else{if(s=t.current.alternate,!(r&30)&&!AV(s)&&(e=Kf(t,r),e===2&&(i=$y(t),i!==0&&(r=i,e=gv(t,i))),e===1))throw n=zu,Wo(t,0),pi(t,r),Nn(t,Et()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Q(345));case 2:yo(t,An,gs);break;case 3:if(pi(t,r),(r&130023424)===r&&(e=f_+500-Et(),10<e)){if(Rf(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){pn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Yy(yo.bind(null,t,An,gs),e);break}yo(t,An,gs);break;case 4:if(pi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ir(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Et()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*bV(r/1960))-r,10<r){t.timeoutHandle=Yy(yo.bind(null,t,An,gs),r);break}yo(t,An,gs);break;case 5:yo(t,An,gs);break;default:throw Error(Q(329))}}}return Nn(t,Et()),t.callbackNode===n?dP.bind(null,t):null}function gv(t,e){var n=lu;return t.current.memoizedState.isDehydrated&&(Wo(t,e).flags|=256),t=Kf(t,e),t!==2&&(e=An,An=n,e!==null&&yv(e)),t}function yv(t){An===null?An=t:An.push.apply(An,t)}function AV(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!xr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function pi(t,e){for(e&=~h_,e&=~Qp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ir(e),r=1<<n;t[n]=-1,e&=~r}}function nI(t){if(Me&6)throw Error(Q(327));tl();var e=Rf(t,0);if(!(e&1))return Nn(t,Et()),null;var n=Kf(t,e);if(t.tag!==0&&n===2){var r=$y(t);r!==0&&(e=r,n=gv(t,r))}if(n===1)throw n=zu,Wo(t,0),pi(t,e),Nn(t,Et()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,yo(t,An,gs),Nn(t,Et()),null}function p_(t,e){var n=Me;Me|=1;try{return t(e)}finally{Me=n,Me===0&&(Tl=Et()+500,Wp&&no())}}function ta(t){Ii!==null&&Ii.tag===0&&!(Me&6)&&tl();var e=Me;Me|=1;var n=or.transition,r=$e;try{if(or.transition=null,$e=1,t)return t()}finally{$e=r,or.transition=n,Me=e,!(Me&6)&&no()}}function m_(){Mn=Qa.current,tt(Qa)}function Wo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,nV(n)),xt!==null)for(n=xt.return;n!==null;){var r=n;switch(Qw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Of();break;case 3:_l(),tt(kn),tt(ln),s_();break;case 5:r_(r);break;case 4:_l();break;case 13:tt(ut);break;case 19:tt(ut);break;case 10:Zw(r.type._context);break;case 22:case 23:m_()}n=n.return}if(zt=t,xt=t=Oi(t.current,null),Kt=Mn=e,Ot=0,zu=null,h_=Qp=ea=0,An=lu=null,Po!==null){for(e=0;e<Po.length;e++)if(n=Po[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Po=null}return t}function hP(t,e){do{var n=xt;try{if(Jw(),Jh.current=zf,$f){for(var r=dt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}$f=!1}if(Zo=0,$t=Dt=dt=null,ou=!1,ju=0,d_.current=null,n===null||n.return===null){Ot=1,zu=e,xt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Kt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=zT(o);if(m!==null){m.flags&=-257,qT(m,o,a,i,e),m.mode&1&&$T(i,c,e),e=m,l=c;var T=e.updateQueue;if(T===null){var y=new Set;y.add(l),e.updateQueue=y}else T.add(l);break e}else{if(!(e&1)){$T(i,c,e),g_();break e}l=Error(Q(426))}}else if(it&&a.mode&1){var _=zT(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),qT(_,o,a,i,e),Yw(El(l,a));break e}}i=l=El(l,a),Ot!==4&&(Ot=2),lu===null?lu=[i]:lu.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=Q1(i,l,e);VT(i,w);break e;case 1:a=l;var p=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Di===null||!Di.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var A=Y1(i,a,e);VT(i,A);break e}}i=i.return}while(i!==null)}mP(n)}catch(R){e=R,xt===n&&n!==null&&(xt=n=n.return);continue}break}while(!0)}function fP(){var t=qf.current;return qf.current=zf,t===null?zf:t}function g_(){(Ot===0||Ot===3||Ot===2)&&(Ot=4),zt===null||!(ea&268435455)&&!(Qp&268435455)||pi(zt,Kt)}function Kf(t,e){var n=Me;Me|=2;var r=fP();(zt!==t||Kt!==e)&&(gs=null,Wo(t,e));do try{xV();break}catch(s){hP(t,s)}while(!0);if(Jw(),Me=n,qf.current=r,xt!==null)throw Error(Q(261));return zt=null,Kt=0,Ot}function xV(){for(;xt!==null;)pP(xt)}function PV(){for(;xt!==null&&!Z2();)pP(xt)}function pP(t){var e=yP(t.alternate,t,Mn);t.memoizedProps=t.pendingProps,e===null?mP(t):xt=e,d_.current=null}function mP(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=EV(n,e),n!==null){n.flags&=32767,xt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ot=6,xt=null;return}}else if(n=_V(n,e,Mn),n!==null){xt=n;return}if(e=e.sibling,e!==null){xt=e;return}xt=e=t}while(e!==null);Ot===0&&(Ot=5)}function yo(t,e,n){var r=$e,s=or.transition;try{or.transition=null,$e=1,RV(t,e,n,r)}finally{or.transition=s,$e=r}return null}function RV(t,e,n,r){do tl();while(Ii!==null);if(Me&6)throw Error(Q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(cL(t,i),t===zt&&(xt=zt=null,Kt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Eh||(Eh=!0,vP(Pf,function(){return tl(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=or.transition,or.transition=null;var o=$e;$e=1;var a=Me;Me|=4,d_.current=null,IV(t,n),cP(n,t),QL(Gy),Cf=!!Ky,Gy=Ky=null,t.current=n,SV(n),eL(),Me=a,$e=o,or.transition=i}else t.current=n;if(Eh&&(Eh=!1,Ii=t,Hf=s),i=t.pendingLanes,i===0&&(Di=null),rL(n.stateNode),Nn(t,Et()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Wf)throw Wf=!1,t=pv,pv=null,t;return Hf&1&&t.tag!==0&&tl(),i=t.pendingLanes,i&1?t===mv?cu++:(cu=0,mv=t):cu=0,no(),null}function tl(){if(Ii!==null){var t=Qx(Hf),e=or.transition,n=$e;try{if(or.transition=null,$e=16>t?16:t,Ii===null)var r=!1;else{if(t=Ii,Ii=null,Hf=0,Me&6)throw Error(Q(331));var s=Me;for(Me|=4,ne=t.current;ne!==null;){var i=ne,o=i.child;if(ne.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ne=c;ne!==null;){var d=ne;switch(d.tag){case 0:case 11:case 15:au(8,d,i)}var h=d.child;if(h!==null)h.return=d,ne=h;else for(;ne!==null;){d=ne;var f=d.sibling,m=d.return;if(oP(d),d===c){ne=null;break}if(f!==null){f.return=m,ne=f;break}ne=m}}}var T=i.alternate;if(T!==null){var y=T.child;if(y!==null){T.child=null;do{var _=y.sibling;y.sibling=null,y=_}while(y!==null)}}ne=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ne=o;else e:for(;ne!==null;){if(i=ne,i.flags&2048)switch(i.tag){case 0:case 11:case 15:au(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,ne=w;break e}ne=i.return}}var p=t.current;for(ne=p;ne!==null;){o=ne;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,ne=v;else e:for(o=p;ne!==null;){if(a=ne,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Gp(9,a)}}catch(R){gt(a,a.return,R)}if(a===o){ne=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,ne=A;break e}ne=a.return}}if(Me=s,no(),ts&&typeof ts.onPostCommitFiberRoot=="function")try{ts.onPostCommitFiberRoot(jp,t)}catch{}r=!0}return r}finally{$e=n,or.transition=e}}return!1}function rI(t,e,n){e=El(n,e),e=Q1(t,e,1),t=ki(t,e,1),e=pn(),t!==null&&(_d(t,1,e),Nn(t,e))}function gt(t,e,n){if(t.tag===3)rI(t,t,n);else for(;e!==null;){if(e.tag===3){rI(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Di===null||!Di.has(r))){t=El(n,t),t=Y1(e,t,1),e=ki(e,t,1),t=pn(),e!==null&&(_d(e,1,t),Nn(e,t));break}}e=e.return}}function CV(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pn(),t.pingedLanes|=t.suspendedLanes&n,zt===t&&(Kt&n)===n&&(Ot===4||Ot===3&&(Kt&130023424)===Kt&&500>Et()-f_?Wo(t,0):h_|=n),Nn(t,e)}function gP(t,e){e===0&&(t.mode&1?(e=dh,dh<<=1,!(dh&130023424)&&(dh=4194304)):e=1);var n=pn();t=Ds(t,e),t!==null&&(_d(t,e,n),Nn(t,n))}function kV(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),gP(t,n)}function DV(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(e),gP(t,n)}var yP;yP=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||kn.current)xn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return xn=!1,wV(t,e,n);xn=!!(t.flags&131072)}else xn=!1,it&&e.flags&1048576&&E1(e,Mf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ef(t,e),t=e.pendingProps;var s=yl(e,ln.current);el(e,n),s=o_(null,e,r,t,s,n);var i=a_();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dn(r)?(i=!0,Lf(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,t_(e),s.updater=Kp,e.stateNode=s,s._reactInternals=e,rv(e,r,t,n),e=ov(null,e,r,!0,i,n)):(e.tag=0,it&&i&&Gw(e),hn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ef(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=OV(r),t=mr(r,t),s){case 0:e=iv(null,e,r,t,n);break e;case 1:e=KT(null,e,r,t,n);break e;case 11:e=WT(null,e,r,t,n);break e;case 14:e=HT(null,e,r,mr(r.type,t),n);break e}throw Error(Q(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mr(r,s),iv(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mr(r,s),KT(t,e,r,s,n);case 3:e:{if(eP(e),t===null)throw Error(Q(387));r=e.pendingProps,i=e.memoizedState,s=i.element,x1(t,e),jf(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=El(Error(Q(423)),e),e=GT(t,e,r,n,s);break e}else if(r!==s){s=El(Error(Q(424)),e),e=GT(t,e,r,n,s);break e}else for($n=Ci(e.stateNode.containerInfo.firstChild),Wn=e,it=!0,Er=null,n=b1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vl(),r===s){e=Ns(t,e,n);break e}hn(t,e,r,n)}e=e.child}return e;case 5:return P1(e),t===null&&ev(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Qy(r,s)?o=null:i!==null&&Qy(r,i)&&(e.flags|=32),Z1(t,e),hn(t,e,o,n),e.child;case 6:return t===null&&ev(e),null;case 13:return tP(t,e,n);case 4:return n_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=wl(e,null,r,n):hn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mr(r,s),WT(t,e,r,s,n);case 7:return hn(t,e,e.pendingProps,n),e.child;case 8:return hn(t,e,e.pendingProps.children,n),e.child;case 12:return hn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Qe(Ff,r._currentValue),r._currentValue=o,i!==null)if(xr(i.value,o)){if(i.children===s.children&&!kn.current){e=Ns(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=bs(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),tv(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),tv(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}hn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,el(e,n),s=cr(s),r=r(s),e.flags|=1,hn(t,e,r,n),e.child;case 14:return r=e.type,s=mr(r,e.pendingProps),s=mr(r.type,s),HT(t,e,r,s,n);case 15:return X1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mr(r,s),ef(t,e),e.tag=1,Dn(r)?(t=!0,Lf(e)):t=!1,el(e,n),G1(e,r,s),rv(e,r,s,n),ov(null,e,r,!0,t,n);case 19:return nP(t,e,n);case 22:return J1(t,e,n)}throw Error(Q(156,e.tag))};function vP(t,e){return Wx(t,e)}function NV(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ir(t,e,n,r){return new NV(t,e,n,r)}function y_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function OV(t){if(typeof t=="function")return y_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Vw)return 11;if(t===Mw)return 14}return 2}function Oi(t,e){var n=t.alternate;return n===null?(n=ir(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function rf(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")y_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ua:return Ho(n.children,s,i,e);case Lw:o=8,s|=8;break;case xy:return t=ir(12,n,e,s|2),t.elementType=xy,t.lanes=i,t;case Py:return t=ir(13,n,e,s),t.elementType=Py,t.lanes=i,t;case Ry:return t=ir(19,n,e,s),t.elementType=Ry,t.lanes=i,t;case Px:return Yp(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ax:o=10;break e;case xx:o=9;break e;case Vw:o=11;break e;case Mw:o=14;break e;case di:o=16,r=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=ir(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ho(t,e,n,r){return t=ir(7,t,r,e),t.lanes=n,t}function Yp(t,e,n,r){return t=ir(22,t,r,e),t.elementType=Px,t.lanes=n,t.stateNode={isHidden:!1},t}function Mg(t,e,n){return t=ir(6,t,null,e),t.lanes=n,t}function Fg(t,e,n){return e=ir(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function LV(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vg(0),this.expirationTimes=vg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vg(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function v_(t,e,n,r,s,i,o,a,l){return t=new LV(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ir(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},t_(i),t}function VV(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fa,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function wP(t){if(!t)return zi;t=t._reactInternals;e:{if(fa(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(Dn(n))return w1(t,n,e)}return e}function _P(t,e,n,r,s,i,o,a,l){return t=v_(n,r,!0,t,s,i,o,a,l),t.context=wP(null),n=t.current,r=pn(),s=Ni(n),i=bs(r,s),i.callback=e??null,ki(n,i,s),t.current.lanes=s,_d(t,s,r),Nn(t,r),t}function Xp(t,e,n,r){var s=e.current,i=pn(),o=Ni(s);return n=wP(n),e.context===null?e.context=n:e.pendingContext=n,e=bs(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ki(s,e,o),t!==null&&(Sr(t,s,o,i),Xh(t,s,o)),o}function Gf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function sI(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function w_(t,e){sI(t,e),(t=t.alternate)&&sI(t,e)}function MV(){return null}var EP=typeof reportError=="function"?reportError:function(t){console.error(t)};function __(t){this._internalRoot=t}Jp.prototype.render=__.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));Xp(t,e,null,null)};Jp.prototype.unmount=__.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ta(function(){Xp(null,t,null,null)}),e[ks]=null}};function Jp(t){this._internalRoot=t}Jp.prototype.unstable_scheduleHydration=function(t){if(t){var e=Jx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<fi.length&&e!==0&&e<fi[n].priority;n++);fi.splice(n,0,t),n===0&&e1(t)}};function E_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function iI(){}function FV(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Gf(o);i.call(c)}}var o=_P(e,r,t,0,null,!1,!1,"",iI);return t._reactRootContainer=o,t[ks]=o.current,Lu(t.nodeType===8?t.parentNode:t),ta(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Gf(l);a.call(c)}}var l=v_(t,0,!1,null,null,!1,!1,"",iI);return t._reactRootContainer=l,t[ks]=l.current,Lu(t.nodeType===8?t.parentNode:t),ta(function(){Xp(e,l,n,r)}),l}function em(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Gf(o);a.call(l)}}Xp(e,o,t,s)}else o=FV(n,e,t,s,r);return Gf(o)}Yx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Wc(e.pendingLanes);n!==0&&(jw(e,n|1),Nn(e,Et()),!(Me&6)&&(Tl=Et()+500,no()))}break;case 13:ta(function(){var r=Ds(t,1);if(r!==null){var s=pn();Sr(r,t,1,s)}}),w_(t,1)}};Bw=function(t){if(t.tag===13){var e=Ds(t,134217728);if(e!==null){var n=pn();Sr(e,t,134217728,n)}w_(t,134217728)}};Xx=function(t){if(t.tag===13){var e=Ni(t),n=Ds(t,e);if(n!==null){var r=pn();Sr(n,t,e,r)}w_(t,e)}};Jx=function(){return $e};Zx=function(t,e){var n=$e;try{return $e=t,e()}finally{$e=n}};Uy=function(t,e,n){switch(e){case"input":if(Dy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=qp(r);if(!s)throw Error(Q(90));Cx(r),Dy(r,s)}}}break;case"textarea":Dx(t,n);break;case"select":e=n.value,e!=null&&Ya(t,!!n.multiple,e,!1)}};Ux=p_;jx=ta;var UV={usingClientEntryPoint:!1,Events:[Td,za,qp,Mx,Fx,p_]},Oc={findFiberByHostInstance:xo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jV={bundleType:Oc.bundleType,version:Oc.version,rendererPackageName:Oc.rendererPackageName,rendererConfig:Oc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=zx(t),t===null?null:t.stateNode},findFiberByHostInstance:Oc.findFiberByHostInstance||MV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Th.isDisabled&&Th.supportsFiber)try{jp=Th.inject(jV),ts=Th}catch{}}Jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UV;Jn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!E_(e))throw Error(Q(200));return VV(t,e,null,n)};Jn.createRoot=function(t,e){if(!E_(t))throw Error(Q(299));var n=!1,r="",s=EP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=v_(t,1,!1,null,null,n,!1,r,s),t[ks]=e.current,Lu(t.nodeType===8?t.parentNode:t),new __(e)};Jn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=zx(e),t=t===null?null:t.stateNode,t};Jn.flushSync=function(t){return ta(t)};Jn.hydrate=function(t,e,n){if(!Zp(e))throw Error(Q(200));return em(null,t,e,!0,n)};Jn.hydrateRoot=function(t,e,n){if(!E_(t))throw Error(Q(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=EP;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=_P(e,null,t,1,n??null,s,!1,i,o),t[ks]=e.current,Lu(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Jp(e)};Jn.render=function(t,e,n){if(!Zp(e))throw Error(Q(200));return em(null,t,e,!1,n)};Jn.unmountComponentAtNode=function(t){if(!Zp(t))throw Error(Q(40));return t._reactRootContainer?(ta(function(){em(null,null,t,!1,function(){t._reactRootContainer=null,t[ks]=null})}),!0):!1};Jn.unstable_batchedUpdates=p_;Jn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Zp(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return em(t,e,n,!1,r)};Jn.version="18.3.1-next-f1338f8080-20240426";function TP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(TP)}catch(t){console.error(t)}}TP(),Tx.exports=Jn;var Sd=Tx.exports;const IP=Aw(Sd);var SP,oI=Sd;SP=oI.createRoot,oI.hydrateRoot;const BV="modulepreload",$V=function(t,e){return new URL(t,e).href},aI={},xe=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=$V(c,r),c in aI)return;aI[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(!!r)for(let T=o.length-1;T>=0;T--){const y=o[T];if(y.href===c&&(!d||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":BV,d||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((T,y)=>{m.addEventListener("load",T),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},zV=1,qV=1e6;let Ug=0;function WV(){return Ug=(Ug+1)%Number.MAX_SAFE_INTEGER,Ug.toString()}const jg=new Map,lI=t=>{if(jg.has(t))return;const e=setTimeout(()=>{jg.delete(t),uu({type:"REMOVE_TOAST",toastId:t})},qV);jg.set(t,e)},HV=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,zV)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?lI(n):t.toasts.forEach(r=>{lI(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},sf=[];let of={toasts:[]};function uu(t){of=HV(of,t),sf.forEach(e=>{e(of)})}function KV({...t}){const e=WV(),n=s=>uu({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>uu({type:"DISMISS_TOAST",toastId:e});return uu({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function T_(){const[t,e]=b.useState(of);return b.useEffect(()=>(sf.push(e),()=>{const n=sf.indexOf(e);n>-1&&sf.splice(n,1)}),[t]),{...t,toast:KV,dismiss:n=>uu({type:"DISMISS_TOAST",toastId:n})}}function ot(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function cI(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function bP(...t){return e=>{let n=!1;const r=t.map(s=>{const i=cI(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():cI(t[s],null)}}}}function gn(...t){return b.useCallback(bP(...t),t)}function GV(t,e){const n=b.createContext(e),r=i=>{const{children:o,...a}=i,l=b.useMemo(()=>a,Object.values(a));return x.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=b.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function bd(t,e=[]){let n=[];function r(i,o){const a=b.createContext(o),l=n.length;n=[...n,o];const c=h=>{var w;const{scope:f,children:m,...T}=h,y=((w=f==null?void 0:f[t])==null?void 0:w[l])||a,_=b.useMemo(()=>T,Object.values(T));return x.jsx(y.Provider,{value:_,children:m})};c.displayName=i+"Provider";function d(h,f){var y;const m=((y=f==null?void 0:f[t])==null?void 0:y[l])||a,T=b.useContext(m);if(T)return T;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=n.map(o=>b.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return b.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,QV(s,...e)]}function QV(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function qu(t){const e=XV(t),n=b.forwardRef((r,s)=>{const{children:i,...o}=r,a=b.Children.toArray(i),l=a.find(ZV);if(l){const c=l.props.children,d=a.map(h=>h===l?b.Children.count(c)>1?b.Children.only(null):b.isValidElement(c)?c.props.children:null:h);return x.jsx(e,{...o,ref:s,children:b.isValidElement(c)?b.cloneElement(c,void 0,d):null})}return x.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var YV=qu("Slot");function XV(t){const e=b.forwardRef((n,r)=>{const{children:s,...i}=n;if(b.isValidElement(s)){const o=tM(s),a=eM(i,s.props);return s.type!==b.Fragment&&(a.ref=r?bP(r,o):o),b.cloneElement(s,a)}return b.Children.count(s)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var AP=Symbol("radix.slottable");function JV(t){const e=({children:n})=>x.jsx(x.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=AP,e}function ZV(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===AP}function eM(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function tM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function nM(t){const e=t+"CollectionProvider",[n,r]=bd(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:_,children:w}=y,p=z.useRef(null),v=z.useRef(new Map).current;return x.jsx(s,{scope:_,itemMap:v,collectionRef:p,children:w})};o.displayName=e;const a=t+"CollectionSlot",l=qu(a),c=z.forwardRef((y,_)=>{const{scope:w,children:p}=y,v=i(a,w),A=gn(_,v.collectionRef);return x.jsx(l,{ref:A,children:p})});c.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=qu(d),m=z.forwardRef((y,_)=>{const{scope:w,children:p,...v}=y,A=z.useRef(null),R=gn(_,A),L=i(d,w);return z.useEffect(()=>(L.itemMap.set(A,{ref:A,...v}),()=>void L.itemMap.delete(A))),x.jsx(f,{[h]:"",ref:R,children:p})});m.displayName=d;function T(y){const _=i(t+"CollectionConsumer",y);return z.useCallback(()=>{const p=_.collectionRef.current;if(!p)return[];const v=Array.from(p.querySelectorAll(`[${h}]`));return Array.from(_.itemMap.values()).sort((L,I)=>v.indexOf(L.ref.current)-v.indexOf(I.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:o,Slot:c,ItemSlot:m},T,r]}var rM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Rt=rM.reduce((t,e)=>{const n=qu(`Primitive.${e}`),r=b.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),x.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function xP(t,e){t&&Sd.flushSync(()=>t.dispatchEvent(e))}function is(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function sM(t,e=globalThis==null?void 0:globalThis.document){const n=is(t);b.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var iM="DismissableLayer",vv="dismissableLayer.update",oM="dismissableLayer.pointerDownOutside",aM="dismissableLayer.focusOutside",uI,PP=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),tm=b.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=b.useContext(PP),[d,h]=b.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=b.useState({}),T=gn(e,I=>h(I)),y=Array.from(c.layers),[_]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),w=y.indexOf(_),p=d?y.indexOf(d):-1,v=c.layersWithOutsidePointerEventsDisabled.size>0,A=p>=w,R=cM(I=>{const S=I.target,P=[...c.branches].some(C=>C.contains(S));!A||P||(s==null||s(I),o==null||o(I),I.defaultPrevented||a==null||a())},f),L=uM(I=>{const S=I.target;[...c.branches].some(C=>C.contains(S))||(i==null||i(I),o==null||o(I),I.defaultPrevented||a==null||a())},f);return sM(I=>{p===c.layers.size-1&&(r==null||r(I),!I.defaultPrevented&&a&&(I.preventDefault(),a()))},f),b.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(uI=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),dI(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=uI)}},[d,f,n,c]),b.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),dI())},[d,c]),b.useEffect(()=>{const I=()=>m({});return document.addEventListener(vv,I),()=>document.removeEventListener(vv,I)},[]),x.jsx(Rt.div,{...l,ref:T,style:{pointerEvents:v?A?"auto":"none":void 0,...t.style},onFocusCapture:ot(t.onFocusCapture,L.onFocusCapture),onBlurCapture:ot(t.onBlurCapture,L.onBlurCapture),onPointerDownCapture:ot(t.onPointerDownCapture,R.onPointerDownCapture)})});tm.displayName=iM;var lM="DismissableLayerBranch",RP=b.forwardRef((t,e)=>{const n=b.useContext(PP),r=b.useRef(null),s=gn(e,r);return b.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),x.jsx(Rt.div,{...t,ref:s})});RP.displayName=lM;function cM(t,e=globalThis==null?void 0:globalThis.document){const n=is(t),r=b.useRef(!1),s=b.useRef(()=>{});return b.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){CP(oM,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function uM(t,e=globalThis==null?void 0:globalThis.document){const n=is(t),r=b.useRef(!1);return b.useEffect(()=>{const s=i=>{i.target&&!r.current&&CP(aM,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function dI(){const t=new CustomEvent(vv);document.dispatchEvent(t)}function CP(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?xP(s,i):s.dispatchEvent(i)}var dM=tm,hM=RP,Os=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},fM="Portal",I_=b.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=b.useState(!1);Os(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?IP.createPortal(x.jsx(Rt.div,{...r,ref:e}),o):null});I_.displayName=fM;function pM(t,e){return b.useReducer((n,r)=>e[n][r]??n,t)}var Ql=t=>{const{present:e,children:n}=t,r=mM(e),s=typeof n=="function"?n({present:r.isPresent}):b.Children.only(n),i=gn(r.ref,gM(s));return typeof n=="function"||r.isPresent?b.cloneElement(s,{ref:i}):null};Ql.displayName="Presence";function mM(t){const[e,n]=b.useState(),r=b.useRef(null),s=b.useRef(t),i=b.useRef("none"),o=t?"mounted":"unmounted",[a,l]=pM(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const c=Ih(r.current);i.current=a==="mounted"?c:"none"},[a]),Os(()=>{const c=r.current,d=s.current;if(d!==t){const f=i.current,m=Ih(c);t?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&f!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Os(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=m=>{const y=Ih(r.current).includes(CSS.escape(m.animationName));if(m.target===e&&y&&(l("ANIMATION_END"),!s.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},f=m=>{m.target===e&&(i.current=Ih(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:b.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function Ih(t){return(t==null?void 0:t.animationName)||"none"}function gM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var yM=kw[" useInsertionEffect ".trim().toString()]||Os;function kP({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=vM({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const d=b.useRef(t!==void 0);b.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=b.useCallback(d=>{var h;if(a){const f=wM(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else i(d)},[a,t,i,o]);return[l,c]}function vM({defaultProp:t,onChange:e}){const[n,r]=b.useState(t),s=b.useRef(n),i=b.useRef(e);return yM(()=>{i.current=e},[e]),b.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function wM(t){return typeof t=="function"}var _M=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),EM="VisuallyHidden",nm=b.forwardRef((t,e)=>x.jsx(Rt.span,{...t,ref:e,style:{..._M,...t.style}}));nm.displayName=EM;var TM=nm,S_="ToastProvider",[b_,IM,SM]=nM("Toast"),[DP]=bd("Toast",[SM]),[bM,rm]=DP(S_),NP=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=b.useState(null),[c,d]=b.useState(0),h=b.useRef(!1),f=b.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${S_}\`. Expected non-empty \`string\`.`),x.jsx(b_.Provider,{scope:e,children:x.jsx(bM,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:b.useCallback(()=>d(m=>m+1),[]),onToastRemove:b.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};NP.displayName=S_;var OP="ToastViewport",AM=["F8"],wv="toast.viewportPause",_v="toast.viewportResume",LP=b.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=AM,label:s="Notifications ({hotkey})",...i}=t,o=rm(OP,n),a=IM(n),l=b.useRef(null),c=b.useRef(null),d=b.useRef(null),h=b.useRef(null),f=gn(e,h,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),T=o.toastCount>0;b.useEffect(()=>{const _=w=>{var v;r.length!==0&&r.every(A=>w[A]||w.code===A)&&((v=h.current)==null||v.focus())};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[r]),b.useEffect(()=>{const _=l.current,w=h.current;if(T&&_&&w){const p=()=>{if(!o.isClosePausedRef.current){const L=new CustomEvent(wv);w.dispatchEvent(L),o.isClosePausedRef.current=!0}},v=()=>{if(o.isClosePausedRef.current){const L=new CustomEvent(_v);w.dispatchEvent(L),o.isClosePausedRef.current=!1}},A=L=>{!_.contains(L.relatedTarget)&&v()},R=()=>{_.contains(document.activeElement)||v()};return _.addEventListener("focusin",p),_.addEventListener("focusout",A),_.addEventListener("pointermove",p),_.addEventListener("pointerleave",R),window.addEventListener("blur",p),window.addEventListener("focus",v),()=>{_.removeEventListener("focusin",p),_.removeEventListener("focusout",A),_.removeEventListener("pointermove",p),_.removeEventListener("pointerleave",R),window.removeEventListener("blur",p),window.removeEventListener("focus",v)}}},[T,o.isClosePausedRef]);const y=b.useCallback(({tabbingDirection:_})=>{const p=a().map(v=>{const A=v.ref.current,R=[A,...UM(A)];return _==="forwards"?R:R.reverse()});return(_==="forwards"?p.reverse():p).flat()},[a]);return b.useEffect(()=>{const _=h.current;if(_){const w=p=>{var R,L,I;const v=p.altKey||p.ctrlKey||p.metaKey;if(p.key==="Tab"&&!v){const S=document.activeElement,P=p.shiftKey;if(p.target===_&&P){(R=c.current)==null||R.focus();return}const O=y({tabbingDirection:P?"backwards":"forwards"}),D=O.findIndex(B=>B===S);Bg(O.slice(D+1))?p.preventDefault():P?(L=c.current)==null||L.focus():(I=d.current)==null||I.focus()}};return _.addEventListener("keydown",w),()=>_.removeEventListener("keydown",w)}},[a,y]),x.jsxs(hM,{ref:l,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:T?void 0:"none"},children:[T&&x.jsx(Ev,{ref:c,onFocusFromOutsideViewport:()=>{const _=y({tabbingDirection:"forwards"});Bg(_)}}),x.jsx(b_.Slot,{scope:n,children:x.jsx(Rt.ol,{tabIndex:-1,...i,ref:f})}),T&&x.jsx(Ev,{ref:d,onFocusFromOutsideViewport:()=>{const _=y({tabbingDirection:"backwards"});Bg(_)}})]})});LP.displayName=OP;var VP="ToastFocusProxy",Ev=b.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=rm(VP,n);return x.jsx(nm,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});Ev.displayName=VP;var Ad="Toast",xM="toast.swipeStart",PM="toast.swipeMove",RM="toast.swipeCancel",CM="toast.swipeEnd",MP=b.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,l]=kP({prop:r,defaultProp:s??!0,onChange:i,caller:Ad});return x.jsx(Ql,{present:n||a,children:x.jsx(NM,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:is(t.onPause),onResume:is(t.onResume),onSwipeStart:ot(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ot(t.onSwipeMove,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:ot(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ot(t.onSwipeEnd,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});MP.displayName=Ad;var[kM,DM]=DP(Ad,{onClose(){}}),NM=b.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...T}=t,y=rm(Ad,n),[_,w]=b.useState(null),p=gn(e,B=>w(B)),v=b.useRef(null),A=b.useRef(null),R=s||y.duration,L=b.useRef(0),I=b.useRef(R),S=b.useRef(0),{onToastAdd:P,onToastRemove:C}=y,k=is(()=>{var X;(_==null?void 0:_.contains(document.activeElement))&&((X=y.viewport)==null||X.focus()),o()}),O=b.useCallback(B=>{!B||B===1/0||(window.clearTimeout(S.current),L.current=new Date().getTime(),S.current=window.setTimeout(k,B))},[k]);b.useEffect(()=>{const B=y.viewport;if(B){const X=()=>{O(I.current),c==null||c()},ee=()=>{const G=new Date().getTime()-L.current;I.current=I.current-G,window.clearTimeout(S.current),l==null||l()};return B.addEventListener(wv,ee),B.addEventListener(_v,X),()=>{B.removeEventListener(wv,ee),B.removeEventListener(_v,X)}}},[y.viewport,R,l,c,O]),b.useEffect(()=>{i&&!y.isClosePausedRef.current&&O(R)},[i,R,y.isClosePausedRef,O]),b.useEffect(()=>(P(),()=>C()),[P,C]);const D=b.useMemo(()=>_?qP(_):null,[_]);return y.viewport?x.jsxs(x.Fragment,{children:[D&&x.jsx(OM,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:D}),x.jsx(kM,{scope:n,onClose:k,children:Sd.createPortal(x.jsx(b_.ItemSlot,{scope:n,children:x.jsx(dM,{asChild:!0,onEscapeKeyDown:ot(a,()=>{y.isFocusedToastEscapeKeyDownRef.current||k(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:x.jsx(Rt.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":y.swipeDirection,...T,ref:p,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ot(t.onKeyDown,B=>{B.key==="Escape"&&(a==null||a(B.nativeEvent),B.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,k()))}),onPointerDown:ot(t.onPointerDown,B=>{B.button===0&&(v.current={x:B.clientX,y:B.clientY})}),onPointerMove:ot(t.onPointerMove,B=>{if(!v.current)return;const X=B.clientX-v.current.x,ee=B.clientY-v.current.y,G=!!A.current,U=["left","right"].includes(y.swipeDirection),F=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,H=U?F(0,X):0,ae=U?0:F(0,ee),te=B.pointerType==="touch"?10:2,le={x:H,y:ae},ue={originalEvent:B,delta:le};G?(A.current=le,Sh(PM,h,ue,{discrete:!1})):hI(le,y.swipeDirection,te)?(A.current=le,Sh(xM,d,ue,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(X)>te||Math.abs(ee)>te)&&(v.current=null)}),onPointerUp:ot(t.onPointerUp,B=>{const X=A.current,ee=B.target;if(ee.hasPointerCapture(B.pointerId)&&ee.releasePointerCapture(B.pointerId),A.current=null,v.current=null,X){const G=B.currentTarget,U={originalEvent:B,delta:X};hI(X,y.swipeDirection,y.swipeThreshold)?Sh(CM,m,U,{discrete:!0}):Sh(RM,f,U,{discrete:!0}),G.addEventListener("click",F=>F.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),OM=t=>{const{__scopeToast:e,children:n,...r}=t,s=rm(Ad,e),[i,o]=b.useState(!1),[a,l]=b.useState(!1);return MM(()=>o(!0)),b.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:x.jsx(I_,{asChild:!0,children:x.jsx(nm,{...r,children:i&&x.jsxs(x.Fragment,{children:[s.label," ",n]})})})},LM="ToastTitle",FP=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return x.jsx(Rt.div,{...r,ref:e})});FP.displayName=LM;var VM="ToastDescription",UP=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return x.jsx(Rt.div,{...r,ref:e})});UP.displayName=VM;var jP="ToastAction",BP=b.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?x.jsx(zP,{altText:n,asChild:!0,children:x.jsx(A_,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${jP}\`. Expected non-empty \`string\`.`),null)});BP.displayName=jP;var $P="ToastClose",A_=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=DM($P,n);return x.jsx(zP,{asChild:!0,children:x.jsx(Rt.button,{type:"button",...r,ref:e,onClick:ot(t.onClick,s.onClose)})})});A_.displayName=$P;var zP=b.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return x.jsx(Rt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function qP(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),FM(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...qP(r))}}),e}function Sh(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?xP(s,i):s.dispatchEvent(i)}var hI=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function MM(t=()=>{}){const e=is(t);Os(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function FM(t){return t.nodeType===t.ELEMENT_NODE}function UM(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Bg(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var jM=NP,WP=LP,HP=MP,KP=FP,GP=UP,QP=BP,YP=A_;function XP(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=XP(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function JP(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=XP(t))&&(r&&(r+=" "),r+=e);return r}const fI=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,pI=JP,ZP=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return pI(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const f=fI(d)||fI(h);return s[c][f]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,f]=d;return f===void 0||(c[h]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(T=>{let[y,_]=T;return Array.isArray(_)?_.includes({...i,...a}[y]):{...i,...a}[y]===_})?[...c,h,f]:c},[]);return pI(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),eR=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $M={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>b.createElement("svg",{ref:l,...$M,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:eR("lucide",s),...a},[...o.map(([c,d])=>b.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=(t,e)=>{const n=b.forwardRef(({className:r,...s},i)=>b.createElement(zM,{ref:i,iconNode:e,className:eR(`lucide-${BM(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=rt("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=rt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=rt("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=rt("BadgePercent",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=rt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=rt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=rt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=rt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=rt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=rt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=rt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=rt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gI=rt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=rt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=rt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=rt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=rt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=rt("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vI=rt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=rt("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=rt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=rt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=rt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=rt("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x_=rt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),P_="-",lF=t=>{const e=uF(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(P_);return a[0]===""&&a.length!==1&&a.shift(),nR(a,e)||cF(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},nR=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?nR(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(P_);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},wI=/^\[(.+)\]$/,cF=t=>{if(wI.test(t)){const e=wI.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},uF=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return hF(Object.entries(t.classGroups),n).forEach(([i,o])=>{Tv(o,r,i,e)}),r},Tv=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:_I(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(dF(s)){Tv(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Tv(o,_I(e,i),n,r)})})},_I=(t,e)=>{let n=t;return e.split(P_).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},dF=t=>t.isThemeGetter,hF=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,fF=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},rR="!",pF=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let _=0;_<a.length;_++){let w=a[_];if(c===0){if(w===s&&(r||a.slice(_,_+i)===e)){l.push(a.slice(d,_)),d=_+i;continue}if(w==="/"){h=_;continue}}w==="["?c++:w==="]"&&c--}const f=l.length===0?a:a.substring(d),m=f.startsWith(rR),T=m?f.substring(1):f,y=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:T,maybePostfixModifierPosition:y}};return n?a=>n({className:a,parseClassName:o}):o},mF=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},gF=t=>({cache:fF(t.cacheSize),parseClassName:pF(t),...lF(t)}),yF=/\s+/,vF=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(yF);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=n(c);let T=!!m,y=r(T?f.substring(0,m):f);if(!y){if(!T){a=c+(a.length>0?" "+a:a);continue}if(y=r(f),!y){a=c+(a.length>0?" "+a:a);continue}T=!1}const _=mF(d).join(":"),w=h?_+rR:_,p=w+y;if(i.includes(p))continue;i.push(p);const v=s(y,T);for(let A=0;A<v.length;++A){const R=v[A];i.push(w+R)}a=c+(a.length>0?" "+a:a)}return a};function wF(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=sR(e))&&(r&&(r+=" "),r+=n);return r}const sR=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=sR(t[r]))&&(n&&(n+=" "),n+=e);return n};function _F(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return n=gF(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=vF(l,n);return s(l,d),d}return function(){return i(wF.apply(null,arguments))}}const Ze=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},iR=/^\[(?:([a-z-]+):)?(.+)\]$/i,EF=/^\d+\/\d+$/,TF=new Set(["px","full","screen"]),IF=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,SF=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,bF=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,AF=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,xF=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ps=t=>nl(t)||TF.has(t)||EF.test(t),ri=t=>Yl(t,"length",LF),nl=t=>!!t&&!Number.isNaN(Number(t)),zg=t=>Yl(t,"number",nl),Lc=t=>!!t&&Number.isInteger(Number(t)),PF=t=>t.endsWith("%")&&nl(t.slice(0,-1)),be=t=>iR.test(t),si=t=>IF.test(t),RF=new Set(["length","size","percentage"]),CF=t=>Yl(t,RF,oR),kF=t=>Yl(t,"position",oR),DF=new Set(["image","url"]),NF=t=>Yl(t,DF,MF),OF=t=>Yl(t,"",VF),Vc=()=>!0,Yl=(t,e,n)=>{const r=iR.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},LF=t=>SF.test(t)&&!bF.test(t),oR=()=>!1,VF=t=>AF.test(t),MF=t=>xF.test(t),FF=()=>{const t=Ze("colors"),e=Ze("spacing"),n=Ze("blur"),r=Ze("brightness"),s=Ze("borderColor"),i=Ze("borderRadius"),o=Ze("borderSpacing"),a=Ze("borderWidth"),l=Ze("contrast"),c=Ze("grayscale"),d=Ze("hueRotate"),h=Ze("invert"),f=Ze("gap"),m=Ze("gradientColorStops"),T=Ze("gradientColorStopPositions"),y=Ze("inset"),_=Ze("margin"),w=Ze("opacity"),p=Ze("padding"),v=Ze("saturate"),A=Ze("scale"),R=Ze("sepia"),L=Ze("skew"),I=Ze("space"),S=Ze("translate"),P=()=>["auto","contain","none"],C=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto",be,e],O=()=>[be,e],D=()=>["",ps,ri],B=()=>["auto",nl,be],X=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ee=()=>["solid","dashed","dotted","double","none"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],U=()=>["start","end","center","between","around","evenly","stretch"],F=()=>["","0",be],H=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ae=()=>[nl,be];return{cacheSize:500,separator:":",theme:{colors:[Vc],spacing:[ps,ri],blur:["none","",si,be],brightness:ae(),borderColor:[t],borderRadius:["none","","full",si,be],borderSpacing:O(),borderWidth:D(),contrast:ae(),grayscale:F(),hueRotate:ae(),invert:F(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[PF,ri],inset:k(),margin:k(),opacity:ae(),padding:O(),saturate:ae(),scale:ae(),sepia:F(),skew:ae(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",be]}],container:["container"],columns:[{columns:[si]}],"break-after":[{"break-after":H()}],"break-before":[{"break-before":H()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...X(),be]}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Lc,be]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",be]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",Lc,be]}],"grid-cols":[{"grid-cols":[Vc]}],"col-start-end":[{col:["auto",{span:["full",Lc,be]},be]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[Vc]}],"row-start-end":[{row:["auto",{span:[Lc,be]},be]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",be]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",be]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...U()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...U(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...U(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[p]}],px:[{px:[p]}],py:[{py:[p]}],ps:[{ps:[p]}],pe:[{pe:[p]}],pt:[{pt:[p]}],pr:[{pr:[p]}],pb:[{pb:[p]}],pl:[{pl:[p]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",be,e]}],"min-w":[{"min-w":[be,e,"min","max","fit"]}],"max-w":[{"max-w":[be,e,"none","full","min","max","fit","prose",{screen:[si]},si]}],h:[{h:[be,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[be,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[be,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[be,e,"auto","min","max","fit"]}],"font-size":[{text:["base",si,ri]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",zg]}],"font-family":[{font:[Vc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",be]}],"line-clamp":[{"line-clamp":["none",nl,zg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ps,be]}],"list-image":[{"list-image":["none",be]}],"list-style-type":[{list:["none","disc","decimal",be]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ee(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ps,ri]}],"underline-offset":[{"underline-offset":["auto",ps,be]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",be]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",be]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...X(),kF]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",CF]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},NF]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[T]}],"gradient-via-pos":[{via:[T]}],"gradient-to-pos":[{to:[T]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...ee(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:ee()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...ee()]}],"outline-offset":[{"outline-offset":[ps,be]}],"outline-w":[{outline:[ps,ri]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[ps,ri]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",si,OF]}],"shadow-color":[{shadow:[Vc]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...G(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":G()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",si,be]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[v]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",be]}],duration:[{duration:ae()}],ease:[{ease:["linear","in","out","in-out",be]}],delay:[{delay:ae()}],animate:[{animate:["none","spin","ping","pulse","bounce",be]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[A]}],"scale-x":[{"scale-x":[A]}],"scale-y":[{"scale-y":[A]}],rotate:[{rotate:[Lc,be]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[L]}],"skew-y":[{"skew-y":[L]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",be]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",be]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",be]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ps,ri,zg]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},UF=_F(FF);function _n(...t){return UF(JP(t))}const jF=jM,aR=b.forwardRef(({className:t,...e},n)=>x.jsx(WP,{ref:n,className:_n("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));aR.displayName=WP.displayName;const BF=ZP("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),lR=b.forwardRef(({className:t,variant:e,...n},r)=>x.jsx(HP,{ref:r,className:_n(BF({variant:e}),t),...n}));lR.displayName=HP.displayName;const $F=b.forwardRef(({className:t,...e},n)=>x.jsx(QP,{ref:n,className:_n("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));$F.displayName=QP.displayName;const cR=b.forwardRef(({className:t,...e},n)=>x.jsx(YP,{ref:n,className:_n("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:x.jsx(x_,{className:"h-4 w-4"})}));cR.displayName=YP.displayName;const uR=b.forwardRef(({className:t,...e},n)=>x.jsx(KP,{ref:n,className:_n("text-sm font-semibold",t),...e}));uR.displayName=KP.displayName;const dR=b.forwardRef(({className:t,...e},n)=>x.jsx(GP,{ref:n,className:_n("text-sm opacity-90",t),...e}));dR.displayName=GP.displayName;function zF(){const{toasts:t}=T_();return x.jsxs(jF,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return x.jsxs(lR,{...i,children:[x.jsxs("div",{className:"grid gap-1",children:[n&&x.jsx(uR,{children:n}),r&&x.jsx(dR,{children:r})]}),s,x.jsx(cR,{})]},e)}),x.jsx(aR,{})]})}var Qf=["light","dark"],R_="(prefers-color-scheme: dark)",qF=typeof window>"u",C_=b.createContext(void 0),WF={setTheme:t=>{},themes:[]},hR=()=>{var t;return(t=b.useContext(C_))!=null?t:WF},HF=t=>b.useContext(C_)?t.children:b.createElement(GF,{...t}),KF=["light","dark"],GF=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:i=KF,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:d})=>{let[h,f]=b.useState(()=>EI(s,o)),[m,T]=b.useState(()=>EI(s)),y=l?Object.values(l):i,_=b.useCallback(A=>{let R=A;if(!R)return;A==="system"&&n&&(R=TI());let L=l?l[R]:R,I=e?YF():null,S=document.documentElement;if(a==="class"?(S.classList.remove(...y),L&&S.classList.add(L)):L?S.setAttribute(a,L):S.removeAttribute(a),r){let P=Qf.includes(o)?o:null,C=Qf.includes(R)?R:P;S.style.colorScheme=C}I==null||I()},[]),w=b.useCallback(A=>{let R=typeof A=="function"?A(A):A;f(R);try{localStorage.setItem(s,R)}catch{}},[t]),p=b.useCallback(A=>{let R=TI(A);T(R),h==="system"&&n&&!t&&_("system")},[h,t]);b.useEffect(()=>{let A=window.matchMedia(R_);return A.addListener(p),p(A),()=>A.removeListener(p)},[p]),b.useEffect(()=>{let A=R=>{if(R.key!==s)return;let L=R.newValue||o;w(L)};return window.addEventListener("storage",A),()=>window.removeEventListener("storage",A)},[w]),b.useEffect(()=>{_(t??h)},[t,h]);let v=b.useMemo(()=>({theme:h,setTheme:w,forcedTheme:t,resolvedTheme:h==="system"?m:h,themes:n?[...i,"system"]:i,systemTheme:n?m:void 0}),[h,w,t,m,n,i]);return b.createElement(C_.Provider,{value:v},b.createElement(QF,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:s,themes:i,defaultTheme:o,attribute:a,value:l,children:c,attrs:y,nonce:d}),c)},QF=b.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let c=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(T=>`'${T}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?Qf.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(T,y=!1,_=!0)=>{let w=o?o[T]:T,p=y?T+"|| ''":`'${w}'`,v="";return s&&_&&!y&&Qf.includes(T)&&(v+=`d.style.colorScheme = '${T}';`),n==="class"?y||w?v+=`c.add(${p})`:v+="null":w&&(v+=`d[s](n,${p})`),v},m=t?`!function(){${d}${f(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${R_}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${c?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return b.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:m}})}),EI=(t,e)=>{if(qF)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},YF=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},TI=t=>(t||(t=window.matchMedia(R_)),t.matches?"dark":"light"),XF=t=>{switch(t){case"success":return eU;case"info":return nU;case"warning":return tU;case"error":return rU;default:return null}},JF=Array(12).fill(0),ZF=({visible:t,className:e})=>z.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},z.createElement("div",{className:"sonner-spinner"},JF.map((n,r)=>z.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),eU=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),tU=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),nU=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),rU=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),sU=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},z.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),z.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),iU=()=>{let[t,e]=z.useState(document.hidden);return z.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},Iv=1,oU=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:Iv++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:r}),{...l,...e,id:i,dismissible:a,title:r}):l):this.addToast({title:r,...s,dismissible:a,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),i=r!==void 0,o,a=s.then(async c=>{if(o=["resolve",c],z.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(lU(c)&&!c.ok){i=!1;let d=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description;this.create({id:r,type:"error",message:d,description:h})}else if(n.success!==void 0){i=!1;let d=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"success",message:d,description:h})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;let d=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"error",message:d,description:h})}}).finally(()=>{var c;i&&(this.dismiss(r),r=void 0),(c=n.finally)==null||c.call(n)}),l=()=>new Promise((c,d)=>a.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||Iv++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Sn=new oU,aU=(t,e)=>{let n=(e==null?void 0:e.id)||Iv++;return Sn.addToast({title:t,...e,id:n}),n},lU=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",cU=aU,uU=()=>Sn.toasts,dU=()=>Sn.getActiveToasts(),wt=Object.assign(cU,{success:Sn.success,info:Sn.info,warning:Sn.warning,error:Sn.error,custom:Sn.custom,message:Sn.message,promise:Sn.promise,dismiss:Sn.dismiss,loading:Sn.loading},{getHistory:uU,getToasts:dU});function hU(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}hU(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function bh(t){return t.label!==void 0}var fU=3,pU="32px",mU="16px",II=4e3,gU=356,yU=14,vU=20,wU=200;function pr(...t){return t.filter(Boolean).join(" ")}function _U(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var EU=t=>{var e,n,r,s,i,o,a,l,c,d,h;let{invert:f,toast:m,unstyled:T,interacting:y,setHeights:_,visibleToasts:w,heights:p,index:v,toasts:A,expanded:R,removeToast:L,defaultRichColors:I,closeButton:S,style:P,cancelButtonStyle:C,actionButtonStyle:k,className:O="",descriptionClassName:D="",duration:B,position:X,gap:ee,loadingIcon:G,expandByDefault:U,classNames:F,icons:H,closeButtonAriaLabel:ae="Close toast",pauseWhenPageIsHidden:te}=t,[le,ue]=z.useState(null),[Se,Xe]=z.useState(null),[he,Te]=z.useState(!1),[Ce,bt]=z.useState(!1),[Vt,Yt]=z.useState(!1),[qt,En]=z.useState(!1),[Lr,Ie]=z.useState(!1),[er,Gs]=z.useState(0),[ct,Mt]=z.useState(0),Vr=z.useRef(m.duration||B||II),Hd=z.useRef(null),Mr=z.useRef(null),Ym=v===0,lo=v+1<=w,cn=m.type,hs=m.dismissible!==!1,fc=m.className||"",Xm=m.descriptionClassName||"",ya=z.useMemo(()=>p.findIndex(ye=>ye.toastId===m.id)||0,[p,m.id]),Kd=z.useMemo(()=>{var ye;return(ye=m.closeButton)!=null?ye:S},[m.closeButton,S]),pc=z.useMemo(()=>m.duration||B||II,[m.duration,B]),fs=z.useRef(0),Fr=z.useRef(0),va=z.useRef(0),Tn=z.useRef(null),[Gd,wa]=X.split("-"),mc=z.useMemo(()=>p.reduce((ye,Ue,Ke)=>Ke>=ya?ye:ye+Ue.height,0),[p,ya]),Qs=iU(),Qd=m.invert||f,Ct=cn==="loading";Fr.current=z.useMemo(()=>ya*ee+mc,[ya,mc]),z.useEffect(()=>{Vr.current=pc},[pc]),z.useEffect(()=>{Te(!0)},[]),z.useEffect(()=>{let ye=Mr.current;if(ye){let Ue=ye.getBoundingClientRect().height;return Mt(Ue),_(Ke=>[{toastId:m.id,height:Ue,position:m.position},...Ke]),()=>_(Ke=>Ke.filter(Ft=>Ft.toastId!==m.id))}},[_,m.id]),z.useLayoutEffect(()=>{if(!he)return;let ye=Mr.current,Ue=ye.style.height;ye.style.height="auto";let Ke=ye.getBoundingClientRect().height;ye.style.height=Ue,Mt(Ke),_(Ft=>Ft.find(On=>On.toastId===m.id)?Ft.map(On=>On.toastId===m.id?{...On,height:Ke}:On):[{toastId:m.id,height:Ke,position:m.position},...Ft])},[he,m.title,m.description,_,m.id]);let dr=z.useCallback(()=>{bt(!0),Gs(Fr.current),_(ye=>ye.filter(Ue=>Ue.toastId!==m.id)),setTimeout(()=>{L(m)},wU)},[m,L,_,Fr]);z.useEffect(()=>{if(m.promise&&cn==="loading"||m.duration===1/0||m.type==="loading")return;let ye;return R||y||te&&Qs?(()=>{if(va.current<fs.current){let Ue=new Date().getTime()-fs.current;Vr.current=Vr.current-Ue}va.current=new Date().getTime()})():Vr.current!==1/0&&(fs.current=new Date().getTime(),ye=setTimeout(()=>{var Ue;(Ue=m.onAutoClose)==null||Ue.call(m,m),dr()},Vr.current)),()=>clearTimeout(ye)},[R,y,m,cn,te,Qs,dr]),z.useEffect(()=>{m.delete&&dr()},[dr,m.delete]);function co(){var ye,Ue,Ke;return H!=null&&H.loading?z.createElement("div",{className:pr(F==null?void 0:F.loader,(ye=m==null?void 0:m.classNames)==null?void 0:ye.loader,"sonner-loader"),"data-visible":cn==="loading"},H.loading):G?z.createElement("div",{className:pr(F==null?void 0:F.loader,(Ue=m==null?void 0:m.classNames)==null?void 0:Ue.loader,"sonner-loader"),"data-visible":cn==="loading"},G):z.createElement(ZF,{className:pr(F==null?void 0:F.loader,(Ke=m==null?void 0:m.classNames)==null?void 0:Ke.loader),visible:cn==="loading"})}return z.createElement("li",{tabIndex:0,ref:Mr,className:pr(O,fc,F==null?void 0:F.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,F==null?void 0:F.default,F==null?void 0:F[cn],(n=m==null?void 0:m.classNames)==null?void 0:n[cn]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:I,"data-styled":!(m.jsx||m.unstyled||T),"data-mounted":he,"data-promise":!!m.promise,"data-swiped":Lr,"data-removed":Ce,"data-visible":lo,"data-y-position":Gd,"data-x-position":wa,"data-index":v,"data-front":Ym,"data-swiping":Vt,"data-dismissible":hs,"data-type":cn,"data-invert":Qd,"data-swipe-out":qt,"data-swipe-direction":Se,"data-expanded":!!(R||U&&he),style:{"--index":v,"--toasts-before":v,"--z-index":A.length-v,"--offset":`${Ce?er:Fr.current}px`,"--initial-height":U?"auto":`${ct}px`,...P,...m.style},onDragEnd:()=>{Yt(!1),ue(null),Tn.current=null},onPointerDown:ye=>{Ct||!hs||(Hd.current=new Date,Gs(Fr.current),ye.target.setPointerCapture(ye.pointerId),ye.target.tagName!=="BUTTON"&&(Yt(!0),Tn.current={x:ye.clientX,y:ye.clientY}))},onPointerUp:()=>{var ye,Ue,Ke,Ft;if(qt||!hs)return;Tn.current=null;let On=Number(((ye=Mr.current)==null?void 0:ye.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ur=Number(((Ue=Mr.current)==null?void 0:Ue.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),tr=new Date().getTime()-((Ke=Hd.current)==null?void 0:Ke.getTime()),In=le==="x"?On:Ur,hr=Math.abs(In)/tr;if(Math.abs(In)>=vU||hr>.11){Gs(Fr.current),(Ft=m.onDismiss)==null||Ft.call(m,m),Xe(le==="x"?On>0?"right":"left":Ur>0?"down":"up"),dr(),En(!0),Ie(!1);return}Yt(!1),ue(null)},onPointerMove:ye=>{var Ue,Ke,Ft,On;if(!Tn.current||!hs||((Ue=window.getSelection())==null?void 0:Ue.toString().length)>0)return;let Ur=ye.clientY-Tn.current.y,tr=ye.clientX-Tn.current.x,In=(Ke=t.swipeDirections)!=null?Ke:_U(X);!le&&(Math.abs(tr)>1||Math.abs(Ur)>1)&&ue(Math.abs(tr)>Math.abs(Ur)?"x":"y");let hr={x:0,y:0};le==="y"?(In.includes("top")||In.includes("bottom"))&&(In.includes("top")&&Ur<0||In.includes("bottom")&&Ur>0)&&(hr.y=Ur):le==="x"&&(In.includes("left")||In.includes("right"))&&(In.includes("left")&&tr<0||In.includes("right")&&tr>0)&&(hr.x=tr),(Math.abs(hr.x)>0||Math.abs(hr.y)>0)&&Ie(!0),(Ft=Mr.current)==null||Ft.style.setProperty("--swipe-amount-x",`${hr.x}px`),(On=Mr.current)==null||On.style.setProperty("--swipe-amount-y",`${hr.y}px`)}},Kd&&!m.jsx?z.createElement("button",{"aria-label":ae,"data-disabled":Ct,"data-close-button":!0,onClick:Ct||!hs?()=>{}:()=>{var ye;dr(),(ye=m.onDismiss)==null||ye.call(m,m)},className:pr(F==null?void 0:F.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(i=H==null?void 0:H.close)!=null?i:sU):null,m.jsx||b.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:z.createElement(z.Fragment,null,cn||m.icon||m.promise?z.createElement("div",{"data-icon":"",className:pr(F==null?void 0:F.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||co():null,m.type!=="loading"?m.icon||(H==null?void 0:H[cn])||XF(cn):null):null,z.createElement("div",{"data-content":"",className:pr(F==null?void 0:F.content,(a=m==null?void 0:m.classNames)==null?void 0:a.content)},z.createElement("div",{"data-title":"",className:pr(F==null?void 0:F.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},typeof m.title=="function"?m.title():m.title),m.description?z.createElement("div",{"data-description":"",className:pr(D,Xm,F==null?void 0:F.description,(c=m==null?void 0:m.classNames)==null?void 0:c.description)},typeof m.description=="function"?m.description():m.description):null),b.isValidElement(m.cancel)?m.cancel:m.cancel&&bh(m.cancel)?z.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||C,onClick:ye=>{var Ue,Ke;bh(m.cancel)&&hs&&((Ke=(Ue=m.cancel).onClick)==null||Ke.call(Ue,ye),dr())},className:pr(F==null?void 0:F.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,b.isValidElement(m.action)?m.action:m.action&&bh(m.action)?z.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||k,onClick:ye=>{var Ue,Ke;bh(m.action)&&((Ke=(Ue=m.action).onClick)==null||Ke.call(Ue,ye),!ye.defaultPrevented&&dr())},className:pr(F==null?void 0:F.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function SI(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function TU(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?mU:pU;function l(c){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}var IU=b.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:d="light",richColors:h,duration:f,style:m,visibleToasts:T=fU,toastOptions:y,dir:_=SI(),gap:w=yU,loadingIcon:p,icons:v,containerAriaLabel:A="Notifications",pauseWhenPageIsHidden:R}=t,[L,I]=z.useState([]),S=z.useMemo(()=>Array.from(new Set([r].concat(L.filter(te=>te.position).map(te=>te.position)))),[L,r]),[P,C]=z.useState([]),[k,O]=z.useState(!1),[D,B]=z.useState(!1),[X,ee]=z.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),G=z.useRef(null),U=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=z.useRef(null),H=z.useRef(!1),ae=z.useCallback(te=>{I(le=>{var ue;return(ue=le.find(Se=>Se.id===te.id))!=null&&ue.delete||Sn.dismiss(te.id),le.filter(({id:Se})=>Se!==te.id)})},[]);return z.useEffect(()=>Sn.subscribe(te=>{if(te.dismiss){I(le=>le.map(ue=>ue.id===te.id?{...ue,delete:!0}:ue));return}setTimeout(()=>{IP.flushSync(()=>{I(le=>{let ue=le.findIndex(Se=>Se.id===te.id);return ue!==-1?[...le.slice(0,ue),{...le[ue],...te},...le.slice(ue+1)]:[te,...le]})})})}),[]),z.useEffect(()=>{if(d!=="system"){ee(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ee("dark"):ee("light")),typeof window>"u")return;let te=window.matchMedia("(prefers-color-scheme: dark)");try{te.addEventListener("change",({matches:le})=>{ee(le?"dark":"light")})}catch{te.addListener(({matches:ue})=>{try{ee(ue?"dark":"light")}catch(Se){console.error(Se)}})}},[d]),z.useEffect(()=>{L.length<=1&&O(!1)},[L]),z.useEffect(()=>{let te=le=>{var ue,Se;s.every(Xe=>le[Xe]||le.code===Xe)&&(O(!0),(ue=G.current)==null||ue.focus()),le.code==="Escape"&&(document.activeElement===G.current||(Se=G.current)!=null&&Se.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",te),()=>document.removeEventListener("keydown",te)},[s]),z.useEffect(()=>{if(G.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,H.current=!1)}},[G.current]),z.createElement("section",{ref:e,"aria-label":`${A} ${U}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},S.map((te,le)=>{var ue;let[Se,Xe]=te.split("-");return L.length?z.createElement("ol",{key:te,dir:_==="auto"?SI():_,tabIndex:-1,ref:G,className:a,"data-sonner-toaster":!0,"data-theme":X,"data-y-position":Se,"data-lifted":k&&L.length>1&&!i,"data-x-position":Xe,style:{"--front-toast-height":`${((ue=P[0])==null?void 0:ue.height)||0}px`,"--width":`${gU}px`,"--gap":`${w}px`,...m,...TU(l,c)},onBlur:he=>{H.current&&!he.currentTarget.contains(he.relatedTarget)&&(H.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:he=>{he.target instanceof HTMLElement&&he.target.dataset.dismissible==="false"||H.current||(H.current=!0,F.current=he.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{D||O(!1)},onDragEnd:()=>O(!1),onPointerDown:he=>{he.target instanceof HTMLElement&&he.target.dataset.dismissible==="false"||B(!0)},onPointerUp:()=>B(!1)},L.filter(he=>!he.position&&le===0||he.position===te).map((he,Te)=>{var Ce,bt;return z.createElement(EU,{key:he.id,icons:v,index:Te,toast:he,defaultRichColors:h,duration:(Ce=y==null?void 0:y.duration)!=null?Ce:f,className:y==null?void 0:y.className,descriptionClassName:y==null?void 0:y.descriptionClassName,invert:n,visibleToasts:T,closeButton:(bt=y==null?void 0:y.closeButton)!=null?bt:o,interacting:D,position:te,style:y==null?void 0:y.style,unstyled:y==null?void 0:y.unstyled,classNames:y==null?void 0:y.classNames,cancelButtonStyle:y==null?void 0:y.cancelButtonStyle,actionButtonStyle:y==null?void 0:y.actionButtonStyle,removeToast:ae,toasts:L.filter(Vt=>Vt.position==he.position),heights:P.filter(Vt=>Vt.position==he.position),setHeights:C,expandByDefault:i,gap:w,loadingIcon:p,expanded:k,pauseWhenPageIsHidden:R,swipeDirections:t.swipeDirections})})):null}))});const SU=({...t})=>{const{theme:e="system"}=hR();return x.jsx(IU,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var bU=kw[" useId ".trim().toString()]||(()=>{}),AU=0;function qg(t){const[e,n]=b.useState(bU());return Os(()=>{n(r=>r??String(AU++))},[t]),t||(e?`radix-${e}`:"")}const xU=["top","right","bottom","left"],qi=Math.min,Un=Math.max,Yf=Math.round,Ah=Math.floor,rs=t=>({x:t,y:t}),PU={left:"right",right:"left",bottom:"top",top:"bottom"},RU={start:"end",end:"start"};function Sv(t,e,n){return Un(t,qi(e,n))}function Ls(t,e){return typeof t=="function"?t(e):t}function Vs(t){return t.split("-")[0]}function Xl(t){return t.split("-")[1]}function k_(t){return t==="x"?"y":"x"}function D_(t){return t==="y"?"height":"width"}const CU=new Set(["top","bottom"]);function Xr(t){return CU.has(Vs(t))?"y":"x"}function N_(t){return k_(Xr(t))}function kU(t,e,n){n===void 0&&(n=!1);const r=Xl(t),s=N_(t),i=D_(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Xf(o)),[o,Xf(o)]}function DU(t){const e=Xf(t);return[bv(t),e,bv(e)]}function bv(t){return t.replace(/start|end/g,e=>RU[e])}const bI=["left","right"],AI=["right","left"],NU=["top","bottom"],OU=["bottom","top"];function LU(t,e,n){switch(t){case"top":case"bottom":return n?e?AI:bI:e?bI:AI;case"left":case"right":return e?NU:OU;default:return[]}}function VU(t,e,n,r){const s=Xl(t);let i=LU(Vs(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(bv)))),i}function Xf(t){return t.replace(/left|right|bottom|top/g,e=>PU[e])}function MU(t){return{top:0,right:0,bottom:0,left:0,...t}}function fR(t){return typeof t!="number"?MU(t):{top:t,right:t,bottom:t,left:t}}function Jf(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function xI(t,e,n){let{reference:r,floating:s}=t;const i=Xr(e),o=N_(e),a=D_(o),l=Vs(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-s.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-s.width,y:h};break;default:m={x:r.x,y:r.y}}switch(Xl(e)){case"start":m[o]-=f*(n&&c?-1:1);break;case"end":m[o]+=f*(n&&c?-1:1);break}return m}const FU=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=xI(c,r,l),f=r,m={},T=0;for(let y=0;y<a.length;y++){const{name:_,fn:w}=a[y],{x:p,y:v,data:A,reset:R}=await w({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});d=p??d,h=v??h,m={...m,[_]:{...m[_],...A}},R&&T<=50&&(T++,typeof R=="object"&&(R.placement&&(f=R.placement),R.rects&&(c=R.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):R.rects),{x:d,y:h}=xI(c,f,l)),y=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:m}};async function Wu(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=Ls(e,t),T=fR(m),_=a[f?h==="floating"?"reference":"floating":h],w=Jf(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(_)))==null||n?_:_.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),p=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,v=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),A=await(i.isElement==null?void 0:i.isElement(v))?await(i.getScale==null?void 0:i.getScale(v))||{x:1,y:1}:{x:1,y:1},R=Jf(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:p,offsetParent:v,strategy:l}):p);return{top:(w.top-R.top+T.top)/A.y,bottom:(R.bottom-w.bottom+T.bottom)/A.y,left:(w.left-R.left+T.left)/A.x,right:(R.right-w.right+T.right)/A.x}}const UU=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=Ls(t,e)||{};if(c==null)return{};const h=fR(d),f={x:n,y:r},m=N_(s),T=D_(m),y=await o.getDimensions(c),_=m==="y",w=_?"top":"left",p=_?"bottom":"right",v=_?"clientHeight":"clientWidth",A=i.reference[T]+i.reference[m]-f[m]-i.floating[T],R=f[m]-i.reference[m],L=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let I=L?L[v]:0;(!I||!await(o.isElement==null?void 0:o.isElement(L)))&&(I=a.floating[v]||i.floating[T]);const S=A/2-R/2,P=I/2-y[T]/2-1,C=qi(h[w],P),k=qi(h[p],P),O=C,D=I-y[T]-k,B=I/2-y[T]/2+S,X=Sv(O,B,D),ee=!l.arrow&&Xl(s)!=null&&B!==X&&i.reference[T]/2-(B<O?C:k)-y[T]/2<0,G=ee?B<O?B-O:B-D:0;return{[m]:f[m]+G,data:{[m]:X,centerOffset:B-X-G,...ee&&{alignmentOffset:G}},reset:ee}}}),jU=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:T="none",flipAlignment:y=!0,..._}=Ls(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const w=Vs(s),p=Xr(a),v=Vs(a)===a,A=await(l.isRTL==null?void 0:l.isRTL(c.floating)),R=f||(v||!y?[Xf(a)]:DU(a)),L=T!=="none";!f&&L&&R.push(...VU(a,y,T,A));const I=[a,...R],S=await Wu(e,_),P=[];let C=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&P.push(S[w]),h){const B=kU(s,o,A);P.push(S[B[0]],S[B[1]])}if(C=[...C,{placement:s,overflows:P}],!P.every(B=>B<=0)){var k,O;const B=(((k=i.flip)==null?void 0:k.index)||0)+1,X=I[B];if(X&&(!(h==="alignment"?p!==Xr(X):!1)||C.every(U=>Xr(U.placement)===p?U.overflows[0]>0:!0)))return{data:{index:B,overflows:C},reset:{placement:X}};let ee=(O=C.filter(G=>G.overflows[0]<=0).sort((G,U)=>G.overflows[1]-U.overflows[1])[0])==null?void 0:O.placement;if(!ee)switch(m){case"bestFit":{var D;const G=(D=C.filter(U=>{if(L){const F=Xr(U.placement);return F===p||F==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(F=>F>0).reduce((F,H)=>F+H,0)]).sort((U,F)=>U[1]-F[1])[0])==null?void 0:D[0];G&&(ee=G);break}case"initialPlacement":ee=a;break}if(s!==ee)return{reset:{placement:ee}}}return{}}}};function PI(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function RI(t){return xU.some(e=>t[e]>=0)}const BU=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Ls(t,e);switch(r){case"referenceHidden":{const i=await Wu(e,{...s,elementContext:"reference"}),o=PI(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:RI(o)}}}case"escaped":{const i=await Wu(e,{...s,altBoundary:!0}),o=PI(i,n.floating);return{data:{escapedOffsets:o,escaped:RI(o)}}}default:return{}}}}},pR=new Set(["left","top"]);async function $U(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Vs(n),a=Xl(n),l=Xr(n)==="y",c=pR.has(o)?-1:1,d=i&&l?-1:1,h=Ls(e,t);let{mainAxis:f,crossAxis:m,alignmentAxis:T}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof T=="number"&&(m=a==="end"?T*-1:T),l?{x:m*d,y:f*c}:{x:f*c,y:m*d}}const zU=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await $U(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},qU=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:_=>{let{x:w,y:p}=_;return{x:w,y:p}}},...l}=Ls(t,e),c={x:n,y:r},d=await Wu(e,l),h=Xr(Vs(s)),f=k_(h);let m=c[f],T=c[h];if(i){const _=f==="y"?"top":"left",w=f==="y"?"bottom":"right",p=m+d[_],v=m-d[w];m=Sv(p,m,v)}if(o){const _=h==="y"?"top":"left",w=h==="y"?"bottom":"right",p=T+d[_],v=T-d[w];T=Sv(p,T,v)}const y=a.fn({...e,[f]:m,[h]:T});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[f]:i,[h]:o}}}}}},WU=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Ls(t,e),d={x:n,y:r},h=Xr(s),f=k_(h);let m=d[f],T=d[h];const y=Ls(a,e),_=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const v=f==="y"?"height":"width",A=i.reference[f]-i.floating[v]+_.mainAxis,R=i.reference[f]+i.reference[v]-_.mainAxis;m<A?m=A:m>R&&(m=R)}if(c){var w,p;const v=f==="y"?"width":"height",A=pR.has(Vs(s)),R=i.reference[h]-i.floating[v]+(A&&((w=o.offset)==null?void 0:w[h])||0)+(A?0:_.crossAxis),L=i.reference[h]+i.reference[v]+(A?0:((p=o.offset)==null?void 0:p[h])||0)-(A?_.crossAxis:0);T<R?T=R:T>L&&(T=L)}return{[f]:m,[h]:T}}}},HU=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Ls(t,e),d=await Wu(e,c),h=Vs(s),f=Xl(s),m=Xr(s)==="y",{width:T,height:y}=i.floating;let _,w;h==="top"||h==="bottom"?(_=h,w=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(w=h,_=f==="end"?"top":"bottom");const p=y-d.top-d.bottom,v=T-d.left-d.right,A=qi(y-d[_],p),R=qi(T-d[w],v),L=!e.middlewareData.shift;let I=A,S=R;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(S=v),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(I=p),L&&!f){const C=Un(d.left,0),k=Un(d.right,0),O=Un(d.top,0),D=Un(d.bottom,0);m?S=T-2*(C!==0||k!==0?C+k:Un(d.left,d.right)):I=y-2*(O!==0||D!==0?O+D:Un(d.top,d.bottom))}await l({...e,availableWidth:S,availableHeight:I});const P=await o.getDimensions(a.floating);return T!==P.width||y!==P.height?{reset:{rects:!0}}:{}}}};function sm(){return typeof window<"u"}function Jl(t){return mR(t)?(t.nodeName||"").toLowerCase():"#document"}function Hn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function cs(t){var e;return(e=(mR(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function mR(t){return sm()?t instanceof Node||t instanceof Hn(t).Node:!1}function Pr(t){return sm()?t instanceof Element||t instanceof Hn(t).Element:!1}function os(t){return sm()?t instanceof HTMLElement||t instanceof Hn(t).HTMLElement:!1}function CI(t){return!sm()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Hn(t).ShadowRoot}const KU=new Set(["inline","contents"]);function xd(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Rr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!KU.has(s)}const GU=new Set(["table","td","th"]);function QU(t){return GU.has(Jl(t))}const YU=[":popover-open",":modal"];function im(t){return YU.some(e=>{try{return t.matches(e)}catch{return!1}})}const XU=["transform","translate","scale","rotate","perspective"],JU=["transform","translate","scale","rotate","perspective","filter"],ZU=["paint","layout","strict","content"];function O_(t){const e=L_(),n=Pr(t)?Rr(t):t;return XU.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||JU.some(r=>(n.willChange||"").includes(r))||ZU.some(r=>(n.contain||"").includes(r))}function e4(t){let e=Wi(t);for(;os(e)&&!Il(e);){if(O_(e))return e;if(im(e))return null;e=Wi(e)}return null}function L_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const t4=new Set(["html","body","#document"]);function Il(t){return t4.has(Jl(t))}function Rr(t){return Hn(t).getComputedStyle(t)}function om(t){return Pr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Wi(t){if(Jl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||CI(t)&&t.host||cs(t);return CI(e)?e.host:e}function gR(t){const e=Wi(t);return Il(e)?t.ownerDocument?t.ownerDocument.body:t.body:os(e)&&xd(e)?e:gR(e)}function Hu(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=gR(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Hn(s);if(i){const a=Av(o);return e.concat(o,o.visualViewport||[],xd(s)?s:[],a&&n?Hu(a):[])}return e.concat(s,Hu(s,[],n))}function Av(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function yR(t){const e=Rr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=os(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Yf(n)!==i||Yf(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function V_(t){return Pr(t)?t:t.contextElement}function rl(t){const e=V_(t);if(!os(e))return rs(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=yR(e);let o=(i?Yf(n.width):n.width)/r,a=(i?Yf(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const n4=rs(0);function vR(t){const e=Hn(t);return!L_()||!e.visualViewport?n4:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function r4(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Hn(t)?!1:e}function na(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=V_(t);let o=rs(1);e&&(r?Pr(r)&&(o=rl(r)):o=rl(t));const a=r4(i,n,r)?vR(i):rs(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=Hn(i),m=r&&Pr(r)?Hn(r):r;let T=f,y=Av(T);for(;y&&r&&m!==T;){const _=rl(y),w=y.getBoundingClientRect(),p=Rr(y),v=w.left+(y.clientLeft+parseFloat(p.paddingLeft))*_.x,A=w.top+(y.clientTop+parseFloat(p.paddingTop))*_.y;l*=_.x,c*=_.y,d*=_.x,h*=_.y,l+=v,c+=A,T=Hn(y),y=Av(T)}}return Jf({width:d,height:h,x:l,y:c})}function am(t,e){const n=om(t).scrollLeft;return e?e.left+n:na(cs(t)).left+n}function wR(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-am(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function s4(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=cs(r),a=e?im(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=rs(1);const d=rs(0),h=os(r);if((h||!h&&!i)&&((Jl(r)!=="body"||xd(o))&&(l=om(r)),os(r))){const m=na(r);c=rl(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const f=o&&!h&&!i?wR(o,l):rs(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+f.x,y:n.y*c.y-l.scrollTop*c.y+d.y+f.y}}function i4(t){return Array.from(t.getClientRects())}function o4(t){const e=cs(t),n=om(t),r=t.ownerDocument.body,s=Un(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Un(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+am(t);const a=-n.scrollTop;return Rr(r).direction==="rtl"&&(o+=Un(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}const kI=25;function a4(t,e){const n=Hn(t),r=cs(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const d=L_();(!d||d&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=am(r);if(c<=0){const d=r.ownerDocument,h=d.body,f=getComputedStyle(h),m=d.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,T=Math.abs(r.clientWidth-h.clientWidth-m);T<=kI&&(i-=T)}else c<=kI&&(i+=c);return{width:i,height:o,x:a,y:l}}const l4=new Set(["absolute","fixed"]);function c4(t,e){const n=na(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=os(t)?rl(t):rs(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function DI(t,e,n){let r;if(e==="viewport")r=a4(t,n);else if(e==="document")r=o4(cs(t));else if(Pr(e))r=c4(e,n);else{const s=vR(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Jf(r)}function _R(t,e){const n=Wi(t);return n===e||!Pr(n)||Il(n)?!1:Rr(n).position==="fixed"||_R(n,e)}function u4(t,e){const n=e.get(t);if(n)return n;let r=Hu(t,[],!1).filter(a=>Pr(a)&&Jl(a)!=="body"),s=null;const i=Rr(t).position==="fixed";let o=i?Wi(t):t;for(;Pr(o)&&!Il(o);){const a=Rr(o),l=O_(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&l4.has(s.position)||xd(o)&&!l&&_R(t,o))?r=r.filter(d=>d!==o):s=a,o=Wi(o)}return e.set(t,r),r}function d4(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?im(e)?[]:u4(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=DI(e,d,s);return c.top=Un(h.top,c.top),c.right=qi(h.right,c.right),c.bottom=qi(h.bottom,c.bottom),c.left=Un(h.left,c.left),c},DI(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function h4(t){const{width:e,height:n}=yR(t);return{width:e,height:n}}function f4(t,e,n){const r=os(e),s=cs(e),i=n==="fixed",o=na(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=rs(0);function c(){l.x=am(s)}if(r||!r&&!i)if((Jl(e)!=="body"||xd(s))&&(a=om(e)),r){const m=na(e,!0,i,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else s&&c();i&&!r&&s&&c();const d=s&&!r&&!i?wR(s,a):rs(0),h=o.left+a.scrollLeft-l.x-d.x,f=o.top+a.scrollTop-l.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function Wg(t){return Rr(t).position==="static"}function NI(t,e){if(!os(t)||Rr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return cs(t)===n&&(n=n.ownerDocument.body),n}function ER(t,e){const n=Hn(t);if(im(t))return n;if(!os(t)){let s=Wi(t);for(;s&&!Il(s);){if(Pr(s)&&!Wg(s))return s;s=Wi(s)}return n}let r=NI(t,e);for(;r&&QU(r)&&Wg(r);)r=NI(r,e);return r&&Il(r)&&Wg(r)&&!O_(r)?n:r||e4(t)||n}const p4=async function(t){const e=this.getOffsetParent||ER,n=this.getDimensions,r=await n(t.floating);return{reference:f4(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function m4(t){return Rr(t).direction==="rtl"}const g4={convertOffsetParentRelativeRectToViewportRelativeRect:s4,getDocumentElement:cs,getClippingRect:d4,getOffsetParent:ER,getElementRects:p4,getClientRects:i4,getDimensions:h4,getScale:rl,isElement:Pr,isRTL:m4};function TR(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function y4(t,e){let n=null,r;const s=cs(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:d,top:h,width:f,height:m}=c;if(a||e(),!f||!m)return;const T=Ah(h),y=Ah(s.clientWidth-(d+f)),_=Ah(s.clientHeight-(h+m)),w=Ah(d),v={rootMargin:-T+"px "+-y+"px "+-_+"px "+-w+"px",threshold:Un(0,qi(1,l))||1};let A=!0;function R(L){const I=L[0].intersectionRatio;if(I!==l){if(!A)return o();I?o(!1,I):r=setTimeout(()=>{o(!1,1e-7)},1e3)}I===1&&!TR(c,t.getBoundingClientRect())&&o(),A=!1}try{n=new IntersectionObserver(R,{...v,root:s.ownerDocument})}catch{n=new IntersectionObserver(R,v)}n.observe(t)}return o(!0),i}function v4(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=V_(t),d=s||i?[...c?Hu(c):[],...Hu(e)]:[];d.forEach(w=>{s&&w.addEventListener("scroll",n,{passive:!0}),i&&w.addEventListener("resize",n)});const h=c&&a?y4(c,n):null;let f=-1,m=null;o&&(m=new ResizeObserver(w=>{let[p]=w;p&&p.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var v;(v=m)==null||v.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let T,y=l?na(t):null;l&&_();function _(){const w=na(t);y&&!TR(y,w)&&n(),y=w,T=requestAnimationFrame(_)}return n(),()=>{var w;d.forEach(p=>{s&&p.removeEventListener("scroll",n),i&&p.removeEventListener("resize",n)}),h==null||h(),(w=m)==null||w.disconnect(),m=null,l&&cancelAnimationFrame(T)}}const w4=zU,_4=qU,E4=jU,T4=HU,I4=BU,OI=UU,S4=WU,b4=(t,e,n)=>{const r=new Map,s={platform:g4,...n},i={...s.platform,_c:r};return FU(t,e,{...s,platform:i})};var A4=typeof document<"u",x4=function(){},af=A4?b.useLayoutEffect:x4;function Zf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Zf(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Zf(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function IR(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function LI(t,e){const n=IR(t);return Math.round(e*n)/n}function Hg(t){const e=b.useRef(t);return af(()=>{e.current=t}),e}function P4(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=b.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,m]=b.useState(r);Zf(f,r)||m(r);const[T,y]=b.useState(null),[_,w]=b.useState(null),p=b.useCallback(U=>{U!==L.current&&(L.current=U,y(U))},[]),v=b.useCallback(U=>{U!==I.current&&(I.current=U,w(U))},[]),A=i||T,R=o||_,L=b.useRef(null),I=b.useRef(null),S=b.useRef(d),P=l!=null,C=Hg(l),k=Hg(s),O=Hg(c),D=b.useCallback(()=>{if(!L.current||!I.current)return;const U={placement:e,strategy:n,middleware:f};k.current&&(U.platform=k.current),b4(L.current,I.current,U).then(F=>{const H={...F,isPositioned:O.current!==!1};B.current&&!Zf(S.current,H)&&(S.current=H,Sd.flushSync(()=>{h(H)}))})},[f,e,n,k,O]);af(()=>{c===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,h(U=>({...U,isPositioned:!1})))},[c]);const B=b.useRef(!1);af(()=>(B.current=!0,()=>{B.current=!1}),[]),af(()=>{if(A&&(L.current=A),R&&(I.current=R),A&&R){if(C.current)return C.current(A,R,D);D()}},[A,R,D,C,P]);const X=b.useMemo(()=>({reference:L,floating:I,setReference:p,setFloating:v}),[p,v]),ee=b.useMemo(()=>({reference:A,floating:R}),[A,R]),G=b.useMemo(()=>{const U={position:n,left:0,top:0};if(!ee.floating)return U;const F=LI(ee.floating,d.x),H=LI(ee.floating,d.y);return a?{...U,transform:"translate("+F+"px, "+H+"px)",...IR(ee.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:H}},[n,a,ee.floating,d.x,d.y]);return b.useMemo(()=>({...d,update:D,refs:X,elements:ee,floatingStyles:G}),[d,D,X,ee,G])}const R4=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?OI({element:r.current,padding:s}).fn(n):{}:r?OI({element:r,padding:s}).fn(n):{}}}},C4=(t,e)=>({...w4(t),options:[t,e]}),k4=(t,e)=>({..._4(t),options:[t,e]}),D4=(t,e)=>({...S4(t),options:[t,e]}),N4=(t,e)=>({...E4(t),options:[t,e]}),O4=(t,e)=>({...T4(t),options:[t,e]}),L4=(t,e)=>({...I4(t),options:[t,e]}),V4=(t,e)=>({...R4(t),options:[t,e]});var M4="Arrow",SR=b.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return x.jsx(Rt.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:x.jsx("polygon",{points:"0,0 30,0 15,10"})})});SR.displayName=M4;var F4=SR;function U4(t){const[e,n]=b.useState(void 0);return Os(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var M_="Popper",[bR,AR]=bd(M_),[j4,xR]=bR(M_),PR=t=>{const{__scopePopper:e,children:n}=t,[r,s]=b.useState(null);return x.jsx(j4,{scope:e,anchor:r,onAnchorChange:s,children:n})};PR.displayName=M_;var RR="PopperAnchor",CR=b.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=xR(RR,n),o=b.useRef(null),a=gn(e,o),l=b.useRef(null);return b.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||o.current,c!==l.current&&i.onAnchorChange(l.current)}),r?null:x.jsx(Rt.div,{...s,ref:a})});CR.displayName=RR;var F_="PopperContent",[B4,$4]=bR(F_),kR=b.forwardRef((t,e)=>{var he,Te,Ce,bt,Vt,Yt;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:T,...y}=t,_=xR(F_,n),[w,p]=b.useState(null),v=gn(e,qt=>p(qt)),[A,R]=b.useState(null),L=U4(A),I=(L==null?void 0:L.width)??0,S=(L==null?void 0:L.height)??0,P=r+(i!=="center"?"-"+i:""),C=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},k=Array.isArray(c)?c:[c],O=k.length>0,D={padding:C,boundary:k.filter(q4),altBoundary:O},{refs:B,floatingStyles:X,placement:ee,isPositioned:G,middlewareData:U}=P4({strategy:"fixed",placement:P,whileElementsMounted:(...qt)=>v4(...qt,{animationFrame:m==="always"}),elements:{reference:_.anchor},middleware:[C4({mainAxis:s+S,alignmentAxis:o}),l&&k4({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?D4():void 0,...D}),l&&N4({...D}),O4({...D,apply:({elements:qt,rects:En,availableWidth:Lr,availableHeight:Ie})=>{const{width:er,height:Gs}=En.reference,ct=qt.floating.style;ct.setProperty("--radix-popper-available-width",`${Lr}px`),ct.setProperty("--radix-popper-available-height",`${Ie}px`),ct.setProperty("--radix-popper-anchor-width",`${er}px`),ct.setProperty("--radix-popper-anchor-height",`${Gs}px`)}}),A&&V4({element:A,padding:a}),W4({arrowWidth:I,arrowHeight:S}),f&&L4({strategy:"referenceHidden",...D})]}),[F,H]=OR(ee),ae=is(T);Os(()=>{G&&(ae==null||ae())},[G,ae]);const te=(he=U.arrow)==null?void 0:he.x,le=(Te=U.arrow)==null?void 0:Te.y,ue=((Ce=U.arrow)==null?void 0:Ce.centerOffset)!==0,[Se,Xe]=b.useState();return Os(()=>{w&&Xe(window.getComputedStyle(w).zIndex)},[w]),x.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...X,transform:G?X.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Se,"--radix-popper-transform-origin":[(bt=U.transformOrigin)==null?void 0:bt.x,(Vt=U.transformOrigin)==null?void 0:Vt.y].join(" "),...((Yt=U.hide)==null?void 0:Yt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:x.jsx(B4,{scope:n,placedSide:F,onArrowChange:R,arrowX:te,arrowY:le,shouldHideArrow:ue,children:x.jsx(Rt.div,{"data-side":F,"data-align":H,...y,ref:v,style:{...y.style,animation:G?void 0:"none"}})})})});kR.displayName=F_;var DR="PopperArrow",z4={top:"bottom",right:"left",bottom:"top",left:"right"},NR=b.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=$4(DR,r),o=z4[i.placedSide];return x.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:x.jsx(F4,{...s,ref:n,style:{...s.style,display:"block"}})})});NR.displayName=DR;function q4(t){return t!==null}var W4=t=>({name:"transformOrigin",options:t,fn(e){var _,w,p;const{placement:n,rects:r,middlewareData:s}=e,o=((_=s.arrow)==null?void 0:_.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=OR(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((w=s.arrow)==null?void 0:w.x)??0)+a/2,m=(((p=s.arrow)==null?void 0:p.y)??0)+l/2;let T="",y="";return c==="bottom"?(T=o?h:`${f}px`,y=`${-l}px`):c==="top"?(T=o?h:`${f}px`,y=`${r.floating.height+l}px`):c==="right"?(T=`${-l}px`,y=o?h:`${m}px`):c==="left"&&(T=`${r.floating.width+l}px`,y=o?h:`${m}px`),{data:{x:T,y}}}});function OR(t){const[e,n="center"]=t.split("-");return[e,n]}var BH=PR,H4=CR,K4=kR,G4=NR,[lm]=bd("Tooltip",[AR]),U_=AR(),LR="TooltipProvider",Q4=700,VI="tooltip.open",[Y4,VR]=lm(LR),MR=t=>{const{__scopeTooltip:e,delayDuration:n=Q4,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=b.useRef(!0),a=b.useRef(!1),l=b.useRef(0);return b.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),x.jsx(Y4,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:b.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:b.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:i})};MR.displayName=LR;var FR="Tooltip",[$H,cm]=lm(FR),xv="TooltipTrigger",X4=b.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=cm(xv,n),i=VR(xv,n),o=U_(n),a=b.useRef(null),l=gn(e,a,s.onTriggerChange),c=b.useRef(!1),d=b.useRef(!1),h=b.useCallback(()=>c.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),x.jsx(H4,{asChild:!0,...o,children:x.jsx(Rt.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:ot(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:ot(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:ot(t.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:ot(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:ot(t.onBlur,s.onClose),onClick:ot(t.onClick,s.onClose)})})});X4.displayName=xv;var J4="TooltipPortal",[zH,Z4]=lm(J4,{forceMount:void 0}),Sl="TooltipContent",UR=b.forwardRef((t,e)=>{const n=Z4(Sl,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=cm(Sl,t.__scopeTooltip);return x.jsx(Ql,{present:r||o.open,children:o.disableHoverableContent?x.jsx(jR,{side:s,...i,ref:e}):x.jsx(e3,{side:s,...i,ref:e})})}),e3=b.forwardRef((t,e)=>{const n=cm(Sl,t.__scopeTooltip),r=VR(Sl,t.__scopeTooltip),s=b.useRef(null),i=gn(e,s),[o,a]=b.useState(null),{trigger:l,onClose:c}=n,d=s.current,{onPointerInTransitChange:h}=r,f=b.useCallback(()=>{a(null),h(!1)},[h]),m=b.useCallback((T,y)=>{const _=T.currentTarget,w={x:T.clientX,y:T.clientY},p=i3(w,_.getBoundingClientRect()),v=o3(w,p),A=a3(y.getBoundingClientRect()),R=c3([...v,...A]);a(R),h(!0)},[h]);return b.useEffect(()=>()=>f(),[f]),b.useEffect(()=>{if(l&&d){const T=_=>m(_,d),y=_=>m(_,l);return l.addEventListener("pointerleave",T),d.addEventListener("pointerleave",y),()=>{l.removeEventListener("pointerleave",T),d.removeEventListener("pointerleave",y)}}},[l,d,m,f]),b.useEffect(()=>{if(o){const T=y=>{const _=y.target,w={x:y.clientX,y:y.clientY},p=(l==null?void 0:l.contains(_))||(d==null?void 0:d.contains(_)),v=!l3(w,o);p?f():v&&(f(),c())};return document.addEventListener("pointermove",T),()=>document.removeEventListener("pointermove",T)}},[l,d,o,c,f]),x.jsx(jR,{...t,ref:i})}),[t3,n3]=lm(FR,{isInside:!1}),r3=JV("TooltipContent"),jR=b.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=cm(Sl,n),c=U_(n),{onClose:d}=l;return b.useEffect(()=>(document.addEventListener(VI,d),()=>document.removeEventListener(VI,d)),[d]),b.useEffect(()=>{if(l.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),x.jsx(tm,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:x.jsxs(K4,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[x.jsx(r3,{children:r}),x.jsx(t3,{scope:n,isInside:!0,children:x.jsx(TM,{id:l.contentId,role:"tooltip",children:s||r})})]})})});UR.displayName=Sl;var BR="TooltipArrow",s3=b.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=U_(n);return n3(BR,n).isInside?null:x.jsx(G4,{...s,...r,ref:e})});s3.displayName=BR;function i3(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function o3(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function a3(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function l3(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,d=a.y,h=l.x,f=l.y;d>r!=f>r&&n<(h-c)*(r-d)/(f-d)+c&&(s=!s)}return s}function c3(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),u3(e)}function u3(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var d3=MR,$R=UR;const h3=d3,f3=b.forwardRef(({className:t,sideOffset:e=4,...n},r)=>x.jsx($R,{ref:r,sideOffset:e,className:_n("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));f3.displayName=$R.displayName;var um=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},p3={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},gi,bw,qA,m3=(qA=class{constructor(){Le(this,gi,p3);Le(this,bw,!1)}setTimeoutProvider(t){_e(this,gi,t)}setTimeout(t,e){return W(this,gi).setTimeout(t,e)}clearTimeout(t){W(this,gi).clearTimeout(t)}setInterval(t,e){return W(this,gi).setInterval(t,e)}clearInterval(t){W(this,gi).clearInterval(t)}},gi=new WeakMap,bw=new WeakMap,qA),Pv=new m3;function g3(t){setTimeout(t,0)}var dm=typeof window>"u"||"Deno"in globalThis;function gr(){}function y3(t,e){return typeof t=="function"?t(e):t}function v3(t){return typeof t=="number"&&t>=0&&t!==1/0}function w3(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Rv(t,e){return typeof t=="function"?t(e):t}function _3(t,e){return typeof t=="function"?t(e):t}function MI(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==j_(o,e.options))return!1}else if(!Gu(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function FI(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Ku(e.options.mutationKey)!==Ku(i))return!1}else if(!Gu(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function j_(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ku)(t)}function Ku(t){return JSON.stringify(t,(e,n)=>Cv(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Gu(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Gu(t[n],e[n])):!1}var E3=Object.prototype.hasOwnProperty;function zR(t,e){if(t===e)return t;const n=UI(t)&&UI(e);if(!n&&!(Cv(t)&&Cv(e)))return e;const s=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let l=0;for(let c=0;c<o;c++){const d=n?c:i[c],h=t[d],f=e[d];if(h===f){a[d]=h,(n?c<s:E3.call(t,d))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[d]=f;continue}const m=zR(h,f);a[d]=m,m===h&&l++}return s===o&&l===s?t:a}function UI(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Cv(t){if(!jI(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!jI(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function jI(t){return Object.prototype.toString.call(t)==="[object Object]"}function T3(t){return new Promise(e=>{Pv.setTimeout(e,t)})}function I3(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?zR(t,e):e}function S3(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function b3(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var B_=Symbol();function qR(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===B_?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Uo,yi,ll,WA,A3=(WA=class extends um{constructor(){super();Le(this,Uo);Le(this,yi);Le(this,ll);_e(this,ll,e=>{if(!dm&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){W(this,yi)||this.setEventListener(W(this,ll))}onUnsubscribe(){var e;this.hasListeners()||((e=W(this,yi))==null||e.call(this),_e(this,yi,void 0))}setEventListener(e){var n;_e(this,ll,e),(n=W(this,yi))==null||n.call(this),_e(this,yi,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){W(this,Uo)!==e&&(_e(this,Uo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof W(this,Uo)=="boolean"?W(this,Uo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Uo=new WeakMap,yi=new WeakMap,ll=new WeakMap,WA),WR=new A3;function x3(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var P3=g3;function R3(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=P3;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var fn=R3(),cl,vi,ul,HA,C3=(HA=class extends um{constructor(){super();Le(this,cl,!0);Le(this,vi);Le(this,ul);_e(this,ul,e=>{if(!dm&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){W(this,vi)||this.setEventListener(W(this,ul))}onUnsubscribe(){var e;this.hasListeners()||((e=W(this,vi))==null||e.call(this),_e(this,vi,void 0))}setEventListener(e){var n;_e(this,ul,e),(n=W(this,vi))==null||n.call(this),_e(this,vi,e(this.setOnline.bind(this)))}setOnline(e){W(this,cl)!==e&&(_e(this,cl,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return W(this,cl)}},cl=new WeakMap,vi=new WeakMap,ul=new WeakMap,HA),ep=new C3;function k3(t){return Math.min(1e3*2**t,3e4)}function HR(t){return(t??"online")==="online"?ep.isOnline():!0}var kv=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function KR(t){let e=!1,n=0,r;const s=x3(),i=()=>s.status!=="pending",o=y=>{var _;if(!i()){const w=new kv(y);f(w),(_=t.onCancel)==null||_.call(t,w)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>WR.isFocused()&&(t.networkMode==="always"||ep.isOnline())&&t.canRun(),d=()=>HR(t.networkMode)&&t.canRun(),h=y=>{i()||(r==null||r(),s.resolve(y))},f=y=>{i()||(r==null||r(),s.reject(y))},m=()=>new Promise(y=>{var _;r=w=>{(i()||c())&&y(w)},(_=t.onPause)==null||_.call(t)}).then(()=>{var y;r=void 0,i()||(y=t.onContinue)==null||y.call(t)}),T=()=>{if(i())return;let y;const _=n===0?t.initialPromise:void 0;try{y=_??t.fn()}catch(w){y=Promise.reject(w)}Promise.resolve(y).then(h).catch(w=>{var L;if(i())return;const p=t.retry??(dm?0:3),v=t.retryDelay??k3,A=typeof v=="function"?v(n,w):v,R=p===!0||typeof p=="number"&&n<p||typeof p=="function"&&p(n,w);if(e||!R){f(w);return}n++,(L=t.onFail)==null||L.call(t,n,w),T3(A).then(()=>c()?void 0:m()).then(()=>{e?f(w):T()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?T():m().then(T),s)}}var jo,KA,GR=(KA=class{constructor(){Le(this,jo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),v3(this.gcTime)&&_e(this,jo,Pv.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(dm?1/0:5*60*1e3))}clearGcTimeout(){W(this,jo)&&(Pv.clearTimeout(W(this,jo)),_e(this,jo,void 0))}},jo=new WeakMap,KA),Bo,dl,nr,$o,jt,gd,zo,yr,ms,GA,D3=(GA=class extends GR{constructor(n){super();Le(this,yr);Le(this,Bo);Le(this,dl);Le(this,nr);Le(this,$o);Le(this,jt);Le(this,gd);Le(this,zo);_e(this,zo,!1),_e(this,gd,n.defaultOptions),this.setOptions(n.options),this.observers=[],_e(this,$o,n.client),_e(this,nr,W(this,$o).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,_e(this,Bo,$I(this.options)),this.state=n.state??W(this,Bo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=W(this,jt))==null?void 0:n.promise}setOptions(n){if(this.options={...W(this,gd),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=$I(this.options);r.data!==void 0&&(this.setState(BI(r.data,r.dataUpdatedAt)),_e(this,Bo,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&W(this,nr).remove(this)}setData(n,r){const s=I3(this.state.data,n,this.options);return Xt(this,yr,ms).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Xt(this,yr,ms).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=W(this,jt))==null?void 0:s.promise;return(i=W(this,jt))==null||i.cancel(n),r?r.then(gr).catch(gr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(W(this,Bo))}isActive(){return this.observers.some(n=>_3(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===B_||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>Rv(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!w3(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=W(this,jt))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=W(this,jt))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),W(this,nr).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(W(this,jt)&&(W(this,zo)?W(this,jt).cancel({revert:!0}):W(this,jt).cancelRetry()),this.scheduleGc()),W(this,nr).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Xt(this,yr,ms).call(this,{type:"invalidate"})}async fetch(n,r){var c,d,h,f,m,T,y,_,w,p,v,A;if(this.state.fetchStatus!=="idle"&&((c=W(this,jt))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(W(this,jt))return W(this,jt).continueRetry(),W(this,jt).promise}if(n&&this.setOptions(n),!this.options.queryFn){const R=this.observers.find(L=>L.options.queryFn);R&&this.setOptions(R.options)}const s=new AbortController,i=R=>{Object.defineProperty(R,"signal",{enumerable:!0,get:()=>(_e(this,zo,!0),s.signal)})},o=()=>{const R=qR(this.options,r),I=(()=>{const S={client:W(this,$o),queryKey:this.queryKey,meta:this.meta};return i(S),S})();return _e(this,zo,!1),this.options.persister?this.options.persister(R,I,this):R(I)},l=(()=>{const R={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:W(this,$o),state:this.state,fetchFn:o};return i(R),R})();(d=this.options.behavior)==null||d.onFetch(l,this),_e(this,dl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Xt(this,yr,ms).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),_e(this,jt,KR({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:R=>{R instanceof kv&&R.revert&&this.setState({...W(this,dl),fetchStatus:"idle"}),s.abort()},onFail:(R,L)=>{Xt(this,yr,ms).call(this,{type:"failed",failureCount:R,error:L})},onPause:()=>{Xt(this,yr,ms).call(this,{type:"pause"})},onContinue:()=>{Xt(this,yr,ms).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const R=await W(this,jt).start();if(R===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(R),(T=(m=W(this,nr).config).onSuccess)==null||T.call(m,R,this),(_=(y=W(this,nr).config).onSettled)==null||_.call(y,R,this.state.error,this),R}catch(R){if(R instanceof kv){if(R.silent)return W(this,jt).promise;if(R.revert){if(this.state.data===void 0)throw R;return this.state.data}}throw Xt(this,yr,ms).call(this,{type:"error",error:R}),(p=(w=W(this,nr).config).onError)==null||p.call(w,R,this),(A=(v=W(this,nr).config).onSettled)==null||A.call(v,this.state.data,R,this),R}finally{this.scheduleGc()}}},Bo=new WeakMap,dl=new WeakMap,nr=new WeakMap,$o=new WeakMap,jt=new WeakMap,gd=new WeakMap,zo=new WeakMap,yr=new WeakSet,ms=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...N3(s.data,this.options),fetchMeta:n.meta??null};case"success":const i={...s,...BI(n.data,n.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return _e(this,dl,n.manual?i:void 0),i;case"error":const o=n.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),fn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),W(this,nr).notify({query:this,type:"updated",action:n})})},GA);function N3(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:HR(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function BI(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function $I(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function zI(t){return{onFetch:(e,n)=>{var d,h,f,m,T;const r=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((m=e.state.data)==null?void 0:m.pages)||[],o=((T=e.state.data)==null?void 0:T.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let y=!1;const _=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},w=qR(e.options,e.fetchOptions),p=async(v,A,R)=>{if(y)return Promise.reject();if(A==null&&v.pages.length)return Promise.resolve(v);const I=(()=>{const k={client:e.client,queryKey:e.queryKey,pageParam:A,direction:R?"backward":"forward",meta:e.options.meta};return _(k),k})(),S=await w(I),{maxPages:P}=e.options,C=R?b3:S3;return{pages:C(v.pages,S,P),pageParams:C(v.pageParams,A,P)}};if(s&&i.length){const v=s==="backward",A=v?O3:qI,R={pages:i,pageParams:o},L=A(r,R);a=await p(R,L,v)}else{const v=t??i.length;do{const A=l===0?o[0]??r.initialPageParam:qI(r,a);if(l>0&&A==null)break;a=await p(a,A),l++}while(l<v)}return a};e.options.persister?e.fetchFn=()=>{var y,_;return(_=(y=e.options).persister)==null?void 0:_.call(y,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function qI(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function O3(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var yd,Wr,dn,qo,Hr,ci,QA,L3=(QA=class extends GR{constructor(n){super();Le(this,Hr);Le(this,yd);Le(this,Wr);Le(this,dn);Le(this,qo);_e(this,yd,n.client),this.mutationId=n.mutationId,_e(this,dn,n.mutationCache),_e(this,Wr,[]),this.state=n.state||V3(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){W(this,Wr).includes(n)||(W(this,Wr).push(n),this.clearGcTimeout(),W(this,dn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){_e(this,Wr,W(this,Wr).filter(r=>r!==n)),this.scheduleGc(),W(this,dn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){W(this,Wr).length||(this.state.status==="pending"?this.scheduleGc():W(this,dn).remove(this))}continue(){var n;return((n=W(this,qo))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var a,l,c,d,h,f,m,T,y,_,w,p,v,A,R,L,I,S,P,C;const r=()=>{Xt(this,Hr,ci).call(this,{type:"continue"})},s={client:W(this,yd),meta:this.options.meta,mutationKey:this.options.mutationKey};_e(this,qo,KR({fn:()=>this.options.mutationFn?this.options.mutationFn(n,s):Promise.reject(new Error("No mutationFn found")),onFail:(k,O)=>{Xt(this,Hr,ci).call(this,{type:"failed",failureCount:k,error:O})},onPause:()=>{Xt(this,Hr,ci).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>W(this,dn).canRun(this)}));const i=this.state.status==="pending",o=!W(this,qo).canStart();try{if(i)r();else{Xt(this,Hr,ci).call(this,{type:"pending",variables:n,isPaused:o}),await((l=(a=W(this,dn).config).onMutate)==null?void 0:l.call(a,n,this,s));const O=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,n,s));O!==this.state.context&&Xt(this,Hr,ci).call(this,{type:"pending",context:O,variables:n,isPaused:o})}const k=await W(this,qo).start();return await((f=(h=W(this,dn).config).onSuccess)==null?void 0:f.call(h,k,n,this.state.context,this,s)),await((T=(m=this.options).onSuccess)==null?void 0:T.call(m,k,n,this.state.context,s)),await((_=(y=W(this,dn).config).onSettled)==null?void 0:_.call(y,k,null,this.state.variables,this.state.context,this,s)),await((p=(w=this.options).onSettled)==null?void 0:p.call(w,k,null,n,this.state.context,s)),Xt(this,Hr,ci).call(this,{type:"success",data:k}),k}catch(k){try{throw await((A=(v=W(this,dn).config).onError)==null?void 0:A.call(v,k,n,this.state.context,this,s)),await((L=(R=this.options).onError)==null?void 0:L.call(R,k,n,this.state.context,s)),await((S=(I=W(this,dn).config).onSettled)==null?void 0:S.call(I,void 0,k,this.state.variables,this.state.context,this,s)),await((C=(P=this.options).onSettled)==null?void 0:C.call(P,void 0,k,n,this.state.context,s)),k}finally{Xt(this,Hr,ci).call(this,{type:"error",error:k})}}finally{W(this,dn).runNext(this)}}},yd=new WeakMap,Wr=new WeakMap,dn=new WeakMap,qo=new WeakMap,Hr=new WeakSet,ci=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),fn.batch(()=>{W(this,Wr).forEach(s=>{s.onMutationUpdate(n)}),W(this,dn).notify({mutation:this,type:"updated",action:n})})},QA);function V3(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var vs,vr,vd,YA,M3=(YA=class extends um{constructor(e={}){super();Le(this,vs);Le(this,vr);Le(this,vd);this.config=e,_e(this,vs,new Set),_e(this,vr,new Map),_e(this,vd,0)}build(e,n,r){const s=new L3({client:e,mutationCache:this,mutationId:++ih(this,vd)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){W(this,vs).add(e);const n=xh(e);if(typeof n=="string"){const r=W(this,vr).get(n);r?r.push(e):W(this,vr).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(W(this,vs).delete(e)){const n=xh(e);if(typeof n=="string"){const r=W(this,vr).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&W(this,vr).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=xh(e);if(typeof n=="string"){const r=W(this,vr).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=xh(e);if(typeof n=="string"){const s=(r=W(this,vr).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){fn.batch(()=>{W(this,vs).forEach(e=>{this.notify({type:"removed",mutation:e})}),W(this,vs).clear(),W(this,vr).clear()})}getAll(){return Array.from(W(this,vs))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>FI(n,r))}findAll(e={}){return this.getAll().filter(n=>FI(e,n))}notify(e){fn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return fn.batch(()=>Promise.all(e.map(n=>n.continue().catch(gr))))}},vs=new WeakMap,vr=new WeakMap,vd=new WeakMap,YA);function xh(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Kr,XA,F3=(XA=class extends um{constructor(e={}){super();Le(this,Kr);this.config=e,_e(this,Kr,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??j_(s,n);let o=this.get(i);return o||(o=new D3({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){W(this,Kr).has(e.queryHash)||(W(this,Kr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=W(this,Kr).get(e.queryHash);n&&(e.destroy(),n===e&&W(this,Kr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){fn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return W(this,Kr).get(e)}getAll(){return[...W(this,Kr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>MI(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>MI(e,r)):n}notify(e){fn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){fn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){fn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Kr=new WeakMap,XA),mt,wi,_i,hl,fl,Ei,pl,ml,JA,U3=(JA=class{constructor(t={}){Le(this,mt);Le(this,wi);Le(this,_i);Le(this,hl);Le(this,fl);Le(this,Ei);Le(this,pl);Le(this,ml);_e(this,mt,t.queryCache||new F3),_e(this,wi,t.mutationCache||new M3),_e(this,_i,t.defaultOptions||{}),_e(this,hl,new Map),_e(this,fl,new Map),_e(this,Ei,0)}mount(){ih(this,Ei)._++,W(this,Ei)===1&&(_e(this,pl,WR.subscribe(async t=>{t&&(await this.resumePausedMutations(),W(this,mt).onFocus())})),_e(this,ml,ep.subscribe(async t=>{t&&(await this.resumePausedMutations(),W(this,mt).onOnline())})))}unmount(){var t,e;ih(this,Ei)._--,W(this,Ei)===0&&((t=W(this,pl))==null||t.call(this),_e(this,pl,void 0),(e=W(this,ml))==null||e.call(this),_e(this,ml,void 0))}isFetching(t){return W(this,mt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return W(this,wi).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=W(this,mt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=W(this,mt).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Rv(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return W(this,mt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=W(this,mt).get(r.queryHash),i=s==null?void 0:s.state.data,o=y3(e,i);if(o!==void 0)return W(this,mt).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return fn.batch(()=>W(this,mt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=W(this,mt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=W(this,mt);fn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=W(this,mt);return fn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=fn.batch(()=>W(this,mt).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(gr).catch(gr)}invalidateQueries(t,e={}){return fn.batch(()=>(W(this,mt).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=fn.batch(()=>W(this,mt).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(gr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(gr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=W(this,mt).build(this,e);return n.isStaleByTime(Rv(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(gr).catch(gr)}fetchInfiniteQuery(t){return t.behavior=zI(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(gr).catch(gr)}ensureInfiniteQueryData(t){return t.behavior=zI(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return ep.isOnline()?W(this,wi).resumePausedMutations():Promise.resolve()}getQueryCache(){return W(this,mt)}getMutationCache(){return W(this,wi)}getDefaultOptions(){return W(this,_i)}setDefaultOptions(t){_e(this,_i,t)}setQueryDefaults(t,e){W(this,hl).set(Ku(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...W(this,hl).values()],n={};return e.forEach(r=>{Gu(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){W(this,fl).set(Ku(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...W(this,fl).values()],n={};return e.forEach(r=>{Gu(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...W(this,_i).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=j_(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===B_&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...W(this,_i).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){W(this,mt).clear(),W(this,wi).clear()}},mt=new WeakMap,wi=new WeakMap,_i=new WeakMap,hl=new WeakMap,fl=new WeakMap,Ei=new WeakMap,pl=new WeakMap,ml=new WeakMap,JA),j3=b.createContext(void 0),B3=({client:t,children:e})=>(b.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),x.jsx(j3.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qu(){return Qu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qu.apply(this,arguments)}var Si;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Si||(Si={}));const WI="popstate";function $3(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return tp("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Yu(s)}return QR(e,n,null,t)}function z3(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=pa(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),tp("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:Yu(i))}function r(s,i){$_(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return QR(e,n,r,t)}function It(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function q3(){return Math.random().toString(36).substr(2,8)}function HI(t,e){return{usr:t.state,key:t.key,idx:e}}function tp(t,e,n,r){return n===void 0&&(n=null),Qu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?pa(e):e,{state:n,key:e&&e.key||r||q3()})}function Yu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function pa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function QR(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Si.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Qu({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Si.Pop;let _=d(),w=_==null?null:_-c;c=_,l&&l({action:a,location:y.location,delta:w})}function f(_,w){a=Si.Push;let p=tp(y.location,_,w);n&&n(p,_),c=d()+1;let v=HI(p,c),A=y.createHref(p);try{o.pushState(v,"",A)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;s.location.assign(A)}i&&l&&l({action:a,location:y.location,delta:1})}function m(_,w){a=Si.Replace;let p=tp(y.location,_,w);n&&n(p,_),c=d();let v=HI(p,c),A=y.createHref(p);o.replaceState(v,"",A),i&&l&&l({action:a,location:y.location,delta:0})}function T(_){let w=s.location.origin!=="null"?s.location.origin:s.location.href,p=typeof _=="string"?_:Yu(_);return p=p.replace(/ $/,"%20"),It(w,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,w)}let y={get action(){return a},get location(){return t(s,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(WI,h),l=_,()=>{s.removeEventListener(WI,h),l=null}},createHref(_){return e(s,_)},createURL:T,encodeLocation(_){let w=T(_);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:m,go(_){return o.go(_)}};return y}var KI;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(KI||(KI={}));function W3(t,e,n){return n===void 0&&(n="/"),H3(t,e,n)}function H3(t,e,n,r){let s=typeof e=="string"?pa(e):e,i=z_(s.pathname||"/",n);if(i==null)return null;let o=YR(t);K3(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=ij(i);a=nj(o[l],c)}return a}function YR(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(It(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Li([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(It(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),YR(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:ej(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of XR(i.path))s(i,o,l)}),e}function XR(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=XR(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function K3(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:tj(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const G3=/^:[\w-]+$/,Q3=3,Y3=2,X3=1,J3=10,Z3=-2,GI=t=>t==="*";function ej(t,e){let n=t.split("/"),r=n.length;return n.some(GI)&&(r+=Z3),e&&(r+=Y3),n.filter(s=>!GI(s)).reduce((s,i)=>s+(G3.test(i)?Q3:i===""?X3:J3),r)}function tj(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function nj(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=rj({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Li([i,h.pathname]),pathnameBase:cj(Li([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Li([i,h.pathnameBase]))}return o}function rj(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=sj(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let y=a[h]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const T=a[h];return m&&!T?c[f]=void 0:c[f]=(T||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function sj(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),$_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function ij(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function z_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function oj(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?pa(t):t;return{pathname:n?n.startsWith("/")?n:aj(n,e):e,search:uj(r),hash:dj(s)}}function aj(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Kg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function lj(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function q_(t,e){let n=lj(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function W_(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=pa(t):(s=Qu({},t),It(!s.pathname||!s.pathname.includes("?"),Kg("?","pathname","search",s)),It(!s.pathname||!s.pathname.includes("#"),Kg("#","pathname","hash",s)),It(!s.search||!s.search.includes("#"),Kg("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=oj(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Li=t=>t.join("/").replace(/\/\/+/g,"/"),cj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),uj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,dj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function hj(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const JR=["post","put","patch","delete"];new Set(JR);const fj=["get",...JR];new Set(fj);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xu(){return Xu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xu.apply(this,arguments)}const H_=b.createContext(null),pj=b.createContext(null),ro=b.createContext(null),hm=b.createContext(null),$s=b.createContext({outlet:null,matches:[],isDataRoute:!1}),ZR=b.createContext(null);function mj(t,e){let{relative:n}=e===void 0?{}:e;Zl()||It(!1);let{basename:r,navigator:s}=b.useContext(ro),{hash:i,pathname:o,search:a}=tC(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Li([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Zl(){return b.useContext(hm)!=null}function us(){return Zl()||It(!1),b.useContext(hm).location}function eC(t){b.useContext(ro).static||b.useLayoutEffect(t)}function Pd(){let{isDataRoute:t}=b.useContext($s);return t?Pj():gj()}function gj(){Zl()||It(!1);let t=b.useContext(H_),{basename:e,future:n,navigator:r}=b.useContext(ro),{matches:s}=b.useContext($s),{pathname:i}=us(),o=JSON.stringify(q_(s,n.v7_relativeSplatPath)),a=b.useRef(!1);return eC(()=>{a.current=!0}),b.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=W_(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Li([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}function HH(){let{matches:t}=b.useContext($s),e=t[t.length-1];return e?e.params:{}}function tC(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=b.useContext(ro),{matches:s}=b.useContext($s),{pathname:i}=us(),o=JSON.stringify(q_(s,r.v7_relativeSplatPath));return b.useMemo(()=>W_(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function yj(t,e){return vj(t,e)}function vj(t,e,n,r){Zl()||It(!1);let{navigator:s}=b.useContext(ro),{matches:i}=b.useContext($s),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=us(),d;if(e){var h;let _=typeof e=="string"?pa(e):e;l==="/"||(h=_.pathname)!=null&&h.startsWith(l)||It(!1),d=_}else d=c;let f=d.pathname||"/",m=f;if(l!=="/"){let _=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(_.length).join("/")}let T=W3(t,{pathname:m}),y=Ij(T&&T.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:Li([l,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:Li([l,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),i,n,r);return e&&y?b.createElement(hm.Provider,{value:{location:Xu({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Si.Pop}},y):y}function wj(){let t=xj(),e=hj(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:s},n):null,null)}const _j=b.createElement(wj,null);class Ej extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement($s.Provider,{value:this.props.routeContext},b.createElement(ZR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Tj(t){let{routeContext:e,match:n,children:r}=t,s=b.useContext(H_);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement($s.Provider,{value:e},r)}function Ij(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||It(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:m}=n,T=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||T){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let m,T=!1,y=null,_=null;n&&(m=a&&h.route.id?a[h.route.id]:void 0,y=h.route.errorElement||_j,l&&(c<0&&f===0?(Rj("route-fallback"),T=!0,_=null):c===f&&(T=!0,_=h.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,f+1)),p=()=>{let v;return m?v=y:T?v=_:h.route.Component?v=b.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=d,b.createElement(Tj,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:v})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?b.createElement(Ej,{location:n.location,revalidation:n.revalidation,component:y,error:m,children:p(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):p()},null)}var nC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(nC||{}),rC=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(rC||{});function Sj(t){let e=b.useContext(H_);return e||It(!1),e}function bj(t){let e=b.useContext(pj);return e||It(!1),e}function Aj(t){let e=b.useContext($s);return e||It(!1),e}function sC(t){let e=Aj(),n=e.matches[e.matches.length-1];return n.route.id||It(!1),n.route.id}function xj(){var t;let e=b.useContext(ZR),n=bj(),r=sC();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Pj(){let{router:t}=Sj(nC.UseNavigateStable),e=sC(rC.UseNavigateStable),n=b.useRef(!1);return eC(()=>{n.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Xu({fromRouteId:e},i)))},[t,e])}const QI={};function Rj(t,e,n){QI[t]||(QI[t]=!0)}function iC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function KH(t){let{to:e,replace:n,state:r,relative:s}=t;Zl()||It(!1);let{future:i,static:o}=b.useContext(ro),{matches:a}=b.useContext($s),{pathname:l}=us(),c=Pd(),d=W_(e,q_(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return b.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function ie(t){It(!1)}function oC(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Si.Pop,navigator:i,static:o=!1,future:a}=t;Zl()&&It(!1);let l=e.replace(/^\/*/,"/"),c=b.useMemo(()=>({basename:l,navigator:i,static:o,future:Xu({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=pa(r));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:T="default"}=r,y=b.useMemo(()=>{let _=z_(d,l);return _==null?null:{location:{pathname:_,search:h,hash:f,state:m,key:T},navigationType:s}},[l,d,h,f,m,T,s]);return y==null?null:b.createElement(ro.Provider,{value:c},b.createElement(hm.Provider,{children:n,value:y}))}function YI(t){let{children:e,location:n}=t;return yj(Dv(e),n)}new Promise(()=>{});function Dv(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(r,s)=>{if(!b.isValidElement(r))return;let i=[...e,s];if(r.type===b.Fragment){n.push.apply(n,Dv(r.props.children,i));return}r.type!==ie&&It(!1),!r.props.index||!r.props.children||It(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Dv(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nv(){return Nv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nv.apply(this,arguments)}function Cj(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function kj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Dj(t,e){return t.button===0&&(!e||e==="_self")&&!kj(t)}function Ov(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function Nj(t,e){let n=Ov(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const Oj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Lj="6";try{window.__reactRouterVersion=Lj}catch{}const Vj="startTransition",np=kw[Vj];function Mj(t){let{basename:e,children:n,future:r,window:s}=t,i=b.useRef();i.current==null&&(i.current=$3({window:s,v5Compat:!0}));let o=i.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=b.useCallback(h=>{c&&np?np(()=>l(h)):l(h)},[l,c]);return b.useLayoutEffect(()=>o.listen(d),[o,d]),b.useEffect(()=>iC(r),[r]),b.createElement(oC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}function Fj(t){let{basename:e,children:n,future:r,window:s}=t,i=b.useRef();i.current==null&&(i.current=z3({window:s,v5Compat:!0}));let o=i.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=b.useCallback(h=>{c&&np?np(()=>l(h)):l(h)},[l,c]);return b.useLayoutEffect(()=>o.listen(d),[o,d]),b.useEffect(()=>iC(r),[r]),b.createElement(oC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const Uj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",jj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bj=b.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=Cj(e,Oj),{basename:m}=b.useContext(ro),T,y=!1;if(typeof c=="string"&&jj.test(c)&&(T=c,Uj))try{let v=new URL(window.location.href),A=c.startsWith("//")?new URL(v.protocol+c):new URL(c),R=z_(A.pathname,m);A.origin===v.origin&&R!=null?c=R+A.search+A.hash:y=!0}catch{}let _=mj(c,{relative:s}),w=$j(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function p(v){r&&r(v),v.defaultPrevented||w(v)}return b.createElement("a",Nv({},f,{href:T||_,onClick:y||i?r:p,ref:n,target:l}))});var XI;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(XI||(XI={}));var JI;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(JI||(JI={}));function $j(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=Pd(),c=us(),d=tC(t,{relative:o});return b.useCallback(h=>{if(Dj(h,n)){h.preventDefault();let f=r!==void 0?r:Yu(c)===Yu(d);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}function GH(t){let e=b.useRef(Ov(t)),n=b.useRef(!1),r=us(),s=b.useMemo(()=>Nj(r.search,n.current?null:e.current),[r.search]),i=Pd(),o=b.useCallback((a,l)=>{const c=Ov(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}const aC=b.createContext(void 0),zj=({children:t})=>{const[e,n]=b.useState("medium"),[r,s]=b.useState(!1),[i,o]=b.useState(!1);b.useEffect(()=>{const l=()=>{const c=window.innerWidth<=768;s(c)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),b.useEffect(()=>{try{const l=!!window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window<"u"&&window.location&&window.location.protocol==="file:";o(l)}catch{o(!1)}},[]),b.useEffect(()=>{const l=["appFontSize","desktopFontSize","mobileFontSize"];for(const c of l){const d=localStorage.getItem(c);if(d&&["small","medium","large"].includes(d)){n(d);break}}},[]),b.useEffect(()=>{const l=document.documentElement;l.classList.remove("font-size-small","font-size-medium","font-size-large"),l.classList.add(`font-size-${e}`)},[e]);const a=l=>{n(l),localStorage.setItem("appFontSize",l),i&&localStorage.setItem("desktopFontSize",l)};return x.jsx(aC.Provider,{value:{fontSize:e,setFontSize:a,isMobile:r,isDesktopApp:i},children:t})},QH=()=>{const t=b.useContext(aC);if(t===void 0)throw new Error("useFontSize must be used within a FontSizeProvider");return t},qj=ZP("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),du=b.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?YV:"button";return x.jsx(o,{className:_n(qj({variant:e,size:n,className:t})),ref:i,...s})});du.displayName="Button";const Lv=b.forwardRef(({className:t,type:e,...n},r)=>{const s={...n};return Object.prototype.hasOwnProperty.call(s,"value")&&s.value===void 0&&(s.value=""),x.jsx("input",{type:e,className:_n("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s})});Lv.displayName="Input";const Wj=()=>{};var ZI={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Hj=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},K_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),r.push(n[d],n[h],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(lC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Hj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new Kj;const f=i<<2|a>>4;if(r.push(f),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const T=c<<6&192|h;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Kj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Gj=function(t){const e=lC(t);return K_.encodeByteArray(e,!0)},rp=function(t){return Gj(t).replace(/\./g,"")},cC=function(t){try{return K_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj=()=>uC().__FIREBASE_DEFAULTS__,Yj=()=>{if(typeof process>"u"||typeof ZI>"u")return;const t=ZI.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Xj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&cC(t[1]);return e&&JSON.parse(e)},fm=()=>{try{return Wj()||Qj()||Yj()||Xj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Jj=t=>{var e,n;return(n=(e=fm())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},dC=t=>{const e=Jj(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},hC=()=>{var t;return(t=fm())==null?void 0:t.config},Zj=t=>{var e;return(e=fm())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function G_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e6(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[rp(JSON.stringify(n)),rp(JSON.stringify(o)),""].join(".")}const hu={};function t6(){const t={prod:[],emulator:[]};for(const e of Object.keys(hu))hu[e]?t.emulator.push(e):t.prod.push(e);return t}function n6(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let eS=!1;function fC(t,e){if(typeof window>"u"||typeof document>"u"||!zs(window.location.host)||hu[t]===e||hu[t]||eS)return;hu[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=t6().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{eS=!0,o()},f}function d(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=n6(r),m=n("text"),T=document.getElementById(m)||document.createElement("span"),y=n("learnmore"),_=document.getElementById(y)||document.createElement("a"),w=n("preprendIcon"),p=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const v=f.element;a(v),d(_,y);const A=c();l(p,w),v.append(p,T,_,A),document.body.appendChild(v)}i?(T.innerText="Preview backend disconnected.",p.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(p.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function r6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qt())}function pC(){var e;const t=(e=fm())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function s6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function i6(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function o6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function a6(){const t=Qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function mC(){return!pC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gC(){return!pC()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Q_(){try{return typeof indexedDB=="object"}catch{return!1}}function l6(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6="FirebaseError";class Dr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=c6,Object.setPrototypeOf(this,Dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ec.prototype.create)}}class ec{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?u6(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Dr(s,a,r)}}function u6(t,e){return t.replace(d6,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const d6=/\{\$([^}]+)}/g;function bl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(tS(i)&&tS(o)){if(!bl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function tS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Kc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Gc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function h6(t,e){const n=new f6(t,e);return n.subscribe.bind(n)}class f6{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");p6(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Gg),s.error===void 0&&(s.error=Gg),s.complete===void 0&&(s.complete=Gg);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function p6(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Gg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YH=4*60*60*1e3;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(t){return t&&t._delegate?t._delegate:t}class Cr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Vv;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(y6(e))try{this.getOrInitializeService({instanceIdentifier:vo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=vo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vo){return this.instances.has(e)}getOptions(e=vo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:g6(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=vo){return this.component?this.component.multipleInstances?e:vo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function g6(t){return t===vo?void 0:t}function y6(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new m6(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(De||(De={}));const w6={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},_6=De.INFO,E6={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},T6=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=E6[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pm{constructor(e){this.name=e,this._logLevel=_6,this._logHandler=T6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?w6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const I6=(t,e)=>e.some(n=>t instanceof n);let nS,rS;function S6(){return nS||(nS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function b6(){return rS||(rS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vC=new WeakMap,Mv=new WeakMap,wC=new WeakMap,Qg=new WeakMap,Y_=new WeakMap;function A6(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Vi(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&vC.set(n,t)}).catch(()=>{}),Y_.set(e,t),e}function x6(t){if(Mv.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Mv.set(t,e)}let Fv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Mv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function P6(t){Fv=t(Fv)}function R6(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Yg(this),e,...n);return wC.set(r,e.sort?e.sort():[e]),Vi(r)}:b6().includes(t)?function(...e){return t.apply(Yg(this),e),Vi(vC.get(this))}:function(...e){return Vi(t.apply(Yg(this),e))}}function C6(t){return typeof t=="function"?R6(t):(t instanceof IDBTransaction&&x6(t),I6(t,S6())?new Proxy(t,Fv):t)}function Vi(t){if(t instanceof IDBRequest)return A6(t);if(Qg.has(t))return Qg.get(t);const e=C6(t);return e!==t&&(Qg.set(t,e),Y_.set(e,t)),e}const Yg=t=>Y_.get(t);function k6(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Vi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Vi(o.result),l.oldVersion,l.newVersion,Vi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const D6=["get","getKey","getAll","getAllKeys","count"],N6=["put","add","delete","clear"],Xg=new Map;function sS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xg.get(e))return Xg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=N6.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||D6.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Xg.set(e,i),i}P6(t=>({...t,get:(e,n,r)=>sS(e,n)||t.get(e,n,r),has:(e,n)=>!!sS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(L6(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function L6(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Uv="@firebase/app",iS="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new pm("@firebase/app"),V6="@firebase/app-compat",M6="@firebase/analytics-compat",F6="@firebase/analytics",U6="@firebase/app-check-compat",j6="@firebase/app-check",B6="@firebase/auth",$6="@firebase/auth-compat",z6="@firebase/database",q6="@firebase/data-connect",W6="@firebase/database-compat",H6="@firebase/functions",K6="@firebase/functions-compat",G6="@firebase/installations",Q6="@firebase/installations-compat",Y6="@firebase/messaging",X6="@firebase/messaging-compat",J6="@firebase/performance",Z6="@firebase/performance-compat",eB="@firebase/remote-config",tB="@firebase/remote-config-compat",nB="@firebase/storage",rB="@firebase/storage-compat",sB="@firebase/firestore",iB="@firebase/ai",oB="@firebase/firestore-compat",aB="firebase",lB="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv="[DEFAULT]",cB={[Uv]:"fire-core",[V6]:"fire-core-compat",[F6]:"fire-analytics",[M6]:"fire-analytics-compat",[j6]:"fire-app-check",[U6]:"fire-app-check-compat",[B6]:"fire-auth",[$6]:"fire-auth-compat",[z6]:"fire-rtdb",[q6]:"fire-data-connect",[W6]:"fire-rtdb-compat",[H6]:"fire-fn",[K6]:"fire-fn-compat",[G6]:"fire-iid",[Q6]:"fire-iid-compat",[Y6]:"fire-fcm",[X6]:"fire-fcm-compat",[J6]:"fire-perf",[Z6]:"fire-perf-compat",[eB]:"fire-rc",[tB]:"fire-rc-compat",[nB]:"fire-gcs",[rB]:"fire-gcs-compat",[sB]:"fire-fst",[oB]:"fire-fst-compat",[iB]:"fire-vertex","fire-js":"fire-js",[aB]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp=new Map,uB=new Map,Bv=new Map;function oS(t,e){try{t.container.addComponent(e)}catch(n){Ms.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function as(t){const e=t.name;if(Bv.has(e))return Ms.debug(`There were multiple attempts to register component ${e}.`),!1;Bv.set(e,t);for(const n of sp.values())oS(n,t);for(const n of uB.values())oS(n,t);return!0}function mm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function jn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mi=new ec("app","Firebase",dB);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Cr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd=lB;function _C(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:jv,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Mi.create("bad-app-name",{appName:String(s)});if(n||(n=hC()),!n)throw Mi.create("no-options");const i=sp.get(s);if(i){if(bl(n,i.options)&&bl(r,i.config))return i;throw Mi.create("duplicate-app",{appName:s})}const o=new v6(s);for(const l of Bv.values())o.addComponent(l);const a=new hB(n,r,o);return sp.set(s,a),a}function EC(t=jv){const e=sp.get(t);if(!e&&t===jv&&hC())return _C();if(!e)throw Mi.create("no-app",{appName:t});return e}function Kn(t,e,n){let r=cB[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ms.warn(o.join(" "));return}as(new Cr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fB="firebase-heartbeat-database",pB=1,Ju="firebase-heartbeat-store";let Jg=null;function TC(){return Jg||(Jg=k6(fB,pB,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ju)}catch(n){console.warn(n)}}}}).catch(t=>{throw Mi.create("idb-open",{originalErrorMessage:t.message})})),Jg}async function mB(t){try{const n=(await TC()).transaction(Ju),r=await n.objectStore(Ju).get(IC(t));return await n.done,r}catch(e){if(e instanceof Dr)Ms.warn(e.message);else{const n=Mi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ms.warn(n.message)}}}async function aS(t,e){try{const r=(await TC()).transaction(Ju,"readwrite");await r.objectStore(Ju).put(e,IC(t)),await r.done}catch(n){if(n instanceof Dr)Ms.warn(n.message);else{const r=Mi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ms.warn(r.message)}}}function IC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gB=1024,yB=30;class vB{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _B(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=lS();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>yB){const o=EB(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ms.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=lS(),{heartbeatsToSend:r,unsentEntries:s}=wB(this._heartbeatsCache.heartbeats),i=rp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ms.warn(n),""}}}function lS(){return new Date().toISOString().substring(0,10)}function wB(t,e=gB){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),cS(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),cS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class _B{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Q_()?l6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await mB(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return aS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return aS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function cS(t){return rp(JSON.stringify({version:2,heartbeats:t})).length}function EB(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TB(t){as(new Cr("platform-logger",e=>new O6(e),"PRIVATE")),as(new Cr("heartbeat",e=>new vB(e),"PRIVATE")),Kn(Uv,iS,t),Kn(Uv,iS,"esm2020"),Kn("fire-js","")}TB("");function SC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const IB=SC,bC=new ec("auth","Firebase",SC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip=new pm("@firebase/auth");function SB(t,...e){ip.logLevel<=De.WARN&&ip.warn(`Auth (${Rd}): ${t}`,...e)}function lf(t,...e){ip.logLevel<=De.ERROR&&ip.error(`Auth (${Rd}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(t,...e){throw J_(t,...e)}function X_(t,...e){return J_(t,...e)}function AC(t,e,n){const r={...IB(),[e]:n};return new ec("auth","Firebase",r).create(e,{appName:t.name})}function Fi(t){return AC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function J_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return bC.create(t,...e)}function Ne(t,e,...n){if(!t)throw J_(e,...n)}function Is(t){const e="INTERNAL ASSERTION FAILED: "+t;throw lf(e),new Error(e)}function op(t,e){t||Is(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bB(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function xC(){return uS()==="http:"||uS()==="https:"}function uS(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xC()||i6()||"connection"in navigator)?navigator.onLine:!0}function xB(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n){this.shortDelay=e,this.longDelay=n,op(n>e,"Short delay should be less than long delay!"),this.isMobile=r6()||o6()}get(){return AB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PB(t,e){op(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Is("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Is("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Is("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],kB=new Cd(3e4,6e4);function qs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ds(t,e,n,r,s={}){return RC(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=yC({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...i};return s6()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&zs(t.emulatorConfig.host)&&(c.credentials="include"),PC.fetch()(await CC(t,t.config.apiHost,n,a),c)})}async function RC(t,e,n){t._canInitEmulator=!1;const r={...RB,...e};try{const s=new NB(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ph(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ph(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ph(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ph(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw AC(t,d,c);ra(t,d)}}catch(s){if(s instanceof Dr)throw s;ra(t,"network-request-failed",{message:String(s)})}}async function gm(t,e,n,r,s={}){const i=await ds(t,e,n,r,s);return"mfaPendingCredential"in i&&ra(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function CC(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?PB(t.config,s):`${t.config.apiScheme}://${s}`;return CB.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function DB(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NB{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(X_(this.auth,"network-request-failed")),kB.get())})}}function Ph(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=X_(t,e,r);return s.customData._tokenResponse=n,s}function dS(t){return t!==void 0&&t.enterprise!==void 0}class OB{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return DB(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function LB(t,e){return ds(t,"GET","/v2/recaptchaConfig",qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VB(t,e){return ds(t,"POST","/v1/accounts:delete",e)}async function ap(t,e){return ds(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function MB(t,e=!1){const n=We(t),r=await n.getIdToken(e),s=Z_(r);Ne(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:fu(Zg(s.auth_time)),issuedAtTime:fu(Zg(s.iat)),expirationTime:fu(Zg(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Zg(t){return Number(t)*1e3}function Z_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return lf("JWT malformed, contained fewer than 3 sections"),null;try{const s=cC(n);return s?JSON.parse(s):(lf("Failed to decode base64 JWT payload"),null)}catch(s){return lf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function hS(t){const e=Z_(t);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Dr&&FB(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function FB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=fu(this.lastLoginAt),this.creationTime=fu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lp(t){var h;const e=t.auth,n=await t.getIdToken(),r=await Zu(t,ap(e,{idToken:n}));Ne(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?kC(s.providerUserInfo):[],o=BB(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new $v(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function jB(t){const e=We(t);await lp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BB(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function kC(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $B(t,e){const n=await RC(t,{},async()=>{const r=yC({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await CC(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&zs(t.emulatorConfig.host)&&(l.credentials="include"),PC.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function zB(t,e){return ds(t,"POST","/v2/accounts:revokeToken",qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const n=hS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await $B(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new sl;return r&&(Ne(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Ne(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Ne(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new sl,this.toJSON())}_performRefresh(){return Is("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(t,e){Ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Tr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new UB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new $v(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Zu(this,this.stsTokenManager.getToken(this.auth,e));return Ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return MB(this,e)}reload(){return jB(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Tr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await lp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(Fi(this.auth));const e=await this.getIdToken();return await Zu(this,VB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:m,providerData:T,stsTokenManager:y}=n;Ne(h&&y,e,"internal-error");const _=sl.fromJSON(this.name,y);Ne(typeof h=="string",e,"internal-error"),ii(r,e.name),ii(s,e.name),Ne(typeof f=="boolean",e,"internal-error"),Ne(typeof m=="boolean",e,"internal-error"),ii(i,e.name),ii(o,e.name),ii(a,e.name),ii(l,e.name),ii(c,e.name),ii(d,e.name);const w=new Tr({uid:h,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:_,createdAt:c,lastLoginAt:d});return T&&Array.isArray(T)&&(w.providerData=T.map(p=>({...p}))),l&&(w._redirectEventId=l),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new sl;s.updateFromServerResponse(n);const i=new Tr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await lp(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Ne(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?kC(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new sl;a.updateFromIdToken(r);const l=new Tr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new $v(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS=new Map;function Co(t){op(t instanceof Function,"Expected a class definition");let e=fS.get(t);return e?(op(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,fS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}DC.type="NONE";const zv=DC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(t,e,n){return`firebase:${t}:${e}:${n}`}class il{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=ey(this.userKey,s.apiKey,i),this.fullPersistenceKey=ey("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ap(this.auth,{idToken:e}).catch(()=>{});return n?Tr._fromGetAccountInfoResponse(this.auth,n,e):null}return Tr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new il(Co(zv),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Co(zv);const o=ey(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const f=await ap(e,{idToken:d}).catch(()=>{});if(!f)break;h=await Tr._fromGetAccountInfoResponse(e,f,d)}else h=Tr._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new il(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new il(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qB(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(LC(e))return"Blackberry";if(VC(e))return"Webos";if(WB(e))return"Safari";if((e.includes("chrome/")||HB(e))&&!e.includes("edge/"))return"Chrome";if(OC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function qB(t=Qt()){return/firefox\//i.test(t)}function WB(t=Qt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function HB(t=Qt()){return/crios\//i.test(t)}function NC(t=Qt()){return/iemobile/i.test(t)}function OC(t=Qt()){return/android/i.test(t)}function LC(t=Qt()){return/blackberry/i.test(t)}function VC(t=Qt()){return/webos/i.test(t)}function KB(t=Qt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function GB(){return a6()&&document.documentMode===10}function QB(t=Qt()){return KB(t)||OC(t)||VC(t)||LC(t)||/windows phone/i.test(t)||NC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(t,e=[]){let n;switch(t){case"Browser":n=pS(Qt());break;case"Worker":n=`${pS(Qt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Rd}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XB(t,e={}){return ds(t,"GET","/v2/passwordPolicy",qs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JB=6;class ZB{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??JB,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mS(this),this.idTokenSubscription=new mS(this),this.beforeStateQueue=new YB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Co(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await il.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ap(this,{idToken:e}),r=await Tr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(jn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await lp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=xB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jn(this.app))return Promise.reject(Fi(this));const n=e?We(e):null;return n&&Ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(Fi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jn(this.app)?Promise.reject(Fi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Co(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await XB(this),n=new ZB(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ec("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await zB(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Co(e)||this._popupRedirectResolver;Ne(n,this,"argument-error"),this.redirectPersistenceManager=await il.create(this,[Co(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=MC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&SB(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function tc(t){return We(t)}class mS{constructor(e){this.auth=e,this.observer=null,this.addObserver=h6(n=>this.observer=n)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eE={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function t5(t){eE=t}function n5(t){return eE.loadJS(t)}function r5(){return eE.recaptchaEnterpriseScript}class s5{constructor(){this.enterprise=new i5}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class i5{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const o5="recaptcha-enterprise",FC="NO_RECAPTCHA";class a5{constructor(e){this.type=o5,this.auth=tc(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{LB(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new OB(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;dS(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(FC)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new s5().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&dS(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=r5();l.length!==0&&(l+=a),n5(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function gS(t,e,n,r=!1,s=!1){const i=new a5(t);let o;if(s)o=FC;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function cp(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await gS(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await gS(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5(t,e){const n=mm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(bl(i,e??{}))return s;ra(s,"already-initialized")}return n.initialize({options:e})}function c5(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Co);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Is("not implemented")}_getIdTokenResponse(e){return Is("not implemented")}_linkToIdToken(e,n){return Is("not implemented")}_getReauthenticationResolver(e){return Is("not implemented")}}async function d5(t,e){return ds(t,"POST","/v1/accounts:update",e)}async function h5(t,e){return ds(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f5(t,e){return gm(t,"POST","/v1/accounts:signInWithPassword",qs(t,e))}async function p5(t,e){return ds(t,"POST","/v1/accounts:sendOobCode",qs(t,e))}async function m5(t,e){return p5(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g5(t,e){return gm(t,"POST","/v1/accounts:signInWithEmailLink",qs(t,e))}async function y5(t,e){return gm(t,"POST","/v1/accounts:signInWithEmailLink",qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed extends u5{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ed(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ed(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cp(e,n,"signInWithPassword",f5);case"emailLink":return g5(e,{email:this._email,oobCode:this._password});default:ra(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cp(e,r,"signUpPassword",h5);case"emailLink":return y5(e,{idToken:n,email:this._email,oobCode:this._password});default:ra(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v5(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function w5(t){const e=Kc(Gc(t)).link,n=e?Kc(Gc(e)).deep_link_id:null,r=Kc(Gc(t)).deep_link_id;return(r?Kc(Gc(r)).link:null)||r||n||e||t}class tE{constructor(e){const n=Kc(Gc(e)),r=n.apiKey??null,s=n.oobCode??null,i=v5(n.mode??null);Ne(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=w5(e);try{return new tE(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(){this.providerId=nc.PROVIDER_ID}static credential(e,n){return ed._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=tE.parseLink(n);return Ne(r,"argument-error"),ed._fromEmailAndCode(e,r.code,r.tenantId)}}nc.PROVIDER_ID="password";nc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";nc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _5(t,e){return gm(t,"POST","/v1/accounts:signUp",qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Tr._fromIdTokenResponse(e,r,s),o=yS(r);return new Al({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=yS(r);return new Al({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function yS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up extends Dr{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,up.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new up(e,n,r,s)}}function UC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?up._fromErrorAndOperation(t,i,e,r):i})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E5(t,e,n=!1){const{auth:r}=t;if(jn(r.app))return Promise.reject(Fi(r));const s="reauthenticate";try{const i=await Zu(t,UC(r,s,e,t),n);Ne(i.idToken,r,"internal-error");const o=Z_(i.idToken);Ne(o,r,"internal-error");const{sub:a}=o;return Ne(t.uid===a,r,"user-mismatch"),Al._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ra(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T5(t,e,n=!1){if(jn(t.app))return Promise.reject(Fi(t));const r="signIn",s=await UC(t,r,e),i=await Al._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function I5(t,e){return T5(tc(t),e)}async function XH(t,e){return E5(We(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jC(t){const e=tc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function S5(t,e,n){const r=tc(t);await cp(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",m5)}async function vS(t,e,n){if(jn(t.app))return Promise.reject(Fi(t));const r=tc(t),o=await cp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_5).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&jC(t),l}),a=await Al._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function b5(t,e,n){return jn(t.app)?Promise.reject(Fi(t)):I5(We(t),nc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&jC(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A5(t,e){return ds(t,"POST","/v1/accounts:createAuthUri",qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x5(t,e){const n=xC()?bB():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await A5(We(t),r);return s||[]}function JH(t,e){return P5(We(t),null,e)}async function P5(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await Zu(t,d5(r,i));await t._updateTokensIfNecessary(o,!0)}function R5(t,e,n,r){return We(t).onAuthStateChanged(e,n,r)}function wS(t){return We(t).signOut()}const _S="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_S,"1"),this.storage.removeItem(_S),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5=1e3,k5=10;class $C extends BC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=QB(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);GB()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,k5):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},C5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}$C.type="LOCAL";const D5=$C;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5 extends BC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}N5.type="SESSION";new Cd(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Cd(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Cd(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Cd(5e3,15e3);var ES="@firebase/auth",TS="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L5(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function V5(t){as(new Cr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ne(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:MC(t)},c=new e5(r,s,i,l);return c5(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),as(new Cr("auth-internal",e=>{const n=tc(e.getProvider("auth").getImmediate());return(r=>new O5(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kn(ES,TS,L5(t)),Kn(ES,TS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M5=5*60;Zj("authIdTokenMaxAge");function F5(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}t5({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=X_("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",F5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});V5("Browser");var U5="firebase",j5="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kn(U5,j5,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B5=new Map,$5={activated:!1,tokenObservers:[]},z5={initialized:!1,enabled:!1};function kr(t){return B5.get(t)||{...$5}}function zC(){return z5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5="https://content-firebaseappcheck.googleapis.com/v1";const W5="exchangeDebugToken",IS={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},ZH=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e,n,r,s,i){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=s,s>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Vv,this.pending.promise.catch(n=>{}),await K5(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Vv,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function K5(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G5={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},bi=new ec("appCheck","AppCheck",G5);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(t){if(!kr(t).activated)throw bi.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WC({url:t,body:e},n){const r={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&(r["X-Firebase-Client"]=h)}const i={method:"POST",body:JSON.stringify(e),headers:r};let o;try{o=await fetch(t,i)}catch(h){throw bi.create("fetch-network-error",{originalErrorMessage:h==null?void 0:h.message})}if(o.status!==200)throw bi.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(h){throw bi.create("fetch-parse-error",{originalErrorMessage:h==null?void 0:h.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw bi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=Number(l[1])*1e3,d=Date.now();return{token:a.token,expireTimeMillis:d+c,issuedAtTimeMillis:d}}function HC(t,e){const{projectId:n,appId:r,apiKey:s}=t.options;return{url:`${q5}/projects/${n}/apps/${r}:${W5}?key=${s}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q5="firebase-app-check-database",Y5=1,qv="firebase-app-check-store";let Rh=null;function X5(){return Rh||(Rh=new Promise((t,e)=>{try{const n=indexedDB.open(Q5,Y5);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var s;e(bi.create("storage-open",{originalErrorMessage:(s=r.target.error)==null?void 0:s.message}))},n.onupgradeneeded=r=>{const s=r.target.result;switch(r.oldVersion){case 0:s.createObjectStore(qv,{keyPath:"compositeKey"})}}}catch(n){e(bi.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),Rh)}function J5(t,e){return Z5(e$(t),e)}async function Z5(t,e){const r=(await X5()).transaction(qv,"readwrite"),i=r.objectStore(qv).put({compositeKey:t,value:e});return new Promise((o,a)=>{i.onsuccess=l=>{o()},r.onerror=l=>{var c;a(bi.create("storage-set",{originalErrorMessage:(c=l.target.error)==null?void 0:c.message}))}})}function e$(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc=new pm("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(t,e){return Q_()?J5(t,e).catch(n=>{Qc.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(){return zC().enabled}async function GC(){const t=zC();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t$={error:"UNKNOWN_ERROR"};function n$(t){return K_.encodeString(JSON.stringify(t),!1)}async function Wv(t,e=!1,n=!1){const r=t.app;qC(r);const s=kr(r);let i=s.token,o;if(i&&!Yc(i)&&(s.token=void 0,i=void 0),!i){const c=await s.cachedTokenPromise;c&&(Yc(c)?i=c:await ty(r,void 0))}if(!e&&i&&Yc(i))return{token:i.token};let a=!1;if(KC())try{s.exchangeTokenPromise||(s.exchangeTokenPromise=WC(HC(r,await GC()),t.heartbeatServiceProvider).finally(()=>{s.exchangeTokenPromise=void 0}),a=!0);const c=await s.exchangeTokenPromise;return await ty(r,c),s.token=c,{token:c.token}}catch(c){return c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?Qc.warn(c.message):n&&Qc.error(c),ny(c)}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),a=!0),i=await kr(r).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?Qc.warn(c.message):n&&Qc.error(c),o=c}let l;return i?o?Yc(i)?l={token:i.token,internalError:o}:l=ny(o):(l={token:i.token},s.token=i,await ty(r,i)):l=ny(o),a&&o$(r,l),l}async function r$(t){const e=t.app;qC(e);const{provider:n}=kr(e);if(KC()){const r=await GC(),{token:s}=await WC(HC(e,r),t.heartbeatServiceProvider);return{token:s}}else{const{token:r}=await n.getToken();return{token:r}}}function s$(t,e,n,r){const{app:s}=t,i=kr(s),o={next:n,error:r,type:e};if(i.tokenObservers=[...i.tokenObservers,o],i.token&&Yc(i.token)){const a=i.token;Promise.resolve().then(()=>{n({token:a.token}),SS(t)}).catch(()=>{})}i.cachedTokenPromise.then(()=>SS(t))}function QC(t,e){const n=kr(t),r=n.tokenObservers.filter(s=>s.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function SS(t){const{app:e}=t,n=kr(e);let r=n.tokenRefresher;r||(r=i$(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function i$(t){const{app:e}=t;return new H5(async()=>{const n=kr(e);let r;if(n.token?r=await Wv(t,!0):r=await Wv(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=kr(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const s=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,s),Math.max(0,r-Date.now())}else return 0},IS.RETRIAL_MIN_WAIT,IS.RETRIAL_MAX_WAIT)}function o$(t,e){const n=kr(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Yc(t){return t.expireTimeMillis-Date.now()>0}function ny(t){return{token:n$(t$),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a${constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=kr(this.app);for(const n of e)QC(this.app,n.next);return Promise.resolve()}}function l$(t,e){return new a$(t,e)}function c$(t){return{getToken:e=>Wv(t,e),getLimitedUseToken:()=>r$(t),addTokenListener:e=>s$(t,"INTERNAL",e),removeTokenListener:e=>QC(t.app,e)}}const u$="@firebase/app-check",d$="0.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h$="app-check",bS="app-check-internal";function f$(){as(new Cr(h$,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return l$(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(bS).initialize()})),as(new Cr(bS,t=>{const e=t.getProvider("app-check").getImmediate();return c$(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Kn(u$,d$)}f$();var AS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ui,YC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,S){function P(){}P.prototype=S.prototype,I.F=S.prototype,I.prototype=new P,I.prototype.constructor=I,I.D=function(C,k,O){for(var D=Array(arguments.length-2),B=2;B<arguments.length;B++)D[B-2]=arguments[B];return S.prototype[k].apply(C,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,S,P){P||(P=0);const C=Array(16);if(typeof S=="string")for(var k=0;k<16;++k)C[k]=S.charCodeAt(P++)|S.charCodeAt(P++)<<8|S.charCodeAt(P++)<<16|S.charCodeAt(P++)<<24;else for(k=0;k<16;++k)C[k]=S[P++]|S[P++]<<8|S[P++]<<16|S[P++]<<24;S=I.g[0],P=I.g[1],k=I.g[2];let O=I.g[3],D;D=S+(O^P&(k^O))+C[0]+3614090360&4294967295,S=P+(D<<7&4294967295|D>>>25),D=O+(k^S&(P^k))+C[1]+3905402710&4294967295,O=S+(D<<12&4294967295|D>>>20),D=k+(P^O&(S^P))+C[2]+606105819&4294967295,k=O+(D<<17&4294967295|D>>>15),D=P+(S^k&(O^S))+C[3]+3250441966&4294967295,P=k+(D<<22&4294967295|D>>>10),D=S+(O^P&(k^O))+C[4]+4118548399&4294967295,S=P+(D<<7&4294967295|D>>>25),D=O+(k^S&(P^k))+C[5]+1200080426&4294967295,O=S+(D<<12&4294967295|D>>>20),D=k+(P^O&(S^P))+C[6]+2821735955&4294967295,k=O+(D<<17&4294967295|D>>>15),D=P+(S^k&(O^S))+C[7]+4249261313&4294967295,P=k+(D<<22&4294967295|D>>>10),D=S+(O^P&(k^O))+C[8]+1770035416&4294967295,S=P+(D<<7&4294967295|D>>>25),D=O+(k^S&(P^k))+C[9]+2336552879&4294967295,O=S+(D<<12&4294967295|D>>>20),D=k+(P^O&(S^P))+C[10]+4294925233&4294967295,k=O+(D<<17&4294967295|D>>>15),D=P+(S^k&(O^S))+C[11]+2304563134&4294967295,P=k+(D<<22&4294967295|D>>>10),D=S+(O^P&(k^O))+C[12]+1804603682&4294967295,S=P+(D<<7&4294967295|D>>>25),D=O+(k^S&(P^k))+C[13]+4254626195&4294967295,O=S+(D<<12&4294967295|D>>>20),D=k+(P^O&(S^P))+C[14]+2792965006&4294967295,k=O+(D<<17&4294967295|D>>>15),D=P+(S^k&(O^S))+C[15]+1236535329&4294967295,P=k+(D<<22&4294967295|D>>>10),D=S+(k^O&(P^k))+C[1]+4129170786&4294967295,S=P+(D<<5&4294967295|D>>>27),D=O+(P^k&(S^P))+C[6]+3225465664&4294967295,O=S+(D<<9&4294967295|D>>>23),D=k+(S^P&(O^S))+C[11]+643717713&4294967295,k=O+(D<<14&4294967295|D>>>18),D=P+(O^S&(k^O))+C[0]+3921069994&4294967295,P=k+(D<<20&4294967295|D>>>12),D=S+(k^O&(P^k))+C[5]+3593408605&4294967295,S=P+(D<<5&4294967295|D>>>27),D=O+(P^k&(S^P))+C[10]+38016083&4294967295,O=S+(D<<9&4294967295|D>>>23),D=k+(S^P&(O^S))+C[15]+3634488961&4294967295,k=O+(D<<14&4294967295|D>>>18),D=P+(O^S&(k^O))+C[4]+3889429448&4294967295,P=k+(D<<20&4294967295|D>>>12),D=S+(k^O&(P^k))+C[9]+568446438&4294967295,S=P+(D<<5&4294967295|D>>>27),D=O+(P^k&(S^P))+C[14]+3275163606&4294967295,O=S+(D<<9&4294967295|D>>>23),D=k+(S^P&(O^S))+C[3]+4107603335&4294967295,k=O+(D<<14&4294967295|D>>>18),D=P+(O^S&(k^O))+C[8]+1163531501&4294967295,P=k+(D<<20&4294967295|D>>>12),D=S+(k^O&(P^k))+C[13]+2850285829&4294967295,S=P+(D<<5&4294967295|D>>>27),D=O+(P^k&(S^P))+C[2]+4243563512&4294967295,O=S+(D<<9&4294967295|D>>>23),D=k+(S^P&(O^S))+C[7]+1735328473&4294967295,k=O+(D<<14&4294967295|D>>>18),D=P+(O^S&(k^O))+C[12]+2368359562&4294967295,P=k+(D<<20&4294967295|D>>>12),D=S+(P^k^O)+C[5]+4294588738&4294967295,S=P+(D<<4&4294967295|D>>>28),D=O+(S^P^k)+C[8]+2272392833&4294967295,O=S+(D<<11&4294967295|D>>>21),D=k+(O^S^P)+C[11]+1839030562&4294967295,k=O+(D<<16&4294967295|D>>>16),D=P+(k^O^S)+C[14]+4259657740&4294967295,P=k+(D<<23&4294967295|D>>>9),D=S+(P^k^O)+C[1]+2763975236&4294967295,S=P+(D<<4&4294967295|D>>>28),D=O+(S^P^k)+C[4]+1272893353&4294967295,O=S+(D<<11&4294967295|D>>>21),D=k+(O^S^P)+C[7]+4139469664&4294967295,k=O+(D<<16&4294967295|D>>>16),D=P+(k^O^S)+C[10]+3200236656&4294967295,P=k+(D<<23&4294967295|D>>>9),D=S+(P^k^O)+C[13]+681279174&4294967295,S=P+(D<<4&4294967295|D>>>28),D=O+(S^P^k)+C[0]+3936430074&4294967295,O=S+(D<<11&4294967295|D>>>21),D=k+(O^S^P)+C[3]+3572445317&4294967295,k=O+(D<<16&4294967295|D>>>16),D=P+(k^O^S)+C[6]+76029189&4294967295,P=k+(D<<23&4294967295|D>>>9),D=S+(P^k^O)+C[9]+3654602809&4294967295,S=P+(D<<4&4294967295|D>>>28),D=O+(S^P^k)+C[12]+3873151461&4294967295,O=S+(D<<11&4294967295|D>>>21),D=k+(O^S^P)+C[15]+530742520&4294967295,k=O+(D<<16&4294967295|D>>>16),D=P+(k^O^S)+C[2]+3299628645&4294967295,P=k+(D<<23&4294967295|D>>>9),D=S+(k^(P|~O))+C[0]+4096336452&4294967295,S=P+(D<<6&4294967295|D>>>26),D=O+(P^(S|~k))+C[7]+1126891415&4294967295,O=S+(D<<10&4294967295|D>>>22),D=k+(S^(O|~P))+C[14]+2878612391&4294967295,k=O+(D<<15&4294967295|D>>>17),D=P+(O^(k|~S))+C[5]+4237533241&4294967295,P=k+(D<<21&4294967295|D>>>11),D=S+(k^(P|~O))+C[12]+1700485571&4294967295,S=P+(D<<6&4294967295|D>>>26),D=O+(P^(S|~k))+C[3]+2399980690&4294967295,O=S+(D<<10&4294967295|D>>>22),D=k+(S^(O|~P))+C[10]+4293915773&4294967295,k=O+(D<<15&4294967295|D>>>17),D=P+(O^(k|~S))+C[1]+2240044497&4294967295,P=k+(D<<21&4294967295|D>>>11),D=S+(k^(P|~O))+C[8]+1873313359&4294967295,S=P+(D<<6&4294967295|D>>>26),D=O+(P^(S|~k))+C[15]+4264355552&4294967295,O=S+(D<<10&4294967295|D>>>22),D=k+(S^(O|~P))+C[6]+2734768916&4294967295,k=O+(D<<15&4294967295|D>>>17),D=P+(O^(k|~S))+C[13]+1309151649&4294967295,P=k+(D<<21&4294967295|D>>>11),D=S+(k^(P|~O))+C[4]+4149444226&4294967295,S=P+(D<<6&4294967295|D>>>26),D=O+(P^(S|~k))+C[11]+3174756917&4294967295,O=S+(D<<10&4294967295|D>>>22),D=k+(S^(O|~P))+C[2]+718787259&4294967295,k=O+(D<<15&4294967295|D>>>17),D=P+(O^(k|~S))+C[9]+3951481745&4294967295,I.g[0]=I.g[0]+S&4294967295,I.g[1]=I.g[1]+(k+(D<<21&4294967295|D>>>11))&4294967295,I.g[2]=I.g[2]+k&4294967295,I.g[3]=I.g[3]+O&4294967295}r.prototype.v=function(I,S){S===void 0&&(S=I.length);const P=S-this.blockSize,C=this.C;let k=this.h,O=0;for(;O<S;){if(k==0)for(;O<=P;)s(this,I,O),O+=this.blockSize;if(typeof I=="string"){for(;O<S;)if(C[k++]=I.charCodeAt(O++),k==this.blockSize){s(this,C),k=0;break}}else for(;O<S;)if(C[k++]=I[O++],k==this.blockSize){s(this,C),k=0;break}}this.h=k,this.o+=S},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var S=1;S<I.length-8;++S)I[S]=0;S=this.o*8;for(var P=I.length-8;P<I.length;++P)I[P]=S&255,S/=256;for(this.v(I),I=Array(16),S=0,P=0;P<4;++P)for(let C=0;C<32;C+=8)I[S++]=this.g[P]>>>C&255;return I};function i(I,S){var P=a;return Object.prototype.hasOwnProperty.call(P,I)?P[I]:P[I]=S(I)}function o(I,S){this.h=S;const P=[];let C=!0;for(let k=I.length-1;k>=0;k--){const O=I[k]|0;C&&O==S||(P[k]=O,C=!1)}this.g=P}var a={};function l(I){return-128<=I&&I<128?i(I,function(S){return new o([S|0],S<0?-1:0)}):new o([I|0],I<0?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return h;if(I<0)return _(c(-I));const S=[];let P=1;for(let C=0;I>=P;C++)S[C]=I/P|0,P*=4294967296;return new o(S,0)}function d(I,S){if(I.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(I.charAt(0)=="-")return _(d(I.substring(1),S));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=c(Math.pow(S,8));let C=h;for(let O=0;O<I.length;O+=8){var k=Math.min(8,I.length-O);const D=parseInt(I.substring(O,O+k),S);k<8?(k=c(Math.pow(S,k)),C=C.j(k).add(c(D))):(C=C.j(P),C=C.add(c(D)))}return C}var h=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(y(this))return-_(this).m();let I=0,S=1;for(let P=0;P<this.g.length;P++){const C=this.i(P);I+=(C>=0?C:4294967296+C)*S,S*=4294967296}return I},t.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(T(this))return"0";if(y(this))return"-"+_(this).toString(I);const S=c(Math.pow(I,6));var P=this;let C="";for(;;){const k=A(P,S).g;P=w(P,k.j(S));let O=((P.g.length>0?P.g[0]:P.h)>>>0).toString(I);if(P=k,T(P))return O+C;for(;O.length<6;)O="0"+O;C=O+C}},t.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function T(I){if(I.h!=0)return!1;for(let S=0;S<I.g.length;S++)if(I.g[S]!=0)return!1;return!0}function y(I){return I.h==-1}t.l=function(I){return I=w(this,I),y(I)?-1:T(I)?0:1};function _(I){const S=I.g.length,P=[];for(let C=0;C<S;C++)P[C]=~I.g[C];return new o(P,~I.h).add(f)}t.abs=function(){return y(this)?_(this):this},t.add=function(I){const S=Math.max(this.g.length,I.g.length),P=[];let C=0;for(let k=0;k<=S;k++){let O=C+(this.i(k)&65535)+(I.i(k)&65535),D=(O>>>16)+(this.i(k)>>>16)+(I.i(k)>>>16);C=D>>>16,O&=65535,D&=65535,P[k]=D<<16|O}return new o(P,P[P.length-1]&-2147483648?-1:0)};function w(I,S){return I.add(_(S))}t.j=function(I){if(T(this)||T(I))return h;if(y(this))return y(I)?_(this).j(_(I)):_(_(this).j(I));if(y(I))return _(this.j(_(I)));if(this.l(m)<0&&I.l(m)<0)return c(this.m()*I.m());const S=this.g.length+I.g.length,P=[];for(var C=0;C<2*S;C++)P[C]=0;for(C=0;C<this.g.length;C++)for(let k=0;k<I.g.length;k++){const O=this.i(C)>>>16,D=this.i(C)&65535,B=I.i(k)>>>16,X=I.i(k)&65535;P[2*C+2*k]+=D*X,p(P,2*C+2*k),P[2*C+2*k+1]+=O*X,p(P,2*C+2*k+1),P[2*C+2*k+1]+=D*B,p(P,2*C+2*k+1),P[2*C+2*k+2]+=O*B,p(P,2*C+2*k+2)}for(I=0;I<S;I++)P[I]=P[2*I+1]<<16|P[2*I];for(I=S;I<2*S;I++)P[I]=0;return new o(P,0)};function p(I,S){for(;(I[S]&65535)!=I[S];)I[S+1]+=I[S]>>>16,I[S]&=65535,S++}function v(I,S){this.g=I,this.h=S}function A(I,S){if(T(S))throw Error("division by zero");if(T(I))return new v(h,h);if(y(I))return S=A(_(I),S),new v(_(S.g),_(S.h));if(y(S))return S=A(I,_(S)),new v(_(S.g),S.h);if(I.g.length>30){if(y(I)||y(S))throw Error("slowDivide_ only works with positive integers.");for(var P=f,C=S;C.l(I)<=0;)P=R(P),C=R(C);var k=L(P,1),O=L(C,1);for(C=L(C,2),P=L(P,2);!T(C);){var D=O.add(C);D.l(I)<=0&&(k=k.add(P),O=D),C=L(C,1),P=L(P,1)}return S=w(I,k.j(S)),new v(k,S)}for(k=h;I.l(S)>=0;){for(P=Math.max(1,Math.floor(I.m()/S.m())),C=Math.ceil(Math.log(P)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),O=c(P),D=O.j(S);y(D)||D.l(I)>0;)P-=C,O=c(P),D=O.j(S);T(O)&&(O=f),k=k.add(O),I=w(I,D)}return new v(k,I)}t.B=function(I){return A(this,I).h},t.and=function(I){const S=Math.max(this.g.length,I.g.length),P=[];for(let C=0;C<S;C++)P[C]=this.i(C)&I.i(C);return new o(P,this.h&I.h)},t.or=function(I){const S=Math.max(this.g.length,I.g.length),P=[];for(let C=0;C<S;C++)P[C]=this.i(C)|I.i(C);return new o(P,this.h|I.h)},t.xor=function(I){const S=Math.max(this.g.length,I.g.length),P=[];for(let C=0;C<S;C++)P[C]=this.i(C)^I.i(C);return new o(P,this.h^I.h)};function R(I){const S=I.g.length+1,P=[];for(let C=0;C<S;C++)P[C]=I.i(C)<<1|I.i(C-1)>>>31;return new o(P,I.h)}function L(I,S){const P=S>>5;S%=32;const C=I.g.length-P,k=[];for(let O=0;O<C;O++)k[O]=S>0?I.i(O+P)>>>S|I.i(O+P+1)<<32-S:I.i(O+P);return new o(k,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,YC=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Ui=o}).apply(typeof AS<"u"?AS:typeof self<"u"?self:typeof window<"u"?window:{});var Ch=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XC,Xc,JC,cf,Hv,ZC,ek,tk;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ch=="object"&&Ch];for(var g=0;g<u.length;++g){var E=u[g];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function s(u,g){if(g)e:{var E=r;u=u.split(".");for(var N=0;N<u.length-1;N++){var M=u[N];if(!(M in E))break e;E=E[M]}u=u[u.length-1],N=E[u],g=g(N),g!=N&&g!=null&&e(E,u,{configurable:!0,writable:!0,value:g})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(g){var E=[],N;for(N in g)Object.prototype.hasOwnProperty.call(g,N)&&E.push([N,g[N]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function l(u,g,E){return u.call.apply(u.bind,arguments)}function c(u,g,E){return c=l,c.apply(null,arguments)}function d(u,g){var E=Array.prototype.slice.call(arguments,1);return function(){var N=E.slice();return N.push.apply(N,arguments),u.apply(this,N)}}function h(u,g){function E(){}E.prototype=g.prototype,u.Z=g.prototype,u.prototype=new E,u.prototype.constructor=u,u.Ob=function(N,M,j){for(var J=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)J[Pe-2]=arguments[Pe];return g.prototype[M].apply(N,J)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function m(u){const g=u.length;if(g>0){const E=Array(g);for(let N=0;N<g;N++)E[N]=u[N];return E}return[]}function T(u,g){for(let N=1;N<arguments.length;N++){const M=arguments[N];var E=typeof M;if(E=E!="object"?E:M?Array.isArray(M)?"array":E:"null",E=="array"||E=="object"&&typeof M.length=="number"){E=u.length||0;const j=M.length||0;u.length=E+j;for(let J=0;J<j;J++)u[E+J]=M[J]}else u.push(M)}}class y{constructor(g,E){this.i=g,this.j=E,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function _(u){o.setTimeout(()=>{throw u},0)}function w(){var u=I;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class p{constructor(){this.h=this.g=null}add(g,E){const N=v.get();N.set(g,E),this.h?this.h.next=N:this.g=N,this.h=N}}var v=new y(()=>new A,u=>u.reset());class A{constructor(){this.next=this.g=this.h=null}set(g,E){this.h=g,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let R,L=!1,I=new p,S=()=>{const u=Promise.resolve(void 0);R=()=>{u.then(P)}};function P(){for(var u;u=w();){try{u.h.call(u.g)}catch(E){_(E)}var g=v;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}L=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const E=()=>{};o.addEventListener("test",E,g),o.removeEventListener("test",E,g)}catch{}return u}();function D(u){return/^[\s\xa0]*$/.test(u)}function B(u,g){k.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}h(B,k),B.prototype.init=function(u,g){const E=this.type=u.type,N=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(E=="mouseover"?g=u.fromElement:E=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&B.Z.h.call(this)},B.prototype.h=function(){B.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var X="closure_listenable_"+(Math.random()*1e6|0),ee=0;function G(u,g,E,N,M){this.listener=u,this.proxy=null,this.src=g,this.type=E,this.capture=!!N,this.ha=M,this.key=++ee,this.da=this.fa=!1}function U(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function F(u,g,E){for(const N in u)g.call(E,u[N],N,u)}function H(u,g){for(const E in u)g.call(void 0,u[E],E,u)}function ae(u){const g={};for(const E in u)g[E]=u[E];return g}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(u,g){let E,N;for(let M=1;M<arguments.length;M++){N=arguments[M];for(E in N)u[E]=N[E];for(let j=0;j<te.length;j++)E=te[j],Object.prototype.hasOwnProperty.call(N,E)&&(u[E]=N[E])}}function ue(u){this.src=u,this.g={},this.h=0}ue.prototype.add=function(u,g,E,N,M){const j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);const J=Xe(u,g,N,M);return J>-1?(g=u[J],E||(g.fa=!1)):(g=new G(g,this.src,j,!!N,M),g.fa=E,u.push(g)),g};function Se(u,g){const E=g.type;if(E in u.g){var N=u.g[E],M=Array.prototype.indexOf.call(N,g,void 0),j;(j=M>=0)&&Array.prototype.splice.call(N,M,1),j&&(U(g),u.g[E].length==0&&(delete u.g[E],u.h--))}}function Xe(u,g,E,N){for(let M=0;M<u.length;++M){const j=u[M];if(!j.da&&j.listener==g&&j.capture==!!E&&j.ha==N)return M}return-1}var he="closure_lm_"+(Math.random()*1e6|0),Te={};function Ce(u,g,E,N,M){if(Array.isArray(g)){for(let j=0;j<g.length;j++)Ce(u,g[j],E,N,M);return null}return E=Gs(E),u&&u[X]?u.J(g,E,a(N)?!!N.capture:!1,M):bt(u,g,E,!1,N,M)}function bt(u,g,E,N,M,j){if(!g)throw Error("Invalid event type");const J=a(M)?!!M.capture:!!M;let Pe=Ie(u);if(Pe||(u[he]=Pe=new ue(u)),E=Pe.add(g,E,N,J,j),E.proxy)return E;if(N=Vt(),E.proxy=N,N.src=u,N.listener=E,u.addEventListener)O||(M=J),M===void 0&&(M=!1),u.addEventListener(g.toString(),N,M);else if(u.attachEvent)u.attachEvent(En(g.toString()),N);else if(u.addListener&&u.removeListener)u.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Vt(){function u(E){return g.call(u.src,u.listener,E)}const g=Lr;return u}function Yt(u,g,E,N,M){if(Array.isArray(g))for(var j=0;j<g.length;j++)Yt(u,g[j],E,N,M);else N=a(N)?!!N.capture:!!N,E=Gs(E),u&&u[X]?(u=u.i,j=String(g).toString(),j in u.g&&(g=u.g[j],E=Xe(g,E,N,M),E>-1&&(U(g[E]),Array.prototype.splice.call(g,E,1),g.length==0&&(delete u.g[j],u.h--)))):u&&(u=Ie(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Xe(g,E,N,M)),(E=u>-1?g[u]:null)&&qt(E))}function qt(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[X])Se(g.i,u);else{var E=u.type,N=u.proxy;g.removeEventListener?g.removeEventListener(E,N,u.capture):g.detachEvent?g.detachEvent(En(E),N):g.addListener&&g.removeListener&&g.removeListener(N),(E=Ie(g))?(Se(E,u),E.h==0&&(E.src=null,g[he]=null)):U(u)}}}function En(u){return u in Te?Te[u]:Te[u]="on"+u}function Lr(u,g){if(u.da)u=!0;else{g=new B(g,this);const E=u.listener,N=u.ha||u.src;u.fa&&qt(u),u=E.call(N,g)}return u}function Ie(u){return u=u[he],u instanceof ue?u:null}var er="__closure_events_fn_"+(Math.random()*1e9>>>0);function Gs(u){return typeof u=="function"?u:(u[er]||(u[er]=function(g){return u.handleEvent(g)}),u[er])}function ct(){C.call(this),this.i=new ue(this),this.M=this,this.G=null}h(ct,C),ct.prototype[X]=!0,ct.prototype.removeEventListener=function(u,g,E,N){Yt(this,u,g,E,N)};function Mt(u,g){var E,N=u.G;if(N)for(E=[];N;N=N.G)E.push(N);if(u=u.M,N=g.type||g,typeof g=="string")g=new k(g,u);else if(g instanceof k)g.target=g.target||u;else{var M=g;g=new k(N,u),le(g,M)}M=!0;let j,J;if(E)for(J=E.length-1;J>=0;J--)j=g.g=E[J],M=Vr(j,N,!0,g)&&M;if(j=g.g=u,M=Vr(j,N,!0,g)&&M,M=Vr(j,N,!1,g)&&M,E)for(J=0;J<E.length;J++)j=g.g=E[J],M=Vr(j,N,!1,g)&&M}ct.prototype.N=function(){if(ct.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const E=u.g[g];for(let N=0;N<E.length;N++)U(E[N]);delete u.g[g],u.h--}}this.G=null},ct.prototype.J=function(u,g,E,N){return this.i.add(String(u),g,!1,E,N)},ct.prototype.K=function(u,g,E,N){return this.i.add(String(u),g,!0,E,N)};function Vr(u,g,E,N){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let M=!0;for(let j=0;j<g.length;++j){const J=g[j];if(J&&!J.da&&J.capture==E){const Pe=J.listener,kt=J.ha||J.src;J.fa&&Se(u.i,J),M=Pe.call(kt,N)!==!1&&M}}return M&&!N.defaultPrevented}function Hd(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(u,g||0)}function Mr(u){u.g=Hd(()=>{u.g=null,u.i&&(u.i=!1,Mr(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Ym extends C{constructor(g,E){super(),this.m=g,this.l=E,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Mr(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lo(u){C.call(this),this.h=u,this.g={}}h(lo,C);var cn=[];function hs(u){F(u.g,function(g,E){this.g.hasOwnProperty(E)&&qt(g)},u),u.g={}}lo.prototype.N=function(){lo.Z.N.call(this),hs(this)},lo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fc=o.JSON.stringify,Xm=o.JSON.parse,ya=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function Kd(){}function pc(){}var fs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Fr(){k.call(this,"d")}h(Fr,k);function va(){k.call(this,"c")}h(va,k);var Tn={},Gd=null;function wa(){return Gd=Gd||new ct}Tn.Ia="serverreachability";function mc(u){k.call(this,Tn.Ia,u)}h(mc,k);function Qs(u){const g=wa();Mt(g,new mc(g))}Tn.STAT_EVENT="statevent";function Qd(u,g){k.call(this,Tn.STAT_EVENT,u),this.stat=g}h(Qd,k);function Ct(u){const g=wa();Mt(g,new Qd(g,u))}Tn.Ja="timingevent";function dr(u,g){k.call(this,Tn.Ja,u),this.size=g}h(dr,k);function co(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function ye(){this.g=!0}ye.prototype.ua=function(){this.g=!1};function Ue(u,g,E,N,M,j){u.info(function(){if(u.g)if(j){var J="",Pe=j.split("&");for(let He=0;He<Pe.length;He++){var kt=Pe[He].split("=");if(kt.length>1){const Ut=kt[0];kt=kt[1];const Br=Ut.split("_");J=Br.length>=2&&Br[1]=="type"?J+(Ut+"="+kt+"&"):J+(Ut+"=redacted&")}}}else J=null;else J=j;return"XMLHTTP REQ ("+N+") [attempt "+M+"]: "+g+`
`+E+`
`+J})}function Ke(u,g,E,N,M,j,J){u.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+M+"]: "+g+`
`+E+`
`+j+" "+J})}function Ft(u,g,E,N){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Ur(u,E)+(N?" "+N:"")})}function On(u,g){u.info(function(){return"TIMEOUT: "+g})}ye.prototype.info=function(){};function Ur(u,g){if(!u.g)return g;if(!g)return null;try{const j=JSON.parse(g);if(j){for(u=0;u<j.length;u++)if(Array.isArray(j[u])){var E=j[u];if(!(E.length<2)){var N=E[1];if(Array.isArray(N)&&!(N.length<1)){var M=N[0];if(M!="noop"&&M!="stop"&&M!="close")for(let J=1;J<N.length;J++)N[J]=""}}}}return fc(j)}catch{return g}}var tr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},In={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},hr;function Jm(){}h(Jm,Kd),Jm.prototype.g=function(){return new XMLHttpRequest},hr=new Jm;function gc(u){return encodeURIComponent(String(u))}function QO(u){var g=1;u=u.split(":");const E=[];for(;g>0&&u.length;)E.push(u.shift()),g--;return u.length&&E.push(u.join(":")),E}function Ys(u,g,E,N){this.j=u,this.i=g,this.l=E,this.S=N||1,this.V=new lo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new f0}function f0(){this.i=null,this.g="",this.h=!1}var p0={},Zm={};function eg(u,g,E){u.M=1,u.A=Xd(jr(g)),u.u=E,u.R=!0,m0(u,null)}function m0(u,g){u.F=Date.now(),Yd(u),u.B=jr(u.A);var E=u.B,N=u.S;Array.isArray(N)||(N=[String(N)]),P0(E.i,"t",N),u.C=0,E=u.j.L,u.h=new f0,u.g=H0(u.j,E?g:null,!u.u),u.P>0&&(u.O=new Ym(c(u.Y,u,u.g),u.P)),g=u.V,E=u.g,N=u.ba;var M="readystatechange";Array.isArray(M)||(M&&(cn[0]=M.toString()),M=cn);for(let j=0;j<M.length;j++){const J=Ce(E,M[j],N||g.handleEvent,!1,g.h||g);if(!J)break;g.g[J.key]=J}g=u.J?ae(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),Qs(),Ue(u.i,u.v,u.B,u.l,u.S,u.u)}Ys.prototype.ba=function(u){u=u.target;const g=this.O;g&&Zs(u)==3?g.j():this.Y(u)},Ys.prototype.Y=function(u){try{if(u==this.g)e:{const Pe=Zs(this.g),kt=this.g.ya(),He=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||L0(this.g)))){this.K||Pe!=4||kt==7||(kt==8||He<=0?Qs(3):Qs(2)),tg(this);var g=this.g.ca();this.X=g;var E=YO(this);if(this.o=g==200,Ke(this.i,this.v,this.B,this.l,this.S,Pe,g),this.o){if(this.U&&!this.L){t:{if(this.g){var N,M=this.g;if((N=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(N)){var j=N;break t}}j=null}if(u=j)Ft(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ng(this,u);else{this.o=!1,this.m=3,Ct(12),uo(this),yc(this);break e}}if(this.R){u=!0;let Ut;for(;!this.K&&this.C<E.length;)if(Ut=XO(this,E),Ut==Zm){Pe==4&&(this.m=4,Ct(14),u=!1),Ft(this.i,this.l,null,"[Incomplete Response]");break}else if(Ut==p0){this.m=4,Ct(15),Ft(this.i,this.l,E,"[Invalid Chunk]"),u=!1;break}else Ft(this.i,this.l,Ut,null),ng(this,Ut);if(g0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||E.length!=0||this.h.h||(this.m=1,Ct(16),u=!1),this.o=this.o&&u,!u)Ft(this.i,this.l,E,"[Invalid Chunked Response]"),uo(this),yc(this);else if(E.length>0&&!this.W){this.W=!0;var J=this.j;J.g==this&&J.aa&&!J.P&&(J.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),ug(J),J.P=!0,Ct(11))}}else Ft(this.i,this.l,E,null),ng(this,E);Pe==4&&uo(this),this.o&&!this.K&&(Pe==4?$0(this.j,this):(this.o=!1,Yd(this)))}else d2(this.g),g==400&&E.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),uo(this),yc(this)}}}catch{}finally{}};function YO(u){if(!g0(u))return u.g.la();const g=L0(u.g);if(g==="")return"";let E="";const N=g.length,M=Zs(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return uo(u),yc(u),"";u.h.i=new o.TextDecoder}for(let j=0;j<N;j++)u.h.h=!0,E+=u.h.i.decode(g[j],{stream:!(M&&j==N-1)});return g.length=0,u.h.g+=E,u.C=0,u.h.g}function g0(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function XO(u,g){var E=u.C,N=g.indexOf(`
`,E);return N==-1?Zm:(E=Number(g.substring(E,N)),isNaN(E)?p0:(N+=1,N+E>g.length?Zm:(g=g.slice(N,N+E),u.C=N+E,g)))}Ys.prototype.cancel=function(){this.K=!0,uo(this)};function Yd(u){u.T=Date.now()+u.H,y0(u,u.H)}function y0(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=co(c(u.aa,u),g)}function tg(u){u.D&&(o.clearTimeout(u.D),u.D=null)}Ys.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(On(this.i,this.B),this.M!=2&&(Qs(),Ct(17)),uo(this),this.m=2,yc(this)):y0(this,this.T-u)};function yc(u){u.j.I==0||u.K||$0(u.j,u)}function uo(u){tg(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,hs(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function ng(u,g){try{var E=u.j;if(E.I!=0&&(E.g==u||rg(E.h,u))){if(!u.L&&rg(E.h,u)&&E.I==3){try{var N=E.Ba.g.parse(g)}catch{N=null}if(Array.isArray(N)&&N.length==3){var M=N;if(M[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<u.F)nh(E),eh(E);else break e;cg(E),Ct(18)}}else E.xa=M[1],0<E.xa-E.K&&M[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=co(c(E.Va,E),6e3));_0(E.h)<=1&&E.ta&&(E.ta=void 0)}else fo(E,11)}else if((u.L||E.g==u)&&nh(E),!D(g))for(M=E.Ba.g.parse(g),g=0;g<M.length;g++){let He=M[g];const Ut=He[0];if(!(Ut<=E.K))if(E.K=Ut,He=He[1],E.I==2)if(He[0]=="c"){E.M=He[1],E.ba=He[2];const Br=He[3];Br!=null&&(E.ka=Br,E.j.info("VER="+E.ka));const po=He[4];po!=null&&(E.za=po,E.j.info("SVER="+E.za));const ei=He[5];ei!=null&&typeof ei=="number"&&ei>0&&(N=1.5*ei,E.O=N,E.j.info("backChannelRequestTimeoutMs_="+N)),N=E;const ti=u.g;if(ti){const sh=ti.g?ti.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(sh){var j=N.h;j.g||sh.indexOf("spdy")==-1&&sh.indexOf("quic")==-1&&sh.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(sg(j,j.h),j.h=null))}if(N.G){const dg=ti.g?ti.g.getResponseHeader("X-HTTP-Session-Id"):null;dg&&(N.wa=dg,Je(N.J,N.G,dg))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-u.F,E.j.info("Handshake RTT: "+E.T+"ms")),N=E;var J=u;if(N.na=W0(N,N.L?N.ba:null,N.W),J.L){E0(N.h,J);var Pe=J,kt=N.O;kt&&(Pe.H=kt),Pe.D&&(tg(Pe),Yd(Pe)),N.g=J}else j0(N);E.i.length>0&&th(E)}else He[0]!="stop"&&He[0]!="close"||fo(E,7);else E.I==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?fo(E,7):lg(E):He[0]!="noop"&&E.l&&E.l.qa(He),E.A=0)}}Qs(4)}catch{}}var JO=class{constructor(u,g){this.g=u,this.map=g}};function v0(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function w0(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function _0(u){return u.h?1:u.g?u.g.size:0}function rg(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function sg(u,g){u.g?u.g.add(g):u.h=g}function E0(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}v0.prototype.cancel=function(){if(this.i=T0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function T0(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const E of u.g.values())g=g.concat(E.G);return g}return m(u.i)}var I0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ZO(u,g){if(u){u=u.split("&");for(let E=0;E<u.length;E++){const N=u[E].indexOf("=");let M,j=null;N>=0?(M=u[E].substring(0,N),j=u[E].substring(N+1)):M=u[E],g(M,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Xs(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof Xs?(this.l=u.l,vc(this,u.j),this.o=u.o,this.g=u.g,wc(this,u.u),this.h=u.h,ig(this,R0(u.i)),this.m=u.m):u&&(g=String(u).match(I0))?(this.l=!1,vc(this,g[1]||"",!0),this.o=_c(g[2]||""),this.g=_c(g[3]||"",!0),wc(this,g[4]),this.h=_c(g[5]||"",!0),ig(this,g[6]||"",!0),this.m=_c(g[7]||"")):(this.l=!1,this.i=new Tc(null,this.l))}Xs.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(Ec(g,S0,!0),":");var E=this.g;return(E||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Ec(g,S0,!0),"@"),u.push(gc(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&u.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&u.push("/"),u.push(Ec(E,E.charAt(0)=="/"?n2:t2,!0))),(E=this.i.toString())&&u.push("?",E),(E=this.m)&&u.push("#",Ec(E,s2)),u.join("")},Xs.prototype.resolve=function(u){const g=jr(this);let E=!!u.j;E?vc(g,u.j):E=!!u.o,E?g.o=u.o:E=!!u.g,E?g.g=u.g:E=u.u!=null;var N=u.h;if(E)wc(g,u.u);else if(E=!!u.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var M=g.h.lastIndexOf("/");M!=-1&&(N=g.h.slice(0,M+1)+N)}if(M=N,M==".."||M==".")N="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){N=M.lastIndexOf("/",0)==0,M=M.split("/");const j=[];for(let J=0;J<M.length;){const Pe=M[J++];Pe=="."?N&&J==M.length&&j.push(""):Pe==".."?((j.length>1||j.length==1&&j[0]!="")&&j.pop(),N&&J==M.length&&j.push("")):(j.push(Pe),N=!0)}N=j.join("/")}else N=M}return E?g.h=N:E=u.i.toString()!=="",E?ig(g,R0(u.i)):E=!!u.m,E&&(g.m=u.m),g};function jr(u){return new Xs(u)}function vc(u,g,E){u.j=E?_c(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function wc(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function ig(u,g,E){g instanceof Tc?(u.i=g,i2(u.i,u.l)):(E||(g=Ec(g,r2)),u.i=new Tc(g,u.l))}function Je(u,g,E){u.i.set(g,E)}function Xd(u){return Je(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function _c(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ec(u,g,E){return typeof u=="string"?(u=encodeURI(u).replace(g,e2),E&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function e2(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var S0=/[#\/\?@]/g,t2=/[#\?:]/g,n2=/[#\?]/g,r2=/[#\?@]/g,s2=/#/g;function Tc(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function ho(u){u.g||(u.g=new Map,u.h=0,u.i&&ZO(u.i,function(g,E){u.add(decodeURIComponent(g.replace(/\+/g," ")),E)}))}t=Tc.prototype,t.add=function(u,g){ho(this),this.i=null,u=_a(this,u);let E=this.g.get(u);return E||this.g.set(u,E=[]),E.push(g),this.h+=1,this};function b0(u,g){ho(u),g=_a(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function A0(u,g){return ho(u),g=_a(u,g),u.g.has(g)}t.forEach=function(u,g){ho(this),this.g.forEach(function(E,N){E.forEach(function(M){u.call(g,M,N,this)},this)},this)};function x0(u,g){ho(u);let E=[];if(typeof g=="string")A0(u,g)&&(E=E.concat(u.g.get(_a(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)E=E.concat(u[g]);return E}t.set=function(u,g){return ho(this),this.i=null,u=_a(this,u),A0(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=x0(this,u),u.length>0?String(u[0]):g):g};function P0(u,g,E){b0(u,g),E.length>0&&(u.i=null,u.g.set(_a(u,g),m(E)),u.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let N=0;N<g.length;N++){var E=g[N];const M=gc(E);E=x0(this,E);for(let j=0;j<E.length;j++){let J=M;E[j]!==""&&(J+="="+gc(E[j])),u.push(J)}}return this.i=u.join("&")};function R0(u){const g=new Tc;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function _a(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function i2(u,g){g&&!u.j&&(ho(u),u.i=null,u.g.forEach(function(E,N){const M=N.toLowerCase();N!=M&&(b0(this,N),P0(this,M,E))},u)),u.j=g}function o2(u,g){const E=new ye;if(o.Image){const N=new Image;N.onload=d(Js,E,"TestLoadImage: loaded",!0,g,N),N.onerror=d(Js,E,"TestLoadImage: error",!1,g,N),N.onabort=d(Js,E,"TestLoadImage: abort",!1,g,N),N.ontimeout=d(Js,E,"TestLoadImage: timeout",!1,g,N),o.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=u}else g(!1)}function a2(u,g){const E=new ye,N=new AbortController,M=setTimeout(()=>{N.abort(),Js(E,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:N.signal}).then(j=>{clearTimeout(M),j.ok?Js(E,"TestPingServer: ok",!0,g):Js(E,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(M),Js(E,"TestPingServer: error",!1,g)})}function Js(u,g,E,N,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),N(E)}catch{}}function l2(){this.g=new ya}function og(u){this.i=u.Sb||null,this.h=u.ab||!1}h(og,Kd),og.prototype.g=function(){return new Jd(this.i,this.h)};function Jd(u,g){ct.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(Jd,ct),t=Jd.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,Sc(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ic(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Sc(this)),this.g&&(this.readyState=3,Sc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;C0(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function C0(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Ic(this):Sc(this),this.readyState==3&&C0(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,Ic(this))},t.Na=function(u){this.g&&(this.response=u,Ic(this))},t.ga=function(){this.g&&Ic(this)};function Ic(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Sc(u)}t.setRequestHeader=function(u,g){this.A.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var E=g.next();!E.done;)E=E.value,u.push(E[0]+": "+E[1]),E=g.next();return u.join(`\r
`)};function Sc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Jd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function k0(u){let g="";return F(u,function(E,N){g+=N,g+=":",g+=E,g+=`\r
`}),g}function ag(u,g,E){e:{for(N in E){var N=!1;break e}N=!0}N||(E=k0(E),typeof u=="string"?E!=null&&gc(E):Je(u,g,E))}function pt(u){ct.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(pt,ct);var c2=/^https?$/i,u2=["POST","PUT"];t=pt.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,g,E,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():hr.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(j){D0(this,j);return}if(u=E||"",E=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var M in N)E.set(M,N[M]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const j of N.keys())E.set(j,N.get(j));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(E.keys()).find(j=>j.toLowerCase()=="content-type"),M=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(u2,g,void 0)>=0)||N||M||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,J]of E)this.g.setRequestHeader(j,J);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(j){D0(this,j)}};function D0(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,N0(u),Zd(u)}function N0(u){u.A||(u.A=!0,Mt(u,"complete"),Mt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Mt(this,"complete"),Mt(this,"abort"),Zd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zd(this,!0)),pt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?O0(this):this.Xa())},t.Xa=function(){O0(this)};function O0(u){if(u.h&&typeof i<"u"){if(u.v&&Zs(u)==4)setTimeout(u.Ca.bind(u),0);else if(Mt(u,"readystatechange"),Zs(u)==4){u.h=!1;try{const j=u.ca();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var E;if(!(E=g)){var N;if(N=j===0){let J=String(u.D).match(I0)[1]||null;!J&&o.self&&o.self.location&&(J=o.self.location.protocol.slice(0,-1)),N=!c2.test(J?J.toLowerCase():"")}E=N}if(E)Mt(u,"complete"),Mt(u,"success");else{u.o=6;try{var M=Zs(u)>2?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.ca()+"]",N0(u)}}finally{Zd(u)}}}}function Zd(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const E=u.g;u.g=null,g||Mt(u,"ready");try{E.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Zs(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Zs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Xm(g)}};function L0(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function d2(u){const g={};u=(u.g&&Zs(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<u.length;N++){if(D(u[N]))continue;var E=QO(u[N]);const M=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const j=g[M]||[];g[M]=j,j.push(E)}H(g,function(N){return N.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function bc(u,g,E){return E&&E.internalChannelParams&&E.internalChannelParams[u]||g}function V0(u){this.za=0,this.i=[],this.j=new ye,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=bc("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=bc("baseRetryDelayMs",5e3,u),this.Za=bc("retryDelaySeedMs",1e4,u),this.Ta=bc("forwardChannelMaxRetries",2,u),this.va=bc("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new v0(u&&u.concurrentRequestLimit),this.Ba=new l2,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=V0.prototype,t.ka=8,t.I=1,t.connect=function(u,g,E,N){Ct(0),this.W=u,this.H=g||{},E&&N!==void 0&&(this.H.OSID=E,this.H.OAID=N),this.F=this.X,this.J=W0(this,null,this.W),th(this)};function lg(u){if(M0(u),u.I==3){var g=u.V++,E=jr(u.J);if(Je(E,"SID",u.M),Je(E,"RID",g),Je(E,"TYPE","terminate"),Ac(u,E),g=new Ys(u,u.j,g),g.M=2,g.A=Xd(jr(E)),E=!1,o.navigator&&o.navigator.sendBeacon)try{E=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!E&&o.Image&&(new Image().src=g.A,E=!0),E||(g.g=H0(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Yd(g)}q0(u)}function eh(u){u.g&&(ug(u),u.g.cancel(),u.g=null)}function M0(u){eh(u),u.v&&(o.clearTimeout(u.v),u.v=null),nh(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function th(u){if(!w0(u.h)&&!u.m){u.m=!0;var g=u.Ea;R||S(),L||(R(),L=!0),I.add(g,u),u.D=0}}function h2(u,g){return _0(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=co(c(u.Ea,u,g),z0(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const M=new Ys(this,this.j,u);let j=this.o;if(this.U&&(j?(j=ae(j),le(j,this.U)):j=this.U),this.u!==null||this.R||(M.J=j,j=null),this.S)e:{for(var g=0,E=0;E<this.i.length;E++){t:{var N=this.i[E];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(g+=N,g>4096){g=E;break e}if(g===4096||E===this.i.length-1){g=E+1;break e}}g=1e3}else g=1e3;g=U0(this,M,g),E=jr(this.J),Je(E,"RID",u),Je(E,"CVER",22),this.G&&Je(E,"X-HTTP-Session-Id",this.G),Ac(this,E),j&&(this.R?g="headers="+gc(k0(j))+"&"+g:this.u&&ag(E,this.u,j)),sg(this.h,M),this.Ra&&Je(E,"TYPE","init"),this.S?(Je(E,"$req",g),Je(E,"SID","null"),M.U=!0,eg(M,E,null)):eg(M,E,g),this.I=2}}else this.I==3&&(u?F0(this,u):this.i.length==0||w0(this.h)||F0(this))};function F0(u,g){var E;g?E=g.l:E=u.V++;const N=jr(u.J);Je(N,"SID",u.M),Je(N,"RID",E),Je(N,"AID",u.K),Ac(u,N),u.u&&u.o&&ag(N,u.u,u.o),E=new Ys(u,u.j,E,u.D+1),u.u===null&&(E.J=u.o),g&&(u.i=g.G.concat(u.i)),g=U0(u,E,1e3),E.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),sg(u.h,E),eg(E,N,g)}function Ac(u,g){u.H&&F(u.H,function(E,N){Je(g,N,E)}),u.l&&F({},function(E,N){Je(g,N,E)})}function U0(u,g,E){E=Math.min(u.i.length,E);const N=u.l?c(u.l.Ka,u.l,u):null;e:{var M=u.i;let Pe=-1;for(;;){const kt=["count="+E];Pe==-1?E>0?(Pe=M[0].g,kt.push("ofs="+Pe)):Pe=0:kt.push("ofs="+Pe);let He=!0;for(let Ut=0;Ut<E;Ut++){var j=M[Ut].g;const Br=M[Ut].map;if(j-=Pe,j<0)Pe=Math.max(0,M[Ut].g-100),He=!1;else try{j="req"+j+"_"||"";try{var J=Br instanceof Map?Br:Object.entries(Br);for(const[po,ei]of J){let ti=ei;a(ei)&&(ti=fc(ei)),kt.push(j+po+"="+encodeURIComponent(ti))}}catch(po){throw kt.push(j+"type="+encodeURIComponent("_badmap")),po}}catch{N&&N(Br)}}if(He){J=kt.join("&");break e}}J=void 0}return u=u.i.splice(0,E),g.G=u,J}function j0(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;R||S(),L||(R(),L=!0),I.add(g,u),u.A=0}}function cg(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=co(c(u.Da,u),z0(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,B0(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=co(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),eh(this),B0(this))};function ug(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function B0(u){u.g=new Ys(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=jr(u.na);Je(g,"RID","rpc"),Je(g,"SID",u.M),Je(g,"AID",u.K),Je(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&Je(g,"TO",u.ia),Je(g,"TYPE","xmlhttp"),Ac(u,g),u.u&&u.o&&ag(g,u.u,u.o),u.O&&(u.g.H=u.O);var E=u.g;u=u.ba,E.M=1,E.A=Xd(jr(g)),E.u=null,E.R=!0,m0(E,u)}t.Va=function(){this.C!=null&&(this.C=null,eh(this),cg(this),Ct(19))};function nh(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function $0(u,g){var E=null;if(u.g==g){nh(u),ug(u),u.g=null;var N=2}else if(rg(u.h,g))E=g.G,E0(u.h,g),N=1;else return;if(u.I!=0){if(g.o)if(N==1){E=g.u?g.u.length:0,g=Date.now()-g.F;var M=u.D;N=wa(),Mt(N,new dr(N,E)),th(u)}else j0(u);else if(M=g.m,M==3||M==0&&g.X>0||!(N==1&&h2(u,g)||N==2&&cg(u)))switch(E&&E.length>0&&(g=u.h,g.i=g.i.concat(E)),M){case 1:fo(u,5);break;case 4:fo(u,10);break;case 3:fo(u,6);break;default:fo(u,2)}}}function z0(u,g){let E=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(E*=2),E*g}function fo(u,g){if(u.j.info("Error code "+g),g==2){var E=c(u.bb,u),N=u.Ua;const M=!N;N=new Xs(N||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||vc(N,"https"),Xd(N),M?o2(N.toString(),E):a2(N.toString(),E)}else Ct(2);u.I=0,u.l&&u.l.pa(g),q0(u),M0(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function q0(u){if(u.I=0,u.ja=[],u.l){const g=T0(u.h);(g.length!=0||u.i.length!=0)&&(T(u.ja,g),T(u.ja,u.i),u.h.i.length=0,m(u.i),u.i.length=0),u.l.oa()}}function W0(u,g,E){var N=E instanceof Xs?jr(E):new Xs(E);if(N.g!="")g&&(N.g=g+"."+N.g),wc(N,N.u);else{var M=o.location;N=M.protocol,g=g?g+"."+M.hostname:M.hostname,M=+M.port;const j=new Xs(null);N&&vc(j,N),g&&(j.g=g),M&&wc(j,M),E&&(j.h=E),N=j}return E=u.G,g=u.wa,E&&g&&Je(N,E,g),Je(N,"VER",u.ka),Ac(u,N),N}function H0(u,g,E){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new pt(new og({ab:E})):new pt(u.ma),g.Fa(u.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function K0(){}t=K0.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function rh(){}rh.prototype.g=function(u,g){return new Ln(u,g)};function Ln(u,g){ct.call(this),this.g=new V0(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!D(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!D(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Ea(this)}h(Ln,ct),Ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ln.prototype.close=function(){lg(this.g)},Ln.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var E={};E.__data__=u,u=E}else this.v&&(E={},E.__data__=fc(u),u=E);g.i.push(new JO(g.Ya++,u)),g.I==3&&th(g)},Ln.prototype.N=function(){this.g.l=null,delete this.j,lg(this.g),delete this.g,Ln.Z.N.call(this)};function G0(u){Fr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const E in g){u=E;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}h(G0,Fr);function Q0(){va.call(this),this.status=1}h(Q0,va);function Ea(u){this.g=u}h(Ea,K0),Ea.prototype.ra=function(){Mt(this.g,"a")},Ea.prototype.qa=function(u){Mt(this.g,new G0(u))},Ea.prototype.pa=function(u){Mt(this.g,new Q0)},Ea.prototype.oa=function(){Mt(this.g,"b")},rh.prototype.createWebChannel=rh.prototype.g,Ln.prototype.send=Ln.prototype.o,Ln.prototype.open=Ln.prototype.m,Ln.prototype.close=Ln.prototype.close,tk=function(){return new rh},ek=function(){return wa()},ZC=Tn,Hv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},tr.NO_ERROR=0,tr.TIMEOUT=8,tr.HTTP_ERROR=6,cf=tr,In.COMPLETE="complete",JC=In,pc.EventType=fs,fs.OPEN="a",fs.CLOSE="b",fs.ERROR="c",fs.MESSAGE="d",ct.prototype.listen=ct.prototype.J,Xc=pc,pt.prototype.listenOnce=pt.prototype.K,pt.prototype.getLastError=pt.prototype.Ha,pt.prototype.getLastErrorCode=pt.prototype.ya,pt.prototype.getStatus=pt.prototype.ca,pt.prototype.getResponseJson=pt.prototype.La,pt.prototype.getResponseText=pt.prototype.la,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Fa,XC=pt}).apply(typeof Ch<"u"?Ch:typeof self<"u"?self:typeof window<"u"?window:{});const xS="@firebase/firestore",PS="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi=new pm("@firebase/firestore");function Na(){return Hi.logLevel}function nk(t){Hi.setLogLevel(t)}function K(t,...e){if(Hi.logLevel<=De.DEBUG){const n=e.map(nE);Hi.debug(`Firestore (${rc}): ${t}`,...n)}}function Tt(t,...e){if(Hi.logLevel<=De.ERROR){const n=e.map(nE);Hi.error(`Firestore (${rc}): ${t}`,...n)}}function Ki(t,...e){if(Hi.logLevel<=De.WARN){const n=e.map(nE);Hi.warn(`Firestore (${rc}): ${t}`,...n)}}function nE(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,rk(t,r,n)}function rk(t,e,n){let r=`FIRESTORE (${rc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Tt(r),new Error(r)}function de(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||rk(e,s,r)}function se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Dr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p${constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(tn.UNAUTHENTICATED))}shutdown(){}}class m${constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){de(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new ar;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ar,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ar)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(de(typeof r.accessToken=="string",31837,{l:r}),new p$(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string",2055,{h:e}),new tn(e)}}class g${constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class y${constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new g$(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(tn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class v${constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){de(this.o===void 0,3512);const r=i=>{i.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new RS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(de(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new RS(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w$(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=w$(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ee(t,e){return t<e?-1:t>e?1:0}function Kv(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return ry(s)===ry(i)?Ee(s,i):ry(s)?1:-1}return Ee(t.length,e.length)}const _$=55296,E$=57343;function ry(t){const e=t.charCodeAt(0);return e>=_$&&e<=E$}function xl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function ik(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="__name__";class qr{constructor(e,n,r){n===void 0?n=0:n>e.length&&re(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&re(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return qr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof qr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=qr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ee(e.length,n.length)}static compareSegments(e,n){const r=qr.isNumericId(e),s=qr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?qr.extractNumericId(e).compare(qr.extractNumericId(n)):Kv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ui.fromString(e.substring(4,e.length-2))}}class Fe extends qr{construct(e,n,r){return new Fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}}const T$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class at extends qr{construct(e,n,r){return new at(e,n,r)}static isValidIdentifier(e){return T$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),at.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===CS}static keyField(){return new at([CS])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Y($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Y($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Y($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Y($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new at(n)}static emptyPath(){return new at([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z(Fe.fromString(e))}static fromName(e){return new Z(Fe.fromString(e).popFirst(5))}static empty(){return new Z(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new Fe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(t,e,n){if(!n)throw new Y($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ak(t,e,n,r){if(e===!0&&r===!0)throw new Y($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function kS(t){if(!Z.isDocumentKey(t))throw new Y($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function DS(t){if(Z.isDocumentKey(t))throw new Y($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function lk(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function vm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re(12329,{type:typeof t})}function St(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vm(t);throw new Y($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function I$(t,e){if(e<=0)throw new Y($.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t,e){const n={typeString:t};return e&&(n.value=e),n}function kd(t,e){if(!lk(t))throw new Y($.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Y($.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS=-62135596800,OS=1e6;class je{static now(){return je.fromMillis(Date.now())}static fromDate(e){return je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*OS);return new je(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<NS)throw new Y($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/OS}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:je._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(kd(e,je._jsonSchema))return new je(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-NS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}je._jsonSchemaVersion="firestore/timestamp/1.0",je._jsonSchema={type:Pt("string",je._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{static fromTimestamp(e){return new fe(e)}static min(){return new fe(new je(0,0))}static max(){return new fe(new je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pl=-1;class dp{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Gv(t){return t.fields.find(e=>e.kind===2)}function wo(t){return t.fields.filter(e=>e.kind!==2)}dp.UNKNOWN_ID=-1;class uf{constructor(e,n){this.fieldPath=e,this.kind=n}}class td{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new td(0,Yn.min())}}function ck(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=fe.fromTimestamp(r===1e9?new je(n+1,0):new je(n,r));return new Yn(s,Z.empty(),e)}function uk(t){return new Yn(t.readTime,t.key,Pl)}class Yn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Yn(fe.min(),Z.empty(),Pl)}static max(){return new Yn(fe.max(),Z.empty(),Pl)}}function rE(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Z.comparator(t.documentKey,e.documentKey),n!==0?n:Ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function so(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==dk)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(s=>s?V.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new V((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new V((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn="SimpleDb";class wm{static open(e,n,r,s){try{return new wm(n,e.transaction(s,r))}catch(i){throw new pu(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new ar,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new pu(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=sE(r.target.error);this.S.reject(new pu(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(K(Fn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new b$(n)}}class ji{static delete(e){return K(Fn,"Removing database:",e),To(uC().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Q_())return!1;if(ji.F())return!0;const e=Qt(),n=ji.M(e),r=0<n&&n<10,s=fk(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,ji.M(Qt())===12.2&&Tt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(K(Fn,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new pu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new Y($.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new Y($.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new pu(e,o))},s.onupgradeneeded=i=>{K(Fn,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next(()=>{K(Fn,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=wm.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.C(),c)).catch(c=>(a.abort(c),V.reject(c))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(K(Fn,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function fk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class S${constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return To(this.U.delete())}}class pu extends Y{constructor(e,n){super($.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function io(t){return t.name==="IndexedDbTransactionError"}class b${constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(K(Fn,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(K(Fn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),To(r)}add(e){return K(Fn,"ADD",this.store.name,e,e),To(this.store.add(e))}get(e){return To(this.store.get(e)).next(n=>(n===void 0&&(n=null),K(Fn,"GET",this.store.name,e,n),n))}delete(e){return K(Fn,"DELETE",this.store.name,e),To(this.store.delete(e))}count(){return K(Fn,"COUNT",this.store.name),To(this.store.count())}J(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new V((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.H(i,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new V((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}Z(e,n){K(Fn,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,(i,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}te(e){const n=this.cursor({});return new V((r,s)=>{n.onerror=i=>{const o=sE(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new V((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new S$(a),c=n(a.primaryKey,a.value,l);if(c instanceof V){const d=c.catch(h=>(l.done(),V.reject(h)));r.push(d)}l.isDone?s():l.G===null?a.continue():a.continue(l.G)}}).next(()=>V.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function To(t){return new V((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=sE(r.target.error);n(s)}})}let LS=!1;function sE(t){const e=ji.M(Qt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Y("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return LS||(LS=!0,setTimeout(()=>{throw r},0)),r}}return t}const mu="IndexBackfiller";class A${constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){K(mu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();K(mu,`Documents written: ${n}`)}catch(n){io(n)?K(mu,"Ignoring IndexedDB error during index backfill: ",n):await so(n)}await this.re(6e4)})}}class x${constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let s=n,i=!0;return V.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return K(mu,`Processing collection: ${o}`),this.oe(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(s,i)).next(a=>(K(mu,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=uk(i);rE(o,r)>0&&(r=o)}),new Yn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Pn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko=-1;function _m(t){return t==null}function nd(t){return t===0&&1/t==-1/0}function pk(t){return typeof t=="number"&&Number.isInteger(t)&&!nd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="";function an(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=VS(e)),e=P$(t.get(n),e);return VS(e)}function P$(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case hp:n+="";break;default:n+=i}}return n}function VS(t){return t+hp+""}function Jr(t){const e=t.length;if(de(e>=2,64408,{path:t}),e===2)return de(t.charAt(0)===hp&&t.charAt(1)==="",56145,{path:t}),Fe.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf(hp,i);switch((o<0||o>n)&&re(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:re(61167,{path:t})}i=o+2}return new Fe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="remoteDocuments",Dd="owner",Ia="owner",rd="mutationQueues",R$="userId",_r="mutations",MS="batchId",ko="userMutationsIndex",FS=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(t,e){return[t,an(e)]}function mk(t,e,n){return[t,an(e),n]}const C$={},Rl="documentMutations",fp="remoteDocumentsV14",k$=["prefixPath","collectionGroup","readTime","documentId"],hf="documentKeyIndex",D$=["prefixPath","collectionGroup","documentId"],gk="collectionGroupIndex",N$=["collectionGroup","readTime","prefixPath","documentId"],sd="remoteDocumentGlobal",Qv="remoteDocumentGlobalKey",Cl="targets",yk="queryTargetsIndex",O$=["canonicalId","targetId"],kl="targetDocuments",L$=["targetId","path"],iE="documentTargetsIndex",V$=["path","targetId"],pp="targetGlobalKey",Go="targetGlobal",id="collectionParents",M$=["collectionId","parent"],Dl="clientMetadata",F$="clientId",Em="bundles",U$="bundleId",Tm="namedQueries",j$="name",oE="indexConfiguration",B$="indexId",Yv="collectionGroupIndex",$$="collectionGroup",gu="indexState",z$=["indexId","uid"],vk="sequenceNumberIndex",q$=["uid","sequenceNumber"],yu="indexEntries",W$=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],wk="documentKeyIndex",H$=["indexId","uid","orderedDocumentKey"],Im="documentOverlays",K$=["userId","collectionPath","documentId"],Xv="collectionPathOverlayIndex",G$=["userId","collectionPath","largestBatchId"],_k="collectionGroupOverlayIndex",Q$=["userId","collectionGroup","largestBatchId"],aE="globals",Y$="name",Ek=[rd,_r,Rl,_o,Cl,Dd,Go,kl,Dl,sd,id,Em,Tm],X$=[...Ek,Im],Tk=[rd,_r,Rl,fp,Cl,Dd,Go,kl,Dl,sd,id,Em,Tm,Im],Ik=Tk,lE=[...Ik,oE,gu,yu],J$=lE,Sk=[...lE,aE],Z$=Sk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv extends hk{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Lt(t,e){const n=se(t);return ji.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function oo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function bk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.comparator=e,this.root=n||Ht.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kh(this.root,e,this.comparator,!1)}getReverseIterator(){return new kh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kh(this.root,e,this.comparator,!0)}}class kh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ht{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ht.RED,this.left=s??Ht.EMPTY,this.right=i??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ht(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ht.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw re(27949);return e+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw re(57766)}get value(){throw re(16141)}get color(){throw re(16727)}get left(){throw re(29726)}get right(){throw re(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new jS(this.data.getIterator())}getIteratorFrom(e){return new jS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ze(this.comparator);return n.data=e,n}}class jS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Sa(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.fields=e,e.sort(at.comparator)}static empty(){return new Rn([])}unionWith(e){let n=new ze(at.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Rn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return xl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Ak("Invalid base64 string: "+i):i}}(e);return new vt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vt.EMPTY_BYTE_STRING=new vt("");const e9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fs(t){if(de(!!t,39018),typeof t=="string"){let e=0;const n=e9.exec(t);if(de(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:st(t.seconds),nanos:st(t.nanos)}}function st(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Us(t){return typeof t=="string"?vt.fromBase64String(t):vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk="server_timestamp",Pk="__type__",Rk="__previous_value__",Ck="__local_write_time__";function cE(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Pk])==null?void 0:r.stringValue)===xk}function Sm(t){const e=t.mapValue.fields[Rk];return cE(e)?Sm(e):e}function od(t){const e=Fs(t.mapValue.fields[Ck].timestampValue);return new je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{constructor(e,n,r,s,i,o,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const mp="(default)";class Gi{constructor(e,n){this.projectId=e,this.database=n||mp}static empty(){return new Gi("","")}get isDefaultDatabase(){return this.database===mp}isEqual(e){return e instanceof Gi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="__type__",kk="__max__",Ai={mapValue:{fields:{__type__:{stringValue:kk}}}},dE="__vector__",Nl="value",ff={nullValue:"NULL_VALUE"};function Qi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cE(t)?4:Dk(t)?9007199254740991:bm(t)?10:11:re(28295,{value:t})}function ls(t,e){if(t===e)return!0;const n=Qi(t);if(n!==Qi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return od(t).isEqual(od(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Fs(s.timestampValue),a=Fs(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Us(s.bytesValue).isEqual(Us(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return st(s.geoPointValue.latitude)===st(i.geoPointValue.latitude)&&st(s.geoPointValue.longitude)===st(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return st(s.integerValue)===st(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=st(s.doubleValue),a=st(i.doubleValue);return o===a?nd(o)===nd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return xl(t.arrayValue.values||[],e.arrayValue.values||[],ls);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(US(o)!==US(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ls(o[l],a[l])))return!1;return!0}(t,e);default:return re(52216,{left:t})}}function ad(t,e){return(t.values||[]).find(n=>ls(n,e))!==void 0}function Yi(t,e){if(t===e)return 0;const n=Qi(t),r=Qi(e);if(n!==r)return Ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=st(i.integerValue||i.doubleValue),l=st(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return BS(t.timestampValue,e.timestampValue);case 4:return BS(od(t),od(e));case 5:return Kv(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Us(i),l=Us(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Ee(a[c],l[c]);if(d!==0)return d}return Ee(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ee(st(i.latitude),st(o.latitude));return a!==0?a:Ee(st(i.longitude),st(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return $S(t.arrayValue,e.arrayValue);case 10:return function(i,o){var f,m,T,y;const a=i.fields||{},l=o.fields||{},c=(f=a[Nl])==null?void 0:f.arrayValue,d=(m=l[Nl])==null?void 0:m.arrayValue,h=Ee(((T=c==null?void 0:c.values)==null?void 0:T.length)||0,((y=d==null?void 0:d.values)==null?void 0:y.length)||0);return h!==0?h:$S(c,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ai.mapValue&&o===Ai.mapValue)return 0;if(i===Ai.mapValue)return 1;if(o===Ai.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=Kv(l[h],d[h]);if(f!==0)return f;const m=Yi(a[l[h]],c[d[h]]);if(m!==0)return m}return Ee(l.length,d.length)}(t.mapValue,e.mapValue);default:throw re(23264,{he:n})}}function BS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);const n=Fs(t),r=Fs(e),s=Ee(n.seconds,r.seconds);return s!==0?s:Ee(n.nanos,r.nanos)}function $S(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Yi(n[s],r[s]);if(i)return i}return Ee(n.length,r.length)}function Ol(t){return Zv(t)}function Zv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Fs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Us(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Zv(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Zv(n.fields[o])}`;return s+"}"}(t.mapValue):re(61005,{value:t})}function pf(t){switch(Qi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Sm(t);return e?16+pf(e):16;case 5:return 2*t.stringValue.length;case 6:return Us(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+pf(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return oo(r.fields,(i,o)=>{s+=i.length+pf(o)}),s}(t.mapValue);default:throw re(13486,{value:t})}}function ld(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ew(t){return!!t&&"integerValue"in t}function cd(t){return!!t&&"arrayValue"in t}function zS(t){return!!t&&"nullValue"in t}function qS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function mf(t){return!!t&&"mapValue"in t}function bm(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[uE])==null?void 0:r.stringValue)===dE}function vu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return oo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=vu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vu(t.arrayValue.values[n]);return e}return{...t}}function Dk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===kk}const Nk={mapValue:{fields:{[uE]:{stringValue:dE},[Nl]:{arrayValue:{}}}}};function n9(t){return"nullValue"in t?ff:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ld(Gi.empty(),Z.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?bm(t)?Nk:{mapValue:{}}:re(35942,{value:t})}function r9(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ld(Gi.empty(),Z.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?Nk:"mapValue"in t?bm(t)?{mapValue:{}}:Ai:re(61959,{value:t})}function WS(t,e){const n=Yi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function HS(t,e){const n=Yi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.value=e}static empty(){return new sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!mf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vu(n)}setAll(e){let n=at.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=vu(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());mf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ls(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];mf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){oo(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new sn(vu(this.value))}}function Ok(t){const e=[];return oo(t.fields,(n,r)=>{const s=new at([n]);if(mf(r)){const i=Ok(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new yt(e,0,fe.min(),fe.min(),fe.min(),sn.empty(),0)}static newFoundDocument(e,n,r,s){return new yt(e,1,n,fe.min(),r,s,0)}static newNoDocument(e,n){return new yt(e,2,n,fe.min(),fe.min(),sn.empty(),0)}static newUnknownDocument(e,n){return new yt(e,3,n,fe.min(),fe.min(),sn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n){this.position=e,this.inclusive=n}}function KS(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Z.comparator(Z.fromName(o.referenceValue),n.key):r=Yi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function GS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ls(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,n="asc"){this.field=e,this.dir=n}}function s9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{}class Oe extends Lk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new i9(e,n,r):n==="array-contains"?new l9(e,r):n==="in"?new Bk(e,r):n==="not-in"?new c9(e,r):n==="array-contains-any"?new u9(e,r):new Oe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new o9(e,r):new a9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Yi(n,this.value)):n!==null&&Qi(this.value)===Qi(n)&&this.matchesComparison(Yi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Be extends Lk{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Be(e,n)}matches(e){return Vl(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Vl(t){return t.op==="and"}function tw(t){return t.op==="or"}function hE(t){return Vk(t)&&Vl(t)}function Vk(t){for(const e of t.filters)if(e instanceof Be)return!1;return!0}function nw(t){if(t instanceof Oe)return t.field.canonicalString()+t.op.toString()+Ol(t.value);if(hE(t))return t.filters.map(e=>nw(e)).join(",");{const e=t.filters.map(n=>nw(n)).join(",");return`${t.op}(${e})`}}function Mk(t,e){return t instanceof Oe?function(r,s){return s instanceof Oe&&r.op===s.op&&r.field.isEqual(s.field)&&ls(r.value,s.value)}(t,e):t instanceof Be?function(r,s){return s instanceof Be&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&Mk(o,s.filters[a]),!0):!1}(t,e):void re(19439)}function Fk(t,e){const n=t.filters.concat(e);return Be.create(n,t.op)}function Uk(t){return t instanceof Oe?function(n){return`${n.field.canonicalString()} ${n.op} ${Ol(n.value)}`}(t):t instanceof Be?function(n){return n.op.toString()+" {"+n.getFilters().map(Uk).join(" ,")+"}"}(t):"Filter"}class i9 extends Oe{constructor(e,n,r){super(e,n,r),this.key=Z.fromName(r.referenceValue)}matches(e){const n=Z.comparator(e.key,this.key);return this.matchesComparison(n)}}class o9 extends Oe{constructor(e,n){super(e,"in",n),this.keys=jk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class a9 extends Oe{constructor(e,n){super(e,"not-in",n),this.keys=jk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function jk(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Z.fromName(r.referenceValue))}class l9 extends Oe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return cd(n)&&ad(n.arrayValue,this.value)}}class Bk extends Oe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ad(this.value.arrayValue,n)}}class c9 extends Oe{constructor(e,n){super(e,"not-in",n)}matches(e){if(ad(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ad(this.value.arrayValue,n)}}class u9 extends Oe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!cd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ad(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function rw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new d9(t,e,n,r,s,i,o)}function sa(t){const e=se(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>nw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),_m(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ol(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ol(r)).join(",")),e.Te=n}return e.Te}function Nd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!s9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Mk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!GS(t.startAt,e.startAt)&&GS(t.endAt,e.endAt)}function gp(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function yp(t,e){return t.filters.filter(n=>n instanceof Oe&&n.field.isEqual(e))}function QS(t,e,n){let r=ff,s=!0;for(const i of yp(t,e)){let o=ff,a=!0;switch(i.op){case"<":case"<=":o=n9(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=ff}WS({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];WS({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function YS(t,e,n){let r=Ai,s=!0;for(const i of yp(t,e)){let o=Ai,a=!0;switch(i.op){case">=":case">":o=r9(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=Ai}HS({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];HS({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function $k(t,e,n,r,s,i,o,a){return new sc(t,e,n,r,s,i,o,a)}function Od(t){return new sc(t)}function XS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zk(t){return t.collectionGroup!==null}function wu(t){const e=se(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ze(at.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new ud(i,r))}),n.has(at.keyField().canonicalString())||e.Ie.push(new ud(at.keyField(),r))}return e.Ie}function Gn(t){const e=se(t);return e.Ee||(e.Ee=h9(e,wu(t))),e.Ee}function h9(t,e){if(t.limitType==="F")return rw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ud(s.field,i)});const n=t.endAt?new Ll(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ll(t.startAt.position,t.startAt.inclusive):null;return rw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function sw(t,e){const n=t.filters.concat([e]);return new sc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function vp(t,e,n){return new sc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Am(t,e){return Nd(Gn(t),Gn(e))&&t.limitType===e.limitType}function qk(t){return`${sa(Gn(t))}|lt:${t.limitType}`}function Oa(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Uk(s)).join(", ")}]`),_m(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ol(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ol(s)).join(",")),`Target(${r})`}(Gn(t))}; limitType=${t.limitType})`}function Ld(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Z.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of wu(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=KS(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,wu(r),s)||r.endAt&&!function(o,a,l){const c=KS(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,wu(r),s))}(t,e)}function Wk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Hk(t){return(e,n)=>{let r=!1;for(const s of wu(t)){const i=f9(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function f9(t,e,n){const r=t.field.isKeyField()?Z.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Yi(l,c):re(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return re(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){oo(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return bk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9=new Ye(Z.comparator);function zn(){return p9}const Kk=new Ye(Z.comparator);function Jc(...t){let e=Kk;for(const n of t)e=e.insert(n.key,n);return e}function Gk(t){let e=Kk;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Zr(){return _u()}function Qk(){return _u()}function _u(){return new Ws(t=>t.toString(),(t,e)=>t.isEqual(e))}const m9=new Ye(Z.comparator),g9=new ze(Z.comparator);function Re(...t){let e=g9;for(const n of t)e=e.add(n);return e}const y9=new ze(Ee);function fE(){return y9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nd(e)?"-0":e}}function Yk(t){return{integerValue:""+t}}function v9(t,e){return pk(e)?Yk(e):pE(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(){this._=void 0}}function w9(t,e,n){return t instanceof Ml?function(s,i){const o={fields:{[Pk]:{stringValue:xk},[Ck]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&cE(i)&&(i=Sm(i)),i&&(o.fields[Rk]=i),{mapValue:o}}(n,e):t instanceof ia?Jk(t,e):t instanceof Fl?Zk(t,e):function(s,i){const o=Xk(s,i),a=JS(o)+JS(s.Ae);return ew(o)&&ew(s.Ae)?Yk(a):pE(s.serializer,a)}(t,e)}function _9(t,e,n){return t instanceof ia?Jk(t,e):t instanceof Fl?Zk(t,e):n}function Xk(t,e){return t instanceof dd?function(r){return ew(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ml extends xm{}class ia extends xm{constructor(e){super(),this.elements=e}}function Jk(t,e){const n=eD(e);for(const r of t.elements)n.some(s=>ls(s,r))||n.push(r);return{arrayValue:{values:n}}}class Fl extends xm{constructor(e){super(),this.elements=e}}function Zk(t,e){let n=eD(e);for(const r of t.elements)n=n.filter(s=>!ls(s,r));return{arrayValue:{values:n}}}class dd extends xm{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function JS(t){return st(t.integerValue||t.doubleValue)}function eD(t){return cd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n){this.field=e,this.transform=n}}function E9(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ia&&s instanceof ia||r instanceof Fl&&s instanceof Fl?xl(r.elements,s.elements,ls):r instanceof dd&&s instanceof dd?ls(r.Ae,s.Ae):r instanceof Ml&&s instanceof Ml}(t.transform,e.transform)}class T9{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Pm{}function tD(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Rm(t.key,on.none()):new ic(t.key,t.data,on.none());{const n=t.data,r=sn.empty();let s=new ze(at.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Hs(t.key,r,new Rn(s.toArray()),on.none())}}function I9(t,e,n){t instanceof ic?function(s,i,o){const a=s.value.clone(),l=eb(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Hs?function(s,i,o){if(!gf(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=eb(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(nD(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Eu(t,e,n,r){return t instanceof ic?function(i,o,a,l){if(!gf(i.precondition,o))return a;const c=i.value.clone(),d=tb(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Hs?function(i,o,a,l){if(!gf(i.precondition,o))return a;const c=tb(i.fieldTransforms,l,o),d=o.data;return d.setAll(nD(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return gf(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function S9(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Xk(r.transform,s||null);i!=null&&(n===null&&(n=sn.empty()),n.set(r.field,i))}return n||null}function ZS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&xl(r,s,(i,o)=>E9(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ic extends Pm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Hs extends Pm{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function nD(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function eb(t,e,n){const r=new Map;de(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,_9(o,a,n[s]))}return r}function tb(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,w9(i,o,e))}return r}class Rm extends Pm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rD extends Pm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&I9(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Eu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Eu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Qk();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=tD(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(fe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Re())}isEqual(e){return this.batchId===e.batchId&&xl(this.mutations,e.mutations,(n,r)=>ZS(n,r))&&xl(this.baseMutations,e.baseMutations,(n,r)=>ZS(n,r))}}class yE{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){de(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return m9}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new yE(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vE=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b9{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At,Ve;function A9(t){switch(t){case $.OK:return re(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return re(15467,{code:t})}}function sD(t){if(t===void 0)return Tt("GRPC error has no .code"),$.UNKNOWN;switch(t){case At.OK:return $.OK;case At.CANCELLED:return $.CANCELLED;case At.UNKNOWN:return $.UNKNOWN;case At.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case At.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case At.INTERNAL:return $.INTERNAL;case At.UNAVAILABLE:return $.UNAVAILABLE;case At.UNAUTHENTICATED:return $.UNAUTHENTICATED;case At.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case At.NOT_FOUND:return $.NOT_FOUND;case At.ALREADY_EXISTS:return $.ALREADY_EXISTS;case At.PERMISSION_DENIED:return $.PERMISSION_DENIED;case At.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case At.ABORTED:return $.ABORTED;case At.OUT_OF_RANGE:return $.OUT_OF_RANGE;case At.UNIMPLEMENTED:return $.UNIMPLEMENTED;case At.DATA_LOSS:return $.DATA_LOSS;default:return re(39323,{code:t})}}(Ve=At||(At={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x9(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9=new Ui([4294967295,4294967295],0);function nb(t){const e=x9().encode(t),n=new YC;return n.update(e),new Uint8Array(n.digest())}function rb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ui([n,r],0),new Ui([s,i],0)]}class wE{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Zc(`Invalid padding: ${n}`);if(r<0)throw new Zc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Zc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ui.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Ui.fromNumber(r)));return s.compare(P9)===1&&(s=new Ui([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=nb(e),[r,s]=rb(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new wE(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=nb(e),[r,s]=rb(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Zc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Md.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Vd(fe.min(),s,new Ye(Ee),zn(),Re())}}class Md{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Md(r,n,Re(),Re(),Re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class iD{constructor(e,n){this.targetId=e,this.Ce=n}}class oD{constructor(e,n,r=vt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class sb{constructor(){this.ve=0,this.Fe=ib(),this.Me=vt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Re(),n=Re(),r=Re();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:re(38017,{changeType:i})}}),new Md(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=ib()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,de(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class R9{constructor(e){this.Ge=e,this.ze=new Map,this.je=zn(),this.Je=Dh(),this.He=Dh(),this.Ye=new Ye(Ee)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:re(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(gp(i))if(r===0){const o=new Z(i.path);this.et(n,o,yt.newNoDocument(o,fe.min()))}else de(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Us(r).toUint8Array()}catch(l){if(l instanceof Ak)return Ki("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new wE(o,s,i)}catch(l){return Ki(l instanceof Zc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&gp(a.target)){const l=new Z(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,yt.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=Re();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Vd(e,n,this.Ye,this.je,r);return this.je=zn(),this.Je=Dh(),this.He=Dh(),this.Ye=new Ye(Ee),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new sb,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ze(Ee),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ze(Ee),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new sb),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Dh(){return new Ye(Z.comparator)}function ib(){return new Ye(Z.comparator)}const C9={asc:"ASCENDING",desc:"DESCENDING"},k9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},D9={and:"AND",or:"OR"};class N9{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function iw(t,e){return t.useProto3Json||_m(e)?e:{value:e}}function Ul(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aD(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function O9(t,e){return Ul(t,e.toTimestamp())}function mn(t){return de(!!t,49232),fe.fromTimestamp(function(n){const r=Fs(n);return new je(r.seconds,r.nanos)}(t))}function _E(t,e){return ow(t,e).canonicalString()}function ow(t,e){const n=function(s){return new Fe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function lD(t){const e=Fe.fromString(t);return de(yD(e),10190,{key:e.toString()}),e}function wp(t,e){return _E(t.databaseId,e.path)}function Qo(t,e){const n=lD(e);if(n.get(1)!==t.databaseId.projectId)throw new Y($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Z(dD(n))}function cD(t,e){return _E(t.databaseId,e)}function uD(t){const e=lD(t);return e.length===4?Fe.emptyPath():dD(e)}function aw(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function dD(t){return de(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function ob(t,e,n){return{name:wp(t,e),fields:n.value.mapValue.fields}}function L9(t,e,n){const r=Qo(t,e.name),s=mn(e.updateTime),i=e.createTime?mn(e.createTime):fe.min(),o=new sn({mapValue:{fields:e.fields}}),a=yt.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function V9(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:re(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(de(d===void 0||typeof d=="string",58123),vt.fromBase64String(d||"")):(de(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),vt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?$.UNKNOWN:sD(c.code);return new Y(d,c.message||"")}(o);n=new oD(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Qo(t,r.document.name),i=mn(r.document.updateTime),o=r.document.createTime?mn(r.document.createTime):fe.min(),a=new sn({mapValue:{fields:r.document.fields}}),l=yt.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new yf(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Qo(t,r.document),i=r.readTime?mn(r.readTime):fe.min(),o=yt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new yf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Qo(t,r.document),i=r.removedTargetIds||[];n=new yf([],i,s,null)}else{if(!("filter"in e))return re(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new b9(s,i),a=r.targetId;n=new iD(a,o)}}return n}function _p(t,e){let n;if(e instanceof ic)n={update:ob(t,e.key,e.value)};else if(e instanceof Rm)n={delete:wp(t,e.key)};else if(e instanceof Hs)n={update:ob(t,e.key,e.data),updateMask:$9(e.fieldMask)};else{if(!(e instanceof rD))return re(16599,{Vt:e.type});n={verify:wp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Ml)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ia)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Fl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof dd)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw re(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:O9(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:re(27497)}(t,e.precondition)),n}function lw(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?on.updateTime(mn(i.updateTime)):i.exists!==void 0?on.exists(i.exists):on.none()}(e.currentDocument):on.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)de(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new Ml;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new ia(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new Fl(d)}else"increment"in a?l=new dd(o,a.increment):re(16584,{proto:a});const c=at.fromServerFormat(a.fieldPath);return new mE(c,l)}(t,s)):[];if(e.update){e.update.name;const s=Qo(t,e.update.name),i=new sn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new Rn(c.map(d=>at.fromServerFormat(d)))}(e.updateMask);return new Hs(s,i,o,n,r)}return new ic(s,i,n,r)}if(e.delete){const s=Qo(t,e.delete);return new Rm(s,n)}if(e.verify){const s=Qo(t,e.verify);return new rD(s,n)}return re(1463,{proto:e})}function M9(t,e){return t&&t.length>0?(de(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?mn(s.updateTime):mn(i);return o.isEqual(fe.min())&&(o=mn(i)),new T9(o,s.transformResults||[])}(n,e))):[]}function hD(t,e){return{documents:[cD(t,e.path)]}}function fD(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=cD(t,s);const i=function(c){if(c.length!==0)return gD(Be.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:La(f.field),direction:U9(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=iw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function pD(t){let e=uD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){de(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const f=mD(h);return f instanceof Be&&hE(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(T){return new ud(Va(T.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,_m(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,m=h.values||[];return new Ll(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new Ll(m,f)}(n.endAt)),$k(e,s,o,i,a,"F",l,c)}function F9(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function mD(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Va(n.unaryFilter.field);return Oe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Va(n.unaryFilter.field);return Oe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Va(n.unaryFilter.field);return Oe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Va(n.unaryFilter.field);return Oe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return re(61313);default:return re(60726)}}(t):t.fieldFilter!==void 0?function(n){return Oe.create(Va(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return re(58110);default:return re(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Be.create(n.compositeFilter.filters.map(r=>mD(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return re(1026)}}(n.compositeFilter.op))}(t):re(30097,{filter:t})}function U9(t){return C9[t]}function j9(t){return k9[t]}function B9(t){return D9[t]}function La(t){return{fieldPath:t.canonicalString()}}function Va(t){return at.fromServerFormat(t.fieldPath)}function gD(t){return t instanceof Oe?function(n){if(n.op==="=="){if(qS(n.value))return{unaryFilter:{field:La(n.field),op:"IS_NAN"}};if(zS(n.value))return{unaryFilter:{field:La(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(qS(n.value))return{unaryFilter:{field:La(n.field),op:"IS_NOT_NAN"}};if(zS(n.value))return{unaryFilter:{field:La(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:La(n.field),op:j9(n.op),value:n.value}}}(t):t instanceof Be?function(n){const r=n.getFilters().map(s=>gD(s));return r.length===1?r[0]:{compositeFilter:{op:B9(n.op),filters:r}}}(t):re(54877,{filter:t})}function $9(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function yD(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n,r,s,i=fe.min(),o=fe.min(),a=vt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ss(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e){this.yt=e}}function z9(t,e){let n;if(e.document)n=L9(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Z.fromSegments(e.noDocument.path),s=aa(e.noDocument.readTime);n=yt.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return re(56709);{const r=Z.fromSegments(e.unknownDocument.path),s=aa(e.unknownDocument.version);n=yt.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new je(s[0],s[1]);return fe.fromTimestamp(i)}(e.readTime)),n}function ab(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ep(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:wp(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Ul(i,o.version.toTimestamp()),createTime:Ul(i,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:oa(e.version)};else{if(!e.isUnknownDocument())return re(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:oa(e.version)}}return r}function Ep(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function oa(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function aa(t){const e=new je(t.seconds,t.nanoseconds);return fe.fromTimestamp(e)}function Io(t,e){const n=(e.baseMutations||[]).map(i=>lw(t.yt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>lw(t.yt,i)),s=je.fromMillis(e.localWriteTimeMs);return new gE(e.batchId,s,n,r)}function eu(t){const e=aa(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?aa(t.lastLimboFreeSnapshotVersion):fe.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){const o=i.documents.length;return de(o===1,1966,{count:o}),Gn(Od(uD(i.documents[0])))}(t.query):function(i){return Gn(pD(i))}(t.query),new Ss(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,vt.fromBase64String(t.resumeToken))}function wD(t,e){const n=oa(e.snapshotVersion),r=oa(e.lastLimboFreeSnapshotVersion);let s;s=gp(e.target)?hD(t.yt,e.target):fD(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:sa(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function _D(t){const e=pD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vp(e,e.limit,"L"):e}function sy(t,e){return new vE(e.largestBatchId,lw(t.yt,e.overlayMutation))}function lb(t,e){const n=e.path.lastSegment();return[t,an(e.path.popLast()),n]}function cb(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:oa(r.readTime),documentKey:an(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9{getBundleMetadata(e,n){return ub(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:aa(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return ub(e).put(function(s){return{bundleId:s.id,createTime:oa(mn(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return db(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:_D(i.bundledQuery),readTime:aa(i.readTime)}}(r)})}saveNamedQuery(e,n){return db(e).put(function(s){return{name:s.name,readTime:oa(mn(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function ub(t){return Lt(t,Em)}function db(t){return Lt(t,Tm)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new Cm(e,r)}getOverlay(e,n){return Mc(e).get(lb(this.userId,n)).next(r=>r?sy(this.serializer,r):null)}getOverlays(e,n){const r=Zr();return V.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new vE(n,o);s.push(this.St(e,a))}),V.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(an(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(Mc(e).Z(Xv,a))}),V.waitFor(i)}getOverlaysForCollection(e,n,r){const s=Zr(),i=an(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Mc(e).J(Xv,o).next(a=>{for(const l of a){const c=sy(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=Zr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Mc(e).ee({index:_k,range:a},(l,c,d)=>{const h=sy(this.serializer,c);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>i)}St(e,n){return Mc(e).put(function(s,i,o){const[a,l,c]=lb(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:_p(s.yt,o.mutation)}}(this.serializer,this.userId,n))}}function Mc(t){return Lt(t,Im)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W9{bt(e){return Lt(e,aE)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?vt.fromUint8Array(r):vt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(st(e.integerValue));else if("doubleValue"in e){const r=st(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),nd(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Fs(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Us(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?Dk(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):bm(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):re(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const s=Nl,i=((a=(o=r[s].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(st(i)),this.Ot(s,n),this.Ct(r[s],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),Z.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}So.Kt=new So;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba=255;function H9(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function hb(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=H9(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class K9{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=n.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const n=this.en(e),r=hb(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=hb(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(ba),this.sn(255)}_n(){this.an(ba),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===ba?(this.sn(ba),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===ba?(this.an(ba),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class G9{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class Q9{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Fc{constructor(){this.cn=new K9,this.ln=new G9(this.cn),this.hn=new Q9(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,n,r,s){this.Tn=e,this.In=n,this.En=r,this.dn=s}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new bo(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:vf(this.En),directionalValue:vf(this.dn),orderedDocumentKey:vf(n),documentKey:r.path.toArray()}}Vn(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function oi(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=fb(t.En,e.En),n!==0?n:(n=fb(t.dn,e.dn),n!==0?n:Z.comparator(t.In,e.In)))}function fb(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function vf(t){return gC()?function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r}(t):t}function pb(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(t)}class mb{constructor(e){this.mn=new ze((n,r)=>at.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(de(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=Gv(e);if(n!==void 0&&!this.wn(n))return!1;const r=wo(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new ze(at.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new uf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new uf(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new uf(r.field,r.dir==="asc"?0:1)));return new dp(dp.UNKNOWN_ID,this.collectionId,n,td.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(t){var n,r;if(de(t instanceof Oe||t instanceof Be,20012),t instanceof Oe){if(t instanceof Bk){const s=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(i=>Oe.create(t.field,"==",i)))||[];return Be.create(s,"or")}return t}const e=t.filters.map(s=>ED(s));return Be.create(e,t.op)}function Y9(t){if(t.getFilters().length===0)return[];const e=dw(ED(t));return de(TD(e),7391),cw(e)||uw(e)?[e]:e.getFilters()}function cw(t){return t instanceof Oe}function uw(t){return t instanceof Be&&hE(t)}function TD(t){return cw(t)||uw(t)||function(n){if(n instanceof Be&&tw(n)){for(const r of n.getFilters())if(!cw(r)&&!uw(r))return!1;return!0}return!1}(t)}function dw(t){if(de(t instanceof Oe||t instanceof Be,34018),t instanceof Oe)return t;if(t.filters.length===1)return dw(t.filters[0]);const e=t.filters.map(r=>dw(r));let n=Be.create(e,t.op);return n=Tp(n),TD(n)?n:(de(n instanceof Be,64498),de(Vl(n),40251),de(n.filters.length>1,57927),n.filters.reduce((r,s)=>EE(r,s)))}function EE(t,e){let n;return de(t instanceof Oe||t instanceof Be,38388),de(e instanceof Oe||e instanceof Be,25473),n=t instanceof Oe?e instanceof Oe?function(s,i){return Be.create([s,i],"and")}(t,e):gb(t,e):e instanceof Oe?gb(e,t):function(s,i){if(de(s.filters.length>0&&i.filters.length>0,48005),Vl(s)&&Vl(i))return Fk(s,i.getFilters());const o=tw(s)?s:i,a=tw(s)?i:s,l=o.filters.map(c=>EE(c,a));return Be.create(l,"or")}(t,e),Tp(n)}function gb(t,e){if(Vl(e))return Fk(e,t.getFilters());{const n=e.filters.map(r=>EE(t,r));return Be.create(n,"or")}}function Tp(t){if(de(t instanceof Oe||t instanceof Be,11850),t instanceof Oe)return t;const e=t.getFilters();if(e.length===1)return Tp(e[0]);if(Vk(t))return t;const n=e.map(s=>Tp(s)),r=[];return n.forEach(s=>{s instanceof Oe?r.push(s):s instanceof Be&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:Be.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9{constructor(){this.Cn=new TE}addToCollectionParentIndex(e,n){return this.Cn.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(Yn.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(Yn.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class TE{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ze(Fe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ze(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="IndexedDbIndexManager",Nh=new Uint8Array(0);class J9{constructor(e,n){this.databaseId=n,this.vn=new TE,this.Fn=new Ws(r=>sa(r),(r,s)=>Nd(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const i={collectionId:r,parent:an(s)};return vb(e).put(i)}return V.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[ik(n),""],!1,!0);return vb(e).J(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(Jr(o.parent))}return r})}addFieldIndex(e,n){const r=Uc(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=xa(e);return i.next(a=>{o.put(cb(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=Uc(e),s=xa(e),i=Aa(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Uc(e),r=Aa(e),s=xa(e);return n.Z().next(()=>r.Z()).next(()=>s.Z())}createTargetIndexes(e,n){return V.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new mb(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=Aa(e);let s=!0;const i=new Map;return V.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=Re();const a=[];return V.forEach(i,(l,c)=>{K(yb,`Using index ${function(v){return`id=${v.indexId}|cg=${v.collectionGroup}|f=${v.fields.map(A=>`${A.fieldPath}:${A.kind}`).join(",")}`}(l)} to execute ${sa(n)}`);const d=function(v,A){const R=Gv(A);if(R===void 0)return null;for(const L of yp(v,R.fieldPath))switch(L.op){case"array-contains-any":return L.value.arrayValue.values||[];case"array-contains":return[L.value]}return null}(c,l),h=function(v,A){const R=new Map;for(const L of wo(A))for(const I of yp(v,L.fieldPath))switch(I.op){case"==":case"in":R.set(L.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return R.set(L.fieldPath.canonicalString(),I.value),Array.from(R.values())}return null}(c,l),f=function(v,A){const R=[];let L=!0;for(const I of wo(A)){const S=I.kind===0?QS(v,I.fieldPath,v.startAt):YS(v,I.fieldPath,v.startAt);R.push(S.value),L&&(L=S.inclusive)}return new Ll(R,L)}(c,l),m=function(v,A){const R=[];let L=!0;for(const I of wo(A)){const S=I.kind===0?YS(v,I.fieldPath,v.endAt):QS(v,I.fieldPath,v.endAt);R.push(S.value),L&&(L=S.inclusive)}return new Ll(R,L)}(c,l),T=this.On(l,c,f),y=this.On(l,c,m),_=this.Nn(l,c,h),w=this.Bn(l.indexId,d,T,f.inclusive,y,m.inclusive,_);return V.forEach(w,p=>r.Y(p,n.limit).next(v=>{v.forEach(A=>{const R=Z.fromSegments(A.documentKey);o.has(R)||(o=o.add(R),a.push(R))})}))}).next(()=>a)}return V.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=Y9(Be.create(e.filters,"and")).map(r=>rw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),c=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const f=n?this.Ln(n[h/c]):Nh,m=this.kn(e,f,r[h%c],s),T=this.qn(e,f,i[h%c],o),y=a.map(_=>this.kn(e,f,_,!0));d.push(...this.createRange(m,T,y))}return d}kn(e,n,r,s){const i=new bo(e,Z.empty(),n,r);return s?i:i.An()}qn(e,n,r,s){const i=new bo(e,Z.empty(),n,r);return s?i.An():i}xn(e,n){const r=new mb(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.Mn(n);return V.forEach(s,i=>this.xn(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new ze(at.comparator),d=!1;for(const h of l.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Qn(e,n){const r=new Fc;for(const s of wo(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Pn(s.kind);So.Kt.Dt(i,o)}return r.un()}Ln(e){const n=new Fc;return So.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new Fc;return So.Kt.Dt(ld(this.databaseId,n),r.Pn(function(i){const o=wo(i);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let s=[];s.push(new Fc);let i=0;for(const o of wo(e)){const a=r[i++];for(const l of s)if(this.Un(n,o.fieldPath)&&cd(a))s=this.Kn(s,o,a);else{const c=l.Pn(o.kind);So.Kt.Dt(a,c)}}return this.Wn(s)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new Fc;l.seed(a.un()),So.Kt.Dt(o,l.Pn(n.kind)),i.push(l)}return i}Un(e,n){return!!e.filters.find(r=>r instanceof Oe&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Uc(e),s=xa(e);return(n?r.J(Yv,IDBKeyRange.bound(n,n)):r.J()).next(i=>{const o=[];return V.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const f=h?new td(h.sequenceNumber,new Yn(aa(h.readTime),new Z(Jr(h.documentKey)),h.largestBatchId)):td.empty(),m=d.fields.map(([T,y])=>new uf(at.fromServerFormat(T),y));return new dp(d.indexId,d.collectionGroup,m,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:Ee(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=Uc(e),i=xa(e);return this.Gn(e).next(o=>s.J(Yv,IDBKeyRange.bound(n,n)).next(a=>V.forEach(a,l=>i.put(cb(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return V.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?V.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),V.forEach(a,l=>this.zn(e,s,l).next(c=>{const d=this.jn(i,l);return c.isEqual(d)?V.resolve():this.Jn(e,i,l,c,d)}))))})}Hn(e,n,r,s){return Aa(e).put(s.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,s){return Aa(e).delete(s.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const s=Aa(e);let i=new ze(oi);return s.ee({index:wk,range:IDBKeyRange.only([r.indexId,this.uid,vf(this.$n(r,n))])},(o,a)=>{i=i.add(new bo(r.indexId,n,pb(a.arrayValue),pb(a.directionalValue)))}).next(()=>i)}jn(e,n){let r=new ze(oi);const s=this.Qn(n,e);if(s==null)return r;const i=Gv(n);if(i!=null){const o=e.data.field(i.fieldPath);if(cd(o))for(const a of o.arrayValue.values||[])r=r.add(new bo(n.indexId,e.key,this.Ln(a),s))}else r=r.add(new bo(n.indexId,e.key,Nh,s));return r}Jn(e,n,r,s,i){K(yb,"Updating index entries for document '%s'",n.key);const o=[];return function(l,c,d,h,f){const m=l.getIterator(),T=c.getIterator();let y=Sa(m),_=Sa(T);for(;y||_;){let w=!1,p=!1;if(y&&_){const v=d(y,_);v<0?p=!0:v>0&&(w=!0)}else y!=null?p=!0:w=!0;w?(h(_),_=Sa(T)):p?(f(y),y=Sa(m)):(y=Sa(m),_=Sa(T))}}(s,i,oi,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),V.waitFor(o)}Gn(e){let n=1;return xa(e).ee({index:vk,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>oi(o,a)).filter((o,a,l)=>!a||oi(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=oi(o,e),l=oi(o,n);if(a===0)s[0]=e.An();else if(a>0&&l<0)s.push(o),s.push(o.An());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const a=s[o].Vn(this.uid,Nh,Z.empty()),l=s[o+1].Vn(this.uid,Nh,Z.empty());i.push(IDBKeyRange.bound(a,l))}return i}Zn(e,n){return oi(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(wb)}getMinOffset(e,n){return V.mapArray(this.Mn(n),r=>this.xn(e,r).next(s=>s||re(44426))).next(wb)}}function vb(t){return Lt(t,id)}function Aa(t){return Lt(t,yu)}function Uc(t){return Lt(t,oE)}function xa(t){return Lt(t,gu)}function wb(t){de(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;rE(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Yn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ID=41943040;class nn{static withCacheSize(e){return new nn(e,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(t,e,n){const r=t.store(_r),s=t.store(Rl),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(d,h,f)=>(a++,f.delete()));i.push(l.next(()=>{de(a===1,47070,{batchId:n.batchId})}));const c=[];for(const d of n.mutations){const h=mk(e,d.key.path,n.batchId);i.push(s.delete(h)),c.push(d.key)}return V.waitFor(i).next(()=>c)}function Ip(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw re(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(ID,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);class km{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,n,r,s){de(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new km(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ai(e).ee({index:ko,range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=Ma(e),o=ai(e);return o.add({}).next(a=>{de(typeof a=="number",49019);const l=new gE(a,n,r,s),c=function(m,T,y){const _=y.baseMutations.map(p=>_p(m.yt,p)),w=y.mutations.map(p=>_p(m.yt,p));return{userId:T,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:_,mutations:w}}(this.serializer,this.userId,l),d=[];let h=new ze((f,m)=>Ee(f.canonicalString(),m.canonicalString()));for(const f of s){const m=mk(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),d.push(o.put(c)),d.push(i.put(m,C$))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),V.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return ai(e).get(n).next(r=>r?(de(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),Io(this.serializer,r)):null)}er(e,n){return this.Xn[n]?V.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Xn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return ai(e).ee({index:ko,range:s},(o,a,l)=>{a.userId===this.userId&&(de(a.batchId>=r,47524,{tr:r}),i=Io(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Ko;return ai(e).ee({index:ko,range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Ko],[this.userId,Number.POSITIVE_INFINITY]);return ai(e).J(ko,n).next(r=>r.map(s=>Io(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=df(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return Ma(e).ee({range:s},(o,a,l)=>{const[c,d,h]=o,f=Jr(d);if(c===this.userId&&n.path.isEqual(f))return ai(e).get(h).next(m=>{if(!m)throw re(61480,{nr:o,batchId:h});de(m.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:m.userId,batchId:h}),i.push(Io(this.serializer,m))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(Ee);const s=[];return n.forEach(i=>{const o=df(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=Ma(e).ee({range:a},(c,d,h)=>{const[f,m,T]=c,y=Jr(m);f===this.userId&&i.path.isEqual(y)?r=r.add(T):h.done()});s.push(l)}),V.waitFor(s).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=df(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new ze(Ee);return Ma(e).ee({range:o},(l,c,d)=>{const[h,f,m]=l,T=Jr(f);h===this.userId&&r.isPrefixOf(T)?T.length===s&&(a=a.add(m)):d.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],s=[];return n.forEach(i=>{s.push(ai(e).get(i).next(o=>{if(o===null)throw re(35274,{batchId:i});de(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(Io(this.serializer,o))}))}),V.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return SD(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),V.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return V.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return Ma(e).ee({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=Jr(i[1]);s.push(l)}else a.done()}).next(()=>{de(s.length===0,56720,{sr:s.map(i=>i.canonicalString())})})})}containsKey(e,n){return bD(e,this.userId,n)}_r(e){return AD(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:Ko,lastStreamToken:""})}}function bD(t,e,n){const r=df(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Ma(t).ee({range:i,X:!0},(a,l,c)=>{const[d,h,f]=a;d===e&&h===s&&(o=!0),c.done()}).next(()=>o)}function ai(t){return Lt(t,_r)}function Ma(t){return Lt(t,Rl)}function AD(t){return Lt(t,rd)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new la(0)}static cr(){return new la(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new la(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>fe.fromTimestamp(new je(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.hr(e,s)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Pa(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(de(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return Pa(e).ee((o,a)=>{const l=eu(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>V.waitFor(i)).next(()=>s)}forEachTarget(e,n){return Pa(e).ee((r,s)=>{const i=eu(s);n(i)})}lr(e){return Eb(e).get(pp).next(n=>(de(n!==null,2888),n))}hr(e,n){return Eb(e).put(pp,n)}Pr(e,n){return Pa(e).put(wD(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=sa(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return Pa(e).ee({range:s,index:yk},(o,a,l)=>{const c=eu(a);Nd(n,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=mi(e);return n.forEach(o=>{const a=an(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),V.waitFor(s)}removeMatchingKeys(e,n,r){const s=mi(e);return V.forEach(n,i=>{const o=an(i.path);return V.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=mi(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=mi(e);let i=Re();return s.ee({range:r,X:!0},(o,a,l)=>{const c=Jr(o[1]),d=new Z(c);i=i.add(d)}).next(()=>i)}containsKey(e,n){const r=an(n.path),s=IDBKeyRange.bound([r],[ik(r)],!1,!0);let i=0;return mi(e).ee({index:iE,X:!0,range:s},([o,a],l,c)=>{o!==0&&(i++,c.done())}).next(()=>i>0)}At(e,n){return Pa(e).get(n).next(r=>r?eu(r):null)}}function Pa(t){return Lt(t,Cl)}function Eb(t){return Lt(t,Go)}function mi(t){return Lt(t,kl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb="LruGarbageCollector",xD=1048576;function Ib([t,e],[n,r]){const s=Ee(t,n);return s===0?Ee(e,r):s}class ez{constructor(e){this.Ir=e,this.buffer=new ze(Ib),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Ib(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class PD{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){K(Tb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){io(n)?K(Tb,"Ignoring IndexedDB error during garbage collection: ",n):await so(n)}await this.Vr(3e5)})}}class tz{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return V.resolve(Pn.ce);const r=new ez(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(_b)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_b):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Na()<=De.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function RD(t,e){return new tz(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nz{constructor(e,n){this.db=e,this.garbageCollector=RD(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,s)=>n(s))}addReference(e,n,r){return Oh(e,r)}removeReference(e,n,r){return Oh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Oh(e,n)}br(e,n){return function(s,i){let o=!1;return AD(s).te(a=>bD(s,a,i).next(l=>(l&&(o=!0),V.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(c=>{if(!c)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,fe.min()),mi(e).delete(function(h){return[0,an(h.path)]}(o))))});s.push(l)}}).next(()=>V.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Oh(e,n)}Sr(e,n){const r=mi(e);let s,i=Pn.ce;return r.ee({index:iE},([o,a],{path:l,sequenceNumber:c})=>{o===0?(i!==Pn.ce&&n(new Z(Jr(s)),i),i=c,s=l):i=Pn.ce}).next(()=>{i!==Pn.ce&&n(new Z(Jr(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Oh(t,e){return mi(t).put(function(r,s){return{targetId:0,path:an(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(){this.changes=new Ws(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,yt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rz{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return mo(e).put(r)}removeEntry(e,n,r){return mo(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Ep(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=yt.newInvalidDocument(n);return mo(e).ee({index:hf,range:IDBKeyRange.only(jc(n))},(s,i)=>{r=this.Cr(n,i)}).next(()=>r)}vr(e,n){let r={size:0,document:yt.newInvalidDocument(n)};return mo(e).ee({index:hf,range:IDBKeyRange.only(jc(n))},(s,i)=>{r={document:this.Cr(n,i),size:Ip(i)}}).next(()=>r)}getEntries(e,n){let r=zn();return this.Fr(e,n,(s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)}).next(()=>r)}Mr(e,n){let r=zn(),s=new Ye(Z.comparator);return this.Fr(e,n,(i,o)=>{const a=this.Cr(i,o);r=r.insert(i,a),s=s.insert(i,Ip(o))}).next(()=>({documents:r,Or:s}))}Fr(e,n,r){if(n.isEmpty())return V.resolve();let s=new ze(Ab);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(jc(s.first()),jc(s.last())),o=s.getIterator();let a=o.getNext();return mo(e).ee({index:hf,range:i},(l,c,d)=>{const h=Z.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&Ab(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.j(jc(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Ep(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return mo(e).J(IDBKeyRange.bound(a,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let d=zn();for(const h of c){const f=this.Cr(Z.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(Ld(n,f)||s.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,n,r,s){let i=zn();const o=bb(n,r),a=bb(n,Yn.max());return mo(e).ee({index:gk,range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.Cr(Z.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(h.key,h),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new sz(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Sb(e).get(Qv).next(n=>(de(!!n,20021),n))}Dr(e,n){return Sb(e).put(Qv,n)}Cr(e,n){if(n){const r=z9(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(fe.min())))return r}return yt.newInvalidDocument(e)}}function kD(t){return new rz(t)}class sz extends CD{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Ws(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new ze((i,o)=>Ee(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Br.get(i);if(n.push(this.Nr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=ab(this.Nr.serializer,o);s=s.add(i.path.popLast());const c=Ip(l);r+=c-a.size,n.push(this.Nr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=ab(this.Nr.serializer,o.convertToNoDocument(fe.min()));n.push(this.Nr.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Nr.updateMetadata(e,r)),V.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:s})=>(s.forEach((i,o)=>{this.Br.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function Sb(t){return Lt(t,sd)}function mo(t){return Lt(t,fp)}function jc(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function bb(t,e){const n=e.documentKey.path.toArray();return[t,Ep(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Ab(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=Ee(n[i],r[i]),s)return s;return s=Ee(n.length,r.length),s||(s=Ee(n[n.length-2],r[r.length-2]),s||Ee(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iz{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Eu(r.mutation,s,Rn.empty(),je.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Re()){const s=Zr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Jc();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Zr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Re()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=zn();const o=_u(),a=function(){return _u()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Hs)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Eu(d.mutation,c,d.mutation.getFieldMask(),je.now())):o.set(c.key,Rn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>a.set(c,new iz(d,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=_u();let s=new Ye((o,a)=>o-a),i=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Rn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||Re()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=Qk();d.forEach(f=>{if(!i.has(f)){const m=tD(n.get(f),r.get(f));m!==null&&h.set(f,m),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):zk(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):V.resolve(Zr());let a=Pl,l=i;return o.next(c=>V.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?V.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Re())).next(d=>({batchId:a,changes:Gk(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Z(n)).next(r=>{let s=Jc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Jc();return this.indexManager.getCollectionParents(e,i).next(a=>V.forEach(a,l=>{const c=function(h,f){return new sc(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,yt.newInvalidDocument(d)))});let a=Jc();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&Eu(d.mutation,c,Rn.empty(),je.now()),Ld(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oz{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return V.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:mn(s.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:_D(s.bundledQuery),readTime:mn(s.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(){this.overlays=new Ye(Z.comparator),this.qr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Zr();return V.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const s=Zr(),i=n.length+1,o=new Z(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return V.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ye((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Zr(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Zr(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return V.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new vE(n,r));let i=this.qr.get(n);i===void 0&&(i=Re(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lz{constructor(){this.sessionToken=vt.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(){this.Qr=new ze(Bt.$r),this.Ur=new ze(Bt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Bt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Bt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Z(new Fe([])),r=new Bt(n,e),s=new Bt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Z(new Fe([])),r=new Bt(n,e),s=new Bt(n,e+1);let i=Re();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Bt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Bt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Z.comparator(e.key,n.key)||Ee(e.Yr,n.Yr)}static Kr(e,n){return Ee(e.Yr,n.Yr)||Z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cz{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ze(Bt.$r)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new gE(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new Bt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,n){return V.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return V.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?Ko:this.tr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Bt(n,0),s=new Bt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),V.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(Ee);return n.forEach(s=>{const i=new Bt(s,0),o=new Bt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),V.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Z.isDocumentKey(i)||(i=i.child(""));const o=new Bt(new Z(i),0);let a=new ze(Ee);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Yr)),!0)},o),V.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){de(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return V.forEach(n.mutations,s=>{const i=new Bt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Bt(n,0),s=this.Zr.firstAfterOrEqual(r);return V.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uz{constructor(e){this.ri=e,this.docs=function(){return new Ye(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():yt.newInvalidDocument(n))}getEntries(e,n){let r=zn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():yt.newInvalidDocument(s))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=zn();const o=n.path,a=new Z(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||rE(uk(d),r)<=0||(s.has(d.key)||Ld(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return V.resolve(i)}getAllFromCollectionGroup(e,n,r,s){re(9500)}ii(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new dz(this)}getSize(e){return V.resolve(this.size)}}class dz extends CD{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hz{constructor(e){this.persistence=e,this.si=new Ws(n=>sa(n),Nd),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.oi=0,this._i=new IE,this.targetCount=0,this.ai=la.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),V.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new la(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.Pr(n),V.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),V.waitFor(i).next(()=>s)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),V.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,n){this.ui={},this.overlays={},this.ci=new Pn(0),this.li=!1,this.li=!0,this.hi=new lz,this.referenceDelegate=e(this),this.Pi=new hz(this),this.indexManager=new X9,this.remoteDocumentCache=function(s){return new uz(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new vD(n),this.Ii=new oz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new az,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new cz(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const s=new fz(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return V.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class fz extends hk{constructor(e){super(),this.currentSequenceNumber=e}}class Dm{constructor(e){this.persistence=e,this.Ri=new IE,this.Vi=null}static mi(e){return new Dm(e)}get fi(){if(this.Vi)return this.Vi;throw re(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),V.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.fi,r=>{const s=Z.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,fe.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return V.or([()=>V.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Sp{constructor(e,n){this.persistence=e,this.pi=new Ws(r=>an(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=RD(this,n)}static mi(e,n){return new Sp(e,n)}Ei(){}di(e){return V.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return V.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?V.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,fe.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),V.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),V.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=pf(e.data.value)),n}br(e,n,r){return V.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return V.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pz{constructor(e){this.serializer=e}k(e,n,r,s){const i=new wm("createOrUpgrade",n);r<1&&s>=1&&(function(l){l.createObjectStore(Dd)}(e),function(l){l.createObjectStore(rd,{keyPath:R$}),l.createObjectStore(_r,{keyPath:MS,autoIncrement:!0}).createIndex(ko,FS,{unique:!0}),l.createObjectStore(Rl)}(e),xb(e),function(l){l.createObjectStore(_o)}(e));let o=V.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore(kl),l.deleteObjectStore(Cl),l.deleteObjectStore(Go)}(e),xb(e)),o=o.next(()=>function(l){const c=l.store(Go),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:fe.min().toTimestamp(),targetCount:0};return c.put(pp,d)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store(_r).J().next(h=>{l.deleteObjectStore(_r),l.createObjectStore(_r,{keyPath:MS,autoIncrement:!0}).createIndex(ko,FS,{unique:!0});const f=c.store(_r),m=h.map(T=>f.put(T));return V.waitFor(m)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore(Dl,{keyPath:F$})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.yi(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore(sd)}(e),this.wi(i)))),r<7&&s>=7&&(o=o.next(()=>this.Si(i))),r<8&&s>=8&&(o=o.next(()=>this.bi(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.Di(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(Em,{keyPath:U$})})(e),function(l){l.createObjectStore(Tm,{keyPath:j$})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore(Im,{keyPath:K$});c.createIndex(Xv,G$,{unique:!1}),c.createIndex(_k,Q$,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore(fp,{keyPath:k$});c.createIndex(hf,D$),c.createIndex(gk,N$)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(_o))),r<14&&s>=14&&(o=o.next(()=>this.Fi(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore(oE,{keyPath:B$,autoIncrement:!0}).createIndex(Yv,$$,{unique:!1}),l.createObjectStore(gu,{keyPath:z$}).createIndex(vk,q$,{unique:!1}),l.createObjectStore(yu,{keyPath:W$}).createIndex(wk,H$,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore(gu).clear()}).next(()=>{n.objectStore(yu).clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(aE,{keyPath:Y$})})(e)})),r<18&&s>=18&&gC()&&(o=o.next(()=>{n.objectStore(gu).clear()}).next(()=>{n.objectStore(yu).clear()})),o}wi(e){let n=0;return e.store(_o).ee((r,s)=>{n+=Ip(s)}).next(()=>{const r={byteSize:n};return e.store(sd).put(Qv,r)})}yi(e){const n=e.store(rd),r=e.store(_r);return n.J().next(s=>V.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,Ko],[i.userId,i.lastAcknowledgedBatchId]);return r.J(ko,o).next(a=>V.forEach(a,l=>{de(l.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=Io(this.serializer,l);return SD(e,i.userId,c).next(()=>{})}))}))}Si(e){const n=e.store(kl),r=e.store(_o);return e.store(Go).get(pp).next(s=>{const i=[];return r.ee((o,a)=>{const l=new Fe(o),c=function(h){return[0,an(h)]}(l);i.push(n.get(c).next(d=>d?V.resolve():(h=>n.put({targetId:0,path:an(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>V.waitFor(i))})}bi(e,n){e.createObjectStore(id,{keyPath:M$});const r=n.store(id),s=new TE,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:an(l)})}};return n.store(_o).ee({X:!0},(o,a)=>{const l=new Fe(o);return i(l.popLast())}).next(()=>n.store(Rl).ee({X:!0},([o,a,l],c)=>{const d=Jr(a);return i(d.popLast())}))}Di(e){const n=e.store(Cl);return n.ee((r,s)=>{const i=eu(s),o=wD(this.serializer,i);return n.put(o)})}Ci(e,n){const r=n.store(_o),s=[];return r.ee((i,o)=>{const a=n.store(fp),l=function(h){return h.document?new Z(Fe.fromString(h.document.name).popFirst(5)):h.noDocument?Z.fromSegments(h.noDocument.path):h.unknownDocument?Z.fromSegments(h.unknownDocument.path):re(36783)}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))}).next(()=>V.waitFor(s))}Fi(e,n){const r=n.store(_r),s=kD(this.serializer),i=new SE(Dm.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let c=a.get(l.userId)??Re();Io(this.serializer,l).keys().forEach(d=>c=c.add(d)),a.set(l.userId,c)}),V.forEach(a,(l,c)=>{const d=new tn(c),h=Cm.wt(this.serializer,d),f=i.getIndexManager(d),m=km.wt(d,this.serializer,f,i.referenceDelegate);return new DD(s,m,h,f).recalculateAndSaveOverlaysForDocumentKeys(new Jv(n,Pn.ce),l).next()})})}}function xb(t){t.createObjectStore(kl,{keyPath:L$}).createIndex(iE,V$,{unique:!0}),t.createObjectStore(Cl,{keyPath:"targetId"}).createIndex(yk,O$,{unique:!0}),t.createObjectStore(Go)}const li="IndexedDbPersistence",iy=18e5,oy=5e3,ay="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",mz="main";class bE{constructor(e,n,r,s,i,o,a,l,c,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=i,this.window=o,this.document=a,this.xi=c,this.Oi=d,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!bE.v())throw new Y($.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nz(this,s),this.$i=n+mz,this.serializer=new vD(l),this.Ui=new ji(this.$i,this.Ni,new pz(this.serializer)),this.hi=new W9,this.Pi=new Z9(this.referenceDelegate,this.serializer),this.remoteDocumentCache=kD(this.serializer),this.Ii=new q9,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&Tt(li,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Y($.FAILED_PRECONDITION,ay);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Pn(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Lh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(io(e))return K(li,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return K(li,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Bc(e).get(Ia).next(n=>V.resolve(this.es(n)))}ts(e){return Lh(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,iy)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Lt(n,Dl);return r.J().next(s=>{const i=this.ss(s,iy),o=s.filter(a=>i.indexOf(a)===-1);return V.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?V.resolve(!0):Bc(e).get(Ia).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,oy)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new Y($.FAILED_PRECONDITION,ay);return!1}}return!(!this.networkEnabled||!this.inForeground)||Lh(e).J().next(r=>this.ss(r,oy).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&K(li,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Dd,Dl],e=>{const n=new Jv(e,Pn.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Lh(e).J().next(n=>this.ss(n,iy).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return km.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new J9(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Cm.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){K(li,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(l){return l===18?Z$:l===17?Sk:l===16?J$:l===15?lE:l===14?Ik:l===13?Tk:l===12?X$:l===11?Ek:void re(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,s,i,a=>(o=new Jv(a,this.ci?this.ci.next():Pn.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw Tt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new Y($.FAILED_PRECONDITION,dk);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return Bc(e).get(Ia).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,oy)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Y($.FAILED_PRECONDITION,ay)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Bc(e).put(Ia,n)}static v(){return ji.v()}Zi(e){const n=Bc(e);return n.get(Ia).next(r=>this.es(r)?(K(li,"Releasing primary lease."),n.delete(Ia)):V.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Tt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;mC()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return K(li,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Tt(li,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Tt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Bc(t){return Lt(t,Dd)}function Lh(t){return Lt(t,Dl)}function ND(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Re(),s=Re();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new AE(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return mC()?8:fk(Qt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new gz;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Na()<=De.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Oa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),V.resolve()):(Na()<=De.DEBUG&&K("QueryEngine","Query:",Oa(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Na()<=De.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Oa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gn(n))):V.resolve())}ys(e,n){if(XS(n))return V.resolve(null);let r=Gn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=vp(n,null,"F"),r=Gn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Re(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(e,vp(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,s){return XS(n)||s.isEqual(fe.min())?V.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?V.resolve(null):(Na()<=De.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Oa(n)),this.vs(e,o,n,ck(s,Pl)).next(a=>a))})}Ds(e,n){let r=new ze(Hk(e));return n.forEach((s,i)=>{Ld(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Na()<=De.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Oa(n)),this.ps.getDocumentsMatchingQuery(e,n,Yn.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="LocalStore",yz=3e8;class vz{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ye(Ee),this.xs=new Ws(i=>sa(i),Nd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function LD(t,e,n,r){return new vz(t,e,n,r)}async function VD(t,e){const n=se(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Re();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function wz(t,e){const n=se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,f=h.keys();let m=V.resolve();return f.forEach(T=>{m=m.next(()=>d.getEntry(l,T)).next(y=>{const _=c.docVersions.get(T);de(_!==null,48541),y.version.compareTo(_)<0&&(h.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),d.addEntry(y)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Re();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function MD(t){const e=se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function _z(t,e){const n=se(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;a.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,h)));let m=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(vt.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(h,m),function(y,_,w){return y.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=yz?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(f,m,d)&&a.push(n.Pi.updateTargetData(i,m))});let l=zn(),c=Re();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(Ez(i,o,e.documentUpdates).next(d=>{l=d.ks,c=d.qs})),!r.isEqual(fe.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(h=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return V.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ms=s,i))}function Ez(t,e,n){let r=Re(),s=Re();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=zn();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(fe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):K(xE,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:s}})}function Tz(t,e){const n=se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ko),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function bp(t,e){const n=se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,V.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Ss(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function jl(t,e,n){const r=se(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!io(o))throw o;K(xE,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Ap(t,e,n){const r=se(t);let s=fe.min(),i=Re();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=se(l),f=h.xs.get(d);return f!==void 0?V.resolve(h.Ms.get(f)):h.Pi.getTargetData(c,d)}(r,o,Gn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:fe.min(),n?i:Re())).next(a=>(jD(r,Wk(e),a),{documents:a,Qs:i})))}function FD(t,e){const n=se(t),r=se(n.Pi),s=n.Ms.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.At(i,e).next(o=>o?o.target:null))}function UD(t,e){const n=se(t),r=n.Os.get(e)||fe.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.Ns.getAllFromCollectionGroup(s,e,ck(r,Pl),Number.MAX_SAFE_INTEGER)).then(s=>(jD(n,e,s),s))}function jD(t,e,n){let r=t.Os.get(e)||fe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD="firestore_clients";function Pb(t,e){return`${BD}_${t}_${e}`}const $D="firestore_mutations";function Rb(t,e,n){let r=`${$D}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const zD="firestore_targets";function ly(t,e){return`${zD}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr="SharedClientState";class xp{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Ws(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new Y(s.error.code,s.error.message))),o?new xp(e,n,s.state,i):(Tt(Gr,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Tu{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new Y(r.error.code,r.error.message))),i?new Tu(e,r.state,s):(Tt(Gr,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Pp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=fE();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=pk(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new Pp(e,i):(Tt(Gr,`Failed to parse client data for instance '${e}': ${n}`),null)}}class PE{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new PE(n.clientId,n.onlineState):(Tt(Gr,`Failed to parse online state: ${e}`),null)}}class hw{constructor(){this.activeTargetIds=fE()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cy{constructor(e,n,r,s,i){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Ye(Ee),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=Pb(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new hw),this.ro=new RegExp(`^${BD}_${o}_([^_]*)$`),this.io=new RegExp(`^${$D}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${zD}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const s=this.getItem(Pb(this.persistenceKey,r));if(s){const i=Pp.Ws(r,s);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(ly(this.persistenceKey,e));if(s){const i=Tu.Ws(e,s);i&&(r=i.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ly(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Po(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return K(Gr,"READ",e,n),n}setItem(e,n){K(Gr,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){K(Gr,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(K(Gr,"EVENT",n.key,n.newValue),n.key===this.eo)return void Tt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(i){let o=Pn.ce;if(i!=null)try{const a=JSON.parse(i);de(typeof a=="number",30636,{So:i}),o=a}catch(a){Tt(Gr,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Pn.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(s=>this.syncEngine.Do(s)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const s=new xp(this.currentUser,e,n,r),i=Rb(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Gs())}Po(e){const n=Rb(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const s=ly(this.persistenceKey,e),i=new Tu(e,n,r);this.setItem(s,i.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return Pp.Ws(r,n)}fo(e,n){const r=this.io.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return xp.Ws(new tn(i),s,n)}yo(e,n){const r=this.so.exec(e),s=Number(r[1]);return Tu.Ws(s,n)}uo(e){return PE.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);K(Gr,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),s=this.lo(this.Zs),i=this.lo(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=fE();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class qD{constructor(){this.Mo=new hw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new hw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iz{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb="ConnectivityMonitor";class kb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){K(Cb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){K(Cb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vh=null;function fw(){return Vh===null?Vh=function(){return 268435456+Math.round(2147483648*Math.random())}():Vh++,"0x"+Vh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy="RestConnection",Sz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bz{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===mp?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=fw(),a=this.zo(e,n.toUriEncodedString());K(uy,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:c}=new URL(a),d=zs(c);return this.Jo(e,a,l,r,d).then(h=>(K(uy,`Received RPC '${e}' ${o}: `,h),h),h=>{throw Ki(uy,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+rc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=Sz[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class xz extends bz{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=fw();return new Promise((a,l)=>{const c=new XC;c.setWithCredentials(!0),c.listenOnce(JC.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case cf.NO_ERROR:const h=c.getResponseJson();K(en,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case cf.TIMEOUT:K(en,`RPC '${e}' ${o} timed out`),l(new Y($.DEADLINE_EXCEEDED,"Request time out"));break;case cf.HTTP_ERROR:const f=c.getStatus();if(K(en,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const T=m==null?void 0:m.error;if(T&&T.status&&T.message){const y=function(w){const p=w.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(p)>=0?p:$.UNKNOWN}(T.status);l(new Y(y,T.message))}else l(new Y($.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Y($.UNAVAILABLE,"Connection failed."));break;default:re(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{K(en,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);K(en,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}T_(e,n,r){const s=fw(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=tk(),a=ek(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");K(en,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let f=!1,m=!1;const T=new Az({Yo:_=>{m?K(en,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(f||(K(en,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),K(en,`RPC '${e}' stream ${s} sending:`,_),h.send(_))},Zo:()=>h.close()}),y=(_,w,p)=>{_.listen(w,v=>{try{p(v)}catch(A){setTimeout(()=>{throw A},0)}})};return y(h,Xc.EventType.OPEN,()=>{m||(K(en,`RPC '${e}' stream ${s} transport opened.`),T.o_())}),y(h,Xc.EventType.CLOSE,()=>{m||(m=!0,K(en,`RPC '${e}' stream ${s} transport closed`),T.a_(),this.E_(h))}),y(h,Xc.EventType.ERROR,_=>{m||(m=!0,Ki(en,`RPC '${e}' stream ${s} transport errored. Name:`,_.name,"Message:",_.message),T.a_(new Y($.UNAVAILABLE,"The operation could not be completed")))}),y(h,Xc.EventType.MESSAGE,_=>{var w;if(!m){const p=_.data[0];de(!!p,16349);const v=p,A=(v==null?void 0:v.error)||((w=v[0])==null?void 0:w.error);if(A){K(en,`RPC '${e}' stream ${s} received error:`,A);const R=A.status;let L=function(P){const C=At[P];if(C!==void 0)return sD(C)}(R),I=A.message;L===void 0&&(L=$.INTERNAL,I="Unknown error status: "+R+" with message "+A.message),m=!0,T.a_(new Y(L,I)),h.close()}else K(en,`RPC '${e}' stream ${s} received:`,p),T.u_(p)}}),y(a,ZC.STAT_EVENT,_=>{_.stat===Hv.PROXY?K(en,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===Hv.NOPROXY&&K(en,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{T.__()},0),T}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(){return typeof window<"u"?window:null}function wf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(t){return new N9(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&K("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db="PersistentStream";class KD{constructor(e,n,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new HD(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(Tt(n.toString()),Tt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new Y($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return K(Db,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(K(Db,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Pz extends KD{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=V9(this.serializer,e),r=function(i){if(!("targetChange"in i))return fe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?fe.min():o.readTime?mn(o.readTime):fe.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=aw(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=gp(l)?{documents:hD(i,l)}:{query:fD(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=aD(i,o.resumeToken);const c=iw(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(fe.min())>0){a.readTime=Ul(i,o.snapshotVersion.toTimestamp());const c=iw(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=F9(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=aw(this.serializer),n.removeTarget=e,this.q_(n)}}class Rz extends KD{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return de(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){de(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=M9(e.writeResults,e.commitTime),r=mn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=aw(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>_p(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cz{}class kz extends Cz{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Y($.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,ow(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Y($.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,ow(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y($.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Dz{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Tt(n),this.aa=!1):K("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="RemoteStore";class Nz{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{ma(this)&&(K(ca,"Restarting streams for network reachability change."),await async function(l){const c=se(l);c.Ea.add(4),await oc(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Fd(c)}(this))})}),this.Ra=new Dz(r,s)}}async function Fd(t){if(ma(t))for(const e of t.da)await e(!0)}async function oc(t){for(const e of t.da)await e(!1)}function Om(t,e){const n=se(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),kE(n)?CE(n):lc(n).O_()&&RE(n,e))}function Bl(t,e){const n=se(t),r=lc(n);n.Ia.delete(e),r.O_()&&GD(n,e),n.Ia.size===0&&(r.O_()?r.L_():ma(n)&&n.Ra.set("Unknown"))}function RE(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}lc(t).Y_(e)}function GD(t,e){t.Va.Ue(e),lc(t).Z_(e)}function CE(t){t.Va=new R9({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),lc(t).start(),t.Ra.ua()}function kE(t){return ma(t)&&!lc(t).x_()&&t.Ia.size>0}function ma(t){return se(t).Ea.size===0}function QD(t){t.Va=void 0}async function Oz(t){t.Ra.set("Online")}async function Lz(t){t.Ia.forEach((e,n)=>{RE(t,e)})}async function Vz(t,e){QD(t),kE(t)?(t.Ra.ha(e),CE(t)):t.Ra.set("Unknown")}async function Mz(t,e,n){if(t.Ra.set("Online"),e instanceof oD&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){K(ca,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Rp(t,r)}else if(e instanceof yf?t.Va.Ze(e):e instanceof iD?t.Va.st(e):t.Va.tt(e),!n.isEqual(fe.min()))try{const r=await MD(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ia.get(c);d&&i.Ia.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.Ia.get(l);if(!d)return;i.Ia.set(l,d.withResumeToken(vt.EMPTY_BYTE_STRING,d.snapshotVersion)),GD(i,l);const h=new Ss(d.target,l,c,d.sequenceNumber);RE(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){K(ca,"Failed to raise snapshot:",r),await Rp(t,r)}}async function Rp(t,e,n){if(!io(e))throw e;t.Ea.add(1),await oc(t),t.Ra.set("Offline"),n||(n=()=>MD(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K(ca,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Fd(t)})}function YD(t,e){return e().catch(n=>Rp(t,n,e))}async function ac(t){const e=se(t),n=Xi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ko;for(;Fz(e);)try{const s=await Tz(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,Uz(e,s)}catch(s){await Rp(e,s)}XD(e)&&JD(e)}function Fz(t){return ma(t)&&t.Ta.length<10}function Uz(t,e){t.Ta.push(e);const n=Xi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function XD(t){return ma(t)&&!Xi(t).x_()&&t.Ta.length>0}function JD(t){Xi(t).start()}async function jz(t){Xi(t).ra()}async function Bz(t){const e=Xi(t);for(const n of t.Ta)e.ea(n.mutations)}async function $z(t,e,n){const r=t.Ta.shift(),s=yE.from(r,e,n);await YD(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ac(t)}async function zz(t,e){e&&Xi(t).X_&&await async function(r,s){if(function(o){return A9(o)&&o!==$.ABORTED}(s.code)){const i=r.Ta.shift();Xi(r).B_(),await YD(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ac(r)}}(t,e),XD(t)&&JD(t)}async function Nb(t,e){const n=se(t);n.asyncQueue.verifyOperationInProgress(),K(ca,"RemoteStore received new credentials");const r=ma(n);n.Ea.add(3),await oc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Fd(n)}async function pw(t,e){const n=se(t);e?(n.Ea.delete(2),await Fd(n)):e||(n.Ea.add(2),await oc(n),n.Ra.set("Unknown"))}function lc(t){return t.ma||(t.ma=function(n,r,s){const i=se(n);return i.sa(),new Pz(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:Oz.bind(null,t),t_:Lz.bind(null,t),r_:Vz.bind(null,t),H_:Mz.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),kE(t)?CE(t):t.Ra.set("Unknown")):(await t.ma.stop(),QD(t))})),t.ma}function Xi(t){return t.fa||(t.fa=function(n,r,s){const i=se(n);return i.sa(),new Rz(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:jz.bind(null,t),r_:zz.bind(null,t),ta:Bz.bind(null,t),na:$z.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await ac(t)):(await t.fa.stop(),t.Ta.length>0&&(K(ca,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new DE(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ud(t,e){if(Tt("AsyncQueue",`${e}: ${t}`),io(t))return new Y($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{static emptySet(e){return new ol(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Z.comparator(n.key,r.key):(n,r)=>Z.comparator(n.key,r.key),this.keyedMap=Jc(),this.sortedSet=new Ye(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ol)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ol;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(){this.ga=new Ye(Z.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):re(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class $l{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new $l(e,n,ol.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Am(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qz{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Wz{constructor(){this.queries=Lb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=se(n),i=s.queries;s.queries=Lb(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new Y($.ABORTED,"Firestore shutting down"))}}function Lb(){return new Ws(t=>qk(t),Am)}async function NE(t,e){const n=se(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new qz,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Ud(o,`Initialization of query '${Oa(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&LE(n)}async function OE(t,e){const n=se(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Hz(t,e){const n=se(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&LE(n)}function Kz(t,e,n){const r=se(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function LE(t){t.Ca.forEach(e=>{e.next()})}var mw,Vb;(Vb=mw||(mw={})).Ma="default",Vb.Cache="cache";class VE{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new $l(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=$l.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==mw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e){this.key=e}}class eN{constructor(e){this.key=e}}class tN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Re(),this.mutatedKeys=Re(),this.eu=Hk(e),this.tu=new ol(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Ob,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),m=Ld(this.query,h)?h:null,T=!!f&&this.mutatedKeys.has(f.key),y=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let _=!1;f&&m?f.data.isEqual(m.data)?T!==y&&(r.track({type:3,doc:m}),_=!0):this.su(f,m)||(r.track({type:2,doc:m}),_=!0,(l&&this.eu(m,l)>0||c&&this.eu(m,c)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),_=!0):f&&!m&&(r.track({type:1,doc:f}),_=!0,(l||c)&&(a=!0)),_&&(m?(o=o.add(m),i=y?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(m,T){const y=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re(20277,{Rt:_})}};return y(m)-y(T)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new $l(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ob,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Re(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new eN(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new ZD(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Re();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return $l.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const cc="SyncEngine";class Gz{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Qz{constructor(e){this.key=e,this.hu=!1}}class Yz{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ws(a=>qk(a),Am),this.Iu=new Map,this.Eu=new Set,this.du=new Ye(Z.comparator),this.Au=new Map,this.Ru=new IE,this.Vu={},this.mu=new Map,this.fu=la.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Xz(t,e,n=!0){const r=Lm(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await nN(r,e,n,!0),s}async function Jz(t,e){const n=Lm(t);await nN(n,e,!0,!1)}async function nN(t,e,n,r){const s=await bp(t.localStore,Gn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await ME(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Om(t.remoteStore,s),a}async function ME(t,e,n,r,s){t.pu=(h,f,m)=>async function(y,_,w,p){let v=_.view.ru(w);v.Cs&&(v=await Ap(y.localStore,_.query,!1).then(({documents:I})=>_.view.ru(I,v)));const A=p&&p.targetChanges.get(_.targetId),R=p&&p.targetMismatches.get(_.targetId)!=null,L=_.view.applyChanges(v,y.isPrimaryClient,A,R);return gw(y,_.targetId,L.au),L.snapshot}(t,h,f,m);const i=await Ap(t.localStore,e,!0),o=new tN(e,i.Qs),a=o.ru(i.documents),l=Md.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);gw(t,n,c.au);const d=new Gz(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function Zz(t,e,n){const r=se(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Am(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await jl(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Bl(r.remoteStore,s.targetId),zl(r,s.targetId)}).catch(so)):(zl(r,s.targetId),await jl(r.localStore,s.targetId,!0))}async function e7(t,e){const n=se(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Bl(n.remoteStore,r.targetId))}async function t7(t,e,n){const r=BE(t);try{const s=await function(o,a){const l=se(o),c=je.now(),d=a.reduce((m,T)=>m.add(T.key),Re());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let T=zn(),y=Re();return l.Ns.getEntries(m,d).next(_=>{T=_,T.forEach((w,p)=>{p.isValidDocument()||(y=y.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,T)).next(_=>{h=_;const w=[];for(const p of a){const v=S9(p,h.get(p.key).overlayedDocument);v!=null&&w.push(new Hs(p.key,v,Ok(v.value.mapValue),on.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,w,a)}).next(_=>{f=_;const w=_.applyToLocalDocumentSet(h,y);return l.documentOverlayCache.saveOverlays(m,_.batchId,w)})}).then(()=>({batchId:f.batchId,changes:Gk(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new Ye(Ee)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(r,s.batchId,n),await ao(r,s.changes),await ac(r.remoteStore)}catch(s){const i=Ud(s,"Failed to persist write");n.reject(i)}}async function rN(t,e){const n=se(t);try{const r=await _z(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(de(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?de(o.hu,14607):s.removedDocuments.size>0&&(de(o.hu,42227),o.hu=!1))}),await ao(n,r,e)}catch(r){await so(r)}}function Mb(t,e,n){const r=se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=se(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const f of h.Sa)f.va(a)&&(c=!0)}),c&&LE(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function n7(t,e,n){const r=se(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ye(Z.comparator);o=o.insert(i,yt.newNoDocument(i,fe.min()));const a=Re().add(i),l=new Vd(fe.min(),new Map,new Ye(Ee),o,a);await rN(r,l),r.du=r.du.remove(i),r.Au.delete(e),jE(r)}else await jl(r.localStore,e,!1).then(()=>zl(r,e,n)).catch(so)}async function r7(t,e){const n=se(t),r=e.batch.batchId;try{const s=await wz(n.localStore,e);UE(n,r,null),FE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ao(n,s)}catch(s){await so(s)}}async function s7(t,e,n){const r=se(t);try{const s=await function(o,a){const l=se(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(de(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);UE(r,e,n),FE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ao(r,s)}catch(s){await so(s)}}function FE(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function UE(t,e,n){const r=se(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function zl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||sN(t,r)})}function sN(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Bl(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),jE(t))}function gw(t,e,n){for(const r of n)r instanceof ZD?(t.Ru.addReference(r.key,e),i7(t,r)):r instanceof eN?(K(cc,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||sN(t,r.key)):re(19791,{wu:r})}function i7(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(K(cc,"New document in limbo: "+n),t.Eu.add(r),jE(t))}function jE(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Z(Fe.fromString(e)),r=t.fu.next();t.Au.set(r,new Qz(n)),t.du=t.du.insert(n,r),Om(t.remoteStore,new Ss(Gn(Od(n.path)),r,"TargetPurposeLimboResolution",Pn.ce))}}async function ao(t,e,n){const r=se(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=AE.As(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(l,c){const d=se(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>V.forEach(c,f=>V.forEach(f.Es,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>V.forEach(f.ds,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!io(h))throw h;K(xE,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=d.Ms.get(f),T=m.snapshotVersion,y=m.withLastLimboFreeSnapshotVersion(T);d.Ms=d.Ms.insert(f,y)}}}(r.localStore,i))}async function o7(t,e){const n=se(t);if(!n.currentUser.isEqual(e)){K(cc,"User change. New user:",e.toKey());const r=await VD(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new Y($.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ao(n,r.Ls)}}function a7(t,e){const n=se(t),r=n.Au.get(e);if(r&&r.hu)return Re().add(r.key);{let s=Re();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function l7(t,e){const n=se(t),r=await Ap(n.localStore,e.query,!0),s=e.view.cu(r);return n.isPrimaryClient&&gw(n,e.targetId,s.au),s}async function c7(t,e){const n=se(t);return UD(n.localStore,e).then(r=>ao(n,r))}async function u7(t,e,n,r){const s=se(t),i=await function(a,l){const c=se(a),d=se(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.er(h,l).next(f=>f?c.localDocuments.getDocuments(h,f):V.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await ac(s.remoteStore):n==="acknowledged"||n==="rejected"?(UE(s,e,r||null),FE(s,e),function(a,l){se(se(a).mutationQueue).ir(l)}(s.localStore,e)):re(6720,"Unknown batchState",{Su:n}),await ao(s,i)):K(cc,"Cannot apply mutation batch with id: "+e)}async function d7(t,e){const n=se(t);if(Lm(n),BE(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await Fb(n,r.toArray());n.gu=!0,await pw(n.remoteStore,!0);for(const i of s)Om(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const r=[];let s=Promise.resolve();n.Iu.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(zl(n,o),jl(n.localStore,o,!0))),Bl(n.remoteStore,o)}),await s,await Fb(n,r),function(o){const a=se(o);a.Au.forEach((l,c)=>{Bl(a.remoteStore,c)}),a.Ru.Jr(),a.Au=new Map,a.du=new Ye(Z.comparator)}(n),n.gu=!1,await pw(n.remoteStore,!1)}}async function Fb(t,e,n){const r=se(t),s=[],i=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await bp(r.localStore,Gn(l[0]));for(const c of l){const d=r.Tu.get(c),h=await l7(r,d);h.snapshot&&i.push(h.snapshot)}}else{const c=await FD(r.localStore,o);a=await bp(r.localStore,c),await ME(r,iN(c),o,!1,a.resumeToken)}s.push(a)}return r.Pu.H_(i),s}function iN(t){return $k(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function h7(t){return function(n){return se(se(n).persistence).Ts()}(se(t).localStore)}async function f7(t,e,n,r){const s=se(t);if(s.gu)return void K(cc,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await UD(s.localStore,Wk(i[0])),a=Vd.createSynthesizedRemoteEventForCurrentChange(e,n==="current",vt.EMPTY_BYTE_STRING);await ao(s,o,a);break}case"rejected":await jl(s.localStore,e,!0),zl(s,e,r);break;default:re(64155,n)}}async function p7(t,e,n){const r=Lm(t);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){K(cc,"Adding an already active target "+s);continue}const i=await FD(r.localStore,s),o=await bp(r.localStore,i);await ME(r,iN(i),o.targetId,!1,o.resumeToken),Om(r.remoteStore,o)}for(const s of n)r.Iu.has(s)&&await jl(r.localStore,s,!1).then(()=>{Bl(r.remoteStore,s),zl(r,s)}).catch(so)}}function Lm(t){const e=se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=rN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=a7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=n7.bind(null,e),e.Pu.H_=Hz.bind(null,e.eventManager),e.Pu.yu=Kz.bind(null,e.eventManager),e}function BE(t){const e=se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=r7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=s7.bind(null,e),e}class hd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return LD(this.persistence,new OD,e.initialUser,this.serializer)}Cu(e){return new SE(Dm.mi,this.serializer)}Du(e){return new qD}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hd.provider={build:()=>new hd};class m7 extends hd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){de(this.persistence.referenceDelegate instanceof Sp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new PD(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new SE(r=>Sp.mi(r,n),this.serializer)}}class oN extends hd{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await BE(this.xu.syncEngine),await ac(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return LD(this.persistence,new OD,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new PD(r,e.asyncQueue,n)}Mu(e,n){const r=new x$(n,this.persistence);return new A$(e.asyncQueue,r)}Cu(e){const n=ND(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new bE(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,WD(),wf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new qD}}class g7 extends oN{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof cy&&(this.sharedClientState.syncEngine={Co:u7.bind(null,n),vo:f7.bind(null,n),Fo:p7.bind(null,n),Ts:h7.bind(null,n),Do:c7.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await d7(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=WD();if(!cy.v(n))throw new Y($.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ND(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new cy(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class fd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Mb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=o7.bind(null,this.syncEngine),await pw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Wz}()}createDatastore(e){const n=Nm(e.databaseInfo.databaseId),r=function(i){return new xz(i)}(e.databaseInfo);return function(i,o,a,l){return new kz(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new Nz(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Mb(this.syncEngine,n,0),function(){return kb.v()?new kb:new Iz}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new Yz(s,i,o,a,l,c);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=se(s);K(ca,"RemoteStore shutting down."),i.Ea.add(5),await oc(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}fd.provider={build:()=>new fd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Tt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji="FirestoreClient";class y7{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=tn.UNAUTHENTICATED,this.clientId=ym.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{K(Ji,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K(Ji,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ud(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function dy(t,e){t.asyncQueue.verifyOperationInProgress(),K(Ji,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await VD(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ub(t,e){t.asyncQueue.verifyOperationInProgress();const n=await zE(t);K(Ji,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Nb(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Nb(e.remoteStore,s)),t._onlineComponents=e}async function zE(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K(Ji,"Using user provided OfflineComponentProvider");try{await dy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===$.FAILED_PRECONDITION||s.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ki("Error using user provided cache. Falling back to memory cache: "+n),await dy(t,new hd)}}else K(Ji,"Using default OfflineComponentProvider"),await dy(t,new m7(void 0));return t._offlineComponents}async function qE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K(Ji,"Using user provided OnlineComponentProvider"),await Ub(t,t._uninitializedComponentsProvider._online)):(K(Ji,"Using default OnlineComponentProvider"),await Ub(t,new fd))),t._onlineComponents}function aN(t){return zE(t).then(e=>e.persistence)}function lN(t){return zE(t).then(e=>e.localStore)}function cN(t){return qE(t).then(e=>e.remoteStore)}function v7(t){return qE(t).then(e=>e.syncEngine)}async function Cp(t){const e=await qE(t),n=e.eventManager;return n.onListen=Xz.bind(null,e.syncEngine),n.onUnlisten=Zz.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Jz.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=e7.bind(null,e.syncEngine),n}function w7(t){return t.asyncQueue.enqueue(async()=>{const e=await aN(t),n=await cN(t);return e.setNetworkEnabled(!0),function(s){const i=se(s);return i.Ea.delete(0),Fd(i)}(n)})}function _7(t){return t.asyncQueue.enqueue(async()=>{const e=await aN(t),n=await cN(t);return e.setNetworkEnabled(!1),async function(s){const i=se(s);i.Ea.add(0),await oc(i),i.Ra.set("Offline")}(n)})}function E7(t,e){const n=new ar;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await function(c,d){const h=se(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new Y($.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Ud(a,`Failed to get document '${i} from cache`);o.reject(l)}}(await lN(t),e,n)),n.promise}function T7(t,e,n={}){const r=new ar;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new $E({next:f=>{d.Nu(),o.enqueueAndForget(()=>OE(i,h));const m=f.docs.has(a);!m&&f.fromCache?c.reject(new Y($.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&l&&l.source==="server"?c.reject(new Y($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new VE(Od(a.path),d,{includeMetadataChanges:!0,qa:!0});return NE(i,h)}(await Cp(t),t.asyncQueue,e,n,r)),r.promise}function I7(t,e){const n=new ar;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await Ap(s,i,!0),l=new tN(i,a.Qs),c=l.ru(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=Ud(a,`Failed to execute query '${i} against cache`);o.reject(l)}}(await lN(t),e,n)),n.promise}function S7(t,e,n={}){const r=new ar;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new $E({next:f=>{d.Nu(),o.enqueueAndForget(()=>OE(i,h)),f.fromCache&&l.source==="server"?c.reject(new Y($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new VE(a,d,{includeMetadataChanges:!0,qa:!0});return NE(i,h)}(await Cp(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b7="firestore.googleapis.com",Bb=!0;class $b{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Y($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=b7,this.ssl=Bb}else this.host=e.host,this.ssl=e.ssl??Bb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ID;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xD)throw new Y($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ak("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uN(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Y($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Y($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Y($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class WE{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $b({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $b(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new sk;switch(r.type){case"firstParty":return new y$(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=jb.get(n);r&&(K("ComponentProvider","Removing Datastore"),jb.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Nr(this.firestore,e,this._query)}}class lt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new As(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new lt(this.firestore,e,this._key)}toJSON(){return{type:lt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(kd(n,lt._jsonSchema))return new lt(e,r||null,new Z(Fe.fromString(n.referencePath)))}}lt._jsonSchemaVersion="firestore/documentReference/1.0",lt._jsonSchema={type:Pt("string",lt._jsonSchemaVersion),referencePath:Pt("string")};class As extends Nr{constructor(e,n,r){super(e,n,Od(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new lt(this.firestore,null,new Z(e))}withConverter(e){return new As(this.firestore,e,this._path)}}function oe(t,e,...n){if(t=We(t),ok("collection","path",e),t instanceof WE){const r=Fe.fromString(e,...n);return DS(r),new As(t,null,r)}{if(!(t instanceof lt||t instanceof As))throw new Y($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return DS(r),new As(t.firestore,null,r)}}function ce(t,e,...n){if(t=We(t),arguments.length===1&&(e=ym.newId()),ok("doc","path",e),t instanceof WE){const r=Fe.fromString(e,...n);return kS(r),new lt(t,null,new Z(r))}{if(!(t instanceof lt||t instanceof As))throw new Y($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return kS(r),new lt(t.firestore,t instanceof As?t.converter:null,new Z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="AsyncQueue";class qb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new HD(this,"async_queue_retry"),this._c=()=>{const r=wf();r&&K(zb,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=wf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=wf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ar;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!io(e))throw e;K(zb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Tt("INTERNAL UNHANDLED ERROR: ",Wb(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=DE.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&re(47125,{Pc:Wb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Wb(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class yn extends WE{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new qb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new qb(e),this._firestoreClient=void 0,await e}}}function dN(t,e,n){n||(n=mp);const r=mm(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(bl(i,e))return s;throw new Y($.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Y($.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xD)throw new Y($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&zs(e.host)&&G_(e.host),r.initialize({options:e,instanceIdentifier:n})}function Ks(t){if(t._terminated)throw new Y($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||hN(t),t._firestoreClient}function hN(t){var r,s,i;const e=t._freezeSettings(),n=function(a,l,c,d){return new t9(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,uN(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new y7(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function A7(t,e){Ki("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return fN(t,fd.provider,{build:r=>new oN(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function x7(t){Ki("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();fN(t,fd.provider,{build:n=>new g7(n,e.cacheSizeBytes)})}function fN(t,e,n){if((t=St(t,yn))._firestoreClient||t._terminated)throw new Y($.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Y($.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},hN(t)}function HE(t){return w7(Ks(t=St(t,yn)))}function KE(t){return _7(Ks(t=St(t,yn)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bn(vt.fromBase64String(e))}catch(n){throw new Y($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bn(vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(kd(e,Bn._jsonSchema))return Bn.fromBase64String(e.bytes)}}Bn._jsonSchemaVersion="firestore/bytes/1.0",Bn._jsonSchema={type:Pt("string",Bn._jsonSchemaVersion),bytes:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new at(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:br._jsonSchemaVersion}}static fromJSON(e){if(kd(e,br._jsonSchema))return new br(e.latitude,e.longitude)}}br._jsonSchemaVersion="firestore/geoPoint/1.0",br._jsonSchema={type:Pt("string",br._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ar._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(kd(e,Ar._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ar(e.vectorValues);throw new Y($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ar._jsonSchemaVersion="firestore/vectorValue/1.0",Ar._jsonSchema={type:Pt("string",Ar._jsonSchemaVersion),vectorValues:Pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P7=/^__.*__$/;class R7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Hs(e,this.data,this.fieldMask,n,this.fieldTransforms):new ic(e,this.data,n,this.fieldTransforms)}}class pN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Hs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function mN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re(40011,{Ac:t})}}class Vm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Vm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return kp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(mN(this.Ac)&&P7.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class C7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Nm(e)}Cc(e,n,r,s=!1){return new Vm({Ac:e,methodName:n,Dc:r,path:at.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mm(t){const e=t._freezeSettings(),n=Nm(t._databaseId);return new C7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function gN(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);YE("Data must be an object, but it was:",o,r);const a=yN(r,o);let l,c;if(i.merge)l=new Rn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const f=yw(e,h,n);if(!o.contains(f))throw new Y($.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);wN(d,f)||d.push(f)}l=new Rn(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new R7(new sn(a),l,c)}class Fm extends uc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fm}}function k7(t,e,n){return new Vm({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class GE extends uc{_toFieldTransform(e){return new mE(e.path,new Ml)}isEqual(e){return e instanceof GE}}class QE extends uc{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=k7(this,e,!0),r=this.vc.map(i=>dc(i,n)),s=new ia(r);return new mE(e.path,s)}isEqual(e){return e instanceof QE&&bl(this.vc,e.vc)}}function D7(t,e,n,r){const s=t.Cc(1,e,n);YE("Data must be an object, but it was:",s,r);const i=[],o=sn.empty();oo(r,(l,c)=>{const d=XE(e,l,n);c=We(c);const h=s.yc(d);if(c instanceof Fm)i.push(d);else{const f=dc(c,h);f!=null&&(i.push(d),o.set(d,f))}});const a=new Rn(i);return new pN(o,a,s.fieldTransforms)}function N7(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[yw(e,r,n)],l=[s];if(i.length%2!=0)throw new Y($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(yw(e,i[f])),l.push(i[f+1]);const c=[],d=sn.empty();for(let f=a.length-1;f>=0;--f)if(!wN(c,a[f])){const m=a[f];let T=l[f];T=We(T);const y=o.yc(m);if(T instanceof Fm)c.push(m);else{const _=dc(T,y);_!=null&&(c.push(m),d.set(m,_))}}const h=new Rn(c);return new pN(d,h,o.fieldTransforms)}function O7(t,e,n,r=!1){return dc(n,t.Cc(r?4:3,e))}function dc(t,e){if(vN(t=We(t)))return YE("Unsupported field value:",e,t),yN(t,e);if(t instanceof uc)return function(r,s){if(!mN(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=dc(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=We(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return v9(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=je.fromDate(r);return{timestampValue:Ul(s.serializer,i)}}if(r instanceof je){const i=new je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ul(s.serializer,i)}}if(r instanceof br)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Bn)return{bytesValue:aD(s.serializer,r._byteString)};if(r instanceof lt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:_E(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ar)return function(o,a){return{mapValue:{fields:{[uE]:{stringValue:dE},[Nl]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return pE(a.serializer,c)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${vm(r)}`)}(t,e)}function yN(t,e){const n={};return bk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):oo(t,(r,s)=>{const i=dc(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function vN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof je||t instanceof br||t instanceof Bn||t instanceof lt||t instanceof uc||t instanceof Ar)}function YE(t,e,n){if(!vN(n)||!lk(n)){const r=vm(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function yw(t,e,n){if((e=We(e))instanceof jd)return e._internalPath;if(typeof e=="string")return XE(t,e);throw kp("Field path arguments must be of type string or ",t,!1,void 0,n)}const L7=new RegExp("[~\\*/\\[\\]]");function XE(t,e,n){if(e.search(L7)>=0)throw kp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new jd(...e.split("."))._internalPath}catch{throw kp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function kp(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new Y($.INVALID_ARGUMENT,a+t+l)}function wN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new V7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Um("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class V7 extends _N{data(){return super.data()}}function Um(t,e){return typeof e=="string"?XE(t,e):e instanceof jd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class JE{}class jm extends JE{}function me(t,e,...n){let r=[];e instanceof JE&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Bm).length,a=i.filter(l=>l instanceof Bd).length;if(o>1||o>0&&a>0)throw new Y($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Bd extends jm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Bd(e,n,r)}_apply(e){const n=this._parse(e);return TN(e._query,n),new Nr(e.firestore,e.converter,sw(e._query,n))}_parse(e){const n=Mm(e.firestore);return function(i,o,a,l,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Y($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Gb(h,d);const T=[];for(const y of h)T.push(Kb(l,i,y));f={arrayValue:{values:T}}}else f=Kb(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Gb(h,d),f=O7(a,o,h,d==="in"||d==="not-in");return Oe.create(c,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function pe(t,e,n){const r=e,s=Um("where",t);return Bd._create(s,r,n)}class Bm extends JE{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Bm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Be.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)TN(o,l),o=sw(o,l)}(e._query,n),new Nr(e.firestore,e.converter,sw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $m extends jm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new $m(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Y($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Y($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ud(i,o)}(e._query,this._field,this._direction);return new Nr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new sc(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ss(t,e="asc"){const n=e,r=Um("orderBy",t);return $m._create(r,n)}class zm extends jm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new zm(e,n,r)}_apply(e){return new Nr(e.firestore,e.converter,vp(e._query,this._limit,this._limitType))}}function Bi(t){return I$("limit",t),zm._create("limit",t,"F")}function Kb(t,e,n){if(typeof(n=We(n))=="string"){if(n==="")throw new Y($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zk(e)&&n.indexOf("/")!==-1)throw new Y($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Fe.fromString(n));if(!Z.isDocumentKey(r))throw new Y($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ld(t,new Z(r))}if(n instanceof lt)return ld(t,n._key);throw new Y($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vm(n)}.`)}function Gb(t,e){if(!Array.isArray(t)||t.length===0)throw new Y($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function TN(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class IN{convertValue(e,n="none"){switch(Qi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return st(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return oo(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Nl].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>st(o.doubleValue));return new Ar(n)}convertGeoPoint(e){return new br(st(e.latitude),st(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Sm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(od(e));default:return null}}convertTimestamp(e){const n=Fs(e);return new je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Fe.fromString(e);de(yD(r),9688,{name:e});const s=new Gi(r.get(1),r.get(3)),i=new Z(r.popFirst(5));return s.isEqual(n)||Tt(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Do{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xs extends _N{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Iu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Um("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Y($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=xs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}xs._jsonSchemaVersion="firestore/documentSnapshot/1.0",xs._jsonSchema={type:Pt("string",xs._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class Iu extends xs{data(e={}){return super.data(e)}}class Ps{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Do(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Iu(this._firestore,this._userDataWriter,r.key,r,new Do(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Iu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Do(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Iu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Do(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:M7(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Y($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ps._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ym.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function M7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(t){t=St(t,lt);const e=St(t.firestore,yn);return T7(Ks(e),t._key).then(n=>AN(e,t,n))}Ps._jsonSchemaVersion="firestore/querySnapshot/1.0",Ps._jsonSchema={type:Pt("string",Ps._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class $d extends IN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new lt(this.firestore,null,n)}}function bN(t){t=St(t,lt);const e=St(t.firestore,yn),n=Ks(e),r=new $d(e);return E7(n,t._key).then(s=>new xs(e,r,t._key,s,new Do(s!==null&&s.hasLocalMutations,!0),t.converter))}function we(t){t=St(t,Nr);const e=St(t.firestore,yn),n=Ks(e),r=new $d(e);return EN(t._query),S7(n,t._query).then(s=>new Ps(e,r,t,s))}function F7(t){t=St(t,Nr);const e=St(t.firestore,yn),n=Ks(e),r=new $d(e);return I7(n,t._query).then(s=>new Ps(e,r,t,s))}function Xn(t,e,n){t=St(t,lt);const r=St(t.firestore,yn),s=SN(t.converter,e,n);return zd(r,[gN(Mm(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,on.none())])}function qe(t,e,n,...r){t=St(t,lt);const s=St(t.firestore,yn),i=Mm(s);let o;return o=typeof(e=We(e))=="string"||e instanceof jd?N7(i,"updateDoc",t._key,e,n,r):D7(i,"updateDoc",t._key,e),zd(s,[o.toMutation(t._key,on.exists(!0))])}function Nt(t){return zd(St(t.firestore,yn),[new Rm(t._key,on.none())])}function lr(t,e){const n=St(t.firestore,yn),r=ce(t),s=SN(t.converter,e);return zd(n,[gN(Mm(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,on.exists(!1))]).then(()=>r)}function js(t,...e){var l,c,d;t=We(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Hb(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Hb(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(c=h.error)==null?void 0:c.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let i,o,a;if(t instanceof lt)o=St(t.firestore,yn),a=Od(t._key.path),i={next:h=>{e[r]&&e[r](AN(o,t,h))},error:e[r+1],complete:e[r+2]};else{const h=St(t,Nr);o=St(h.firestore,yn),a=h._query;const f=new $d(o);i={next:m=>{e[r]&&e[r](new Ps(o,f,h,m))},error:e[r+1],complete:e[r+2]},EN(t._query)}return function(f,m,T,y){const _=new $E(y),w=new VE(m,_,T);return f.asyncQueue.enqueueAndForget(async()=>NE(await Cp(f),w)),()=>{_.Nu(),f.asyncQueue.enqueueAndForget(async()=>OE(await Cp(f),w))}}(Ks(o),a,s,i)}function zd(t,e){return function(r,s){const i=new ar;return r.asyncQueue.enqueueAndForget(async()=>t7(await v7(r),s,i)),i.promise}(Ks(t),e)}function AN(t,e,n){const r=n.docs.get(e._key),s=new $d(t);return new xs(t,s,e._key,r,new Do(n.hasPendingWrites,n.fromCache),e.converter)}function ge(){return new GE("serverTimestamp")}function U7(...t){return new QE("arrayUnion",t)}(function(e,n=!0){(function(s){rc=s})(Rd),as(new Cr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new yn(new m$(r.getProvider("auth-internal")),new v$(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Y($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gi(c.options.projectId,d)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Kn(xS,PS,e),Kn(xS,PS,"esm2020")})();const Su=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:IN,Bytes:Bn,CollectionReference:As,DocumentReference:lt,DocumentSnapshot:xs,FieldPath:jd,FieldValue:uc,Firestore:yn,FirestoreError:Y,GeoPoint:br,Query:Nr,QueryCompositeFilterConstraint:Bm,QueryConstraint:jm,QueryDocumentSnapshot:Iu,QueryFieldFilterConstraint:Bd,QueryLimitConstraint:zm,QueryOrderByConstraint:$m,QuerySnapshot:Ps,SnapshotMetadata:Do,Timestamp:je,VectorValue:Ar,_AutoId:ym,_ByteString:vt,_DatabaseId:Gi,_DocumentKey:Z,_EmptyAuthCredentialsProvider:sk,_FieldPath:at,_cast:St,_logWarn:Ki,_validateIsNotUsedTogether:ak,addDoc:lr,arrayUnion:U7,collection:oe,deleteDoc:Nt,disableNetwork:KE,doc:ce,enableIndexedDbPersistence:A7,enableMultiTabIndexedDbPersistence:x7,enableNetwork:HE,ensureFirestoreConfigured:Ks,executeWrite:zd,getDoc:Ge,getDocFromCache:bN,getDocs:we,getDocsFromCache:F7,initializeFirestore:dN,limit:Bi,onSnapshot:js,orderBy:ss,query:me,serverTimestamp:ge,setDoc:Xn,setLogLevel:nk,updateDoc:qe,where:pe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j7="type.googleapis.com/google.protobuf.Int64Value",B7="type.googleapis.com/google.protobuf.UInt64Value";function xN(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Dp(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Dp(e));if(typeof t=="function"||typeof t=="object")return xN(t,e=>Dp(e));throw new Error("Data cannot be encoded in JSON: "+t)}function ql(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case j7:case B7:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>ql(e)):typeof t=="function"||typeof t=="object"?xN(t,e=>ql(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Cn extends Dr{constructor(e,n,r){super(`${ZE}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Cn.prototype)}}function $7(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Np(t,e){let n=$7(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!Qb[o])return new Cn("internal","internal");n=Qb[o],r=o}const a=i.message;typeof a=="string"&&(r=a),s=i.details,s!==void 0&&(s=ql(s))}}catch{}return n==="ok"?null:new Cn(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,jn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw="us-central1",q7=/^data: (.*?)(?:\n|$)/;function W7(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Cn("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class H7{constructor(e,n,r,s,i=vw,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new z7(e,n,r,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=vw}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function K7(t,e,n){const r=zs(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(G_(t.emulatorOrigin+"/backends"),fC("Functions",!0))}function G7(t,e,n){const r=s=>Y7(t,e,s,{});return r.stream=(s,i)=>J7(t,e,s,i),r}function PN(t){return t.emulatorOrigin&&zs(t.emulatorOrigin)?"include":void 0}async function Q7(t,e,n,r,s){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:PN(s)})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function RN(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function Y7(t,e,n,r){const s=t._url(e);return X7(t,s,n,r)}async function X7(t,e,n,r){n=Dp(n);const s={data:n},i=await RN(t,r),o=r.timeout||7e4,a=W7(o),l=await Promise.race([Q7(e,s,i,t.fetchImpl,t),a.promise,t.cancelAllRequests]);if(a.cancel(),!l)throw new Cn("cancelled","Firebase Functions instance was deleted.");const c=Np(l.status,l.json);if(c)throw c;if(!l.json)throw new Cn("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new Cn("internal","Response is missing data field.");return{data:ql(d)}}function J7(t,e,n,r){const s=t._url(e);return Z7(t,s,n,r||{})}async function Z7(t,e,n,r){var f;n=Dp(n);const s={data:n},i=await RN(t,r);i["Content-Type"]="application/json",i.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:i,signal:r==null?void 0:r.signal,credentials:PN(t)})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const y=new Cn("cancelled","Request was cancelled.");return{data:Promise.reject(y),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(y)}}}}}}const T=Np(0,null);return{data:Promise.reject(T),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(T)}}}}}}let a,l;const c=new Promise((m,T)=>{a=m,l=T});(f=r==null?void 0:r.signal)==null||f.addEventListener("abort",()=>{const m=new Cn("cancelled","Request was cancelled.");l(m)});const d=o.body.getReader(),h=e8(d,a,l,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const m=h.getReader();return{async next(){const{value:T,done:y}=await m.read();return{value:T,done:y}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:c}}function e8(t,e,n,r){const s=(o,a)=>{const l=o.match(q7);if(!l)return;const c=l[1];try{const d=JSON.parse(c);if("result"in d){e(ql(d.result));return}if("message"in d){a.enqueue(ql(d.message));return}if("error"in d){const h=Np(0,d);a.error(h),n(h);return}}catch(d){if(d instanceof Cn){a.error(d),n(d);return}}},i=new TextDecoder;return new ReadableStream({start(o){let a="";return l();async function l(){if(r!=null&&r.aborted){const c=new Cn("cancelled","Request was cancelled");return o.error(c),n(c),Promise.resolve()}try{const{value:c,done:d}=await t.read();if(d){a.trim()&&s(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const f=new Cn("cancelled","Request was cancelled");o.error(f),n(f),await t.cancel();return}a+=i.decode(c,{stream:!0});const h=a.split(`
`);a=h.pop()||"";for(const f of h)f.trim()&&s(f.trim(),o);return l()}catch(c){const d=c instanceof Cn?c:Np(0,null);o.error(d),n(d)}}},cancel(){return t.cancel()}})}const Yb="@firebase/functions",Xb="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8="auth-internal",n8="app-check-internal",r8="messaging-internal";function s8(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(t8),o=n.getProvider(r8),a=n.getProvider(n8);return new H7(s,i,o,a,r)};as(new Cr(ZE,e,"PUBLIC").setMultipleInstances(!0)),Kn(Yb,Xb,t),Kn(Yb,Xb,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i8(t=EC(),e=vw){const r=mm(We(t),ZE).getImmediate({identifier:e}),s=dC("functions");return s&&o8(r,...s),r}function o8(t,e,n){K7(We(t),e,n)}function e0(t,e,n){return G7(We(t),e)}s8();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN="firebasestorage.googleapis.com",kN="storageBucket",a8=2*60*1e3,l8=10*60*1e3,c8=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft extends Dr{constructor(e,n,r=0){super(hy(e),`Firebase Storage: ${n} (${hy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ft.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return hy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var nt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(nt||(nt={}));function hy(t){return"storage/"+t}function t0(){const t="An unknown error occurred, please check the error payload for server response.";return new ft(nt.UNKNOWN,t)}function u8(t){return new ft(nt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function d8(t){return new ft(nt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function h8(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ft(nt.UNAUTHENTICATED,t)}function f8(){return new ft(nt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function p8(t){return new ft(nt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function DN(){return new ft(nt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function NN(){return new ft(nt.CANCELED,"User canceled the upload/download.")}function m8(t){return new ft(nt.INVALID_URL,"Invalid URL '"+t+"'.")}function g8(t){return new ft(nt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function y8(){return new ft(nt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+kN+"' property when initializing the app?")}function ON(){return new ft(nt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function v8(){return new ft(nt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function w8(){return new ft(nt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function _8(t){return new ft(nt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ww(t){return new ft(nt.INVALID_ARGUMENT,t)}function LN(){return new ft(nt.APP_DELETED,"The Firebase app was deleted.")}function E8(t){return new ft(nt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function bu(t,e){return new ft(nt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function $c(t){throw new ft(nt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=qn.makeFromUrl(e,n)}catch{return new qn(e,"")}if(r.path==="")return r;throw g8(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(A){A.path.charAt(A.path.length-1)==="/"&&(A.path_=A.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(A){A.path_=decodeURIComponent(A.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${d}/b/${s}/o${f}`,"i"),T={bucket:1,path:3},y=n===CN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",w=new RegExp(`^https?://${y}/${s}/${_}`,"i"),v=[{regex:a,indices:l,postModify:i},{regex:m,indices:T,postModify:c},{regex:w,indices:{bucket:1,path:2},postModify:c}];for(let A=0;A<v.length;A++){const R=v[A],L=R.regex.exec(e);if(L){const I=L[R.indices.bucket];let S=L[R.indices.path];S||(S=""),r=new qn(I,S),R.postModify(r);break}}if(r==null)throw m8(e);return r}}class T8{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I8(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(..._){c||(c=!0,e.apply(null,_))}function h(_){s=setTimeout(()=>{s=null,t(m,l())},_)}function f(){i&&clearTimeout(i)}function m(_,...w){if(c){f();return}if(_){f(),d.call(null,_,...w);return}if(l()||o){f(),d.call(null,_,...w);return}r<64&&(r*=2);let v;a===1?(a=2,v=0):v=(r+Math.random())*1e3,h(v)}let T=!1;function y(_){T||(T=!0,f(),!c&&(s!==null?(_||(a=2),clearTimeout(s),h(0)):_||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,y(!0)},n),y}function S8(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b8(t){return t!==void 0}function A8(t){return typeof t=="function"}function x8(t){return typeof t=="object"&&!Array.isArray(t)}function qm(t){return typeof t=="string"||t instanceof String}function Jb(t){return n0()&&t instanceof Blob}function n0(){return typeof Blob<"u"}function Zb(t,e,n,r){if(r<e)throw ww(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw ww(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function VN(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Yo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Yo||(Yo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{constructor(e,n,r,s,i,o,a,l,c,d,h,f=!0,m=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,y)=>{this.resolve_=T,this.reject_=y,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Mh(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Yo.NO_ERROR,l=i.getStatus();if(!a||MN(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===Yo.ABORT;r(!1,new Mh(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Mh(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());b8(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=t0();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?LN():NN();o(l)}else{const l=DN();o(l)}};this.canceled_?n(!1,new Mh(!1,null,!0)):this.backoffId_=I8(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&S8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Mh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function R8(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function C8(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function k8(t,e){e&&(t["X-Firebase-GMPID"]=e)}function D8(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function N8(t,e,n,r,s,i,o=!0,a=!1){const l=VN(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return k8(d,e),R8(d,n),C8(d,i),D8(d,r),new P8(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O8(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function L8(...t){const e=O8();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(n0())return new Blob(t);throw new ft(nt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function V8(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M8(t){if(typeof atob>"u")throw _8("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class fy{constructor(e,n){this.data=e,this.contentType=n||null}}function F8(t,e){switch(t){case es.RAW:return new fy(FN(e));case es.BASE64:case es.BASE64URL:return new fy(UN(t,e));case es.DATA_URL:return new fy(j8(e),B8(e))}throw t0()}function FN(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function U8(t){let e;try{e=decodeURIComponent(t)}catch{throw bu(es.DATA_URL,"Malformed data URL.")}return FN(e)}function UN(t,e){switch(t){case es.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw bu(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case es.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw bu(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=M8(e)}catch(s){throw s.message.includes("polyfill")?s:bu(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class jN{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw bu(es.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=$8(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function j8(t){const e=new jN(t);return e.base64?UN(es.BASE64,e.rest):U8(e.rest)}function B8(t){return new jN(t).contentType}function $8(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,n){let r=0,s="";Jb(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Jb(this.data_)){const r=this.data_,s=V8(r,e,n);return s===null?null:new ws(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ws(r,!0)}}static getBlob(...e){if(n0()){const n=e.map(r=>r instanceof ws?r.data_:r);return new ws(L8.apply(null,n))}else{const n=e.map(o=>qm(o)?F8(es.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new ws(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(t){let e;try{e=JSON.parse(t)}catch{return null}return x8(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z8(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function q8(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function $N(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W8(t,e){return e}class un{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||W8}}let Fh=null;function H8(t){return!qm(t)||t.length<2?t:$N(t)}function r0(){if(Fh)return Fh;const t=[];t.push(new un("bucket")),t.push(new un("generation")),t.push(new un("metageneration")),t.push(new un("name","fullPath",!0));function e(i,o){return H8(o)}const n=new un("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new un("size");return s.xform=r,t.push(s),t.push(new un("timeCreated")),t.push(new un("updated")),t.push(new un("md5Hash",null,!0)),t.push(new un("cacheControl",null,!0)),t.push(new un("contentDisposition",null,!0)),t.push(new un("contentEncoding",null,!0)),t.push(new un("contentLanguage",null,!0)),t.push(new un("contentType",null,!0)),t.push(new un("metadata","customMetadata",!0)),Fh=t,Fh}function K8(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new qn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function G8(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return K8(r,t),r}function zN(t,e,n){const r=BN(e);return r===null?null:G8(t,r,n)}function Q8(t,e,n,r){const s=BN(e);if(s===null||!qm(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,f="/b/"+o(d)+"/o/"+o(h),m=qd(f,n,r),T=VN({alt:"media",token:c});return m+T})[0]}function qN(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class hc{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rs(t){if(!t)throw t0()}function s0(t,e){function n(r,s){const i=zN(t,s,e);return Rs(i!==null),i}return n}function Y8(t,e){function n(r,s){const i=zN(t,s,e);return Rs(i!==null),Q8(i,s,t.host,t._protocol)}return n}function Wd(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=f8():s=h8():n.getStatus()===402?s=d8(t.bucket):n.getStatus()===403?s=p8(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function WN(t){const e=Wd(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=u8(t.path)),i.serverResponse=s.serverResponse,i}return n}function X8(t,e,n){const r=e.fullServerUrl(),s=qd(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new hc(s,i,s0(t,n),o);return a.errorHandler=WN(e),a}function J8(t,e,n){const r=e.fullServerUrl(),s=qd(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new hc(s,i,Y8(t,n),o);return a.errorHandler=WN(e),a}function Z8(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function HN(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Z8(null,e)),r}function KN(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let v="";for(let A=0;A<2;A++)v=v+Math.random().toString().slice(2);return v}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=HN(e,r,s),d=qN(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",m=ws.getBlob(h,r,f);if(m===null)throw ON();const T={name:c.fullPath},y=qd(i,t.host,t._protocol),_="POST",w=t.maxUploadRetryTime,p=new hc(y,_,s0(t,n),w);return p.urlParams=T,p.headers=o,p.body=m.uploadData(),p.errorHandler=Wd(e),p}class Op{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function i0(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Rs(!1)}return Rs(!!n&&(e||["active"]).indexOf(n)!==-1),n}function eq(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=HN(e,r,s),a={name:o.fullPath},l=qd(i,t.host,t._protocol),c="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=qN(o,n),f=t.maxUploadRetryTime;function m(y){i0(y);let _;try{_=y.getResponseHeader("X-Goog-Upload-URL")}catch{Rs(!1)}return Rs(qm(_)),_}const T=new hc(l,c,m,f);return T.urlParams=a,T.headers=d,T.body=h,T.errorHandler=Wd(e),T}function tq(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(c){const d=i0(c,["active","final"]);let h=null;try{h=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Rs(!1)}h||Rs(!1);const f=Number(h);return Rs(!isNaN(f)),new Op(f,r.size(),d==="final")}const o="POST",a=t.maxUploadRetryTime,l=new hc(n,o,i,a);return l.headers=s,l.errorHandler=Wd(e),l}const eA=256*1024;function nq(t,e,n,r,s,i,o,a){const l=new Op(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw v8();const c=l.total-l.current;let d=c;s>0&&(d=Math.min(d,s));const h=l.current,f=h+d;let m="";d===0?m="finalize":c===d?m="upload, finalize":m="upload";const T={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${l.current}`},y=r.slice(h,f);if(y===null)throw ON();function _(A,R){const L=i0(A,["active","final"]),I=l.current+d,S=r.size();let P;return L==="final"?P=s0(e,i)(A,R):P=null,new Op(I,S,L==="final",P)}const w="POST",p=e.maxUploadRetryTime,v=new hc(n,w,_,p);return v.headers=T,v.body=y.uploadData(),v.progressCallback=a||null,v.errorHandler=Wd(t),v}const bn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function py(t){switch(t){case"running":case"pausing":case"canceling":return bn.RUNNING;case"paused":return bn.PAUSED;case"success":return bn.SUCCESS;case"canceled":return bn.CANCELED;case"error":return bn.ERROR;default:return bn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rq{constructor(e,n,r){if(A8(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ra(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class sq{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Yo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Yo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Yo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw $c("cannot .send() more than once");if(zs(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw $c("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw $c("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw $c("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw $c("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class iq extends sq{initXhr(){this.xhr_.responseType="text"}}function Ao(){return new iq}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oq{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=r0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(nt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(MN(s.status,[]))if(i)s=DN();else{this.sleepTime=Math.max(this.sleepTime*2,c8),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(nt.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=eq(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Ao,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=tq(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,Ao,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=eA*this._chunkMultiplier,n=new Op(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=nq(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,Ao,s,i,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){eA*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=X8(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Ao,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=KN(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Ao,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=NN(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=py(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new rq(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(py(this._state)){case bn.SUCCESS:Ra(this._resolve.bind(null,this.snapshot))();break;case bn.CANCELED:case bn.ERROR:const n=this._reject;Ra(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(py(this._state)){case bn.RUNNING:case bn.PAUSED:e.next&&Ra(e.next.bind(e,this.snapshot))();break;case bn.SUCCESS:e.complete&&Ra(e.complete.bind(e))();break;case bn.CANCELED:case bn.ERROR:e.error&&Ra(e.error.bind(e,this._error))();break;default:e.error&&Ra(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n){this._service=e,n instanceof qn?this._location=n:this._location=qn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ua(e,n)}get root(){const e=new qn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $N(this._location.path)}get storage(){return this._service}get parent(){const e=z8(this._location.path);if(e===null)return null;const n=new qn(this._location.bucket,e);return new ua(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw E8(e)}}function aq(t,e,n){t._throwIfRoot("uploadBytes");const r=KN(t.storage,t._location,r0(),new ws(e,!0),n);return t.storage.makeRequestWithTokens(r,Ao).then(s=>({metadata:s,ref:t}))}function lq(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new oq(t,new ws(e),n)}function cq(t){t._throwIfRoot("getDownloadURL");const e=J8(t.storage,t._location,r0());return t.storage.makeRequestWithTokens(e,Ao).then(n=>{if(n===null)throw w8();return n})}function uq(t,e){const n=q8(t._location.path,e),r=new qn(t._location.bucket,n);return new ua(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dq(t){return/^[A-Za-z]+:\/\//.test(t)}function hq(t,e){return new ua(t,e)}function GN(t,e){if(t instanceof o0){const n=t;if(n._bucket==null)throw y8();const r=new ua(n,n._bucket);return e!=null?GN(r,e):r}else return e!==void 0?uq(t,e):t}function fq(t,e){if(e&&dq(e)){if(t instanceof o0)return hq(t,e);throw ww("To use ref(service, url), the first argument must be a Storage instance.")}else return GN(t,e)}function tA(t,e){const n=e==null?void 0:e[kN];return n==null?null:qn.makeFromBucketSpec(n,t)}function pq(t,e,n,r={}){t.host=`${e}:${n}`;const s=zs(e);s&&(G_(`https://${t.host}/b`),fC("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:e6(i,t.app.options.projectId))}class o0{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=CN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=a8,this._maxUploadRetryTime=l8,this._requests=new Set,s!=null?this._bucket=qn.makeFromBucketSpec(s,this._host):this._bucket=tA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qn.makeFromBucketSpec(this._url,e):this._bucket=tA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Zb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Zb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ua(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new T8(LN());{const o=N8(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const nA="@firebase/storage",rA="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN="storage";function nK(t,e,n){return t=We(t),aq(t,e,n)}function mq(t,e,n){return t=We(t),lq(t,e,n)}function gq(t){return t=We(t),cq(t)}function yq(t,e){return t=We(t),fq(t,e)}function YN(t=EC(),e){t=We(t);const r=mm(t,QN).getImmediate({identifier:e}),s=dC("storage");return s&&vq(r,...s),r}function vq(t,e,n,r={}){pq(t,e,n,r)}function wq(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new o0(n,r,s,e,Rd)}function _q(){as(new Cr(QN,wq,"PUBLIC").setMultipleInstances(!0)),Kn(nA,rA,""),Kn(nA,rA,"esm2020")}_q();const Eq={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},_w={apiKey:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",authDomain:"voda-c6abd.firebaseapp.com",projectId:"voda-c6abd",storageBucket:"voda-c6abd.appspot.com",messagingSenderId:"483702062341",appId:"1:483702062341:web:b1ff06ad175cb7ae428b6c"};console.log(" Initializing Firebase with config:",{projectId:_w.projectId,authDomain:_w.authDomain,emulatorMode:!1});const Wm=_C(_w);try{typeof window<"u",void 0||console.log(" App Check not initialized: missing VITE_FIREBASE_RECAPTCHA_KEY")}catch(t){console.log(" Failed to initialize App Check (will proceed without it):",t)}const Vn=l5(Wm,{persistence:[D5,zv]});console.log(" Firebase Auth initialized with browserLocalPersistence (fallback to inMemory)");const q=dN(Wm,{experimentalForceLongPolling:!0,useFetchStreams:!1});try{nk("error")}catch{}const Hm=i8(Wm,"us-central1"),Tq=YN(Wm);console.log(" Firebase initialized successfully");const Iq=async()=>{try{console.log(" Offline persistence disabled (env flag or emulator mode)"),console.log(" Firestore features configured successfully")}catch(t){console.error(" Error configuring Firestore features:",t)}};setTimeout(Iq,100);let Eo=0;const my=3,Sq=1e3,XN=async t=>{var e,n;if(console.error(" Firestore connection error:",t),(t.code==="unavailable"||t.code==="failed-precondition"||(e=t.message)!=null&&e.includes("ERR_ABORTED")||(n=t.message)!=null&&n.includes("UNAVAILABLE"))&&Eo<my){Eo++;const r=Math.min(Sq*Math.pow(2,Eo-1),1e4);console.log(` Attempting to reconnect (${Eo}/${my}) in ${r}ms...`);try{await KE(q),await new Promise(s=>setTimeout(s,r)),await HE(q),console.log(" Firestore reconnected successfully"),Eo=0}catch(s){console.error(" Failed to reconnect:",s),Eo>=my&&(console.error(" Maximum reconnection attempts reached."),bq())}}},bq=()=>{const t=document.createElement("div");t.style.cssText=`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #f8d7da;
    color: #721c24;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #f5c6cb;
    z-index: 10000;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    max-width: 400px;
  `,t.innerHTML=`
    <h3 style="margin: 0 0 10px 0;">  </h3>
    <p style="margin: 0 0 15px 0;">   .     .</p>
    <button onclick="window.location.reload()" style="
      background: #dc3545;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    ">  </button>
  `,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},1e4)};window.addEventListener("online",async()=>{console.log(" Network back online, enabling Firestore...");try{await HE(q),Eo=0,console.log(" Firestore network enabled")}catch(t){console.error(" Failed to enable Firestore network:",t)}});window.addEventListener("offline",async()=>{console.log(" Network offline, disabling Firestore network...");try{await KE(q),console.log(" Firestore network disabled")}catch(t){console.error(" Failed to disable Firestore network:",t)}});window.addEventListener("unhandledrejection",t=>{var e,n,r,s,i,o;(((e=t.reason)==null?void 0:e.code)==="unavailable"||((n=t.reason)==null?void 0:n.code)==="failed-precondition"||(s=(r=t.reason)==null?void 0:r.message)!=null&&s.includes("ERR_ABORTED")||(o=(i=t.reason)==null?void 0:i.message)!=null&&o.includes("UNAVAILABLE"))&&(XN(t.reason),t.preventDefault())});console.log("Using Firebase Production Environment");const Au=Object.freeze(Object.defineProperty({__proto__:null,auth:Vn,db:q,functions:Hm,handleFirestoreError:XN,storage:Tq},Symbol.toStringTag,{value:"Module"})),Ae=t=>{if(t&&typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(t instanceof Date)return t;if(typeof t=="number")return new Date(t);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return new Date},Aq=t=>{if(t===null)return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null},pd=t=>{if(t===void 0)return;if(t===null)return null;if(Array.isArray(t))return t.map(n=>pd(n)).filter(n=>n!==void 0);if(t instanceof Date||!Aq(t))return t;const e={};for(const[n,r]of Object.entries(t)){const s=pd(r);s!==void 0&&(e[n]=s)}return e},_f={async create(t){await Xn(ce(q,"profiles",t.userId),{userId:t.userId,shopId:t.shopId,role:t.role,fullName:t.fullName,phone:t.phone,createdAt:ge()})},async getById(t){const e=ce(q,"profiles",t),n=await Ge(e);if(n.exists()){const r=n.data();return{userId:n.id,...r,createdAt:Ae(r.createdAt)}}return null},async update(t,e){const n=ce(q,"profiles",t);await qe(n,{...e,updatedAt:ge()})},async getByShopId(t){const e=me(oe(q,"profiles"),pe("shopId","==",t));return(await we(e)).docs.map(r=>{const s=r.data();return{userId:r.id,...s,createdAt:Ae(s.createdAt)}})}},Ew={async create(t){return(await lr(oe(q,"referrals"),{...t,createdAt:ge(),updatedAt:ge()})).id},async getByReferrerId(t){try{const e=me(oe(q,"referrals"),pe("referrerId","==",t),ss("createdAt","desc"));return(await we(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Ae(r.data().createdAt),updatedAt:Ae(r.data().updatedAt)}))}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index")){const r=me(oe(q,"referrals"),pe("referrerId","==",t));return(await we(r)).docs.map(i=>({id:i.id,...i.data(),createdAt:Ae(i.data().createdAt),updatedAt:Ae(i.data().updatedAt)})).sort((i,o)=>{var a,l,c,d;return(((l=(a=o.createdAt)==null?void 0:a.getTime)==null?void 0:l.call(a))||0)-(((d=(c=i.createdAt)==null?void 0:c.getTime)==null?void 0:d.call(c))||0)})}throw e}},async getByReferralCode(t){const e=me(oe(q,"referrals"),pe("referralCode","==",t),Bi(1)),n=await we(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data(),createdAt:Ae(r.data().createdAt),updatedAt:Ae(r.data().updatedAt)}},async updateStatus(t,e){await qe(ce(q,"referrals",t),{status:e,updatedAt:ge()})},generateReferralCode(t){const e=Date.now().toString(36);return`REF_${t.slice(-6)}_${e}`.toUpperCase()}},JN={async getByUserId(t){const e=me(oe(q,"profiles"),pe("userId","==",t)),n=await we(e);if(!n.empty){const r=n.docs[0],s=r.data();return{userId:r.id,...s,createdAt:Ae(s.createdAt),updatedAt:Ae(s.updatedAt)}}return null},async update(t,e){const n=me(oe(q,"profiles"),pe("userId","==",t)),r=await we(n);if(!r.empty){const s=ce(q,"profiles",r.docs[0].id);await qe(s,{...e,updatedAt:ge()})}}},ZN={async create(t){try{console.log("lineService.create called with data:",t);const e={...t,label:t.label||null,createdAt:ge(),updatedAt:ge()};console.log("Cleaned data for Firebase:",e);const n=await lr(oe(q,"lines"),e);return console.log("Line created successfully with ID:",n.id),n.id}catch(e){throw console.error("Error in lineService.create:",e),console.error("Error details:",{message:e.message,code:e.code,stack:e.stack}),e}},async getByShopId(t){try{console.log("Getting lines for shopId:",t);const e=me(oe(q,"lines"),pe("shopId","==",t)),n=await we(e);console.log("Query snapshot size:",n.size);const r=n.docs.map(s=>{const i=s.data();return console.log("Line data:",{id:s.id,...i}),{id:s.id,...i,createdAt:Ae(i.createdAt),updatedAt:Ae(i.updatedAt)}});return r.sort((s,i)=>i.createdAt.getTime()-s.createdAt.getTime()),console.log("Returning lines:",r),r}catch(e){throw console.error("Error in getByShopId:",e),e}},async update(t,e){const n=ce(q,"lines",t),r={...e,label:e.label!==void 0?e.label||null:void 0,updatedAt:ge()};Object.keys(r).forEach(s=>{r[s]===void 0&&delete r[s]}),console.log("Updating line with clean data:",r),await qe(n,r)},async delete(t){const e=ce(q,"lines",t);await Nt(e)}},Lp={async create(t){return(await lr(oe(q,"merchantWallets"),{...t,transferLimit:t.transferLimit||2e5,withdrawLimit:t.withdrawLimit||2e5,transferUsage:t.transferUsage||0,withdrawUsage:t.withdrawUsage||0,createdAt:ge(),updatedAt:ge()})).id},async getByMerchantId(t){const e=me(oe(q,"merchantWallets"),pe("merchantUserId","==",t)),r=(await we(e)).docs.map(a=>{const l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:Ae(l.createdAt),updatedAt:Ae(l.updatedAt)}});if(r.length>0)return r.sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0});const s=me(oe(q,"wallets"),pe("userId","==",t));return(await we(s)).docs.map(a=>{const l=a.data();return{id:a.id,merchantUserId:l.userId||t,provider:l.provider||"instapay",msisdn:l.msisdn||"",label:l.name||l.label||"",isActive:l.isActive!==!1,dailyLimit:l.dailyLimit||2e5,monthlyLimit:l.monthlyLimit||2e5,transferLimit:l.transferLimit||l.monthlyTransferLimit||2e5,withdrawLimit:l.withdrawLimit||l.monthlyWithdrawLimit||2e5,transferUsage:l.transferUsage||l.monthlyTransferUsage||0,withdrawUsage:l.withdrawUsage||l.monthlyWithdrawUsage||0,dailyTransferLimit:l.dailyTransferLimit,dailyWithdrawLimit:l.dailyWithdrawLimit,createdAt:Ae(l.createdAt),updatedAt:Ae(l.updatedAt)}}).sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0})},async getById(t){const e=ce(q,"merchantWallets",t),n=await Ge(e);if(n.exists()){const r=n.data();return{id:n.id,...r,transferLimit:r.transferLimit||2e5,withdrawLimit:r.withdrawLimit||2e5,transferUsage:r.transferUsage||0,withdrawUsage:r.withdrawUsage||0,createdAt:Ae(r.createdAt),updatedAt:Ae(r.updatedAt)}}return null},async getByIccid(t){try{if(!t)return null;const e=me(oe(q,"merchantWallets"),pe("iccid","==",t)),n=await we(e);if(!n.empty){const r=n.docs[0],s=r.data();return{id:r.id,...s,transferLimit:s.transferLimit||2e5,withdrawLimit:s.withdrawLimit||2e5,transferUsage:s.transferUsage||0,withdrawUsage:s.withdrawUsage||0,createdAt:Ae(s.createdAt),updatedAt:Ae(s.updatedAt)}}return null}catch(e){return console.warn("getByIccid failed:",e),null}},async getByMsisdn(t){try{const e=String(t||"").replace(/\D/g,"");if(!e)return null;let n=me(oe(q,"merchantWallets"),pe("msisdn","==",t)),r=await we(n);if(!r.empty){const a=r.docs[0],l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:Ae(l.createdAt),updatedAt:Ae(l.updatedAt)}}const s=me(oe(q,"merchantWallets")),i=await we(s),o=e.slice(-7);for(const a of i.docs){const l=a.data();if(String(l.msisdn||"").replace(/\D/g,"").slice(-7)===o)return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:Ae(l.createdAt),updatedAt:Ae(l.updatedAt)}}return null}catch(e){return console.warn("getByMsisdn failed:",e),null}},async update(t,e){const n=ce(q,"merchantWallets",t);await qe(n,{...e,updatedAt:ge()})},async updateUsage(t,e,n){const r=ce(q,"merchantWallets",t),s={updatedAt:ge()};e!==void 0&&(s.transferUsage=e),n!==void 0&&(s.withdrawUsage=n),await qe(r,s)},async resetDailyUsage(t){const n=(await this.getByMerchantId(t)).map(r=>this.updateUsage(r.id,0,0));await Promise.all(n)},async reassignByMsisdns(t,e){try{if(!e)throw new Error("merchantUserId   ");if(!Array.isArray(t)||t.length===0)return{updated:0,failed:0};const r=((o,a)=>o.reduce((l,c,d)=>(d%a===0&&l.push(o.slice(d,d+a)),l),[]))(t.map(o=>o.trim()).filter(Boolean),10);let s=0,i=0;for(const o of r){const a=me(oe(q,"merchantWallets"),pe("msisdn","in",o)),c=(await we(a)).docs.map(async d=>{try{const h=d.data();if(h.merchantUserId&&h.merchantUserId!==e)return;await qe(d.ref,{merchantUserId:e,updatedAt:ge()}),s+=1}catch(h){console.error("Failed to reassign wallet",d.id,h),i+=1}});await Promise.allSettled(c)}return{updated:s,failed:i}}catch(n){return console.error("Error reassigning wallets by msisdns:",n),{updated:0,failed:t.length}}},async delete(t){const e=ce(q,"merchantWallets",t);await Nt(e)}},eO={async create(t){try{console.log("Creating transaction:",t);const{calculateCommission:e,calculateProfit:n}=await xe(async()=>{const{calculateCommission:c,calculateProfit:d}=await Promise.resolve().then(()=>uW);return{calculateCommission:c,calculateProfit:d}},void 0,import.meta.url),r=t.commission!==void 0?t.commission:e(t.amount,t.txnType),s=n(t.amount,t.txnType),i=t.merchantUserId||t.createdBy;i||console.warn("   merchantUserId  createdBy         .");const o=Object.fromEntries(Object.entries(t).filter(([c,d])=>d!==void 0)),a={...o,merchantUserId:i,commission:r,profit:s,createdAt:o.createdAt?o.createdAt instanceof Date?o.createdAt:new Date(String(o.createdAt)):new Date,uploadedAt:ge(),confirmedAt:o.confirmedAt?o.confirmedAt instanceof Date?o.confirmedAt:new Date(String(o.confirmedAt)):null},l=await lr(oe(q,"transactions"),a);if(console.log("Transaction created with ID:",l.id,"Profit:",s),s>0){const{ProfitService:c}=await xe(async()=>{const{ProfitService:d}=await import("./profitService-CxuHBzDm.js").then(h=>h.p);return{ProfitService:d}},[],import.meta.url);c.addProfit(s),console.log("     :",s,"")}await this.updateLineUsage(t.lineId,t.amount);try{const c=Number(t.amount||0),d=String((t==null?void 0:t.receiverMsisdn)||"").trim(),h=String((t==null?void 0:t.walletId)||"").trim(),f=String((t==null?void 0:t.originType)||"").trim();let m="";if(h)try{const y=await Lp.getById(h);m=String((y==null?void 0:y.msisdn)||(y==null?void 0:y.label)||h).trim()}catch{}let T="";f==="withdraw"?T=m?`   ${c}   ${m}    ${r}`:`   ${c}    ${r}`:f==="transfer"||t.txnType==="send"?T=`   ${c}   ${m||" "}   ${d||""}    ${r}`:T=m?`  ${c}   ${m}`:`  ${c}`,i&&await nO.send(i,T)}catch{}return l.id}catch(e){throw console.error("Error creating transaction:",e),e}},async updateLineUsage(t,e){try{console.log("Updating line usage:",{lineId:t,amount:e})}catch(n){console.error("Error updating line usage:",n)}},async getByShopId(t){const e=me(oe(q,"transactions"),pe("shopId","==",t),ss("createdAt","desc"));return(await we(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Ae(r.data().createdAt),confirmedAt:r.data().confirmedAt?Ae(r.data().confirmedAt):void 0}))},async getByMerchantId(t){const e=me(oe(q,"transactions"),pe("merchantUserId","==",t),ss("createdAt","desc"));return(await we(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Ae(r.data().createdAt),confirmedAt:r.data().confirmedAt?Ae(r.data().confirmedAt):void 0}))},async getByUserId(t){const e=me(oe(q,"transactions"),pe("merchantUserId","==",t)),n=me(oe(q,"transactions"),pe("userId","==",t)),[r,s]=await Promise.all([we(e),we(n)]),i=[...r.docs,...s.docs],o=new Set,a=[];for(const l of i){if(o.has(l.id))continue;o.add(l.id);const c=l.data();a.push({id:l.id,...c,createdAt:Ae(c.createdAt),confirmedAt:c.confirmedAt?Ae(c.confirmedAt):void 0})}return a.sort((l,c)=>{const d=l.createdAt,h=c.createdAt;return d&&h?h.getTime()-d.getTime():d&&!h?-1:!d&&h?1:0})},async updateStatus(t,e,n){const r=ce(q,"transactions",t);await qe(r,{status:e,confirmedAt:n?n instanceof Date?n:new Date(String(n)):null})}},xq="https://summer-cake-5149.alkaptin2030.workers.dev",tO={async getTelegramWorkerUrl(){var t;try{const e=ce(q,"systemSettings","core"),n=await Ge(e);return n.exists()&&String(((t=n.data())==null?void 0:t.telegramWorkerUrl)||"").trim()||null}catch{return null}},async setTelegramWorkerUrl(t){const e=ce(q,"systemSettings","core");await Xn(e,{telegramWorkerUrl:t,updatedAt:ge()},{merge:!0})}},nO={async send(t,e){try{const n=await Km.getUserData(t),r=String((n==null?void 0:n.telegramChatId)||(n==null?void 0:n.chat_id)||"").trim();if(!r)throw new Error("Telegram Chat ID   ");const i=(await tO.getTelegramWorkerUrl()||xq).replace(/\/$/,""),o=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:r,text:e})});if(!o.ok){const a=await o.text().catch(()=>"");throw new Error(a||"     ")}}catch{}}},Pq={async log(t,e,n,r,s){await lr(oe(q,"auditLogs"),{actor:s,action:t,entity:e,entityId:n,meta:r,createdAt:ge()})},async getLogs(t=100){const e=me(oe(q,"auditLogs"),ss("createdAt","desc"),Bi(t));return(await we(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Ae(r.data().createdAt)}))},async getDeletedTransactions(){try{const t=me(oe(q,"deletedTransactions"),ss("deletedAt","desc"));return(await we(t)).docs.map(n=>({id:n.id,...n.data(),deletedAt:Ae(n.data().deletedAt)}))}catch(t){return console.error("Error getting deleted transactions:",t),[]}},async getDeletedTransactionsByUser(t){try{const e=me(oe(q,"deletedTransactions"),pe("userId","==",t),ss("deletedAt","desc"));return(await we(e)).docs.map(r=>({id:r.id,...r.data(),deletedAt:Ae(r.data().deletedAt)})).filter(r=>(r==null?void 0:r.permanent)!==!0)}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index"))try{const r=me(oe(q,"deletedTransactions"),pe("userId","==",t));return(await we(r)).docs.map(o=>({id:o.id,...o.data(),deletedAt:Ae(o.data().deletedAt)})).filter(o=>(o==null?void 0:o.permanent)!==!0).sort((o,a)=>{const l=(o.deletedAt instanceof Date?o.deletedAt:new Date(o.deletedAt)).getTime();return(a.deletedAt instanceof Date?a.deletedAt:new Date(a.deletedAt)).getTime()-l})}catch(r){return console.error("Fallback error getting deleted transactions by user:",r),[]}return console.error("Error getting deleted transactions by user:",e),[]}},async saveDeletedTransaction(t){var e;try{if(console.log("      Firebase:",t.id),!t.userId)throw new Error("     ");if(!t.originalTransactionId)throw new Error("   ");const n=t.reference??t.transactionReference??((e=t.receipt)==null?void 0:e.reference),r={...t,deletedAt:ge(),userId:t.userId,originalTransactionId:t.originalTransactionId,type:t.type||"unknown",amount:t.amount||0,status:t.status||"deleted",...n?{reference:n}:{}};console.log("    :",r);let s=3,i;for(;s>0;)try{const o=await lr(oe(q,"deletedTransactions"),r);console.log("       :",o.id);return}catch(o){i=o,s--,console.warn(`       : ${s}`,o),s>0&&await new Promise(a=>setTimeout(a,1e3))}throw console.error("        "),i}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async permanentlyDeleteTransaction(t,e){try{const n=me(oe(q,"deletedTransactions"),pe("originalTransactionId","==",t),pe("userId","==",e)),r=await we(n);r.empty?await lr(oe(q,"deletedTransactions"),{userId:e,originalTransactionId:t,permanent:!0,deletedAt:ge()}):await Promise.all(r.docs.map(s=>qe(s.ref,{permanent:!0,deletedAt:ge()}))),console.log("    :",t);try{const s=me(oe(q,"userTransactions"),pe("userId","==",e)),o=(await we(s)).docs.filter(a=>{var c,d;const l=a.data();return a.id===t||l.id===t||l.transactionId===t||l.originalTransactionId===t||((c=l.receipt)==null?void 0:c.id)===t||((d=l.receipt)==null?void 0:d.transactionId)===t});o.length>0&&(console.log(`  ${o.length}   userTransactions`),await Promise.all(o.map(a=>Nt(a.ref))))}catch(s){console.warn("   userTransactions   :",s)}try{const s=ce(q,"transactions",t);(await Ge(s)).exists()&&(console.log("     transactions  "),await Nt(s));const o=me(oe(q,"transactions"),pe("transactionId","==",t)),a=await we(o);a.empty||(console.log(`  ${a.size}   transactions  transactionId`),await Promise.all(a.docs.map(d=>Nt(d.ref))));const l=me(oe(q,"transactions"),pe("originalTransactionId","==",t)),c=await we(l);c.empty||(console.log(`  ${c.size}   transactions  originalTransactionId`),await Promise.all(c.docs.map(d=>Nt(d.ref))));try{const d=me(oe(q,"deletedTransactions"),pe("userId","==",e),pe("originalTransactionId","==",t)),h=await we(d),f=h.docs.map(T=>{var y;return String(((y=T.data())==null?void 0:y.reference)||"")}).filter(Boolean),m=h.docs.map(T=>{var y;return String(((y=T.data())==null?void 0:y.transactionId)||"")}).filter(Boolean);for(const T of f){const y=me(oe(q,"transactions"),pe("reference","==",T)),_=await we(y);_.empty||(console.log(`  ${_.size}   transactions  reference=${T}`),await Promise.all(_.docs.map(w=>Nt(w.ref))))}for(const T of m){try{const w=ce(q,"transactions",T);(await Ge(w)).exists()&&(console.log("     transactions  :",T),await Nt(w))}catch{}const y=me(oe(q,"transactions"),pe("transactionId","==",T)),_=await we(y);_.empty||(console.log(`  ${_.size}   transactions  transactionId=${T}`),await Promise.all(_.docs.map(w=>Nt(w.ref))))}}catch{}}catch(s){console.warn("    transactions   :",s)}}catch(n){throw console.error("Error permanently deleting transaction:",n),n}}},Rq={async add(t){return(await lr(oe(q,"daily_reports_archive"),{userId:t.userId,reportDate:t.reportDate,totalTransactions:t.totalTransactions,totalAmount:t.totalAmount,totalWithdrawn:t.totalWithdrawn,totalSent:t.totalSent,profit:t.profit??null,walletId:t.walletId??null,createdAt:ge()})).id},async getByUser(t,e=50){try{const n=me(oe(q,"daily_reports_archive"),pe("userId","==",t),Bi(e)),r=await we(n);let s=[];try{s=(await we(me(oe(q,"deletedDailyArchives"),pe("userId","==",t)))).docs.map(l=>{var c,d;return{id:l.id,reportDate:String(((c=l.data())==null?void 0:c.reportDate)||""),archiveId:String(((d=l.data())==null?void 0:d.archiveId)||"")}})}catch{}const i=(a,l)=>s.some(c=>c.archiveId&&c.archiveId===a||c.reportDate&&c.reportDate===l),o=r.docs.map(a=>({id:a.id,userId:String(a.data().userId),reportDate:String(a.data().reportDate),totalTransactions:Number(a.data().totalTransactions||0),totalAmount:Number(a.data().totalAmount||0),totalWithdrawn:Number(a.data().totalWithdrawn||0),totalSent:Number(a.data().totalSent||0),profit:a.data().profit!==void 0?Number(a.data().profit):void 0,walletId:a.data().walletId??null,createdAt:Ae(a.data().createdAt)})).filter(a=>!i(a.id,a.reportDate));return o.sort((a,l)=>a.reportDate<l.reportDate?1:-1),o}catch(n){throw console.error("Error loading daily reports archive:",n),n}},async deleteOlderThan(t,e=10){try{const n=new Date;n.setDate(n.getDate()-e);const r=me(oe(q,"daily_reports_archive"),pe("userId","==",t)),s=await we(r);let i=0;for(const o of s.docs){const a=Ae(o.data().createdAt);a&&a.getTime()<n.getTime()&&(await Nt(o.ref),i++)}return i>0&&console.log(`   ${i}      ${e}   ${t}`),i}catch(n){throw console.error("Error deleting old daily reports archive:",n),n}},async trimToMaxCount(t,e=10){try{const n=me(oe(q,"daily_reports_archive"),pe("userId","==",t)),s=(await we(n)).docs.map(o=>({ref:o.ref,reportDate:String(o.data().reportDate||""),createdAt:Ae(o.data().createdAt)}));if(s.sort((o,a)=>{var d,h;if(o.reportDate&&a.reportDate)return o.reportDate<a.reportDate?1:-1;const l=((d=o.createdAt)==null?void 0:d.getTime())??0;return(((h=a.createdAt)==null?void 0:h.getTime())??0)-l}),s.length<=e)return 0;const i=s.slice(e);for(const o of i)await Nt(o.ref);return console.log(`     ${t}  ${e}   ${i.length}`),i.length}catch(n){throw console.error("Error trimming daily reports archive to max count:",n),n}},async deleteAllByUser(t){try{const e=me(oe(q,"daily_reports_archive"),pe("userId","==",t)),n=await we(e);let r=0;for(const s of n.docs)try{await Nt(s.ref),r++}catch{const o=s.data();try{await lr(oe(q,"deletedDailyArchives"),{userId:t,archiveId:s.id,reportDate:String((o==null?void 0:o.reportDate)||""),createdAt:ge()})}catch{}}return r}catch(e){throw console.error("Error deleting all daily reports archive for user:",e),e}}},Km={async getUserData(t){try{console.log("     :",{userId:t});const e=ce(q,"users",t),n=await Ge(e);if(n.exists()){const r=n.data();return console.log("     :",r),{...r,createdAt:Ae(r.createdAt),updatedAt:Ae(r.updatedAt)}}else{console.log("       ");const r={walletBalances:{},createdAt:new Date,updatedAt:new Date};return await this.saveUserData(t,r),console.log("     "),r}}catch(e){return console.error("      :",e),{walletBalances:{},createdAt:new Date,updatedAt:new Date}}},getLocalReceipts(t){try{const e=localStorage.getItem(`localReceipts_${t}`);if(!e)return[];const n=JSON.parse(e);return Array.isArray(n)?n:[]}catch{return[]}},saveLocalReceipt(t,e){try{const n=this.getLocalReceipts(t),r=200,s=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||Date.now()).getTime()}`)},i=s(e),o=n.filter(l=>s(l)!==i),a=[e,...o].slice(0,r);localStorage.setItem(`localReceipts_${t}`,JSON.stringify(a))}catch{}},removeLocalReceiptById(t,e){try{const r=this.getLocalReceipts(t).filter(s=>{var o,a;return![s==null?void 0:s.id,s==null?void 0:s.transactionId,s==null?void 0:s.originalTransactionId,(o=s==null?void 0:s.receipt)==null?void 0:o.transactionId,(a=s==null?void 0:s.receipt)==null?void 0:a.id].map(l=>String(l||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},removeLocalReceiptByRef(t,e){try{if(!e)return;const r=this.getLocalReceipts(t).filter(s=>{var o;return![s==null?void 0:s.reference,s==null?void 0:s.transactionReference,(o=s==null?void 0:s.receipt)==null?void 0:o.reference].map(a=>String(a||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},subscribeDeletedTransactionsLocalSync(t){try{const e=me(oe(q,"deletedTransactions"),pe("userId","==",t));return js(e,r=>{try{r.docChanges().forEach(s=>{const i=s.doc.data(),o=String((i==null?void 0:i.originalTransactionId)||""),a=String((i==null?void 0:i.transactionId)||""),l=String((i==null?void 0:i.reference)||"");o&&this.removeLocalReceiptById(t,o),a&&this.removeLocalReceiptById(t,a),l&&this.removeLocalReceiptByRef(t,l)})}catch{}},r=>{console.warn("deletedTransactions local sync error:",r)})}catch(e){return console.warn("subscribeDeletedTransactionsLocalSync failed:",e),()=>{}}},async saveUserData(t,e){try{const n=ce(q,"users",t),r=pd(e);await Xn(n,{...r||{},updatedAt:ge()},{merge:!0})}catch(n){throw console.error("Error saving user data:",n),n}},async updateUserData(t,e){try{console.log("      Firebase:",{userId:t,data:e});const n=ce(q,"users",t),r=Object.fromEntries(Object.entries(e).filter(([l,c])=>c!==void 0)),s=pd(r);let i={};try{const l=await Ge(n);i=l.exists()?l.data():{},console.log("  :",i)}catch(l){console.warn("         :",l)}const o={...i,...s,updatedAt:ge()};console.log("   :",o);let a=3;for(;a>0;)try{await Xn(n,o,{merge:!0}),console.log("     ");return}catch(l){if(a--,console.warn(`     : ${a}`,l),a===0)throw l;await new Promise(c=>setTimeout(c,1e3))}}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async getUserWallets(t){try{const e=await this.getUserData(t);return(e==null?void 0:e.wallets)||[]}catch(e){return console.error("Error getting user wallets:",e),[]}},async getUserTransactions(t){try{let e;try{const l=me(oe(q,"userTransactions"),pe("userId","==",t),ss("createdAt","desc"),Bi(200));e=await we(l)}catch(l){const c=String((l==null?void 0:l.message)||""),d=me(oe(q,"userTransactions"),pe("userId","==",t));e=await we(d)}const n=e.docs.map(l=>({id:l.id,...l.data(),createdAt:Ae(l.data().createdAt)})),s=[...this.getLocalReceipts(t),...n],i=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||0).getTime()}`)},o=new Set;return s.filter(l=>{const c=i(l);return o.has(c)?!1:(o.add(c),!0)}).filter(l=>(l==null?void 0:l.status)!=="cancelled"&&!(l!=null&&l.isDeleted)).sort((l,c)=>{const d=l.createdAt?new Date(l.createdAt).getTime():0;return(c.createdAt?new Date(c.createdAt).getTime():0)-d})}catch(e){console.error("Error getting user transactions:",e);const n=(e==null?void 0:e.code)||"";if(n==="permission-denied"||n==="unauthenticated")throw e;return[]}},async saveUserTransaction(t,e){var n,r,s;try{const i=Object.fromEntries(Object.entries(e??{}).filter(([a,l])=>l!==void 0));try{const a=i.reference;if(a){const d=me(oe(q,"deletedTransactions"),pe("userId","==",t),pe("reference","==",a));if(!(await we(d)).empty)return console.log("          ."),"skip-deleted"}{const d=me(oe(q,"deletedTransactions"),pe("userId","==",t),pe("permanent","==",!0)),h=await we(d);if(!h.empty){const f=[i.id,i.transactionId,i.originalTransactionId,(n=i.receipt)==null?void 0:n.id,(r=i.receipt)==null?void 0:r.transactionId,i.reference,i.transactionReference].filter(T=>!!T).map(T=>String(T));if(h.docs.find(T=>{const y=T.data(),_=String(y.originalTransactionId||y.transactionId||T.id||""),w=String(y.reference||"");return _&&f.includes(_)||w&&f.includes(w)}))return console.log("        /   ."),"skip-deleted"}}const l=me(oe(q,"deletedTransactions"),pe("userId","==",t),ss("deletedAt","desc"),Bi(20)),c=await we(l);if(!c.empty){const d=i.senderMsisdn||i.senderPhone||i.sender_msisdn,h=i.receiverMsisdn||i.receiverPhone||i.receiver_msisdn,f=Number(i.amount||0),m=i.createdAt?new Date(String(i.createdAt)):new Date,T=10*60*1e3;if(c.docs.find(_=>{const w=_.data(),p=w.senderMsisdn||w.senderPhone||w.sender_msisdn,v=w.receiverMsisdn||w.receiverPhone||w.receiver_msisdn,A=Number(w.amount||0),R=w.createdAt?new Date(String(w.createdAt)):m;return Math.abs(R.getTime()-m.getTime())<=T&&A===f&&p===d&&v===h}))return console.log("        ."),"skip-deleted"}}catch(a){console.warn("           :",a)}try{const a=me(oe(q,"userTransactions"),pe("userId","==",t));if(i.transactionId){const _=me(oe(q,"userTransactions"),pe("userId","==",t),pe("transactionId","==",i.transactionId)),w=await we(_);if(!w.empty){const p=w.docs[0];return await qe(ce(q,"userTransactions",p.id),{...i,uploadedAt:ge()}),p.id}}if(i.reference){const _=me(oe(q,"userTransactions"),pe("userId","==",t),pe("reference","==",i.reference)),w=await we(_);if(!w.empty){const p=w.docs[0];return await qe(ce(q,"userTransactions",p.id),{...i,uploadedAt:ge()}),p.id}}const l=me(oe(q,"userTransactions"),pe("userId","==",t),ss("createdAt","desc"),Bi(20)),c=await we(l),d=i.senderMsisdn||i.senderPhone||i.sender_msisdn,h=i.receiverMsisdn||i.receiverPhone||i.receiver_msisdn,f=Number(i.amount||0),m=i.createdAt?new Date(String(i.createdAt)):new Date,T=5*60*1e3,y=c.docs.find(_=>{const w=_.data(),p=w.senderMsisdn||w.senderPhone||w.sender_msisdn,v=w.receiverMsisdn||w.receiverPhone||w.receiver_msisdn,A=Number(w.amount||0),R=Ae(w.createdAt);return Math.abs(R.getTime()-m.getTime())<=T&&A===f&&p===d&&v===h});if(y)return await qe(ce(q,"userTransactions",y.id),{...i,uploadedAt:ge()}),y.id}catch(a){console.warn("      saveUserTransaction  :",a)}const o=await lr(oe(q,"userTransactions"),{...i,userId:t,createdAt:i.createdAt?i.createdAt instanceof Date?i.createdAt:new Date(String(i.createdAt)):ge(),uploadedAt:ge()});try{const a=await Ge(ce(q,"users",t)),l=a.exists()?String(((s=a.data())==null?void 0:s.telegramChatId)||"").trim():"";if(l){const c=String(i.txnType||i.type||"").toLowerCase(),d=Number(i.amount??i.withdrawnAmount??i.transferredAmount??i.sentAmount??0),h=String(i.receiverMsisdn||i.receiverPhone||i.toWallet||"").trim(),f=String(i.senderMsisdn||i.senderPhone||i.fromWallet||"").trim(),T=(i.createdAt instanceof Date?i.createdAt:new Date).toLocaleString("ar-EG");let y="";c==="receive"?y=`   ${d}     ${h||f}
: ${T}`:c==="transfer"||c==="send"?y=`   ${d}     ${f}  ${h}
: ${T}`:c==="withdraw"?y=`   ${d}     ${f||h}
: ${T}`:y=`  ${d} 
: ${T}`,e0(Hm,"sendTelegramMessage")({chatId:l,text:y}).catch(()=>{})}}catch{}return o.id}catch(i){throw console.error("Error saving user transaction:",i),i}},async removeUserTransaction(t,e){try{console.log("     userTransactions:",{userId:t,transactionId:e});try{const o=ce(q,"userTransactions",e),a=await Ge(o);if(a.exists()){const l=a.data();if([l==null?void 0:l.userId,l==null?void 0:l.merchantUserId,l==null?void 0:l.createdBy].map(d=>String(d||"")).includes(String(t))){console.log("    userTransactions  ( ):",e),await Nt(o),console.log("     userTransactions");try{this.removeLocalReceiptById(t,e)}catch{}return}else console.log("           ")}}catch(o){console.warn("     userTransactions   :",o)}const n=me(oe(q,"userTransactions"),pe("userId","==",t)),r=await we(n);console.log(`    ${r.docs.length}  `);const s=r.docs.filter(o=>{var h,f;const a=o.data(),l=o.id,d=[a.id===e,a.transactionId===e,l===e,a.originalTransactionId===e,((h=a.receipt)==null?void 0:h.transactionId)===e,((f=a.receipt)==null?void 0:f.id)===e].some(m=>m===!0);return d&&console.log("     :",{docId:l,dataId:a.id,transactionId:a.transactionId,originalTransactionId:a.originalTransactionId,searchingFor:e}),d}),i=[me(oe(q,"userTransactions"),pe("merchantUserId","==",t)),me(oe(q,"userTransactions"),pe("createdBy","==",t))];for(const o of i)try{const l=(await we(o)).docs.filter(c=>{var f,m;const d=c.data(),h=c.id;return d.id===e||d.transactionId===e||h===e||d.originalTransactionId===e||((f=d.receipt)==null?void 0:f.transactionId)===e||((m=d.receipt)==null?void 0:m.id)===e});l.length&&(console.log(`   ${l.length}       `),s.push(...l))}catch{}if(s.length>0){console.log(`   ${s.length}    `);const o=s.map(async a=>{try{console.log("   :",a.id),await Nt(a.ref)}catch(l){console.warn("     userTransactions ():",{id:a.id,error:l})}});await Promise.allSettled(o);try{this.removeLocalReceiptById(t,e)}catch{}console.log("        userTransactions:",e);try{const a=ce(q,"transactions",e);if((await Ge(a)).exists())console.log("     transactions   "),await Nt(a);else{const c=me(oe(q,"transactions"),pe("transactionId","==",e)),d=await we(c);d.empty||(console.log(`   ${d.size}   transactions  transactionId `),await Promise.all(d.docs.map(m=>Nt(m.ref))));const h=me(oe(q,"transactions"),pe("originalTransactionId","==",e)),f=await we(h);f.empty||(console.log(`   ${f.size}   transactions  originalTransactionId `),await Promise.all(f.docs.map(m=>Nt(m.ref))))}}catch(a){console.warn("      transactions   :",a)}return}console.log("       userTransactions (   ):",e)}catch(n){console.error("      userTransactions ():",n);return}}},Cq={async create(t,e){const n={...e,userId:t,status:"active",createdAt:ge()};return(await lr(oe(q,"installments"),n)).id},listenByUser(t,e){const n=me(oe(q,"installments"),pe("userId","==",t));return js(n,r=>{const s=r.docs.map(i=>({id:i.id,...i.data()}));e(s)},r=>{console.error("installments listen error",r),e([])})},async markMonthPaid(t,e){const n=e.every(r=>r.paid);return await qe(ce(q,"installments",t),{paidMonths:e,status:n?"completed":"active"}),!0},async remove(t){return await Nt(ce(q,"installments",t)),!0}},rK=Object.freeze(Object.defineProperty({__proto__:null,InstallmentsService:Cq,auditLogService:Pq,dailyReportsArchiveService:Rq,lineService:ZN,merchantWalletService:Lp,profileService:_f,profileServiceExtra:JN,referralService:Ew,sanitizeFirestoreData:pd,systemSettingsService:tO,telegramNotifier:nO,transactionService:eO,userDataService:Km},Symbol.toStringTag,{value:"Module"}));var _s=(t=>(t.MONTHLY="monthly",t.QUARTERLY="quarterly",t.YEARLY="yearly",t.LIFETIME="lifetime",t.ZERO="zero",t.TAHWEELA="tahweela",t))(_s||{});const kq=(t,e=new Date)=>{const n=new Date(e);switch(t){case"monthly":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"tahweela":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"quarterly":{const r=new Date(n);return r.setDate(r.getDate()+90),r}case"yearly":{const r=new Date(n);return r.setDate(r.getDate()+365),r}case"lifetime":return null;case"zero":return null;default:return null}},Ef=t=>{var s,i;if(!t||!t.isActive)return!1;if(t.planType==="lifetime")return!0;if(!t.endDate){const o=new Date,a=t.activatedAt,l=(s=a==null?void 0:a.toDate)!=null&&s.call(a)?a.toDate():t.activatedAt?new Date(t.activatedAt):null;return l&&o.getTime()-l.getTime()<4*60*60*1e3,!0}const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime())){const o=t.activatedAt,a=(i=o==null?void 0:o.toDate)!=null&&i.call(o)?o.toDate():t.activatedAt?new Date(t.activatedAt):null;return a&&e.getTime()-a.getTime()<4*60*60*1e3,!0}return e<=r},Dq=t=>{if(!t||!t.isActive)return null;if(t.planType==="lifetime")return-1;if(!t.endDate)return null;const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime()))return null;const s=r.getTime()-e.getTime(),i=Math.ceil(s/(1e3*60*60*24));return i>0?i:0},sK=async(t,e,n,r)=>{try{const s=new Date,i=kq(e,s),o={planType:e,startDate:s,endDate:i,isActive:!0,activatedBy:n,activatedAt:s};console.log(" Activating subscription for user:",{userId:t,planType:e,adminId:n,subscriptionData:o});const a=ce(q,"users",t);if(await qe(a,{subscription:o,isActive:!0,approved:!0,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(" Subscription data updated in Firestore"),typeof window<"u"){const l=new CustomEvent("subscriptionActivated",{detail:{userId:t,planType:e,timestamp:new Date().toISOString()}});window.dispatchEvent(l),console.log(" Subscription activation event dispatched:",{userId:t,planType:e});const c=new CustomEvent("userSubscriptionUpdated",{detail:{userId:t,planType:e,isActive:!0,timestamp:new Date().toISOString()}});window.dispatchEvent(c),console.log(" Global subscription update event dispatched")}console.log(`    ${e}  ${t}`)}catch(s){throw console.error("    :",s),new Error("   ")}},Nq=async t=>{try{const e=ce(q,"users",t);await qe(e,{"subscription.isActive":!1,isActive:!1,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(`      ${t}`)}catch(e){throw console.error("     :",e),new Error("    ")}},iK=async t=>{try{const e=ce(q,"users",t),n=await Ge(e);return n.exists()&&n.data().subscription||null}catch(e){return console.error("      :",e),null}},oK=t=>{switch(t){case"monthly":return"";case"quarterly":return" ";case"yearly":return"";case"lifetime":return" ";case"zero":return"";case"tahweela":return"";default:return" "}},aK=t=>{if(!t)return"text-gray-500";if(!t.isActive)return"text-red-500";if(t.planType==="lifetime")return"text-green-600";const e=Dq(t);return e===null||e<=0?"text-red-500":e<=7?"text-yellow-500":"text-green-500"},lK=t=>t?(t instanceof Date?t:new Date(t)).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"}):" ";class a0{static async startFreeTrialFromAdmin(e){try{const n=ce(q,"users",e),r=await Ge(n);if(!r.exists())return{success:!1,message:"  "};if(r.data().hasUsedFreeTrial)return{success:!1,message:"       "};const i=new Date,o=await this.getTrialDurationHours(),a=new Date(i.getTime()+o*60*60*1e3);return await qe(n,{hasUsedFreeTrial:!0,freeTrialStartDate:i,freeTrialEndDate:a,isOnFreeTrial:!0,isActive:!0,approved:!0,updatedAt:ge()}),{success:!0,message:`     ${o} ${o>=3&&o<=10?"":o===2?"":""}`}}catch(n){return console.error("Error starting admin free trial:",n),{success:!1,message:"     "}}}static async startFreeTrial(e){try{const n=ce(q,"users",e),r=await Ge(n);if(!r.exists())return{success:!1,message:"  "};if(r.data().hasUsedFreeTrial)return{success:!1,message:"     "};const i=new Date,o=await this.getTrialDurationHours(),a=new Date(i.getTime()+o*60*60*1e3);return await qe(n,{hasUsedFreeTrial:!0,freeTrialStartDate:i,freeTrialEndDate:a,isOnFreeTrial:!0,isActive:!0,approved:!0,updatedAt:ge()}),{success:!0,message:`     ${o} ${o>=3&&o<=10?"":o===2?"":""}`}}catch(n){return console.error("    :",n),{success:!1,message:"     "}}}static async checkTrialValidity(e){var n,r,s,i;try{const o=ce(q,"users",e),a=await Ge(o);if(!a.exists())return{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:!1};const l=a.data(),c=l.hasUsedFreeTrial||!1,d=l.isOnFreeTrial||!1;let h=(r=(n=l.freeTrialEndDate)==null?void 0:n.toDate)!=null&&r.call(n)?l.freeTrialEndDate.toDate():l.freeTrialEndDate?new Date(l.freeTrialEndDate):null;const f=(i=(s=l.freeTrialStartDate)==null?void 0:s.toDate)!=null&&i.call(s)?l.freeTrialStartDate.toDate():l.freeTrialStartDate?new Date(l.freeTrialStartDate):null;if(!c||!d||!h)return{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:c};const m=new Date;if(m>h){const w=Ef(l.subscription);return await qe(o,{isOnFreeTrial:!1,isActive:w,approved:w,updatedAt:ge()}),!w&&typeof window<"u"&&setTimeout(()=>{window.location.href="/user/pending-approval"},1e3),{isValid:!1,isExpired:!0,hoursRemaining:0,hasUsedTrial:c}}try{const w=await this.getTrialDurationHours();if(f&&w&&Number.isFinite(w)&&Math.round((h.getTime()-f.getTime())/36e5)<w){const v=new Date(f.getTime()+w*60*60*1e3);v.getTime()>h.getTime()&&(await qe(o,{freeTrialEndDate:v,updatedAt:ge()}),h=v)}}catch(w){console.warn("checkTrialValidity: failed to auto-extend to configured hours",w)}const y=h.getTime()-m.getTime();return{isValid:!0,isExpired:!1,hoursRemaining:Math.ceil(y/(1e3*3600)),hasUsedTrial:c}}catch(o){return console.error("      :",o),{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:!1}}}static async getTrialData(e){var n,r;try{const s=ce(q,"users",e),i=await Ge(s);if(!i.exists())return{hasUsedFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,isOnFreeTrial:!1};const o=i.data();return{hasUsedFreeTrial:o.hasUsedFreeTrial||!1,freeTrialStartDate:((n=o.freeTrialStartDate)==null?void 0:n.toDate())||null,freeTrialEndDate:((r=o.freeTrialEndDate)==null?void 0:r.toDate())||null,isOnFreeTrial:o.isOnFreeTrial||!1}}catch(s){return console.error("      :",s),{hasUsedFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,isOnFreeTrial:!1}}}static async getTrialDurationHours(){try{const e=ce(q,"config","freeTrial"),n=await Ge(e);if(n.exists()){const r=n.data(),s=typeof(r==null?void 0:r.durationHours)=="number"?r.durationHours:this.TRIAL_DURATION_HOURS;return!Number.isFinite(s)||s<1?this.TRIAL_DURATION_HOURS:s}return this.TRIAL_DURATION_HOURS}catch(e){return console.warn("getTrialDurationHours: fallback to default due to error",e),this.TRIAL_DURATION_HOURS}}static async updateTrialDurationHours(e){try{if(!Number.isFinite(e)||e<1)return{success:!1,message:"       "};const n=ce(q,"config","freeTrial");return await Xn(n,{durationHours:e,updatedAt:ge()},{merge:!0}),{success:!0,message:"     "}}catch(n){return console.error("Error updating trial duration hours:",n),{success:!1,message:"    "}}}static async resetActiveTrialToCurrentDuration(e){var n,r;try{const s=ce(q,"users",e),i=await Ge(s);if(!i.exists())return{success:!1,message:"  "};const o=i.data(),a=!!o.isOnFreeTrial,l=(r=(n=o.freeTrialStartDate)==null?void 0:n.toDate)!=null&&r.call(n)?o.freeTrialStartDate.toDate():o.freeTrialStartDate?new Date(o.freeTrialStartDate):null;if(!a||!l)return{success:!1,message:"     "};const c=await this.getTrialDurationHours(),d=new Date(l.getTime()+c*60*60*1e3);return await qe(s,{freeTrialEndDate:d,updatedAt:ge()}),{success:!0,message:`     ${c} ${c>=3&&c<=10?"":c===2?"":""}`}}catch(s){return console.error("Error resetting active trial duration:",s),{success:!1,message:"    "}}}static async cancelActiveFreeTrial(e){try{const n=ce(q,"users",e),r=await Ge(n);return r.exists()?!r.data().isOnFreeTrial?{success:!1,message:"      "}:(await qe(n,{isOnFreeTrial:!1,isActive:!1,approved:!1,freeTrialEndDate:new Date,updatedAt:ge()}),{success:!0,message:"        "}):{success:!1,message:"  "}}catch(n){return console.error("Error cancelling active free trial:",n),{success:!1,message:"    "}}}}X0(a0,"TRIAL_DURATION_HOURS",4);const cK=Object.freeze(Object.defineProperty({__proto__:null,FreeTrialService:a0},Symbol.toStringTag,{value:"Module"})),Oq={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},rO=b.createContext(void 0);function ga(){const t=b.useContext(rO);if(t===void 0)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return t}const Lq=({children:t})=>{const[e,n]=b.useState(null),[r,s]=b.useState(null),[i,o]=b.useState(null),[a,l]=b.useState(!1),[c,d]=b.useState(!0),h=async I=>{var S,P,C,k,O,D,B,X,ee,G,U,F,H,ae,te,le;try{const ue=ce(q,"profiles",I);let Se=!1;try{const he=await bN(ue);if(he.exists()){const Te=he.data(),Ce={userId:he.id,shopId:Te.shopId,role:Te.role,fullName:Te.fullName,phone:Te.phone,shopName:Te.shopName||null,approved:Te.approved,avatarId:Te.avatarId,bridgeLink:Te.bridgeLink||null,bridgeDeviceId:Te.bridgeDeviceId||null,showWithdrawNote:Te.showWithdrawNote!==void 0?!!Te.showWithdrawNote:!0,isReceiptNoteEnabled:Te.isReceiptNoteEnabled!==void 0?!!Te.isReceiptNoteEnabled:!0,createdAt:((P=(S=Te.createdAt)==null?void 0:S.toDate)==null?void 0:P.call(S))||new Date,updatedAt:((k=(C=Te.updatedAt)==null?void 0:C.toDate)==null?void 0:k.call(C))||new Date,trialStarted:Te.trialStarted||!1,trialStartDate:(D=(O=Te.trialStartDate)==null?void 0:O.toDate)==null?void 0:D.call(O),trialEndDate:(X=(B=Te.trialEndDate)==null?void 0:B.toDate)==null?void 0:X.call(B),trialExpired:Te.trialExpired||!1};s(Ce),Se=!0,d(!1)}}catch(he){console.log("Cache profile not available:",(he==null?void 0:he.code)||he)}try{if(!Se){const he=localStorage.getItem(`profile_cache_${I}`);if(he){const Te=JSON.parse(he);s(Te),Se=!0,d(!1)}}}catch{}if(!Se)for(let he=0;he<3;he++)try{const Te=await Ge(ue);if(Te.exists()){const Ce=Te.data(),bt={userId:Te.id,shopId:Ce.shopId,role:Ce.role,fullName:Ce.fullName,phone:Ce.phone,shopName:Ce.shopName||null,approved:Ce.approved,avatarId:Ce.avatarId,bridgeLink:Ce.bridgeLink||null,bridgeDeviceId:Ce.bridgeDeviceId||null,showWithdrawNote:Ce.showWithdrawNote!==void 0?!!Ce.showWithdrawNote:!0,isReceiptNoteEnabled:Ce.isReceiptNoteEnabled!==void 0?!!Ce.isReceiptNoteEnabled:!0,createdAt:((G=(ee=Ce.createdAt)==null?void 0:ee.toDate)==null?void 0:G.call(ee))||new Date,updatedAt:((F=(U=Ce.updatedAt)==null?void 0:U.toDate)==null?void 0:F.call(U))||new Date,trialStarted:Ce.trialStarted||!1,trialStartDate:(ae=(H=Ce.trialStartDate)==null?void 0:H.toDate)==null?void 0:ae.call(H),trialEndDate:(le=(te=Ce.trialEndDate)==null?void 0:te.toDate)==null?void 0:le.call(te),trialExpired:Ce.trialExpired||!1};s(bt);try{localStorage.setItem(`profile_cache_${Te.id}`,JSON.stringify(bt))}catch{}Se=!0,d(!1);break}}catch{}return js(ue,async he=>{var Te,Ce,bt,Vt,Yt,qt,En,Lr;if(he.exists()){const Ie=he.data(),er={userId:he.id,shopId:Ie.shopId,role:Ie.role,fullName:Ie.fullName,phone:Ie.phone,shopName:Ie.shopName||null,approved:Ie.approved,avatarId:Ie.avatarId,bridgeLink:Ie.bridgeLink||null,bridgeDeviceId:Ie.bridgeDeviceId||null,showWithdrawNote:Ie.showWithdrawNote!==void 0?!!Ie.showWithdrawNote:!0,isReceiptNoteEnabled:Ie.isReceiptNoteEnabled!==void 0?!!Ie.isReceiptNoteEnabled:!0,createdAt:((Ce=(Te=Ie.createdAt)==null?void 0:Te.toDate)==null?void 0:Ce.call(Te))||new Date,updatedAt:((Vt=(bt=Ie.updatedAt)==null?void 0:bt.toDate)==null?void 0:Vt.call(bt))||new Date,trialStarted:Ie.trialStarted||!1,trialStartDate:(qt=(Yt=Ie.trialStartDate)==null?void 0:Yt.toDate)==null?void 0:qt.call(Yt),trialEndDate:(Lr=(En=Ie.trialEndDate)==null?void 0:En.toDate)==null?void 0:Lr.call(En),trialExpired:Ie.trialExpired||!1};s(er);try{localStorage.setItem(`profile_cache_${he.id}`,JSON.stringify(er))}catch{}Se||(Se=!0,d(!1))}else if(!Se)try{const Ie=await JN.getByUserId(I);if(Ie){const er={userId:I,shopId:Ie.shopId,role:Ie.role||"user",fullName:Ie.fullName||null,phone:Ie.phone||null,shopName:Ie.shopName||null,approved:Ie.approved??!1,avatarId:Ie.avatarId||void 0,bridgeLink:Ie.bridgeLink||null,bridgeDeviceId:Ie.bridgeDeviceId||null,createdAt:ge(),updatedAt:ge()};await Xn(ce(q,"profiles",I),er,{merge:!0}),s({...Ie,userId:I,createdAt:Ie.createdAt||new Date,updatedAt:Ie.updatedAt||new Date})}else await m(I)}catch(Ie){console.error("Profile migration/create error:",Ie)}finally{Se=!0,d(!1)}},he=>{console.error("Profile listener error:",he);try{d(!1)}catch{}})}catch(ue){return console.error("Error setting up profile listener:",ue),await m(I),d(!1),()=>{}}},f=async I=>{try{const S=ce(q,"users",I.uid);(await Ge(S)).exists()?(await qe(S,{lastLogin:ge(),updatedAt:ge()}),console.log(" ensureAdminUserDoc: Updated lastLogin for",I.uid)):(await Xn(S,{email:I.email||"",displayName:I.displayName||" ",phone:null,shopName:null,isActive:!1,createdAt:ge(),updatedAt:ge(),lastLogin:ge()},{merge:!0}),console.log(" ensureAdminUserDoc: Created users doc for",I.uid))}catch(S){console.error(" ensureAdminUserDoc error:",S)}},m=async(I,S,P,C,k)=>{var O,D;try{console.log("Creating default profile for user:",I);const B=Ew.generateReferralCode(I);let X=null;const ee={userId:I,shopId:"default-shop",role:"user",fullName:S||" ",phone:P||null,shopName:C||null,approved:!1,referralCode:B,referredBy:k||null,bridgeLink:null,bridgeDeviceId:null,showWithdrawNote:!0,isReceiptNoteEnabled:!0,createdAt:new Date,updatedAt:new Date};s(ee),console.log("Created temporary profile:",ee);try{const{doc:G,setDoc:U,serverTimestamp:F}=await xe(async()=>{const{doc:le,setDoc:ue,serverTimestamp:Se}=await Promise.resolve().then(()=>Su);return{doc:le,setDoc:ue,serverTimestamp:Se}},void 0,import.meta.url),{db:H}=await xe(async()=>{const{db:le}=await Promise.resolve().then(()=>Au);return{db:le}},void 0,import.meta.url),ae={email:((O=Vn.currentUser)==null?void 0:O.email)||"",displayName:S||" ",phone:P||null,shopName:C||null,isActive:!1,referralCode:B,referredBy:k||null,createdAt:F(),lastLogin:null,updatedAt:F()};if(console.log("Attempting to add user to admin collection with data:",ae),await U(G(H,"users",I),ae,{merge:!0}),console.log(" User successfully added to admin collection:",ae),k)try{const{query:le,collection:ue,where:Se,limit:Xe,getDocs:he}=await xe(async()=>{const{query:Vt,collection:Yt,where:qt,limit:En,getDocs:Lr}=await Promise.resolve().then(()=>Su);return{query:Vt,collection:Yt,where:qt,limit:En,getDocs:Lr}},void 0,import.meta.url),{db:Te}=await xe(async()=>{const{db:Vt}=await Promise.resolve().then(()=>Au);return{db:Vt}},void 0,import.meta.url),Ce=le(ue(Te,"users"),Se("referralCode","==",k),Xe(1)),bt=await he(Ce);bt.empty?console.log(" Referral code not found in users collection:",k):(X=bt.docs[0].id,await Ew.create({referrerId:X,referredUserId:I,referredUserEmail:((D=Vn.currentUser)==null?void 0:D.email)||"",referralCode:k,status:"completed"}),console.log(" Referral record created successfully for referrer:",X))}catch(le){console.error(" Error creating referral record:",le)}const te=await Ge(G(H,"users",I));te.exists()?console.log(" User document verified in Firestore:",te.data()):console.log(" User document not found after creation")}catch(G){console.error(" Error adding user to admin collection:",G)}try{const{addDoc:G,collection:U,serverTimestamp:F}=await xe(async()=>{const{addDoc:ue,collection:Se,serverTimestamp:Xe}=await Promise.resolve().then(()=>Su);return{addDoc:ue,collection:Se,serverTimestamp:Xe}},void 0,import.meta.url),{db:H}=await xe(async()=>{const{db:ue}=await Promise.resolve().then(()=>Au);return{db:ue}},void 0,import.meta.url),te=(await G(U(H,"shops"),{name:C||" ",ownerId:I,createdAt:F(),updatedAt:F(),isActive:!0})).id;await _f.create({userId:I,shopId:te,role:"user",fullName:" ",phone:null});try{await _f.update(I,{referralCode:B,referredBy:X||null,showWithdrawNote:!0,isReceiptNoteEnabled:!0})}catch(ue){console.warn(" Failed to update profile with referral fields:",ue)}const le=await _f.getById(I);le&&(s(le),console.log("Updated with Firebase profile:",le))}catch(G){console.error("Error creating profile:",G),console.log("Using local profile - Firebase unavailable")}}catch(B){console.error("Error creating default profile:",B)}};b.useEffect(()=>{console.log(" Setting up auth state listener"),d(!0);const I=setTimeout(()=>{console.warn(" Global auth timeout reached, forcing loading to false"),d(!1)},2e4);localStorage.getItem("demoProfile")&&(console.log(" Cleaning up demo profile from localStorage"),localStorage.removeItem("demoProfile"));const S=localStorage.getItem("demoUser"),P=localStorage.getItem("demoProfile");if(S&&P){console.log(" Found demo user in localStorage");try{const k=JSON.parse(S),O=JSON.parse(P);n(k),s(O),clearTimeout(I),d(!1);return}catch(k){console.error("Error parsing demo user data:",k),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile")}}const C=R5(Vn,async k=>{console.log(" Auth state changed:",{uid:k==null?void 0:k.uid,email:k==null?void 0:k.email,emailVerified:k==null?void 0:k.emailVerified,timestamp:new Date().toISOString()}),n(k),k?(console.log(" User authenticated, starting profile hydration for:",k.uid),h(k.uid),p(),f(k)):(console.log(" User not authenticated, clearing profile"),s(null),o(null),l(!1),d(!1)),clearTimeout(I)});return()=>{clearTimeout(I),C()}},[]),b.useEffect(()=>{const I=async()=>{try{await v(),await p()}catch{}};try{window.addEventListener("app:softRefresh",I)}catch{}return()=>{try{window.removeEventListener("app:softRefresh",I)}catch{}}},[e==null?void 0:e.uid]),b.useEffect(()=>{if(!(e!=null&&e.uid))return;const I=Km.subscribeDeletedTransactionsLocalSync(e.uid);return()=>{try{I==null||I()}catch{}}},[e==null?void 0:e.uid]);const T=async(I,S,P,C,k,O)=>{try{const D=(I||"").trim().toLowerCase(),B=(S||"").trim();console.log(" Attempting to sign up user:",D);const X=await vS(Vn,D,B);console.log(" Sign up successful:",X.user.uid),await m(X.user.uid,P,C,k,O),await f(X.user);try{await h(X.user.uid),await p()}catch{}return{error:null}}catch(D){console.error(" Sign up error:",D);let B="    ";return D.code==="auth/email-already-in-use"?B="    ":D.code==="auth/weak-password"?B="   ":D.code==="auth/invalid-email"&&(B="   "),{error:{...D,message:B}}}},y=async(I,S)=>{var k;const P=(I||"").trim().toLowerCase(),C=(S||"").trim();try{const O=F=>F.replace(/[\u200B\u200C\u200D\u200E\u200F\u061C]/g,""),D=F=>F.replace(/[-]/g,H=>String("0123456789"["".indexOf(H)])).replace(/[-]/g,H=>String("0123456789"["".indexOf(H)])),B=F=>F.replace(/[0-9]/g,H=>""[Number(H)]),X=F=>D(O(F));if(console.log(" Attempting to sign in user:",P),P==="test@example.com"&&C==="123456"){console.log(" Demo user login detected");const F={uid:"demo-user-123",email:"test@example.com",displayName:" ",emailVerified:!0},H={userId:"demo-user-123",shopId:"demo-shop",role:"user",fullName:" ",phone:"01000000000",approved:!0,createdAt:new Date,updatedAt:new Date};return localStorage.setItem("demoUser",JSON.stringify(F)),localStorage.setItem("demoProfile",JSON.stringify(H)),n(F),s(H),d(!1),console.log(" Demo user signed in successfully"),{error:null}}let ee;const G=[X(C),O(C),B(O(C))];let U=null;for(const F of G)try{F!==C&&console.log(" Trying password variant"),ee=await b5(Vn,P,F);break}catch(H){if(U=H,(H==null?void 0:H.code)!=="auth/wrong-password"&&(H==null?void 0:H.code)!=="auth/invalid-credential")throw H}if(!ee)throw U||new Error("auth/invalid-credential");console.log(" Sign in successful:",ee.user.uid);try{if((await Ge(ce(q,"deletedUsers",ee.user.uid))).exists())return console.log(" User is deleted, signing out"),await wS(Vn),{error:{code:"auth/user-deleted",message:"      .    ."}}}catch(F){console.error("Error checking deleted users:",F)}await f(ee.user);try{await h(ee.user.uid),await p()}catch{}return{error:null}}catch(O){if(console.error(" Sign in error:",O),P==="test@example.com"&&O.code==="auth/user-not-found"){console.log(" Creating test user...");try{const X=await vS(Vn,P,C);return console.log(" Test user created:",X.user.uid),await m(X.user.uid," ","01000000000"," "),{error:null}}catch(X){return console.error(" Error creating test user:",X),{error:X}}}let D="    ",B=O==null?void 0:O.code;if(B==="auth/invalid-credential")try{const X=await x5(Vn,((k=O==null?void 0:O.customData)==null?void 0:k.email)||"");Array.isArray(X)&&X.length===0?(B="auth/user-not-found",D="     "):(B="auth/wrong-password",D="   ")}catch{D="      "}else B==="auth/invalid-email"?D="    ":B==="auth/user-not-found"?D="     ":B==="auth/wrong-password"?D="   ":B==="auth/too-many-requests"&&(D="      ");return{error:{...O,code:B,message:D}}}},_=async()=>{try{localStorage.getItem("demoUser")?(console.log(" Signing out demo user"),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile"),n(null),s(null),d(!1)):await wS(Vn);const P=(()=>{try{const C=typeof window<"u"?window:null,k=!!(C&&C.electronAPI)||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"),O=typeof window<"u"&&window.location.protocol==="file:",D=typeof window<"u"&&typeof window.location.hash=="string"&&window.location.hash.startsWith("#/");return k||O||D||typeof import.meta<"u"&&Oq&&!0}catch{return!1}})()?"#/user/login":"/user/login";try{window.location.replace(P)}catch{window.location.href=P}}catch(I){console.error("Sign out error:",I)}},w=async I=>{try{return await S5(Vn,I),{error:null}}catch(S){console.error("Reset password error:",S);let P="        ";return S.code==="auth/user-not-found"?P="     ":S.code==="auth/invalid-email"&&(P="   "),{error:{...S,message:P}}}},p=async()=>{if(!e){console.log("No user found for subscription check"),o(null),l(!1);return}console.log("Checking subscription status for user:",e.uid);try{return js(ce(q,"users",e.uid),async S=>{var P,C,k,O,D,B,X,ee;if(S.exists()){const G=S.data();o(G),console.log(" Subscription Data Details (Real-time):",{userId:e.uid,userEmail:e.email,subscription:G.subscription,subscriptionExists:!!G.subscription,planType:(P=G.subscription)==null?void 0:P.planType,isActive:(C=G.subscription)==null?void 0:C.isActive,startDate:(k=G.subscription)==null?void 0:k.startDate,endDate:(O=G.subscription)==null?void 0:O.endDate,activatedBy:(D=G.subscription)==null?void 0:D.activatedBy,activatedAt:(B=G.subscription)==null?void 0:B.activatedAt,isOnFreeTrial:G.isOnFreeTrial,freeTrialEndDate:G.freeTrialEndDate,branchPackageStatus:(X=G==null?void 0:G.branchPackage)==null?void 0:X.status});const U=((ee=G==null?void 0:G.branchPackage)==null?void 0:ee.status)==="active";let F=!1;if(U)console.log(" Branch package is active, granting access"),F=!0;else if(G.isOnFreeTrial){console.log(" User is on free trial, checking validity...");const H=await a0.checkTrialValidity(e.uid);H.isValid&&!H.isExpired?(console.log(" Free trial is valid, granting access"),F=!0):H.isExpired?(console.log(" Free trial has expired, checking regular subscription"),F=Ef(G.subscription)):(console.log(" Free trial is not valid"),F=Ef(G.subscription))}else F=Ef(G.subscription);l(F),console.log(" Subscription Validation Result (Real-time):",{userId:e.uid,isValid:F,isOnFreeTrial:G.isOnFreeTrial,hasActiveBranchPackage:U,reason:U?"Branch package active":G.isOnFreeTrial?"Free trial active":G.subscription?G.subscription.isActive?G.subscription.planType==="lifetime"?"Lifetime plan":G.subscription.endDate?new Date>new Date(G.subscription.endDate)?"Expired":"Valid":"No end date":"Subscription not active":"No subscription data"});try{const H=G.subscription,ae=H==null?void 0:H.planType,te=H==null?void 0:H.endDate,le=te!=null&&te.toDate?te.toDate():te?new Date(te):null,ue=new Date,Se=ae===_s.MONTHLY||ae===_s.QUARTERLY||ae===_s.YEARLY;H&&H.isActive===!0&&Se&&le&&!isNaN(le.getTime())&&ue>le&&(await Nq(e.uid),console.log(" Subscription paused due to end date reached:",{userId:e.uid,plan:ae,endDate:le}))}catch(H){console.warn("Failed to auto-deactivate expired subscription:",H)}}},S=>{console.error(" Subscription listener error:",S)})}catch(I){console.error("Error setting up subscription listener:",I)}},v=async()=>{if(e)try{console.log("Refreshing profile for user:",e.uid),await h(e.uid),await p()}catch(I){console.error("Error refreshing profile:",I)}},L={user:e,profile:r,userSubscription:i,isSubscriptionActive:a,loading:c,signUp:T,signIn:y,signOut:_,resetPassword:w,updateUserProfile:async I=>{if(e)try{const S={updatedAt:ge()};if(I.fullName!==void 0&&(S.fullName=I.fullName),I.phone!==void 0&&(S.phone=I.phone),I.bridgeLink!==void 0){const P=(I.bridgeLink||"").trim();S.bridgeLink=P.length?P:null}if(I.bridgeDeviceId!==void 0){const P=(I.bridgeDeviceId||"").trim();S.bridgeDeviceId=P.length?P:null}I.showWithdrawNote!==void 0&&(S.showWithdrawNote=!!I.showWithdrawNote),I.isReceiptNoteEnabled!==void 0&&(S.isReceiptNoteEnabled=!!I.isReceiptNoteEnabled),await qe(ce(q,"profiles",e.uid),S),await h(e.uid)}catch(S){console.error("Error updating user profile:",S)}},updateAvatarId:async I=>{if(e)try{await qe(ce(q,"profiles",e.uid),{avatarId:I,updatedAt:ge()}),await h(e.uid)}catch(S){console.error("Error updating avatarId:",S)}},refreshProfile:v,checkSubscriptionStatus:p};return x.jsx(rO.Provider,{value:L,children:t})},Tw=()=>{const[t,e]=b.useState(""),[n,r]=b.useState(""),[s,i]=b.useState(!1),[o,a]=b.useState(!1),{signIn:l}=ga(),c=Pd();b.useEffect(()=>{try{const m=typeof window<"u"?window.localStorage.getItem("cashy:lastEmail"):null;m&&e(m)}catch{}},[]);const d=async m=>{if(m.preventDefault(),o){wt.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){wt.error("   .      .");return}const T=(t||"").trim().toLowerCase(),y=(n||"").trim();if(console.log("    :",{email:T,password:"***"}),!t||!n){wt.error("   ");return}if(!/^\S+@\S+\.\S+$/.test(T)){wt.error("    ");return}a(!0);try{console.log("  signIn...");const{error:_}=await l(T,y);if(console.log(" SignIn result:",{error:_}),_){console.error("    :",_);const w=_==null?void 0:_.code;w==="auth/user-not-found"?wt.error("     "):w==="auth/wrong-password"?wt.error("   "):w==="auth/invalid-credential"?wt.error("      "):w==="auth/too-many-requests"?wt.error("      "):wt.error((_==null?void 0:_.message)||"    ")}else console.log("    !"),wt.success("   !"),c("/user/dashboard")}catch(_){console.error("   :",_),wt.error("   ")}finally{a(!1)}},h=m=>{if(o){m.preventDefault(),m.stopPropagation(),wt.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){m.preventDefault(),m.stopPropagation(),wt.error("   .      .");return}t||wt.error("   "),n||wt.error("   ");const T=(t||"").trim().toLowerCase();T&&!/^\S+@\S+\.\S+$/.test(T)&&wt.error("    ")},f=()=>{c("/user/forgot-password")};return b.useEffect(()=>{if(!(typeof window<"u"&&window.matchMedia&&window.matchMedia("(pointer: coarse)").matches))return;const m=document.documentElement,T=document.body,y=m.style.overflow,_=T.style.overflow,w=m.style.overscrollBehaviorY,p=T.style.overscrollBehaviorY;return m.style.overflow="hidden",T.style.overflow="hidden",m.style.overscrollBehaviorY="none",T.style.overscrollBehaviorY="none",()=>{m.style.overflow=y||"",T.style.overflow=_||"",m.style.overscrollBehaviorY=w||"",T.style.overscrollBehaviorY=p||""}},[]),x.jsx("div",{className:"relative min-h-[100dvh] w-full overflow-hidden flex items-center justify-center p-4 bg-no-repeat bg-cover",style:{backgroundImage:"var(--bg-purple-gradient)",backgroundAttachment:"fixed"},children:x.jsxs("div",{className:"w-full max-w-md mt-16 md:mt-12 lg:mt-10",children:[x.jsxs("div",{className:"text-center mb-8",children:[x.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-green-600 to-blue-600 rounded-full mb-4 shadow-2xl",children:x.jsx(oF,{className:"w-10 h-10 text-white"})}),x.jsx("div",{className:"flex items-center justify-center mb-2",children:x.jsx("span",{className:"text-2xl font-extrabold text-white tracking-wider uppercase",dir:"ltr",style:{fontFamily:"Inter, sans-serif"},children:"cashy link"})}),x.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"  "}),x.jsx("p",{className:"text-white/80",children:"    "})]}),x.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-8 shadow-2xl border border-white/20",children:[x.jsxs("form",{onSubmit:d,className:"space-y-6",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-white",children:" "}),x.jsxs("div",{className:"relative",children:[x.jsx(gI,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),x.jsx(Lv,{id:"email",type:"email",placeholder:"  ",value:t,onChange:m=>{const T=m.target.value;e(T);try{window.localStorage.setItem("cashy:lastEmail",T)}catch{}},className:"pl-10 pr-4 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",dir:"rtl",required:!0})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-white",children:" "}),x.jsxs("div",{className:"relative",children:[x.jsx(eF,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),x.jsx(Lv,{id:"password",type:s?"text":"password",placeholder:"  ",value:n,onChange:m=>r(m.target.value),className:"pl-10 pr-10 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",autoComplete:"off",dir:"rtl",required:!0}),x.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white transition-colors",children:s?x.jsx(YM,{className:"w-5 h-5"}):x.jsx(XM,{className:"w-5 h-5"})})]})]}),x.jsx("div",{className:"flex justify-end",children:x.jsxs(du,{type:"button",variant:"ghost",size:"sm",onClick:f,className:"text-green-200 hover:text-green-100 p-0 h-auto font-normal hover:bg-transparent",children:[x.jsx(gI,{className:"w-4 h-4 ml-1"}),"  "]})}),x.jsx("button",{type:"submit",onClick:h,className:"w-full bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:from-green-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all duration-200",children:o?x.jsxs("div",{className:"flex items-center justify-center",children:[x.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"  ..."]}):x.jsxs("div",{className:"flex items-center justify-center",children:[x.jsx(WM,{className:"w-5 h-5 ml-2"})," "]})})]}),x.jsxs("div",{className:"mt-6 text-center space-y-3",children:[x.jsxs("p",{className:"text-sm text-white/80",children:["  "," ",x.jsx(Bj,{to:"/user/register",className:"text-green-200 hover:text-green-100 font-medium transition-colors hover:underline",children:"  "})]}),x.jsxs("p",{className:"text-sm text-white/80",children:["        "," ",x.jsx("a",{href:"https://wa.me/201000392539",target:"_blank",rel:"noreferrer",className:"text-green-200 hover:text-green-100 font-medium hover:underline",children:"01000392539"})," ","   "," ",x.jsx("a",{href:"mailto:info@cashy-link.com",className:"text-blue-200 hover:text-blue-100 font-medium hover:underline",children:"info@cashy-link.com"})]})]})]}),x.jsx("div",{className:"mt-6 text-center",children:x.jsx("p",{className:"text-xs text-white/70",children:"   "})})]})})},Vq=()=>{const t=Pd(),e=us(),{signOut:n,user:r,userSubscription:s}=ga(),{toast:i}=T_(),[o,a]=b.useState(!1),[l,c]=b.useState(!1),d=[{id:"home",label:"",icon:ZM,path:"/user/dashboard",action:()=>{t("/user/dashboard"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}},{id:"debts",label:"",icon:JM,path:"/debts",action:()=>{t("/user/dashboard",{state:{openDebtDialog:!0}})}},{id:"transfer",label:"",icon:HM,path:"/transfer",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"transfer",startNewTransaction:!0}})}},{id:"add",label:"",icon:yI,path:"/add",isSpecial:!0},{id:"withdraw",label:"",icon:qM,path:"/withdraw",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"withdraw",startNewTransaction:!0}})}},{id:"transactions",label:"",icon:$g,path:"/transactions"},{id:"settings",label:"",icon:vI,path:"/profile-settings"}],h=[{id:"installment",label:"",icon:KM,action:()=>{var _;a(!1);const y=(_=s==null?void 0:s.subscription)==null?void 0:_.planType;if(y===_s.TAHWEELA||y===_s.ZERO){i({title:"  ",description:"      .",variant:"destructive"});return}t("/user/dashboard",{state:{openInstallment:!0}})},color:"#7C3AED"},{id:"maintenance",label:"",icon:aF,action:()=>{a(!1),t("/user/dashboard",{state:{openMaintenanceDialog:!0}})},color:"#0EA5E9"},{id:"credit-cards",label:" ",icon:QM,action:()=>{a(!1),t("/user/dashboard",{state:{openCreditCardsDialog:!0}})},color:"#8B5CF6"},{id:"sales",label:"",icon:sF,action:()=>{a(!1),t("/user/dashboard",{state:{openSalesDialog:!0}})},color:"#F59E0B"},{id:"shop-expenses",label:" ",icon:$g,action:()=>{a(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"deficiencies",label:"",icon:iF,action:()=>{a(!1),t("/user/dashboard",{state:{openDeficienciesDialog:!0}})},color:"#DB2777"},{id:"add-wallet",label:" ",icon:yI,action:()=>{a(!1),t("/user/add-wallet")},color:"#EF4444"},{id:"cashier-shift",label:" ",icon:GM,action:()=>{a(!1),t("/user/dashboard",{state:{openCashierShiftModal:!0}})},color:"#3B82F6"},{id:"contact",label:" ",icon:tF,action:()=>{a(!1);const _=`   
  : ${(r==null?void 0:r.email)||" "}`,w=encodeURIComponent(_);window.open(`https://wa.me/201000392539?text=${w}`,"_blank")},color:"#10B981"},{id:"logout",label:" ",icon:mI,action:async()=>{a(!1);try{await n(),t("/user/login",{replace:!0})}catch(y){console.error("Logout error:",y);try{t("/user/login",{replace:!0})}catch{}}},color:"#EF4444"}],f=[{id:"shop-expenses-settings",label:" ",icon:$g,action:()=>{c(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"profile-settings",label:"  ",icon:vI,action:()=>{c(!1),t("/profile-settings")},color:"#6366F1"},{id:"logout",label:" ",icon:mI,action:async()=>{c(!1);try{await n(),t("/user/login",{replace:!0})}catch(y){console.error("Logout error:",y);try{t("/user/login",{replace:!0})}catch{}}},color:"#EF4444"}],m=(y,_,w,p)=>{var I;const A=((I=s==null?void 0:s.subscription)==null?void 0:I.planType)===_s.TAHWEELA,R=S=>["/user/dashboard","/profile-settings"].includes(S),L=S=>S==="debts";if(w){if(A&&!L(p)&&!R(y)){i({title:"  ",description:"      .",variant:"destructive"});return}w()}else if(_&&y==="/add"){if(A){i({title:"  ",description:"      .",variant:"destructive"});return}a(!o)}else if(!_){if(A&&!R(y)){i({title:"  ",description:"      .",variant:"destructive"});return}t(y)}},T=y=>e.pathname===y;return x.jsxs("div",{className:"mobile-bottom-nav",children:[o&&x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"quick-actions-overlay",onClick:()=>a(!1)}),x.jsx("div",{className:"floating-actions-container",children:h.map((y,_)=>x.jsxs("div",{className:"floating-action-button",onClick:()=>{var p;if(((p=s==null?void 0:s.subscription)==null?void 0:p.planType)===_s.TAHWEELA){i({title:"  ",description:"      .",variant:"destructive"});return}y.action()},style:{"--action-color":y.color,"--animation-delay":`${_*.1}s`},children:[x.jsx("div",{className:"floating-action-icon",style:{backgroundColor:y.color},children:x.jsx(y.icon,{className:"action-icon"})}),x.jsx("span",{className:"floating-action-label",children:y.label})]},y.id))})]}),l&&x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"quick-actions-overlay",onClick:()=>c(!1)}),x.jsx("div",{className:"floating-actions-container",children:f.map((y,_)=>x.jsxs("div",{className:"floating-action-button",onClick:()=>{var v;const w=(v=s==null?void 0:s.subscription)==null?void 0:v.planType,p=new Set(["logout","profile-settings"]);if(w===_s.TAHWEELA&&!p.has(y.id)){i({title:"  ",description:"      .",variant:"destructive"});return}y.action()},style:{"--action-color":y.color,"--animation-delay":`${_*.1}s`},children:[x.jsx("div",{className:"floating-action-icon",style:{backgroundColor:y.color},children:x.jsx(y.icon,{className:"action-icon"})}),x.jsx("span",{className:"floating-action-label",children:y.label})]},y.id))})]}),x.jsx("nav",{className:"mobile-bottom-nav-container",children:d.map(y=>{const _=y.icon,w=T(y.path);return x.jsxs("button",{onClick:()=>m(y.path,y.isSpecial,y.action,y.id),className:`mobile-nav-item ${w?"active":""} ${y.isSpecial?"special":""}`,type:"button","aria-label":y.label,children:[x.jsx("div",{className:`nav-icon-container ${y.isSpecial?"special-icon":""} ${y.isSpecial&&y.id==="add"&&o?"special-open":""}`,children:x.jsx(_,{className:`nav-icon ${w?"active-icon":""} ${y.isSpecial?"special-icon-svg":""} ${y.isSpecial&&y.id==="add"&&o?"rotated":""} ${y.isSpecial&&y.id==="settings"&&l?"rotated":""}`})}),!y.isSpecial&&x.jsx("span",{className:`nav-label ${w?"active-label":""}`,children:y.label})]},y.id)})})]})};var ZA,ex;const No=(ex=(ZA=import.meta)==null?void 0:ZA.env)==null?void 0:ex.VITE_ANDROID_DOWNLOAD_URL;var tx,nx;const Oo=(nx=(tx=import.meta)==null?void 0:tx.env)==null?void 0:nx.VITE_PC_DOWNLOAD_URL;var rx,sx;const Lo=(sx=(rx=import.meta)==null?void 0:rx.env)==null?void 0:sx.VITE_PC32_DOWNLOAD_URL;var ix,ox;const Vo=(ox=(ix=import.meta)==null?void 0:ix.env)==null?void 0:ox.VITE_ANDROID_VERSION;var ax,lx;const Mo=(lx=(ax=import.meta)==null?void 0:ax.env)==null?void 0:lx.VITE_PC_VERSION;var cx,ux;const Fo=(ux=(cx=import.meta)==null?void 0:cx.env)==null?void 0:ux.VITE_PC32_VERSION;function _t(t){if(t)try{const n=(t.split("?")[0].split("#")[0].split("/").pop()||"").match(/v?(\d+\.\d+(?:\.\d+)?)/i);return n==null?void 0:n[1]}catch{return}}function Mq(t){if(t)try{const e=t.match(/drive\.google\.com\/file\/d\/([^/]+)\//),n=t.match(/drive\.google\.com\/open\?id=([^&]+)/),r=(e==null?void 0:e[1])||(n==null?void 0:n[1]);return r?`https://drive.google.com/uc?export=download&id=${r}`:(/drive\.google\.com\/uc\?/.test(t),t)}catch{return t}}const Zi=["siteContent","appDownloads"],Vp=["siteContent","desktop_updates"],Mp=["siteContent","android_updates"],md="appDownloadsCache";function Fq(){try{const e=localStorage.getItem(md);if(e){const n=JSON.parse(e),r={androidUrl:(n==null?void 0:n.androidUrl)||No,pcUrl:(n==null?void 0:n.pcUrl)||Oo,pc32Url:(n==null?void 0:n.pc32Url)||Lo,androidVersion:(n==null?void 0:n.androidVersion)||Vo,pcVersion:(n==null?void 0:n.pcVersion)||Mo,pc32Version:(n==null?void 0:n.pc32Version)||Fo,updatedAt:n==null?void 0:n.updatedAt,updatedBy:n==null?void 0:n.updatedBy};return r.pcVersion||(r.pcVersion=_t(r.pcUrl)),r.androidVersion||(r.androidVersion=_t(r.androidUrl)),r.pc32Version||(r.pc32Version=_t(r.pc32Url)),r}}catch{}const t={androidUrl:No,pcUrl:Oo,pc32Url:Lo,androidVersion:Vo,pcVersion:Mo,pc32Version:Fo};return t.pcVersion||(t.pcVersion=_t(t.pcUrl)),t.androidVersion||(t.androidVersion=_t(t.androidUrl)),t.pc32Version||(t.pc32Version=_t(t.pc32Url)),t}async function Uq(){try{const t=await Ge(ce(q,Zi[0],Zi[1]));if(t.exists()){const n=t.data();try{localStorage.setItem(md,JSON.stringify(n))}catch{}const r={androidUrl:(n==null?void 0:n.androidUrl)||No,pcUrl:(n==null?void 0:n.pcUrl)||Oo,pc32Url:(n==null?void 0:n.pc32Url)||Lo,androidVersion:(n==null?void 0:n.androidVersion)||Vo,pcVersion:(n==null?void 0:n.pcVersion)||Mo,pc32Version:(n==null?void 0:n.pc32Version)||Fo,updatedAt:n==null?void 0:n.updatedAt,updatedBy:n==null?void 0:n.updatedBy};return r.pcVersion||(r.pcVersion=_t(r.pcUrl)),r.androidVersion||(r.androidVersion=_t(r.androidUrl)),r.pc32Version||(r.pc32Version=_t(r.pc32Url)),r}const e={androidUrl:No,pcUrl:Oo,pc32Url:Lo,androidVersion:Vo,pcVersion:Mo,pc32Version:Fo};return e.pcVersion||(e.pcVersion=_t(e.pcUrl)),e.androidVersion||(e.androidVersion=_t(e.androidUrl)),e.pc32Version||(e.pc32Version=_t(e.pc32Url)),e}catch(t){const e=(t==null?void 0:t.message)||"";((t==null?void 0:t.code)||"")==="permission-denied"||e.includes("Missing or insufficient permissions")?console.warn(" Cannot read app downloads (unauth/public). Using cached or empty.",t):console.error(" Error loading app downloads:",t);try{const s=localStorage.getItem(md);if(s){const i=JSON.parse(s),o={androidUrl:(i==null?void 0:i.androidUrl)||No,pcUrl:(i==null?void 0:i.pcUrl)||Oo,pc32Url:(i==null?void 0:i.pc32Url)||Lo,androidVersion:(i==null?void 0:i.androidVersion)||Vo,pcVersion:(i==null?void 0:i.pcVersion)||Mo,pc32Version:(i==null?void 0:i.pc32Version)||Fo,updatedAt:i==null?void 0:i.updatedAt,updatedBy:i==null?void 0:i.updatedBy};return o.pcVersion||(o.pcVersion=_t(o.pcUrl)),o.androidVersion||(o.androidVersion=_t(o.androidUrl)),o.pc32Version||(o.pc32Version=_t(o.pc32Url)),o}}catch{}const r={androidUrl:No,pcUrl:Oo,pc32Url:Lo,androidVersion:Vo,pcVersion:Mo,pc32Version:Fo};return r.pcVersion||(r.pcVersion=_t(r.pcUrl)),r.androidVersion||(r.androidVersion=_t(r.androidUrl)),r.pc32Version||(r.pc32Version=_t(r.pc32Url)),r}}function jq(t){try{const e=ce(q,Zi[0],Zi[1]);return js(e,r=>{const s=(r.exists()?r.data():{})||{},i={androidUrl:(s==null?void 0:s.androidUrl)||No,pcUrl:(s==null?void 0:s.pcUrl)||Oo,pc32Url:(s==null?void 0:s.pc32Url)||Lo,androidVersion:(s==null?void 0:s.androidVersion)||Vo,pcVersion:(s==null?void 0:s.pcVersion)||Mo,pc32Version:(s==null?void 0:s.pc32Version)||Fo,updatedAt:s==null?void 0:s.updatedAt,updatedBy:s==null?void 0:s.updatedBy};i.pcVersion||(i.pcVersion=_t(i.pcUrl)),i.androidVersion||(i.androidVersion=_t(i.androidUrl)),i.pc32Version||(i.pc32Version=_t(i.pc32Url));try{localStorage.setItem(md,JSON.stringify(i))}catch{}t(i)},r=>{console.warn("listenAppDownloads error; falling back to cache",r);try{const s=localStorage.getItem(md);s&&t(JSON.parse(s))}catch{}})}catch{return()=>{}}}async function Bq(t,e,n,r,s,i=12e4){const o=YN(),a=t.name.replace(/[^a-zA-Z0-9_.-]/g,"_"),l=`public/apps/${e}/${Date.now()}_${a}`,c=yq(o,l);return new Promise((d,h)=>{const f=mq(c,t);let m=!1;const T=setTimeout(()=>{m=!0;try{f.cancel()}catch{}h(new Error("Upload timed out"))},i);f.on("state_changed",y=>{const _=Math.round(y.bytesTransferred/y.totalBytes*100);s&&s(_)},y=>{clearTimeout(T),h(y)},async()=>{try{if(clearTimeout(T),m)return;const y=await gq(c),_={updatedAt:ge(),updatedBy:n||"admin"};e==="android"?(_.androidUrl=y,r&&(_.androidVersion=r)):e==="pc"?(_.pcUrl=y,r&&(_.pcVersion=r)):(_.pc32Url=y,r&&(_.pc32Version=r));const w=Math.min(Math.max(2e4,Math.floor(i/10)),6e4),p=Xn(ce(q,Zi[0],Zi[1]),_,{merge:!0});let v=!1;const A=new Promise(R=>setTimeout(()=>{v=!0,R()},w));try{await Promise.race([p,A])}catch(R){console.warn(" Firestore write error, proceeding with URL only:",R)}v&&console.warn(" Firestore update timed out;             ."),d(y)}catch(y){h(y)}})})}async function $q(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:ge(),updatedBy:e||"admin"};await Xn(ce(q,Zi[0],Zi[1]),r,{merge:!0})}async function zq(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:ge(),updatedBy:e||"admin"};await Xn(ce(q,Vp[0],Vp[1]),r,{merge:!0})}function sO(t){try{const e=ce(q,Vp[0],Vp[1]);return js(e,r=>{const s=(r.exists()?r.data():{})||{},i={version:s!=null&&s.version?String(s.version):void 0,downloadURL_64:s!=null&&s.downloadURL_64?String(s.downloadURL_64):void 0,downloadURL_32:s!=null&&s.downloadURL_32?String(s.downloadURL_32):void 0,notes:s!=null&&s.notes?String(s.notes):void 0};try{localStorage.setItem("desktop_update_cache",JSON.stringify(i))}catch{}t(i)},()=>{try{const r=localStorage.getItem("desktop_update_cache");r&&t(JSON.parse(r))}catch{}})}catch{return()=>{}}}function iO(t){try{const e=(typeof navigator<"u"?navigator.userAgent.toLowerCase():"")||"",n=e.includes("win64")||e.includes("x64")||e.includes("wow64")||e.includes("amd64"),r=e.includes("arm64");return String(n||r?(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)||"":(t==null?void 0:t.downloadURL_32)||(t==null?void 0:t.downloadURL_64)||"")}catch{return(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)}}async function qq(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:ge(),updatedBy:e||"admin"};await Xn(ce(q,Mp[0],Mp[1]),r,{merge:!0})}function Wq(t){try{const e=ce(q,Mp[0],Mp[1]);return js(e,r=>{const s=(r.exists()?r.data():{})||{},i={version:s!=null&&s.version?String(s.version):void 0,url:s!=null&&s.url?String(s.url):void 0,notes:s!=null&&s.notes?String(s.notes):void 0,force:!!(s!=null&&s.force)};try{localStorage.setItem("android_update_cache",JSON.stringify(i))}catch{}t(i)},()=>{try{const r=localStorage.getItem("android_update_cache");r&&t(JSON.parse(r))}catch{}})}catch{return()=>{}}}const Hq=Object.freeze(Object.defineProperty({__proto__:null,getAppDownloads:Uq,getCachedOrEnvAppDownloads:Fq,listenAndroidUpdates:Wq,listenAppDownloads:jq,listenDesktopUpdates:sO,resolveDownloadUrl:Mq,selectDesktopUrl:iO,setAndroidUpdateInfo:qq,setAppDownloadLinks:$q,setDesktopUpdateInfo:zq,uploadAppBinaryResumable:Bq},Symbol.toStringTag,{value:"Module"})),Kq=()=>{const t=typeof window<"u"?window.electronAPI:void 0,e=!!t,[n,r]=z.useState(!1),[s,i]=z.useState(!1),[o,a]=z.useState(!1),[l,c]=z.useState(0),[d,h]=z.useState(""),f=async()=>{try{e&&t?await t.windowMinimize():console.info("windowMinimize (dev preview)")}catch(v){console.warn("failed to minimize",v)}},m=async()=>{try{e&&t?await t.windowClose():console.info("windowClose (dev preview)")}catch(v){console.warn("failed to close",v)}},T=async()=>{try{if(e&&t&&typeof t.windowReload=="function"){await t.windowReload();return}try{window.location.reload()}catch{window.dispatchEvent(new CustomEvent("app:softRefresh"))}}catch(v){console.warn("failed to soft refresh",v)}};if(z.useEffect(()=>{if(!(!e||!t))try{t.onUpdateAvailable(()=>r(!0)),t.onUpdateDownloaded(()=>r(!0)),typeof t.onUpdateError=="function"&&t.onUpdateError(()=>{a(!1)}),typeof t.onUpdateProgress=="function"&&t.onUpdateProgress(v=>{const A=(v==null?void 0:v.percent)==null?0:Number(v.percent);a(!0),c(Math.max(0,Math.min(100,isNaN(A)?0:A)))}),t.checkUpdate()}catch(v){console.warn("update init failed",v)}},[e,t]),z.useEffect(()=>{const v=sO(A=>{if(String((A==null?void 0:A.version)||"")){r(!0);const L=iO({downloadURL_64:A==null?void 0:A.downloadURL_64,downloadURL_32:A==null?void 0:A.downloadURL_32})||"";h(L)}});return()=>{try{v()}catch{}}},[]),!e)return null;const[_,w]=z.useState(!1),p=async()=>{try{if(!t)return;_?(typeof t.windowFullscreen=="function"&&await t.windowFullscreen(),w(!1)):(typeof t.windowWindowed=="function"&&await t.windowWindowed(),w(!0))}catch(v){console.warn("window toggle failed",v)}};return x.jsxs("div",{className:"fixed top-2 right-2 z-[2000] flex flex-col items-center gap-2",style:{pointerEvents:"auto"},children:[x.jsx("button",{type:"button","aria-label":"",title:"",onClick:m,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-red-600 hover:bg-red-500/10 focus:outline-none dark:text-red-400 dark:hover:bg-red-400/10",children:x.jsx(x_,{className:"w-5 h-5"})}),x.jsx("button",{type:"button","aria-label":"",title:" ",onClick:T,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:x.jsx(tR,{className:"w-5 h-5"})}),x.jsx("button",{type:"button","aria-label":"",title:"",onClick:f,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-800 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:x.jsx(nF,{className:"w-5 h-5"})}),x.jsx("button",{type:"button","aria-label":"/",title:_?"  ":"   ",onClick:p,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-700 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:x.jsx(rF,{className:"w-5 h-5"})})]})},Iw=({className:t=""})=>{var o,a;const[e,n]=b.useState(`${((a=(o=import.meta)==null?void 0:o.env)==null?void 0:a.BASE_URL)||"/"}logo.svg`),[r,s]=b.useState(0),i=b.useCallback(()=>{s(l=>{var d,h,f,m;const c=l+1;return c===1?n(`${((h=(d=import.meta)==null?void 0:d.env)==null?void 0:h.BASE_URL)||"/"}logo.png`):c===2&&n(`${((m=(f=import.meta)==null?void 0:f.env)==null?void 0:m.BASE_URL)||"/"}placeholder.svg`),c})},[]);return x.jsx("div",{className:`min-h-screen bg-background flex items-center justify-center ${t}`,children:x.jsxs("div",{className:"flex flex-col items-center justify-center",children:[x.jsx("img",{src:e,alt:"logo",onError:i,className:"w-16 h-16 animate-spin",style:{animationDuration:"0.6s"}}),x.jsx("p",{className:"mt-3 text-base font-extrabold text-primary tracking-wide animate-pulse",style:{fontFamily:"'Tajawal','Cairo',sans-serif"},children:"  "})]})})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var Wl;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Wl||(Wl={}));class gy extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const Gq=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},Qq=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>e!==null?e.name:Gq(t),i=()=>s()!=="web",o=h=>{const f=c.get(h);return!!(f!=null&&f.platforms.has(s())||a(h))},a=h=>{var f;return(f=n.PluginHeaders)===null||f===void 0?void 0:f.find(m=>m.name===h)},l=h=>t.console.error(h),c=new Map,d=(h,f={})=>{const m=c.get(h);if(m)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),m.proxy;const T=s(),y=a(h);let _;const w=async()=>(!_&&T in f?_=typeof f[T]=="function"?_=await f[T]():_=f[T]:e!==null&&!_&&"web"in f&&(_=typeof f.web=="function"?_=await f.web():_=f.web),_),p=(S,P)=>{var C,k;if(y){const O=y==null?void 0:y.methods.find(D=>P===D.name);if(O)return O.rtype==="promise"?D=>n.nativePromise(h,P.toString(),D):(D,B)=>n.nativeCallback(h,P.toString(),D,B);if(S)return(C=S[P])===null||C===void 0?void 0:C.bind(S)}else{if(S)return(k=S[P])===null||k===void 0?void 0:k.bind(S);throw new gy(`"${h}" plugin is not implemented on ${T}`,Wl.Unimplemented)}},v=S=>{let P;const C=(...k)=>{const O=w().then(D=>{const B=p(D,S);if(B){const X=B(...k);return P=X==null?void 0:X.remove,X}else throw new gy(`"${h}.${S}()" is not implemented on ${T}`,Wl.Unimplemented)});return S==="addListener"&&(O.remove=async()=>P()),O};return C.toString=()=>`${S.toString()}() { [capacitor code] }`,Object.defineProperty(C,"name",{value:S,writable:!1,configurable:!1}),C},A=v("addListener"),R=v("removeListener"),L=(S,P)=>{const C=A({eventName:S},P),k=async()=>{const D=await C;R({eventName:S,callbackId:D},P)},O=new Promise(D=>C.then(()=>D({remove:k})));return O.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await k()},O},I=new Proxy({},{get(S,P){switch(P){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return y?L:A;case"removeListener":return R;default:return v(P)}}});return r[h]=I,c.set(h,{name:h,proxy:I,platforms:new Set([...Object.keys(f),...y?[T]:[]])}),I};return n.convertFileSrc||(n.convertFileSrc=h=>h),n.getPlatform=s,n.handleError=l,n.isNativePlatform=i,n.isPluginAvailable=o,n.registerPlugin=d,n.Exception=gy,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},Yq=t=>t.Capacitor=Qq(t),ve=Yq(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),l0=ve.registerPlugin;class oO{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const s=this.listeners[e];if(!s){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(n),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new ve.Exception(e,Wl.Unimplemented)}unavailable(e="not available"){return new ve.Exception(e,Wl.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const sA=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),iA=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Xq extends oO{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=iA(s).trim(),i=iA(i).trim(),n[s]=i}),n}async setCookie(e){try{const n=sA(e.key),r=sA(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}l0("CapacitorCookies",{web:()=>new Xq});const Jq=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),Zq=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,i,o)=>(s[i]=t[e[o]],s),{})},eW=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[i,o]=s;let a,l;return Array.isArray(o)?(l="",o.forEach(c=>{a=e?encodeURIComponent(c):c,l+=`${i}=${a}&`}),l.slice(0,-1)):(a=e?encodeURIComponent(o):o,l=`${i}=${a}`),`${r}&${l}`},"").substr(1):null,tW=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=Zq(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))i.set(o,a);n.body=i.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((a,l)=>{i.append(l,a)});else for(const a of Object.keys(t.data))i.append(a,t.data[a]);n.body=i;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class nW extends oO{async request(e){const n=tW(e,e.webFetchExtra),r=eW(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,i=await fetch(s,n),o=i.headers.get("content-type")||"";let{responseType:a="text"}=i.ok?e:{};o.includes("application/json")&&(a="json");let l,c;switch(a){case"arraybuffer":case"blob":c=await i.blob(),l=await Jq(c);break;case"json":l=await i.json();break;case"document":case"text":default:l=await i.text()}const d={};return i.headers.forEach((h,f)=>{d[f]=h}),{data:l,headers:d,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}l0("CapacitorHttp",{web:()=>new nW});const yy=768;function aO(){const[t,e]=b.useState(void 0);return b.useEffect(()=>{const n=window.matchMedia(`(max-width: ${yy-1}px)`),r=()=>{e(window.innerWidth<yy)};return n.addEventListener("change",r),e(window.innerWidth<yy),()=>n.removeEventListener("change",r)},[]),!!t}function rW(){const t=aO(),[e,n]=b.useState("default"),[r,s]=b.useState(!1);return b.useEffect(()=>{const o=localStorage.getItem("notificationConsentRequested")==="true";if(s(o),o){const a=localStorage.getItem("notificationPermission");(a==="granted"||a==="denied"||a==="default")&&n(a);return}t&&typeof window<"u"&&("Notification"in window?Notification.requestPermission().then(a=>{n(a),localStorage.setItem("notificationPermission",a),localStorage.setItem("notificationConsentRequested","true"),s(!0)}).catch(()=>{n("default"),localStorage.setItem("notificationConsentRequested","true"),s(!0)}):(n("unsupported"),localStorage.setItem("notificationConsentRequested","true"),s(!0)))},[t]),{permission:e,hasRequested:r,requestConsent:async()=>{if(typeof window<"u"&&"Notification"in window){const o=await Notification.requestPermission();return n(o),localStorage.setItem("notificationPermission",o),localStorage.setItem("notificationConsentRequested","true"),s(!0),o}return"unsupported"}}}const oA=l0("AppLauncher",{web:()=>xe(()=>import("./web-D7FthliY.js"),[],import.meta.url).then(t=>new t.AppLauncherWeb)});function sW(t,e){if(!t||!t.trim())throw new Error("USSD code is required");const n=`tel:${t.replace(/#/g,"%23")}`,s=`cashy://ussd?code=${t.replace(/#/g,"%23")}${e?`&sim=${e}`:""}`;let i=!1;try{ve&&ve.getPlatform()!=="web"&&(oA.openUrl({url:s}),i=!0)}catch{}if(!i)try{window.location.href=s,i=!0}catch{}if(!i){try{window.location.href=n}catch{}try{ve&&ve.getPlatform()!=="web"&&oA.openUrl({url:n})}catch{}}}function lO(t,e){const n=String(t||"").replace(/\D/g,""),r=Math.round(Number(e||0));return!n||n.length!==11||!n.startsWith("01")||!r||r<=0?null:n.startsWith("010")?`*9*7*${n}*${r}#`:n.startsWith("011")?`*323*${n}*${r}#`:n.startsWith("012")?`*115*1*${n}*${r}#`:n.startsWith("015")?`*322*${n}*${r}#`:null}function iW(t,e,n){const r=String(t||"").replace(/\D/g,""),s=String(e||"").replace(/\D/g,""),i=Math.round(Number(n||0));return!s||s.length!==11||!s.startsWith("01")||!i||i<=0?null:!r||!r.startsWith("01")?lO(s,i):r.startsWith("010")?`*9*7*${s}*${i}#`:r.startsWith("011")?`*323*${s}*${i}#`:r.startsWith("012")?`*115*1*${s}*${i}#`:r.startsWith("015")?`*322*${s}*${i}#`:null}function uK(t,e,n){const r=lO(t,e),s=String(n||"").replace(/\D/g,"");return!r||!s?r:`${r.endsWith("#")?r.slice(0,-1):r}*${s}#`}function oW(t){const e=String(t||"").replace(/\D/g,"");return e.startsWith("010")?"vodafone":e.startsWith("011")?"etisalat":e.startsWith("012")?"orange":e.startsWith("015")?"we":null}function aW(t){const e=oW(t),n=e?`simSlot_${e}`:"simSlot_default";try{if(localStorage.getItem(n)==="sim2")return"sim2"}catch{}return"sim1"}function dK(t,e,n){const r=iW(t,e,n);if(!r)throw new Error("Unsupported network or invalid sender/receiver/amount");const s=aW(t||e);sW(r,s)}async function lW(t,e="Cashy"){if(!t||!t.trim())throw new Error("Notification message is required");try{if(typeof Notification<"u"&&(Notification.permission==="granted"?"granted":await Notification.requestPermission())==="granted"){new Notification(e||"Cashy",{body:t});return}typeof window<"u"&&typeof alert=="function"?alert(`${e||"Cashy"}
${t}`):console.log(`[${e||"Cashy"}] ${t}`)}catch(n){console.warn("Notification not available:",n)}}function c0(t,e){return e==="send"?0:Math.round(t*.01*100)/100}function cW(t,e,n=0){const r=c0(t,e),s=Math.max(0,r-n);return Math.round(s*100)/100}const uW=Object.freeze(Object.defineProperty({__proto__:null,calculateCommission:c0,calculateProfit:cW},Symbol.toStringTag,{value:"Module"})),dW=t=>t==="withdraw"||t==="receive"?"receive":"send",hW=async t=>{if(!t)return null;const e=me(oe(q,"transactions"),pe("reference","==",t),Bi(1)),n=await we(e);return n.empty?null:n.docs[0].id},fW=async t=>{if(!t||!t.shopId||!t.lineId||!t.provider)throw new Error("   :   shopId  lineId  provider");if(!t.amount||t.amount<=0)throw new Error("     ");const e=await hW(t.reference);if(e)return{id:e,duplicate:!0};const n=dW(t.type),r={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.merchantUserId||t.createdBy,walletId:t.walletId,provider:t.provider,txnType:n,originType:t.type,amount:t.amount,fee:void 0,commission:void 0,profit:0,reference:t.reference,senderMsisdn:n==="send"?t.senderMsisdn:void 0,receiverMsisdn:t.receiverMsisdn,note:t.note,status:"confirmed",createdBy:t.createdBy,createdAt:t.createdAt||new Date,confirmedAt:new Date},s=await eO.create(r);try{const i="  ",o=`: ${t.type} | : ${t.amount} | : ${t.provider}`;await lW(o,i)}catch(i){console.warn("   :",i)}try{const i=t.merchantUserId||t.createdBy;if(i){const o=n==="receive"?"withdraw":"send",a=c0(t.amount,n);await Km.saveUserTransaction(i,{type:o,amount:t.amount,commission:a,status:"completed",createdAt:new Date,senderMsisdn:o==="transfer"?t.senderMsisdn:void 0,receiverMsisdn:t.receiverMsisdn,walletId:t.walletId,lineId:t.lineId,provider:t.provider,note:t.note,transactionId:s})}else console.warn("    :   userId (merchantUserId  createdBy)  .")}catch(i){console.warn("      userTransactions   :",i)}return{id:s,duplicate:!1}};function pW(t){let e=0;for(let n=0;n<t.length;n++)e=Math.imul(31,e)+t.charCodeAt(n)|0;return"SMS_"+Math.abs(e).toString(36)}function mW(t){const e=t.toLowerCase();return e.includes("")||e.includes("withdraw")?"withdraw":(e.includes("")||e.includes("transfer")||e.includes(" "),"transfer")}function gW(t){const n=t.replace(/,/g,"").match(/(\d{1,9}(?:\.\d{1,2})?)/);return n?parseFloat(n[1]):null}function yW(t){const e=t.toLowerCase();if(e.includes("")||e.includes("vodafone"))return"vodafone_cash";if(e.includes("")||e.includes("orange"))return"orange_cash";if(e.includes("")||e.includes("etisalat"))return"etisalat_cash";if(e.includes("instapay")||e.includes(" ")||e.includes(""))return"instapay"}function vW(t={}){if(typeof window>"u")return()=>{};const e=t.createdBy||"mobile_sms_bridge",n=async r=>{const i=r.detail||{};try{let o=null;if(i&&i.payload)o=i.payload,o.shopId=o.shopId||t.shopId,o.lineId=o.lineId||t.lineId,o.provider=o.provider||t.provider,o.createdBy=o.createdBy||e;else if(i&&i.text){const l=i.text,c=mW(l),d=gW(l),h=i.msisdn,f=i.sender||void 0,m=yW(l)||t.provider;if(!t.shopId||!m){console.warn("SMS integration missing identifiers. Provide shopId and provider in initSmsIntegration."),wt.warning("   SMS   (  )");return}let T=t.lineId,y;try{const _=i.msisdn||"",w=typeof i.slot=="number"?i.slot:void 0,p=typeof i.subId=="number"?i.subId:void 0;if(_){const A=await ZN.getByShopId(t.shopId);if(A&&A.length>0){const L=_.replace(/\D/g,"").slice(-7),I=A.find(S=>String(S.msisdn||"").replace(/\D/g,"").slice(-7)===L);if(I&&(T=I.id),!T&&typeof w=="number"){const S=A==null?void 0:A.find(P=>Number(P.slot)===Number(w));S&&(T=S.id)}}}const v=i.iccid||"";if(v){const A=await Lp.getByIccid(v);A&&(y=A.id)}if(!y&&h){const A=await Lp.getByMsisdn(h);A&&(y=A.id)}}catch{}if(!y){wt.warning("  :        ");return}o={type:c,amount:d||0,provider:m,shopId:t.shopId,lineId:String(T||""),walletId:y,receiverMsisdn:h,senderMsisdn:f,iccid:i.iccid,slot:i.slot,subId:i.subId,reference:i.reference||pW(l),createdBy:e,note:"Parsed from SMS"}}if(!o)return;if((await fW(o)).duplicate)wt.info("      SMS");else{const l=o.type==="withdraw"?"":"";wt.success(`  ${l}    SMS`)}}catch(o){console.error("Failed to process mobile SMS notification:",o),wt.error("     SMS")}};return window.addEventListener("mobileSmsReceived",n),()=>window.removeEventListener("mobileSmsReceived",n)}async function wW(t,e="android",n){var l,c,d,h,f;const r=n||((l=Vn.currentUser)==null?void 0:l.uid)||"";if(!r)throw new Error("  userId   ");const s=(d=(c=import.meta)==null?void 0:c.env)==null?void 0:d.VITE_PUSH_REGISTER_ENDPOINT,i=(f=(h=import.meta)==null?void 0:h.env)==null?void 0:f.VITE_PUSH_NOTIFICATIONS_API_KEY,o={userId:r,platform:e,token:t};if(s){const m=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",...i?{Authorization:`Bearer ${i}`}:{}},body:JSON.stringify(o)});if(m.ok)return m.json()}const a=await fetch("/api/devices/save-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!a.ok)throw new Error(`  : ${a.status}`);return a.json()}async function _W(t,e="android",n){return await e0(Hm,"saveDeviceToken")({token:t,platform:e,userId:n})}async function hK(t,e=" ",n="    50 ",r={type:"transfer",amount:"50",txId:"12345"}){const i=await e0(Hm,"sendFcmToUser")({userId:t,title:e,body:n,data:r});return(i==null?void 0:i.data)??i}function cO(){if(typeof window>"u")return()=>{};const t=async e=>{var n;try{const r=e.detail||window.__fcmToken||"";if(!r)return;const s=((n=Vn.currentUser)==null?void 0:n.uid)||"";if(!s){console.warn("FCM bridge:           ");return}try{await _W(r,"android",s)}catch{await wW(r,"android",s)}console.log("    FCM  :",s)}catch(r){console.error("    FCM  :",r)}};window.addEventListener("fcm-token",t);try{const e=window.__fcmToken;e&&t(new CustomEvent("fcm-token",{detail:e}))}catch{}return()=>{window.removeEventListener("fcm-token",t)}}async function EW(){var t,e,n;try{if(!(ve!=null&&ve.isNativePlatform))return!1;const r=ve.getPlatform();if(localStorage.getItem("nativePushRequested")==="true")return!1;const i=((t=ve.Plugins)==null?void 0:t.PushNotifications)||window.PushNotifications;if(!i){if(typeof window<"u"&&"Notification"in window&&typeof Notification.requestPermission=="function")try{await Notification.requestPermission()}catch{}return localStorage.setItem("nativePushRequested","true"),!1}try{await((e=i.requestPermissions)==null?void 0:e.call(i))}catch{}try{await((n=i.register)==null?void 0:n.call(i))}catch{}return localStorage.setItem("nativePushRequested","true"),!0}catch{return!1}}var vy="focusScope.autoFocusOnMount",wy="focusScope.autoFocusOnUnmount",aA={bubbles:!1,cancelable:!0},TW="FocusScope",uO=b.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=b.useState(null),c=is(s),d=is(i),h=b.useRef(null),f=gn(e,y=>l(y)),m=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(r){let y=function(v){if(m.paused||!a)return;const A=v.target;a.contains(A)?h.current=A:ui(h.current,{select:!0})},_=function(v){if(m.paused||!a)return;const A=v.relatedTarget;A!==null&&(a.contains(A)||ui(h.current,{select:!0}))},w=function(v){if(document.activeElement===document.body)for(const R of v)R.removedNodes.length>0&&ui(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",_);const p=new MutationObserver(w);return a&&p.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",_),p.disconnect()}}},[r,a,m.paused]),b.useEffect(()=>{if(a){cA.add(m);const y=document.activeElement;if(!a.contains(y)){const w=new CustomEvent(vy,aA);a.addEventListener(vy,c),a.dispatchEvent(w),w.defaultPrevented||(IW(PW(dO(a)),{select:!0}),document.activeElement===y&&ui(a))}return()=>{a.removeEventListener(vy,c),setTimeout(()=>{const w=new CustomEvent(wy,aA);a.addEventListener(wy,d),a.dispatchEvent(w),w.defaultPrevented||ui(y??document.body,{select:!0}),a.removeEventListener(wy,d),cA.remove(m)},0)}}},[a,c,d,m]);const T=b.useCallback(y=>{if(!n&&!r||m.paused)return;const _=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,w=document.activeElement;if(_&&w){const p=y.currentTarget,[v,A]=SW(p);v&&A?!y.shiftKey&&w===A?(y.preventDefault(),n&&ui(v,{select:!0})):y.shiftKey&&w===v&&(y.preventDefault(),n&&ui(A,{select:!0})):w===p&&y.preventDefault()}},[n,r,m.paused]);return x.jsx(Rt.div,{tabIndex:-1,...o,ref:f,onKeyDown:T})});uO.displayName=TW;function IW(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(ui(r,{select:e}),document.activeElement!==n)return}function SW(t){const e=dO(t),n=lA(e,t),r=lA(e.reverse(),t);return[n,r]}function dO(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function lA(t,e){for(const n of t)if(!bW(n,{upTo:e}))return n}function bW(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function AW(t){return t instanceof HTMLInputElement&&"select"in t}function ui(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&AW(t)&&e&&t.select()}}var cA=xW();function xW(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=uA(t,e),t.unshift(e)},remove(e){var n;t=uA(t,e),(n=t[0])==null||n.resume()}}}function uA(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function PW(t){return t.filter(e=>e.tagName!=="A")}var _y=0;function RW(){b.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??dA()),document.body.insertAdjacentElement("beforeend",t[1]??dA()),_y++,()=>{_y===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),_y--}},[])}function dA(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Yr=function(){return Yr=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Yr.apply(this,arguments)};function hO(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function CW(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Tf="right-scroll-bar-position",If="width-before-scroll-bar",kW="with-scroll-bars-hidden",DW="--removed-body-scroll-bar-size";function Ey(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function NW(t,e){var n=b.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var OW=typeof window<"u"?b.useLayoutEffect:b.useEffect,hA=new WeakMap;function LW(t,e){var n=NW(null,function(r){return t.forEach(function(s){return Ey(s,r)})});return OW(function(){var r=hA.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||Ey(a,null)}),i.forEach(function(a){s.has(a)||Ey(a,o)})}hA.set(n,t)},[t]),n}function VW(t){return t}function MW(t,e){e===void 0&&(e=VW);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var d=o;o=[],d.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){o.push(d),c()},filter:function(d){return o=o.filter(d),n}}}};return s}function FW(t){t===void 0&&(t={});var e=MW(null);return e.options=Yr({async:!0,ssr:!1},t),e}var fO=function(t){var e=t.sideCar,n=hO(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return b.createElement(r,Yr({},n))};fO.isSideCarExport=!0;function UW(t,e){return t.useMedium(e),fO}var pO=FW(),Ty=function(){},Gm=b.forwardRef(function(t,e){var n=b.useRef(null),r=b.useState({onScrollCapture:Ty,onWheelCapture:Ty,onTouchMoveCapture:Ty}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,m=t.noRelative,T=t.noIsolation,y=t.inert,_=t.allowPinchZoom,w=t.as,p=w===void 0?"div":w,v=t.gapMode,A=hO(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=f,L=LW([n,e]),I=Yr(Yr({},A),s);return b.createElement(b.Fragment,null,d&&b.createElement(R,{sideCar:pO,removeScrollBar:c,shards:h,noRelative:m,noIsolation:T,inert:y,setCallbacks:i,allowPinchZoom:!!_,lockRef:n,gapMode:v}),o?b.cloneElement(b.Children.only(a),Yr(Yr({},I),{ref:L})):b.createElement(p,Yr({},I,{className:l,ref:L}),a))});Gm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Gm.classNames={fullWidth:If,zeroRight:Tf};var jW=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function BW(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=jW();return e&&t.setAttribute("nonce",e),t}function $W(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function zW(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var qW=function(){var t=0,e=null;return{add:function(n){t==0&&(e=BW())&&($W(e,n),zW(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},WW=function(){var t=qW();return function(e,n){b.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},mO=function(){var t=WW(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},HW={left:0,top:0,right:0,gap:0},Iy=function(t){return parseInt(t||"",10)||0},KW=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Iy(n),Iy(r),Iy(s)]},GW=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return HW;var e=KW(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},QW=mO(),al="data-scroll-locked",YW=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(kW,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(al,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Tf,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(If,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Tf," .").concat(Tf,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(If," .").concat(If,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(al,`] {
    `).concat(DW,": ").concat(a,`px;
  }
`)},fA=function(){var t=parseInt(document.body.getAttribute(al)||"0",10);return isFinite(t)?t:0},XW=function(){b.useEffect(function(){return document.body.setAttribute(al,(fA()+1).toString()),function(){var t=fA()-1;t<=0?document.body.removeAttribute(al):document.body.setAttribute(al,t.toString())}},[])},JW=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;XW();var i=b.useMemo(function(){return GW(s)},[s]);return b.createElement(QW,{styles:YW(i,!e,s,n?"":"!important")})},Sw=!1;if(typeof window<"u")try{var Uh=Object.defineProperty({},"passive",{get:function(){return Sw=!0,!0}});window.addEventListener("test",Uh,Uh),window.removeEventListener("test",Uh,Uh)}catch{Sw=!1}var Ca=Sw?{passive:!1}:!1,ZW=function(t){return t.tagName==="TEXTAREA"},gO=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!ZW(t)&&n[e]==="visible")},eH=function(t){return gO(t,"overflowY")},tH=function(t){return gO(t,"overflowX")},pA=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=yO(t,r);if(s){var i=vO(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},nH=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},rH=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},yO=function(t,e){return t==="v"?eH(e):tH(e)},vO=function(t,e){return t==="v"?nH(e):rH(e)},sH=function(t,e){return t==="h"&&e==="rtl"?-1:1},iH=function(t,e,n,r,s){var i=sH(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,d=o>0,h=0,f=0;do{if(!a)break;var m=vO(t,a),T=m[0],y=m[1],_=m[2],w=y-_-i*T;(T||w)&&yO(t,a)&&(h+=w,f+=T);var p=a.parentNode;a=p&&p.nodeType===Node.DOCUMENT_FRAGMENT_NODE?p.host:p}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&Math.abs(h)<1||!d&&Math.abs(f)<1)&&(c=!0),c},jh=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},mA=function(t){return[t.deltaX,t.deltaY]},gA=function(t){return t&&"current"in t?t.current:t},oH=function(t,e){return t[0]===e[0]&&t[1]===e[1]},aH=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},lH=0,ka=[];function cH(t){var e=b.useRef([]),n=b.useRef([0,0]),r=b.useRef(),s=b.useState(lH++)[0],i=b.useState(mO)[0],o=b.useRef(t);b.useEffect(function(){o.current=t},[t]),b.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var y=CW([t.lockRef.current],(t.shards||[]).map(gA),!0).filter(Boolean);return y.forEach(function(_){return _.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=b.useCallback(function(y,_){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var w=jh(y),p=n.current,v="deltaX"in y?y.deltaX:p[0]-w[0],A="deltaY"in y?y.deltaY:p[1]-w[1],R,L=y.target,I=Math.abs(v)>Math.abs(A)?"h":"v";if("touches"in y&&I==="h"&&L.type==="range")return!1;var S=pA(I,L);if(!S)return!0;if(S?R=I:(R=I==="v"?"h":"v",S=pA(I,L)),!S)return!1;if(!r.current&&"changedTouches"in y&&(v||A)&&(r.current=R),!R)return!0;var P=r.current||R;return iH(P,_,y,P==="h"?v:A)},[]),l=b.useCallback(function(y){var _=y;if(!(!ka.length||ka[ka.length-1]!==i)){var w="deltaY"in _?mA(_):jh(_),p=e.current.filter(function(R){return R.name===_.type&&(R.target===_.target||_.target===R.shadowParent)&&oH(R.delta,w)})[0];if(p&&p.should){_.cancelable&&_.preventDefault();return}if(!p){var v=(o.current.shards||[]).map(gA).filter(Boolean).filter(function(R){return R.contains(_.target)}),A=v.length>0?a(_,v[0]):!o.current.noIsolation;A&&_.cancelable&&_.preventDefault()}}},[]),c=b.useCallback(function(y,_,w,p){var v={name:y,delta:_,target:w,should:p,shadowParent:uH(w)};e.current.push(v),setTimeout(function(){e.current=e.current.filter(function(A){return A!==v})},1)},[]),d=b.useCallback(function(y){n.current=jh(y),r.current=void 0},[]),h=b.useCallback(function(y){c(y.type,mA(y),y.target,a(y,t.lockRef.current))},[]),f=b.useCallback(function(y){c(y.type,jh(y),y.target,a(y,t.lockRef.current))},[]);b.useEffect(function(){return ka.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Ca),document.addEventListener("touchmove",l,Ca),document.addEventListener("touchstart",d,Ca),function(){ka=ka.filter(function(y){return y!==i}),document.removeEventListener("wheel",l,Ca),document.removeEventListener("touchmove",l,Ca),document.removeEventListener("touchstart",d,Ca)}},[]);var m=t.removeScrollBar,T=t.inert;return b.createElement(b.Fragment,null,T?b.createElement(i,{styles:aH(s)}):null,m?b.createElement(JW,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function uH(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const dH=UW(pO,cH);var wO=b.forwardRef(function(t,e){return b.createElement(Gm,Yr({},t,{ref:e,sideCar:dH}))});wO.classNames=Gm.classNames;var hH=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Da=new WeakMap,Bh=new WeakMap,$h={},Sy=0,_O=function(t){return t&&(t.host||_O(t.parentNode))},fH=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=_O(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},pH=function(t,e,n,r){var s=fH(e,Array.isArray(t)?t:[t]);$h[n]||($h[n]=new WeakMap);var i=$h[n],o=[],a=new Set,l=new Set(s),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};s.forEach(c);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))d(f);else try{var m=f.getAttribute(r),T=m!==null&&m!=="false",y=(Da.get(f)||0)+1,_=(i.get(f)||0)+1;Da.set(f,y),i.set(f,_),o.push(f),y===1&&T&&Bh.set(f,!0),_===1&&f.setAttribute(n,"true"),T||f.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",f,w)}})};return d(e),a.clear(),Sy++,function(){o.forEach(function(h){var f=Da.get(h)-1,m=i.get(h)-1;Da.set(h,f),i.set(h,m),f||(Bh.has(h)||h.removeAttribute(r),Bh.delete(h)),m||h.removeAttribute(n)}),Sy--,Sy||(Da=new WeakMap,Da=new WeakMap,Bh=new WeakMap,$h={})}},mH=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=hH(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),pH(r,s,n,"aria-hidden")):function(){return null}},Qm="Dialog",[EO,fK]=bd(Qm),[gH,Or]=EO(Qm),TO=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=b.useRef(null),l=b.useRef(null),[c,d]=kP({prop:r,defaultProp:s??!1,onChange:i,caller:Qm});return x.jsx(gH,{scope:e,triggerRef:a,contentRef:l,contentId:qg(),titleId:qg(),descriptionId:qg(),open:c,onOpenChange:d,onOpenToggle:b.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};TO.displayName=Qm;var IO="DialogTrigger",SO=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Or(IO,n),i=gn(e,s.triggerRef);return x.jsx(Rt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":h0(s.open),...r,ref:i,onClick:ot(t.onClick,s.onOpenToggle)})});SO.displayName=IO;var u0="DialogPortal",[yH,bO]=EO(u0,{forceMount:void 0}),AO=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Or(u0,e);return x.jsx(yH,{scope:e,forceMount:n,children:b.Children.map(r,o=>x.jsx(Ql,{present:n||i.open,children:x.jsx(I_,{asChild:!0,container:s,children:o})}))})};AO.displayName=u0;var Fp="DialogOverlay",xO=b.forwardRef((t,e)=>{const n=bO(Fp,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Or(Fp,t.__scopeDialog);return i.modal?x.jsx(Ql,{present:r||i.open,children:x.jsx(wH,{...s,ref:e})}):null});xO.displayName=Fp;var vH=qu("DialogOverlay.RemoveScroll"),wH=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Or(Fp,n);return x.jsx(wO,{as:vH,allowPinchZoom:!0,shards:[s.contentRef],children:x.jsx(Rt.div,{"data-state":h0(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),da="DialogContent",PO=b.forwardRef((t,e)=>{const n=bO(da,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Or(da,t.__scopeDialog);return x.jsx(Ql,{present:r||i.open,children:i.modal?x.jsx(_H,{...s,ref:e}):x.jsx(EH,{...s,ref:e})})});PO.displayName=da;var _H=b.forwardRef((t,e)=>{const n=Or(da,t.__scopeDialog),r=b.useRef(null),s=gn(e,n.contentRef,r);return b.useEffect(()=>{const i=r.current;if(i)return mH(i)},[]),x.jsx(RO,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ot(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ot(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:ot(t.onFocusOutside,i=>i.preventDefault())})}),EH=b.forwardRef((t,e)=>{const n=Or(da,t.__scopeDialog),r=b.useRef(!1),s=b.useRef(!1);return x.jsx(RO,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),RO=b.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=Or(da,n),l=b.useRef(null),c=gn(e,l);return RW(),x.jsxs(x.Fragment,{children:[x.jsx(uO,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:x.jsx(tm,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":h0(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),x.jsxs(x.Fragment,{children:[x.jsx(TH,{titleId:a.titleId}),x.jsx(SH,{contentRef:l,descriptionId:a.descriptionId})]})]})}),d0="DialogTitle",CO=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Or(d0,n);return x.jsx(Rt.h2,{id:s.titleId,...r,ref:e})});CO.displayName=d0;var kO="DialogDescription",DO=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Or(kO,n);return x.jsx(Rt.p,{id:s.descriptionId,...r,ref:e})});DO.displayName=kO;var NO="DialogClose",OO=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Or(NO,n);return x.jsx(Rt.button,{type:"button",...r,ref:e,onClick:ot(t.onClick,()=>s.onOpenChange(!1))})});OO.displayName=NO;function h0(t){return t?"open":"closed"}var LO="DialogTitleWarning",[pK,VO]=GV(LO,{contentName:da,titleName:d0,docsSlug:"dialog"}),TH=({titleId:t})=>{const e=VO(LO),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return b.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},IH="DialogDescriptionWarning",SH=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${VO(IH).contentName}}.`;return b.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},bH=TO,AH=SO,xH=AO,MO=xO,FO=PO,UO=CO,jO=DO,PH=OO;const RH=bH,mK=AH,CH=xH,BO=b.forwardRef(({className:t,...e},n)=>x.jsx(MO,{ref:n,className:_n("fixed inset-0 z-50 bg-black/30 dark:bg-black/20 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 radix-dialog-overlay",t),...e}));BO.displayName=MO.displayName;const $O=b.forwardRef(({className:t,children:e,hideClose:n,disableOutsideClose:r,disableEscClose:s,...i},o)=>x.jsxs(CH,{children:[x.jsx(BO,{}),x.jsxs(FO,{ref:o,className:_n("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg radix-dialog-content",t),onInteractOutside:a=>{r&&a.preventDefault()},onEscapeKeyDown:a=>{s&&a.preventDefault()},...i,children:[e,!n&&x.jsxs(PH,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[x.jsx(x_,{className:"h-4 w-4"}),x.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));$O.displayName=FO.displayName;const zO=({className:t,...e})=>x.jsx("div",{className:_n("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});zO.displayName="DialogHeader";const kH=({className:t,...e})=>x.jsx("div",{className:_n("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});kH.displayName="DialogFooter";const qO=b.forwardRef(({className:t,...e},n)=>x.jsx(UO,{ref:n,className:_n("text-lg font-semibold leading-none tracking-tight",t),...e}));qO.displayName=UO.displayName;const WO=b.forwardRef(({className:t,...e},n)=>x.jsx(jO,{ref:n,className:_n("text-sm text-muted-foreground",t),...e}));WO.displayName=jO.displayName;const DH={},yA=z.lazy(()=>xe(()=>import("./Index-CyerYH7I.js"),[],import.meta.url)),zh=z.lazy(()=>xe(()=>import("./LandingPage-vSQ8G7oB.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)),vA=z.lazy(()=>xe(()=>import("./SubscriptionsPage-CvXHRbwE.js"),__vite__mapDeps([13,1,4,14,15,6,7,5,12]),import.meta.url)),wA=z.lazy(()=>xe(()=>import("./AuthPage-BWp4rE13.js"),__vite__mapDeps([16,1,2,3,8]),import.meta.url)),qh=z.lazy(()=>xe(()=>import("./TopUpPage-4f2yYFX-.js"),__vite__mapDeps([17,1,18,19]),import.meta.url)),_A=z.lazy(()=>xe(()=>import("./AdminTopupsPage-BN6E2Ecj.js"),__vite__mapDeps([20,18,19]),import.meta.url)),EA=z.lazy(()=>xe(()=>import("./AdminNotificationsPage-CChrvdzW.js"),__vite__mapDeps([21,1,22,23,24]),import.meta.url)),Wh=z.lazy(()=>xe(()=>import("./UserRegisterPage-ByETEFA7.js"),__vite__mapDeps([25,1,22,26,27,28,29,30,31]),import.meta.url)),TA=z.lazy(()=>xe(()=>import("./UserAccountSetupPage-Cvvsooed.js"),__vite__mapDeps([32,1,22,26,31,30,12]),import.meta.url)),IA=z.lazy(()=>xe(()=>import("./ForgotPasswordCodePage-BkGgKDon.js"),[],import.meta.url)),SA=z.lazy(()=>xe(()=>import("./DashboardLoginPage-DUgGSI9P.js"),__vite__mapDeps([33,1,10]),import.meta.url)),bA=z.lazy(()=>xe(()=>import("./ProtectedDashboard-DAuzppEj.js"),__vite__mapDeps([34,1,35,18,19,36,22,10,37,38,39,27,12,40]),import.meta.url)),Sf=z.lazy(()=>xe(()=>import("./ProtectedUserDashboard-BVShzh0K.js"),__vite__mapDeps([41,42,24,36,22,10,37]),import.meta.url)),AA=z.lazy(()=>xe(()=>import("./MerchantDashboard-81qdxLu5.js"),__vite__mapDeps([43,44,18,19,45,35,46,1,47,22,48,49]),import.meta.url)),xA=z.lazy(()=>xe(()=>import("./PendingApprovalPage-Bwxd0Ysk.js"),__vite__mapDeps([50,1,4,37,10,51,12,52]),import.meta.url)),PA=z.lazy(()=>xe(()=>import("./AdminLogin-BaRP2NOk.js"),__vite__mapDeps([53,10]),import.meta.url)),RA=z.lazy(()=>xe(()=>import("./ProtectedAdminDashboard-CVot5YyJ.js"),__vite__mapDeps([54,14,3,55,44,18,19,45,22,36,10,37,56,1,23,26,35,57,4,52,30,58,59,42,15,9,51,7,60,8,12,40]),import.meta.url)),CA=z.lazy(()=>xe(()=>import("./AuthTestPage-BC6tZkO_.js"),__vite__mapDeps([61,1,22]),import.meta.url)),kA=z.lazy(()=>xe(()=>import("./ProfileSettingsPage-Btj1LN2Y.js"),__vite__mapDeps([62,1,22,56,19,63,36,10,37,49,5,58,29,59,7,52]),import.meta.url)),DA=z.lazy(()=>xe(()=>import("./TransactionsPage-Dp_5tzS-.js"),__vite__mapDeps([64,1,18,19,35,45,65,57,36,22,10,37,4,47,12,8,15,38,39,5,40]),import.meta.url)),NA=z.lazy(()=>xe(()=>import("./WalletAdditionPage-DygVodvU.js"),__vite__mapDeps([66,1,22,18,19,48,5,27,30,37]),import.meta.url)),OA=z.lazy(()=>xe(()=>import("./ReferralsPage-CghT8fpi.js"),__vite__mapDeps([67,1,35,26,29,24,12,59,51,60,28,40]),import.meta.url)),LA=z.lazy(()=>xe(()=>import("./CPanelPage-DWM5nWJj.js"),__vite__mapDeps([68,1,22]),import.meta.url)),VA=z.lazy(()=>xe(()=>import("./CPanelLoginPage-BQMx5VFn.js"),__vite__mapDeps([69,22,1,10]),import.meta.url)),MA=z.lazy(()=>xe(()=>import("./NotFound-ptiGpQWX.js"),[],import.meta.url)),FA=z.lazy(()=>xe(()=>import("./PrivacyPolicyPage-B_jd8Htg.js"),[],import.meta.url)),UA=z.lazy(()=>xe(()=>import("./SmsHookBridge-C05mAhp5.js"),[],import.meta.url)),NH=new U3,OH=()=>{if(!((ve==null?void 0:ve.isNativePlatform)&&ve.getPlatform()==="android"))return null;const e=()=>{try{window.location.reload()}catch{}};return x.jsx("div",{className:"fixed top-2 right-2 z-[2000] flex items-center gap-2",style:{pointerEvents:"auto"},children:x.jsx("button",{type:"button","aria-label":"",title:" ",onClick:e,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:x.jsx(tR,{className:"w-5 h-5"})})})},jA=()=>{const t=us(),{user:e,loading:n}=ga(),r=(ve==null?void 0:ve.isNativePlatform)&&ve.getPlatform()==="android",s=t.pathname.startsWith("/user/dashboard"),i=r&&t.pathname==="/",o=!!e&&(s||i);return n?null:o?x.jsx(Vq,{}):null},BA=()=>{const t=aO(),{profile:e,user:n}=ga(),r=us(),{toast:s}=T_(),[i,o]=z.useState(!1),[a,l]=z.useState(null),[c,d]=z.useState(!1),[h,f]=z.useState(null),[m,T]=z.useState(!1),[y,_]=z.useState(""),[w,p]=z.useState(""),[v,A]=z.useState(null);return rW(),b.useEffect(()=>{EW()},[]),b.useEffect(()=>{(async()=>{try{if(!(n!=null&&n.uid))return;const{doc:R,getDoc:L}=await xe(async()=>{const{doc:P,getDoc:C}=await Promise.resolve().then(()=>Su);return{doc:P,getDoc:C}},void 0,import.meta.url),{db:I}=await xe(async()=>{const{db:P}=await Promise.resolve().then(()=>Au);return{db:P}},void 0,import.meta.url),S=await L(R(I,"profiles",n.uid));if(S.exists()){const P=S.data(),C=String((P==null?void 0:P.lastAckAndroidVersion)||(P==null?void 0:P.lastAckUpdateId)||"").trim();C&&_(C)}}catch{}})()},[n==null?void 0:n.uid]),b.useEffect(()=>{try{const L=String((window==null?void 0:window.__nativeAppVersion)||"").trim();L&&p(L);const I=window==null?void 0:window.__nativeAppVersionCode;typeof I=="number"&&A(I)}catch{}const R=L=>{var I,S;try{const P=String((((I=L==null?void 0:L.detail)==null?void 0:I.version)??"")||"").trim(),C=(S=L==null?void 0:L.detail)==null?void 0:S.code;P&&p(P),typeof C=="number"&&A(C)}catch{}};try{window.addEventListener("native-app-version",R)}catch{}return()=>{try{window.removeEventListener("native-app-version",R)}catch{}}},[]),b.useEffect(()=>{const R=cO(),L=r.pathname.startsWith("/user/dashboard");if(t&&(e!=null&&e.shopId)&&L){const I=vW({shopId:e.shopId,createdBy:e.userId});return()=>{try{I()}catch{}try{R()}catch{}}}return()=>{try{R()}catch{}}},[t,e==null?void 0:e.shopId,r.pathname]),b.useEffect(()=>{if(!t)return;const R=document.createElement("style");R.setAttribute("data-disable-pull-to-refresh","true"),R.textContent="html, body { overscroll-behavior-y: contain; touch-action: pan-y; }",document.head.appendChild(R);let L=0,I=null;const S=C=>{var k,O;L=((O=(k=C.touches)==null?void 0:k[0])==null?void 0:O.clientY)||0,I=C.target},P=C=>{var G,U;const k=((U=(G=C.touches)==null?void 0:G[0])==null?void 0:U.clientY)||0,O=document.scrollingElement||document.documentElement,D=O.scrollTop||window.scrollY||0,B=O.scrollHeight-O.clientHeight||0,X=I||null,ee=(()=>{let F=X;for(;F&&F!==document.body;){const ae=window.getComputedStyle(F).overflowY;if((ae==="auto"||ae==="scroll")&&F.scrollHeight>F.clientHeight)return!0;F=F.parentElement}return!1})();!ee&&D<=0&&k>L&&C.cancelable&&C.preventDefault(),!ee&&D>=B&&k<L&&C.cancelable&&C.preventDefault()};return document.addEventListener("touchstart",S,{passive:!0}),document.addEventListener("touchmove",P,{passive:!1}),()=>{document.removeEventListener("touchstart",S),document.removeEventListener("touchmove",P);try{document.head.removeChild(R)}catch{}}},[t]),b.useEffect(()=>{if(!((ve==null?void 0:ve.isNativePlatform)&&ve.getPlatform()==="android"))return;let L=null,I=!1;return(async()=>{try{const{listenAndroidUpdates:S}=await xe(async()=>{const{listenAndroidUpdates:P}=await Promise.resolve().then(()=>Hq);return{listenAndroidUpdates:P}},void 0,import.meta.url);L=S(P=>{if(I)return;const C=String((P==null?void 0:P.version)||"").trim(),k=String((P==null?void 0:P.url)||"").trim(),O=String((P==null?void 0:P.notes)||"").trim(),D=!!(P!=null&&P.force),B=String(localStorage.getItem("android_last_ack_version_id")||"").trim(),X=String(y||B||"").trim();if(!!k&&!!C&&(D||C!==X)){const G="   ",U=`${O?O+`
`:""}: ${C}`;l({title:G,message:U,apkUrl:k,force:D,versionId:C}),o(!0)}})}catch{}})(),()=>{I=!0;try{L&&L()}catch{}}},[y]),b.useEffect(()=>{const R=I=>{const S=(I==null?void 0:I.detail)||{};d(!0),f({percent:S.percent??null,downloaded:S.downloaded??0,total:S.total??0})},L=()=>{d(!1),T(!0)};return window.addEventListener("androidUpdateProgress",R),window.addEventListener("androidUpdateDownloaded",L),()=>{window.removeEventListener("androidUpdateProgress",R),window.removeEventListener("androidUpdateDownloaded",L)}},[]),b.useEffect(()=>{const R=(ve==null?void 0:ve.isNativePlatform)&&ve.getPlatform()==="android",L=typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"));if(R||L)return;let I=!1;return(async()=>{try{const S="0.0.0",P=await fetch("https://cashy-link.com/desktop_version.json",{cache:"no-store"});if(!P.ok)return;const C=await P.json(),k=String((C==null?void 0:C.version)||"0.0.0"),O=!!(C!=null&&C.force);if(!I&&((B,X)=>{const ee=String(B).split(".").map(U=>parseInt(U,10)||0),G=String(X).split(".").map(U=>parseInt(U,10)||0);for(let U=0;U<Math.max(ee.length,G.length);U++){const F=ee[U]||0,H=G[U]||0;if(F>H)return 1;if(F<H)return-1}return 0})(k,S)>0){if(O){try{window.location.reload()}catch{}return}try{s({title:"  ",description:` ${k}      `})}catch{}}}catch{}})(),()=>{I=!0}},[]),x.jsx(x.Fragment,{children:i&&a&&x.jsx(RH,{open:i,onOpenChange:R=>{a!=null&&a.force||o(R)},children:x.jsxs($O,{className:"max-w-sm mx-auto bg-white border border-gray-200 shadow-2xl rounded-2xl sm:max-w-md",children:[x.jsxs(zO,{className:"text-center",children:[x.jsx(qO,{className:"text-base md:text-lg font-bold text-gray-900",children:a.title}),x.jsx(WO,{className:"text-sm text-gray-700 whitespace-pre-line",children:a.message})]}),x.jsxs("div",{className:"flex items-center justify-center gap-3 mt-3",children:[!a.force&&!c&&!m&&x.jsx(du,{variant:"outline",className:"h-8 min-w-[80px]",onClick:()=>o(!1),children:""}),!m&&x.jsx(du,{className:"h-8 min-w-[120px] bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>{try{if((ve==null?void 0:ve.isNativePlatform)&&ve.getPlatform()==="android"){const L=a.apkUrl,I=`cashy://update?url=${encodeURIComponent(L)}`;d(!0),f({percent:0,downloaded:0,total:0}),window.location.href=I}else{const L=a.apkUrl;window.open(L,"_blank")}}catch{}},children:c?" ...":" "}),m&&x.jsx(du,{className:"h-8 min-w-[120px] bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>{try{if((ve==null?void 0:ve.isNativePlatform)&&ve.getPlatform()==="android"){try{const L=String((a==null?void 0:a.versionId)||"").trim();if(L){try{localStorage.setItem("android_last_ack_version_id",L)}catch{}(async()=>{try{if(n!=null&&n.uid){const{doc:I,setDoc:S,serverTimestamp:P}=await xe(async()=>{const{doc:k,setDoc:O,serverTimestamp:D}=await Promise.resolve().then(()=>Su);return{doc:k,setDoc:O,serverTimestamp:D}},void 0,import.meta.url),{db:C}=await xe(async()=>{const{db:k}=await Promise.resolve().then(()=>Au);return{db:k}},void 0,import.meta.url);await S(I(C,"profiles",n.uid),{lastAckAndroidVersion:L,lastAckAt:P()},{merge:!0})}}catch{}})()}}catch{}window.location.href="cashy://applyUpdate"}}catch{}},children:" "})]}),c&&x.jsxs("div",{className:"mt-3 text-center",children:[x.jsx("div",{className:"w-full h-2 bg-gray-200 rounded",children:x.jsx("div",{className:"h-2 bg-emerald-600 rounded",style:{width:`${Math.max(0,Math.min(100,Math.round((h==null?void 0:h.percent)||0)))}%`}})}),x.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[Math.round((h==null?void 0:h.percent)||0),"%"]})]})]})})})},$A=()=>{const t=us(),e=t.pathname.startsWith("/user/dashboard"),n=t.pathname.startsWith("/user/login")||t.pathname.startsWith("/auth")||t.pathname.startsWith("/admin/login")||t.pathname.startsWith("/cpanel/login")||t.pathname.startsWith("/dashboard/login");return e||n?x.jsxs(x.Fragment,{children:[x.jsx(zF,{}),x.jsx(SU,{})]}):null},zA=()=>{const{user:t,loading:e}=ga(),[n,r]=z.useState(!1);return z.useEffect(()=>{const s=setTimeout(()=>r(!0),1e3);return()=>clearTimeout(s)},[]),e&&!t&&!n?x.jsx(Iw,{}):t?x.jsx(Sf,{}):x.jsx(Tw,{})},LH=()=>x.jsx(B3,{client:NH,children:x.jsx(zj,{children:x.jsxs(h3,{children:[typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"))&&!(ve!=null&&ve.isNativePlatform&&ve.getPlatform()==="android")&&x.jsx(Kq,{}),x.jsx(OH,{}),typeof window<"u"&&(window.electronAPI||window.location.protocol==="file:"||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window.location.hash=="string"&&window.location.hash.startsWith("#/")||typeof import.meta<"u"&&DH)?x.jsxs(Fj,{children:[x.jsx(BA,{}),x.jsx($A,{}),x.jsx(b.Suspense,{fallback:x.jsx(Iw,{}),children:x.jsxs(YI,{children:[x.jsx(ie,{path:"/",element:ve!=null&&ve.isNativePlatform&&ve.getPlatform()==="android"?x.jsx(zA,{}):x.jsx(zh,{})}),x.jsx(ie,{path:"/dashboard-redirect",element:x.jsx(yA,{})}),x.jsx(ie,{path:"/landing",element:x.jsx(zh,{})}),x.jsx(ie,{path:"/subscriptions",element:x.jsx(vA,{})}),x.jsx(ie,{path:"/auth",element:x.jsx(wA,{})}),x.jsx(ie,{path:"/sms-hook",element:x.jsx(UA,{})}),x.jsx(ie,{path:"/user/login",element:x.jsx(Tw,{})}),x.jsx(ie,{path:"/user/forgot-password",element:x.jsx(IA,{})}),x.jsx(ie,{path:"/user/register",element:x.jsx(Wh,{})}),x.jsx(ie,{path:"/register",element:x.jsx(Wh,{})}),x.jsx(ie,{path:"/user/account-setup",element:x.jsx(TA,{})}),x.jsx(ie,{path:"/user/pending-approval",element:x.jsx(xA,{})}),x.jsx(ie,{path:"/user/dashboard",element:x.jsx(Sf,{})}),x.jsx(ie,{path:"/branch/:shopId/dashboard",element:x.jsx(Sf,{})}),x.jsx(ie,{path:"/user/add-wallet",element:x.jsx(NA,{})}),x.jsx(ie,{path:"/admin/login",element:x.jsx(PA,{})}),x.jsx(ie,{path:"/admin/dashboard",element:x.jsx(RA,{})}),x.jsx(ie,{path:"/admin/topups",element:x.jsx(_A,{})}),x.jsx(ie,{path:"/admin/notifications",element:x.jsx(EA,{})}),x.jsx(ie,{path:"/profile-settings",element:x.jsx(kA,{})}),x.jsx(ie,{path:"/transactions",element:x.jsx(DA,{})}),x.jsx(ie,{path:"/referrals",element:x.jsx(OA,{})}),x.jsx(ie,{path:"/privacy-policy",element:x.jsx(FA,{})}),x.jsx(ie,{path:"/cpanel",element:x.jsx(LA,{})}),x.jsx(ie,{path:"/cpanel/login",element:x.jsx(VA,{})}),x.jsx(ie,{path:"/auth-test",element:x.jsx(CA,{})}),x.jsx(ie,{path:"/topup",element:x.jsx(qh,{})}),x.jsx(ie,{path:"/recharge",element:x.jsx(qh,{})}),x.jsx(ie,{path:"/merchant/*",element:x.jsx(AA,{})}),x.jsx(ie,{path:"/dashboard/login",element:x.jsx(SA,{})}),x.jsx(ie,{path:"/dashboard",element:x.jsx(bA,{})}),x.jsx(ie,{path:"*",element:x.jsx(MA,{})})]})}),x.jsx(jA,{})]}):x.jsxs(Mj,{children:[x.jsx(BA,{}),x.jsx($A,{}),x.jsx(b.Suspense,{fallback:x.jsx(Iw,{}),children:x.jsxs(YI,{children:[x.jsx(ie,{path:"/",element:ve!=null&&ve.isNativePlatform&&ve.getPlatform()==="android"?x.jsx(zA,{}):x.jsx(zh,{})}),x.jsx(ie,{path:"/dashboard-redirect",element:x.jsx(yA,{})}),x.jsx(ie,{path:"/landing",element:x.jsx(zh,{})}),x.jsx(ie,{path:"/subscriptions",element:x.jsx(vA,{})}),x.jsx(ie,{path:"/auth",element:x.jsx(wA,{})}),x.jsx(ie,{path:"/sms-hook",element:x.jsx(UA,{})}),x.jsx(ie,{path:"/user/login",element:x.jsx(Tw,{})}),x.jsx(ie,{path:"/user/forgot-password",element:x.jsx(IA,{})}),x.jsx(ie,{path:"/user/register",element:x.jsx(Wh,{})}),x.jsx(ie,{path:"/register",element:x.jsx(Wh,{})}),x.jsx(ie,{path:"/user/account-setup",element:x.jsx(TA,{})}),x.jsx(ie,{path:"/user/pending-approval",element:x.jsx(xA,{})}),x.jsx(ie,{path:"/user/dashboard",element:x.jsx(Sf,{})}),x.jsx(ie,{path:"/user/add-wallet",element:x.jsx(NA,{})}),x.jsx(ie,{path:"/admin/login",element:x.jsx(PA,{})}),x.jsx(ie,{path:"/admin/dashboard",element:x.jsx(RA,{})}),x.jsx(ie,{path:"/admin/topups",element:x.jsx(_A,{})}),x.jsx(ie,{path:"/admin/notifications",element:x.jsx(EA,{})}),x.jsx(ie,{path:"/profile-settings",element:x.jsx(kA,{})}),x.jsx(ie,{path:"/transactions",element:x.jsx(DA,{})}),x.jsx(ie,{path:"/referrals",element:x.jsx(OA,{})}),x.jsx(ie,{path:"/privacy-policy",element:x.jsx(FA,{})}),x.jsx(ie,{path:"/cpanel",element:x.jsx(LA,{})}),x.jsx(ie,{path:"/cpanel/login",element:x.jsx(VA,{})}),x.jsx(ie,{path:"/auth-test",element:x.jsx(CA,{})}),x.jsx(ie,{path:"/topup",element:x.jsx(qh,{})}),x.jsx(ie,{path:"/recharge",element:x.jsx(qh,{})}),x.jsx(ie,{path:"/merchant/*",element:x.jsx(AA,{})}),x.jsx(ie,{path:"/dashboard/login",element:x.jsx(SA,{})}),x.jsx(ie,{path:"/dashboard",element:x.jsx(bA,{})}),x.jsx(ie,{path:"*",element:x.jsx(MA,{})})]})}),x.jsx(jA,{})]})]})})}),HO=b.createContext(void 0),VH=({children:t})=>{const[e,n]=b.useState(null),[r,s]=b.useState(!1),[i,o]=b.useState(null),{profile:a,user:l}=ga();b.useEffect(()=>{try{const f=localStorage.getItem("cashier_shift_user"),m=localStorage.getItem("cashier_shift_active"),T=localStorage.getItem("cashier_shift_start_at");f&&n(JSON.parse(f)),m&&s(m==="true"),T&&o(Number(T))}catch{}},[]),b.useEffect(()=>{if(!(a!=null&&a.shopId))return;const f=ce(q,"cashierShift",a.shopId);let m=null;return(async()=>{try{(await Ge(f)).exists()||await Xn(f,{isShiftActive:!1,shiftStartAt:null,shiftUser:null}),m=js(f,y=>{if(y.exists()){const _=y.data(),w=(_==null?void 0:_.shiftUser)||null,p=!!(_!=null&&_.isShiftActive),v=(_==null?void 0:_.shiftStartAt)??null;let A=w;if(!A)try{const R=localStorage.getItem("cashier_shift_user"),L=R?JSON.parse(R):null;L&&(A=L)}catch{}n(A),s(p),o(typeof v=="number"?v:v?Number(v):null);try{A?localStorage.setItem("cashier_shift_user",JSON.stringify(A)):localStorage.removeItem("cashier_shift_user"),localStorage.setItem("cashier_shift_active",p?"true":"false"),v!=null&&localStorage.setItem("cashier_shift_start_at",String(v))}catch{}}},y=>{console.warn("cashierShift snapshot error:",y)})}catch(T){console.warn("Failed to init cashierShift doc:",T)}})(),()=>{m&&m()}},[a==null?void 0:a.shopId]);const c=f=>{n(f);try{f?localStorage.setItem("cashier_shift_user",JSON.stringify(f)):localStorage.removeItem("cashier_shift_user")}catch{}try{if(a!=null&&a.shopId){const m=ce(q,"cashierShift",a.shopId);qe(m,{shiftUser:f||null})}}catch{}},d=()=>{s(!0);try{localStorage.setItem("cashier_shift_active","true")}catch{}const f=Date.now();o(f);try{localStorage.setItem("cashier_shift_start_at",String(f))}catch{}try{if(a!=null&&a.shopId){const m=ce(q,"cashierShift",a.shopId);qe(m,{isShiftActive:!0,shiftStartAt:f})}}catch{}try{const T=`cashBalance_${(l==null?void 0:l.uid)||"default"}`,y=`userCashBalance_${(l==null?void 0:l.uid)||"default"}`,_=`walletBalances_${(l==null?void 0:l.uid)||"default"}`;let w=localStorage.getItem(T);if(w==null){const v=localStorage.getItem(y);if(v!=null){w=v;try{localStorage.setItem(T,v),localStorage.removeItem(y)}catch{}}}if(w==null&&(l!=null&&l.uid)){const v=localStorage.getItem("cashBalance"),A=localStorage.getItem("userCashBalance");if(v!=null){try{localStorage.setItem(T,v),localStorage.removeItem("cashBalance")}catch{}w=v}else if(A!=null){try{localStorage.setItem(T,A),localStorage.removeItem("userCashBalance")}catch{}w=A}}const p=localStorage.getItem(_);w?localStorage.setItem("shiftStartDrawerFunds",w):localStorage.setItem("shiftStartDrawerFunds","0"),p?localStorage.setItem("shiftStartWalletBalances",p):localStorage.setItem("shiftStartWalletBalances","{}")}catch{}try{a!=null&&a.shopId&&(async()=>{try{const m=ce(q,"dashboardData",a.shopId),T=await Ge(m);if(T.exists()){const y=T.data(),_=Number((y==null?void 0:y.cashBalance)??0),w=(y==null?void 0:y.walletBalances)??{};try{const p=localStorage.getItem("shiftStartDrawerFunds"),v=localStorage.getItem("shiftStartWalletBalances"),A=p?parseFloat(p):0,R=v?JSON.parse(v):{},L=!p||!Number.isFinite(A)||A===0,I=!v||Object.keys(R||{}).length===0;L&&localStorage.setItem("shiftStartDrawerFunds",String(Number.isFinite(_)?_:0)),I&&localStorage.setItem("shiftStartWalletBalances",JSON.stringify(w||{}))}catch{}}}catch(m){console.warn("Shift start Firebase read failed:",m)}})()}catch{}},h=()=>{s(!1);try{localStorage.setItem("cashier_shift_active","false")}catch{}try{if(a!=null&&a.shopId){const f=ce(q,"cashierShift",a.shopId);qe(f,{isShiftActive:!1})}}catch{}};return x.jsx(HO.Provider,{value:{shiftUser:e,isShiftActive:r,shiftStartAt:i,setShiftUser:c,startShift:d,endShift:h},children:t})},gK=()=>{const t=b.useContext(HO);if(!t)throw new Error("useShift must be used within ShiftProvider");return t},KO=b.createContext(void 0);function MH({children:t}){const{profile:e,user:n,loading:r}=ga(),[s,i]=b.useState(null),[o,a]=b.useState(null),[l,c]=b.useState(!0);b.useEffect(()=>{if(!r&&e){const h=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";let f=null;try{f=localStorage.getItem(h)||null}catch{}i(f||e.shopId),a((e==null?void 0:e.shopName)||(n==null?void 0:n.displayName)||""),c(!1)}else r||c(!1)},[e,r]),b.useEffect(()=>{const h=()=>{const m=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";try{const T=localStorage.getItem(m);i(T||((e==null?void 0:e.shopId)??null))}catch{}};window.addEventListener("selectedShopIdChanged",h);const f=m=>{const T=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";if(!(!m.key||m.key!==T))try{const y=localStorage.getItem(T);i(y||((e==null?void 0:e.shopId)??null))}catch{}};return window.addEventListener("storage",f),()=>{window.removeEventListener("selectedShopIdChanged",h),window.removeEventListener("storage",f)}},[e==null?void 0:e.userId,n==null?void 0:n.uid,e==null?void 0:e.shopId]);const d={shopId:s,shopName:o,loading:l};return x.jsx(KO.Provider,{value:d,children:t})}function yK(){const t=b.useContext(KO);return t===void 0?{shopId:null,shopName:null,loading:!1}:t}var GO={};(function(t){Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function e(w,p){const v=w.indexOf(p);v!==-1&&w.splice(v,1)}const n=()=>{};var r=(w=>(w[w.None=0]="None",w[w.Fatal=1]="Fatal",w[w.Error=2]="Error",w[w.Warn=3]="Warn",w[w.Info=4]="Info",w[w.Debug=5]="Debug",w[w.Verbose=6]="Verbose",w))(r||{});class s{setLogLevel(p){window.cordova.exec(n,n,"OneSignalPush","setLogLevel",[p])}setAlertLevel(p){window.cordova.exec(n,n,"OneSignalPush","setAlertLevel",[p])}}class i{constructor(){this._inAppMessageClickListeners=[],this._willDisplayInAppMessageListeners=[],this._didDisplayInAppMessageListeners=[],this._willDismissInAppMessageListeners=[],this._didDismissInAppMessageListeners=[]}_processFunctionList(p,v){for(let A=0;A<p.length;A++)p[A](v)}addEventListener(p,v){if(p==="click"){this._inAppMessageClickListeners.push(v);const A=R=>{this._processFunctionList(this._inAppMessageClickListeners,R)};window.cordova.exec(A,n,"OneSignalPush","setInAppMessageClickHandler",[])}else if(p==="willDisplay"){this._willDisplayInAppMessageListeners.push(v);const A=R=>{this._processFunctionList(this._willDisplayInAppMessageListeners,R)};window.cordova.exec(A,n,"OneSignalPush","setOnWillDisplayInAppMessageHandler",[])}else if(p==="didDisplay"){this._didDisplayInAppMessageListeners.push(v);const A=R=>{this._processFunctionList(this._didDisplayInAppMessageListeners,R)};window.cordova.exec(A,n,"OneSignalPush","setOnDidDisplayInAppMessageHandler",[])}else if(p==="willDismiss"){this._willDismissInAppMessageListeners.push(v);const A=R=>{this._processFunctionList(this._willDismissInAppMessageListeners,R)};window.cordova.exec(A,n,"OneSignalPush","setOnWillDismissInAppMessageHandler",[])}else if(p==="didDismiss"){this._didDismissInAppMessageListeners.push(v);const A=R=>{this._processFunctionList(this._didDismissInAppMessageListeners,R)};window.cordova.exec(A,n,"OneSignalPush","setOnDidDismissInAppMessageHandler",[])}}removeEventListener(p,v){p==="click"?e(this._inAppMessageClickListeners,v):p==="willDisplay"?e(this._willDisplayInAppMessageListeners,v):p==="didDisplay"?e(this._didDisplayInAppMessageListeners,v):p==="willDismiss"?e(this._willDismissInAppMessageListeners,v):p==="didDismiss"&&e(this._didDismissInAppMessageListeners,v)}addTrigger(p,v){const A={[p]:v};this.addTriggers(A)}addTriggers(p){Object.keys(p).forEach(function(v){typeof p[v]!="string"&&(p[v]=JSON.stringify(p[v]))}),window.cordova.exec(n,n,"OneSignalPush","addTriggers",[p])}removeTrigger(p){this.removeTriggers([p])}removeTriggers(p){Array.isArray(p)||console.error("OneSignal: removeTriggers: argument must be of type Array"),window.cordova.exec(n,n,"OneSignalPush","removeTriggers",[p])}clearTriggers(){window.cordova.exec(n,n,"OneSignalPush","clearTriggers")}setPaused(p){window.cordova.exec(n,n,"OneSignalPush","setPaused",[p])}getPaused(){return new Promise((p,v)=>{window.cordova.exec(p,v,"OneSignalPush","isPaused",[])})}}class o{enter(p,v,A,R){A==null&&(A=n),R==null&&(R=n),window.cordova.exec(A,R,"OneSignalPush","enterLiveActivity",[p,v])}exit(p,v,A){v==null&&(v=n),A==null&&(A=n),window.cordova.exec(v,A,"OneSignalPush","exitLiveActivity",[p])}setPushToStartToken(p,v){window.cordova.exec(n,n,"OneSignalPush","setPushToStartToken",[p,v])}removePushToStartToken(p){window.cordova.exec(n,n,"OneSignalPush","removePushToStartToken",[p])}setupDefault(p){window.cordova.exec(n,n,"OneSignalPush","setupDefaultLiveActivity",[p])}startDefault(p,v,A){window.cordova.exec(n,n,"OneSignalPush","startDefaultLiveActivity",[p,v,A])}}class a{requestPermission(){window.cordova.exec(n,n,"OneSignalPush","requestLocationPermission",[])}setShared(p){window.cordova.exec(n,n,"OneSignalPush","setLocationShared",[p])}isShared(){return new Promise((p,v)=>{window.cordova.exec(p,v,"OneSignalPush","isLocationShared",[])})}}class l{constructor(p){this.notificationId=p.notificationId,this.body=p.body,this.title=p.title,this.additionalData=p.additionalData,typeof p.rawPayload=="string"?this.rawPayload=JSON.parse(p.rawPayload):this.rawPayload=p.rawPayload,this.launchURL=p.launchURL,this.sound=p.sound,p.actionButtons&&(this.actionButtons=p.actionButtons),p.groupKey&&(this.groupKey=p.groupKey),p.ledColor&&(this.ledColor=p.ledColor),typeof p.priority<"u"&&(this.priority=p.priority),p.smallIcon&&(this.smallIcon=p.smallIcon),p.largeIcon&&(this.largeIcon=p.largeIcon),p.bigPicture&&(this.bigPicture=p.bigPicture),p.collapseId&&(this.collapseId=p.collapseId),p.groupMessage&&(this.groupMessage=p.groupMessage),p.fromProjectNumber&&(this.fromProjectNumber=p.fromProjectNumber),p.smallIconAccentColor&&(this.smallIconAccentColor=p.smallIconAccentColor),p.lockScreenVisibility&&(this.lockScreenVisibility=p.lockScreenVisibility),p.androidNotificationId&&(this.androidNotificationId=p.androidNotificationId),p.groupedNotifications&&p.groupedNotifications.length&&(this.groupedNotifications=p.groupedNotifications),p.badge&&(this.badge=p.badge),p.category&&(this.category=p.category),p.threadId&&(this.threadId=p.threadId),p.subtitle&&(this.subtitle=p.subtitle),p.templateId&&(this.templateId=p.templateId),p.attachments&&(this.attachments=p.attachments),p.templateName&&(this.templateName=p.templateName),p.mutableContent&&(this.mutableContent=p.mutableContent),p.badgeIncrement&&(this.badgeIncrement=p.badgeIncrement),p.contentAvailable&&(this.contentAvailable=p.contentAvailable),p.relevanceScore&&(this.relevanceScore=p.relevanceScore),p.interruptionLevel&&(this.interruptionLevel=p.interruptionLevel)}display(){window.cordova.exec(n,n,"OneSignalPush","displayNotification",[this.notificationId])}}class c{constructor(p){this.notification=new l(p)}preventDefault(p=!1){window.cordova.exec(n,n,"OneSignalPush","preventDefault",[this.notification.notificationId,p])}getNotification(){return this.notification}}var d=(w=>(w[w.NotDetermined=0]="NotDetermined",w[w.Denied=1]="Denied",w[w.Authorized=2]="Authorized",w[w.Provisional=3]="Provisional",w[w.Ephemeral=4]="Ephemeral",w))(d||{});class h{constructor(){this._permissionObserverList=[],this._notificationClickedListeners=[],this._notificationWillDisplayListeners=[]}_processFunctionList(p,v){for(let A=0;A<p.length;A++)p[A](v)}_setPropertyAndObserver(){const p=v=>{this._permission=v};window.cordova.exec(p,n,"OneSignalPush","getPermissionInternal"),this.addEventListener("permissionChange",v=>{this._permission=v})}hasPermission(){return this._permission||!1}getPermissionAsync(){return new Promise((p,v)=>{window.cordova.exec(p,v,"OneSignalPush","getPermissionInternal")})}permissionNative(){return new Promise((p,v)=>{window.cordova.exec(p,v,"OneSignalPush","permissionNative",[])})}requestPermission(p){let v=p??!1;return new Promise((A,R)=>{window.cordova.exec(A,R,"OneSignalPush","requestPermission",[v])})}canRequestPermission(){return new Promise((p,v)=>{window.cordova.exec(p,v,"OneSignalPush","canRequestPermission",[])})}registerForProvisionalAuthorization(p=n){window.cordova.exec(p,n,"OneSignalPush","registerForProvisionalAuthorization",[])}addEventListener(p,v){if(p==="click"){this._notificationClickedListeners.push(v);const A=R=>{this._processFunctionList(this._notificationClickedListeners,R)};window.cordova.exec(A,n,"OneSignalPush","addNotificationClickListener",[])}else if(p==="foregroundWillDisplay"){this._notificationWillDisplayListeners.push(v);const A=R=>{this._notificationWillDisplayListeners.forEach(L=>{L(new c(R))}),window.cordova.exec(n,n,"OneSignalPush","proceedWithWillDisplay",[R.notificationId])};window.cordova.exec(A,n,"OneSignalPush","addForegroundLifecycleListener",[])}else if(p==="permissionChange"){this._permissionObserverList.push(v);const A=R=>{this._processFunctionList(this._permissionObserverList,R)};window.cordova.exec(A,n,"OneSignalPush","addPermissionObserver",[])}}removeEventListener(p,v){p==="click"?e(this._notificationClickedListeners,v):p==="foregroundWillDisplay"?e(this._notificationWillDisplayListeners,v):p==="permissionChange"&&e(this._permissionObserverList,v)}clearAll(){window.cordova.exec(n,n,"OneSignalPush","clearAllNotifications",[])}removeNotification(p){window.cordova.exec(n,n,"OneSignalPush","removeNotification",[p])}removeGroupedNotifications(p){window.cordova.exec(n,n,"OneSignalPush","removeGroupedNotifications",[p])}}class f{addOutcome(p){window.cordova.exec(n,n,"OneSignalPush","addOutcome",[p])}addUniqueOutcome(p){window.cordova.exec(n,n,"OneSignalPush","addUniqueOutcome",[p])}addOutcomeWithValue(p,v){window.cordova.exec(n,n,"OneSignalPush","addOutcomeWithValue",[p,v])}}class m{constructor(){this._subscriptionObserverList=[]}_processFunctionList(p,v){for(let A=0;A<p.length;A++)p[A](v)}_setPropertiesAndObserver(){const p=R=>{this._id=R};window.cordova.exec(p,n,"OneSignalPush","getPushSubscriptionId");const v=R=>{this._token=R};window.cordova.exec(v,n,"OneSignalPush","getPushSubscriptionToken");const A=R=>{this._optedIn=R};window.cordova.exec(A,n,"OneSignalPush","getPushSubscriptionOptedIn"),this.addEventListener("change",R=>{this._id=R.current.id,this._token=R.current.token,this._optedIn=R.current.optedIn})}get id(){return console.warn("OneSignal: This method has been deprecated. Use getIdAsync instead for getting push subscription id."),this._id}get token(){return console.warn("OneSignal: This method has been deprecated. Use getTokenAsync instead for getting push subscription token."),this._token}get optedIn(){return console.warn("OneSignal: This method has been deprecated. Use getOptedInAsync instead for getting push subscription opted in status."),this._optedIn||!1}getIdAsync(){return new Promise((p,v)=>{window.cordova.exec(p,v,"OneSignalPush","getPushSubscriptionId")})}getTokenAsync(){return new Promise((p,v)=>{window.cordova.exec(p,v,"OneSignalPush","getPushSubscriptionToken")})}getOptedInAsync(){return new Promise((p,v)=>{window.cordova.exec(p,v,"OneSignalPush","getPushSubscriptionOptedIn")})}addEventListener(p,v){this._subscriptionObserverList.push(v);const A=R=>{this._processFunctionList(this._subscriptionObserverList,R)};window.cordova.exec(A,n,"OneSignalPush","addPushSubscriptionObserver",[])}removeEventListener(p,v){e(this._subscriptionObserverList,v)}optIn(){window.cordova.exec(n,n,"OneSignalPush","optInPushSubscription")}optOut(){window.cordova.exec(n,n,"OneSignalPush","optOutPushSubscription")}}class T{constructor(){this.pushSubscription=new m,this._userStateObserverList=[]}_processFunctionList(p,v){for(let A=0;A<p.length;A++)p[A](v)}setLanguage(p){window.cordova.exec(n,n,"OneSignalPush","setLanguage",[p])}addAlias(p,v){const A={[p]:v};window.cordova.exec(n,n,"OneSignalPush","addAliases",[A])}addAliases(p){window.cordova.exec(n,n,"OneSignalPush","addAliases",[p])}removeAlias(p){window.cordova.exec(n,n,"OneSignalPush","removeAliases",[p])}removeAliases(p){window.cordova.exec(n,n,"OneSignalPush","removeAliases",p)}addEmail(p){window.cordova.exec(n,n,"OneSignalPush","addEmail",[p])}removeEmail(p){window.cordova.exec(n,n,"OneSignalPush","removeEmail",[p])}addSms(p){window.cordova.exec(n,n,"OneSignalPush","addSms",[p])}removeSms(p){window.cordova.exec(n,n,"OneSignalPush","removeSms",[p])}addTag(p,v){const A={[p]:v};window.cordova.exec(n,n,"OneSignalPush","addTags",[A])}addTags(p){const v=p;Object.keys(p).forEach(function(A){typeof v[A]!="string"&&(v[A]=JSON.stringify(v[A]))}),window.cordova.exec(n,n,"OneSignalPush","addTags",[v])}removeTag(p){window.cordova.exec(n,n,"OneSignalPush","removeTags",[p])}removeTags(p){window.cordova.exec(n,n,"OneSignalPush","removeTags",p)}getTags(){return new Promise((p,v)=>{window.cordova.exec(p,v,"OneSignalPush","getTags",[])})}addEventListener(p,v){this._userStateObserverList.push(v);const A=R=>{this._processFunctionList(this._userStateObserverList,R)};window.cordova.exec(A,n,"OneSignalPush","addUserStateObserver",[])}removeEventListener(p,v){e(this._userStateObserverList,v)}getOnesignalId(){return new Promise((p,v)=>{window.cordova.exec(p,v,"OneSignalPush","getOnesignalId",[])})}getExternalId(){return new Promise((p,v)=>{window.cordova.exec(p,v,"OneSignalPush","getExternalId",[])})}}class y{constructor(){this.User=new T,this.Debug=new s,this.Session=new f,this.Location=new a,this.InAppMessages=new i,this.Notifications=new h,this.LiveActivities=new o,this._appID=""}initialize(p){this._appID=p;const v=()=>{this.User.pushSubscription._setPropertiesAndObserver(),this.Notifications._setPropertyAndObserver()};window.cordova.exec(v,n,"OneSignalPush","init",[this._appID])}login(p){window.cordova.exec(n,n,"OneSignalPush","login",[p])}logout(){window.cordova.exec(n,n,"OneSignalPush","logout")}setConsentRequired(p){window.cordova.exec(n,n,"OneSignalPush","setPrivacyConsentRequired",[p])}setConsentGiven(p){window.cordova.exec(n,n,"OneSignalPush","setPrivacyConsentGiven",[p])}}const _=new y;window.plugins||(window.plugins={}),window.plugins.OneSignal||(window.plugins.OneSignal=_),t.LogLevel=r,t.NotificationWillDisplayEvent=c,t.OSNotification=l,t.OSNotificationPermission=d,t.OneSignalPlugin=y,t.default=_})(GO);const by=Aw(GO);try{const t=navigator.userAgent||navigator.vendor||"",e=/iPad|iPhone|iPod/.test(t),n=document.documentElement;n&&(n.classList.toggle("ios",e),n.classList.toggle("android",!e))}catch{}try{cO()}catch{}const FH=()=>{const{theme:t="system"}=hR();return b.useEffect(()=>{try{const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,n=t==="system"?e?"dark":"light":t;document.documentElement.setAttribute("data-theme",n||"light"),document.documentElement.classList.toggle("dark",n==="dark")}catch{}},[t]),null};SP(document.getElementById("root")).render(x.jsx(HF,{attribute:"class",defaultTheme:"system",enableSystem:!0,storageKey:"theme",children:x.jsx(Lq,{children:x.jsx(VH,{children:x.jsxs(MH,{children:[x.jsx(LH,{}),x.jsx(FH,{})]})})})}));document.addEventListener("deviceready",()=>{try{by.setAppId("66a2d005-55fa-4f5a-874a-67be5974f2df"),by.promptForPushNotificationsWithUserResponse(()=>{}),by.setNotificationOpenedHandler(()=>{})}catch{}});export{qO as $,WM as A,du as B,GM as C,wt as D,YM as E,a0 as F,sK as G,Ef as H,Lv as I,b5 as J,Xn as K,Bj as L,tF as M,KH as N,rt as O,Ge as P,qe as Q,z as R,_s as S,hK as T,oF as U,Ew as V,_n as W,ZP as X,RH as Y,$O as Z,zO as _,Pd as a,BH as a$,kH as a0,us as a1,je as a2,bd as a3,nM as a4,qg as a5,Rt as a6,ot as a7,gn as a8,kP as a9,nK as aA,gq as aB,Tq as aC,WO as aD,nc as aE,XH as aF,U4 as aG,QH as aH,hR as aI,lO as aJ,nF as aK,oK as aL,aK as aM,lK as aN,Dq as aO,uK as aP,sW as aQ,Ql as aR,KV as aS,yK as aT,F7 as aU,Pq as aV,KM as aW,JM as aX,aF as aY,Nt as aZ,AR as a_,is as aa,oO as ab,jq as ac,sF as ad,xe as ae,_f as af,gK as ag,aO as ah,ve as ai,mI as aj,HM as ak,bN as al,c0 as am,Iw as an,vI as ao,YI as ap,ie as aq,pe as ar,Lp as as,yI as at,QM as au,iK as av,Km as aw,x_ as ax,U7 as ay,yq as az,GH as b,H4 as b0,I_ as b1,mH as b2,xP as b3,RW as b4,wO as b5,qu as b6,uO as b7,tm as b8,K4 as b9,MO as bA,AH as bB,qj as bC,HH as bD,Rq as bE,iW as bF,dK as bG,YN as bH,Cq as bI,qM as bJ,Su as bK,Au as bL,rK as bM,cK as bN,Hq as bO,G4 as ba,bP as bb,Os as bc,_M as bd,Sd as be,JH as bf,sO as bg,iO as bh,iF as bi,Wq as bj,qq as bk,Nq as bl,zq as bm,eO as bn,cW as bo,$g as bp,mK as bq,fK as br,bH as bs,xH as bt,pK as bu,FO as bv,JV as bw,UO as bx,jO as by,PH as bz,T_ as c,Uq as d,Mq as e,Vn as f,Fq as g,oe as h,q as i,x as j,we as k,Bi as l,e0 as m,Hm as n,ss as o,lr as p,me as q,b as r,ge as s,gI as t,ga as u,eF as v,XM as w,S5 as x,ce as y,js as z};
