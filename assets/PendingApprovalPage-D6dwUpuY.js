const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-DvnSb1Lh.js","./index-DFE28tXP.css"])))=>i.map(i=>d[i]);
import{u as G,a as J,r as o,x as K,j as t,S as Q,B as f,y as g,_ as T}from"./index-DvnSb1Lh.js";import{FreeTrialService as A}from"./freeTrialService-ag8hxyeR.js";import{R as X}from"./refresh-cw-ByDjU7ZC.js";function te(){const{user:a,signOut:_,userSubscription:x,isSubscriptionActive:S,checkSubscriptionStatus:P}=G(),h=J(),[D,k]=o.useState(!1),[p,j]=o.useState(!1),[$,I]=o.useState(!1),[O,E]=o.useState(!1),[c,R]=o.useState(4),C=[{title:"Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ø´Ù‡Ø±ÙŠØ©",price:150,features:["Ø¯Ø¹Ù… Ù…Ø¬Ø§Ù†ÙŠ ÙƒØ§Ù…Ù„","ØªØ­Ø¯ÙŠØ«Ø§Øª Ù…Ø³ØªÙ…Ø±Ø©","Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ù…Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚","20 Ù…Ø­ÙØ¸Ø©"],bg:"from-blue-50 to-indigo-50"},{title:"Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ø±Ø¨Ø¹ Ø³Ù†ÙˆÙŠØ©",price:350,features:["Ø¯Ø¹Ù… Ù…Ù…ÙŠØ²","Ø­ØªÙ‰ 30 Ù…Ø­ÙØ¸Ø©","Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ù…Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚","Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„ØªØ­ÙˆÙŠÙ„ Ø¹Ù„Ù‰ ØªÙ„Ø¬Ø±Ø§Ù…"],bg:"from-emerald-50 to-green-50"},{title:"Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ø³Ù†ÙˆÙŠØ©",price:1e3,features:["Ø¯Ø¹Ù… Ù…Ù…ØªØ§Ø²","Ø¹Ø¯Ø¯ Ù…Ø­Ø§ÙØ¸ Ù…ÙØªÙˆØ­","Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ù…Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚","Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„ØªØ­ÙˆÙŠÙ„ Ø¹Ù„Ù‰ ØªÙ„Ø¬Ø±Ø§Ù…"],bg:"from-purple-50 to-pink-50"},{title:"Ø¨Ø§Ù‚Ø© Ù…Ø¯Ù‰ Ø§Ù„Ø­ÙŠØ§Ø©",price:3e3,features:["Ø¯Ø¹Ù… Ù…Ù…ØªØ§Ø²","Ø¹Ø¯Ø¯ Ù…Ø­Ø§ÙØ¸ Ù…ÙØªÙˆØ­","Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ù…Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚","Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„ØªØ­ÙˆÙŠÙ„ Ø¹Ù„Ù‰ ØªÙ„Ø¬Ø±Ø§Ù…"],bg:"from-orange-50 to-amber-50"}];o.useEffect(()=>{var v;if(!(a!=null&&a.uid)||!x)return;console.log("ðŸ” PendingApprovalPage: Checking subscription via Context:",a.uid);const e=x;if(e.isActive===!1){console.log("â›” PendingApprovalPage: User account is deactivated (isActive=false), staying on page."),sessionStorage.removeItem("dashboard_kick_signature");return}const l=(n=>{var w,N;if(!n)return"null";const s=n.subscription,L=s!=null&&s.activatedAt?s.activatedAt.toDate?s.activatedAt.toDate().toISOString():new Date(s.activatedAt).toISOString():"null",V=(s==null?void 0:s.planType)||"null",B=n.isActive!==!1,M=(s==null?void 0:s.isActive)===!0,W=((w=n.branchPackage)==null?void 0:w.status)==="active",q=(N=n.branchPackage)!=null&&N.activatedAt?n.branchPackage.activatedAt.toDate?n.branchPackage.activatedAt.toDate().toISOString():new Date(n.branchPackage.activatedAt).toISOString():"null";return`${B}|${M}|${V}|${L}|${W}|${q}`})(e),u=sessionStorage.getItem("dashboard_kick_signature"),y=e.isActive!==!1,b=((v=e.branchPackage)==null?void 0:v.status)==="active",i=e.subscription,d=i&&i.isActive===!0&&K(i),m=e.isOnFreeTrial===!0;y&&(b||d||S||m)&&(u&&l===u||(sessionStorage.removeItem("dashboard_kick_signature"),h("/user/dashboard",{replace:!0})))},[a==null?void 0:a.uid,x,S,h]),o.useEffect(()=>{(async()=>{if(a!=null&&a.uid)try{const r=await A.getTrialData(a.uid);I(r.hasUsedFreeTrial),E(r.isOnFreeTrial)}catch(r){console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©:",r)}})()},[a==null?void 0:a.uid]),o.useEffect(()=>{(async()=>{try{const e=await A.getTrialDurationHours();R(e)}catch(e){console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ù…Ø¯Ø© Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©:",e)}})()},[]);const F=async()=>{await _(),h("/auth")},U=async()=>{if(a!=null&&a.uid){k(!0);try{const e=await A.startFreeTrial(a.uid);e.success?(g.success(e.message||`ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ© Ù„Ù…Ø¯Ø© ${c} ${c>=3&&c<=10?"Ø³Ø§Ø¹Ø§Øª":c===2?"Ø³Ø§Ø¹ØªÙŠÙ†":"Ø³Ø§Ø¹Ø©"}! Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙˆØ¬ÙŠÙ‡...`),setTimeout(()=>{try{h("/user/dashboard",{replace:!0})}catch{}},1200)):g.error(e.message)}catch(e){console.error("Error activating trial:",e),g.error("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©")}finally{k(!1)}}},H=async()=>{var e,r;j(!0),console.log("ðŸ”„ PendingApprovalPage: Manual refresh triggered");try{if(sessionStorage.removeItem("dashboard_kick_signature"),await P(),a!=null&&a.uid){const{getDoc:l,doc:u}=await T(async()=>{const{getDoc:i,doc:d}=await import("./index-DvnSb1Lh.js").then(m=>m.c3);return{getDoc:i,doc:d}},__vite__mapDeps([0,1]),import.meta.url),{db:y}=await T(async()=>{const{db:i}=await import("./index-DvnSb1Lh.js").then(d=>d.c4);return{db:i}},__vite__mapDeps([0,1]),import.meta.url),b=await l(u(y,"users",a.uid));if(b.exists()){const i=b.data(),d=i.isActive!==!1,m=((e=i.subscription)==null?void 0:e.isActive)===!0,v=((r=i.branchPackage)==null?void 0:r.status)==="active";if(d&&(m||v)){g.success("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŒ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙˆØ¬ÙŠÙ‡..."),setTimeout(()=>{h("/user/dashboard",{replace:!0})},500);return}}}g.success("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª")}catch(l){console.error("âŒ Error during manual refresh:",l),g.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠØ«")}finally{j(!1)}},z=(e,r,l)=>{try{const u=encodeURIComponent(`Ø£Ø±ØºØ¨ ÙÙŠ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ ${e} Ø¨Ø³Ø¹Ø± ${r} Ø¬
Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª:
- ${l.join(`
- `)}`);window.open(`https://wa.me/201000392539?text=${u}`,"_blank")}catch{}};return t.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:t.jsxs("div",{className:"w-full max-w-5xl bg-white rounded-2xl shadow-lg border border-gray-200 dark:border-gray-800 p-4 sm:p-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"flex justify-center mb-2",children:t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-0 rounded-full",style:{background:"linear-gradient(135deg, #f59e0b, #d97706)",filter:"blur(8px)",opacity:.3}}),t.jsx("div",{className:"relative bg-gradient-to-br from-orange-400 to-orange-600 p-2 rounded-full",children:t.jsx(Q,{className:"h-10 w-10 text-white"})})]})}),t.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Ù…Ø·Ù„ÙˆØ¨ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨"}),t.jsx("p",{className:"text-gray-700 text-sm mt-1",children:"Ø§Ø®ØªØ± Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© ÙˆØ§Ø¶ØºØ· Ø²Ø± ÙˆØ§ØªØ³Ø§Ø¨ Ù„Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„ÙÙˆØ±ÙŠ."}),t.jsx("div",{className:"mt-4 flex justify-center",children:t.jsxs(f,{variant:"outline",size:"sm",onClick:H,disabled:p,className:"flex items-center gap-2 text-blue-600 border-blue-200 hover:bg-blue-50",children:[t.jsx(X,{className:`w-4 h-4 ${p?"animate-spin":""}`}),p?"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ«...":"ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"]})})]}),t.jsx("div",{className:"pt-4",children:t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-2 items-stretch",children:C.map(e=>t.jsxs("div",{className:`h-full rounded-lg p-2 border shadow-sm bg-gradient-to-br ${e.bg} dark:from-gray-800 dark:to-gray-700 dark:border-gray-700`,children:[t.jsx("div",{className:"font-bold text-sm text-gray-800 dark:text-gray-100 mb-1",children:e.title}),t.jsxs("div",{className:"text-lg font-extrabold text-gray-900 dark:text-gray-100 mb-2",children:[e.price," Ø¬"]}),t.jsx("ul",{className:"text-[11px] text-gray-700 dark:text-gray-200 text-right space-y-1 mb-2",children:e.features.map(r=>t.jsxs("li",{children:["â€¢ ",r]},r))}),t.jsx(f,{size:"sm",className:"w-full bg-green-600 hover:bg-green-700 text-xs py-1 h-8",onClick:()=>z(e.title,e.price,e.features),children:"ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨"})]},e.title))})}),t.jsxs("div",{className:"pt-3",children:[t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mb-2",children:!$&&!O&&t.jsx(f,{size:"sm",className:"w-full bg-blue-600 hover:bg-blue-700",onClick:U,disabled:D,children:`Ø¬Ø±Ø¨ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ ${c} ${c>=3&&c<=10?"Ø³Ø§Ø¹Ø§Øª":c===2?"Ø³Ø§Ø¹ØªÙŠÙ†":"Ø³Ø§Ø¹Ø©"}`})}),t.jsx(f,{variant:"outline",className:"border-2 border-gray-300 hover:border-gray-400 text-gray-700 hover:text-gray-800 px-5 py-2 rounded-lg font-semibold text-xs transition-all duration-300",onClick:F,children:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬"})]})]})})}export{te as default};
//# sourceMappingURL=PendingApprovalPage-D6dwUpuY.js.map
