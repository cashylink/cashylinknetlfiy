{"version":3,"mappings":"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","names":["__iconNode","Ban","createLucideIcon","Code","Moon","Sun","Type","AvatarSelector","selectedAvatarId","onAvatarSelect","className","isOpen","setIsOpen","useState","selectedAvatar","avatarCollection","avatar","jsxs","jsx","PinModal","open","onClose","onSubmit","deviceId","recipientMsisdn","recipientName","helperMessage","pin","setPin","handleSubmit","Dialog","val","DialogContent","DialogHeader","Lock","DialogTitle","Smartphone","User","Label","Input","e","Shield","Button","Send","MasterPinManagement","userId","user","profile","useFirebaseAuth","effectiveUserId","masterPinDialogOpen","setMasterPinDialogOpen","masterPinMode","setMasterPinMode","isPasswordConfirmOpen","setIsPasswordConfirmOpen","toast","useToast","hasMasterPin","setHasMasterPin","useEffect","mounted","has","MasterPinService","getChangeCountKey","getChangeCount","raw","incrementChangeCount","count","handleCreateOrChangeMasterPin","latestHas","handleMasterPinSuccess","Fragment","Edit","Plus","MasterPinDialog","KEY_BASE","getKey","walletSelectionPinService","enabled","PLANS","SubscriptionPlan","ResellerManagement","accounts","setAccounts","loading","setLoading","isResellerEnabled","setIsResellerEnabled","isDialogOpen","setIsDialogOpen","isPricingDialogOpen","setIsPricingDialogOpen","isSubmitting","setIsSubmitting","formData","setFormData","isDeleteRequestOpen","setIsDeleteRequestOpen","deleteReason","setDeleteReason","selectedAccountForDelete","setSelectedAccountForDelete","isDeleteSubmitting","setIsDeleteSubmitting","isCancelRequestOpen","setIsCancelRequestOpen","cancelReason","setCancelReason","selectedAccountForCancel","setSelectedAccountForCancel","isCancelSubmitting","setIsCancelSubmitting","isAccountsLocked","setIsAccountsLocked","isPasswordDialogOpen","setIsPasswordDialogOpen","userDocRef","doc","db","unsubscribeUser","onSnapshot","docSnap","data","q","query","collection","where","unsubscribeAccounts","snapshot","docs","a","b","timeA","_a","_b","error","generateReferralCode","timestamp","secondaryApp","initializeApp","firebaseConfig","secondaryAuth","getAuth","secondaryDb","getFirestore","newUser","createUserWithEmailAndPassword","userReferralCode","setDoc","serverTimestamp","shopRef","addDoc","signOut","errorMessage","deleteApp","handleCancelClick","account","handleSubmitCancelRequest","updateDoc","handleDeleteClick","handleDelete","handleSubmitDeleteRequest","id","uid","deleteDoc","userError","getStatusBadge","status","packageName","CheckCircle","Clock","XCircle","Card","CardHeader","CardTitle","Users","DollarSign","DialogTrigger","prev","Select","value","SelectTrigger","SelectValue","SelectContent","plan","SelectItem","Loader2","CardContent","Trash2","PasswordConfirmDialog","AlertTriangle","Textarea","QUICK_ACTION_OPTIONS","ProfileSettingsPage","onBack","eyeComfortMode","setEyeComfortMode","navigate","useNavigate","updateUserProfile","updateAvatarId","refreshProfile","userSubscription","isSubscriptionActive","checkSubscriptionStatus","fontSize","setFontSize","isMobile","useFontSize","appDownloads","setAppDownloads","s1","s2","cancelled","setSessions","setSessionsLoading","colRef","snap","getDocs","now","ttlMs","items","d","forcedLogout","createdAt","lastSeen","rawCreated","rawLast","item","t","ta","isRefreshing","setIsRefreshing","isDailyReportsLockEnabled","setIsDailyReportsLockEnabled","isDailyLockTogglePinOpen","setIsDailyLockTogglePinOpen","pendingDailyLockValue","setPendingDailyLockValue","isMonthlyReportsLockEnabled","setIsMonthlyReportsLockEnabled","key","v","isMonthlyLockTogglePinOpen","setIsMonthlyLockTogglePinOpen","pendingMonthlyLockValue","setPendingMonthlyLockValue","isWalletSelectionPinEnabled","setIsWalletSelectionPinEnabled","isWalletSelectionPinToggleOpen","setIsWalletSelectionPinToggleOpen","pendingWalletSelectionPinValue","setPendingWalletSelectionPinValue","isDebtsPinRequired","setIsDebtsPinRequired","isDebtsPinToggleOpen","setIsDebtsPinToggleOpen","pendingDebtsPinValue","setPendingDebtsPinValue","isShopExpensesPinRequired","setIsShopExpensesPinRequired","isShopExpensesPinToggleOpen","setIsShopExpensesPinToggleOpen","pendingShopExpensesPinValue","setPendingShopExpensesPinValue","isAndroidNative","Capacitor","isReceiptNoteEnabled","setIsReceiptNoteEnabled","sessions","sessionsLoading","sessionToLogout","setSessionToLogout","isSessionLogoutPinOpen","setIsSessionLogoutPinOpen","isTransferFeesEnabled","setIsTransferFeesEnabled","isWithdrawSenderNameInputEnabled","setIsWithdrawSenderNameInputEnabled","isLinesPinEnabled","setIsLinesPinEnabled","isLinesPinToggleOpen","setIsLinesPinToggleOpen","pendingLinesPinValue","setPendingLinesPinValue","isRestrictedSettingsHelpOpen","setIsRestrictedSettingsHelpOpen","isFactoryResetPinOpen","setIsFactoryResetPinOpen","isFactoryResetConfirmOpen","setIsFactoryResetConfirmOpen","isFactoryResetProcessing","setIsFactoryResetProcessing","excludeProductsFromReset","setExcludeProductsFromReset","isSmsReadingEnabled","setIsSmsReadingEnabled","isSmsAutoRegisterEnabled","setIsSmsAutoRegisterEnabled","isReceiverPhoneInputEnabled","setIsReceiverPhoneInputEnabled","smsAutoConfirmDuration","setSmsAutoConfirmDuration","hiddenQuickActions","setHiddenQuickActions","parsed","x","isAutoTransferRecordEnabled","setIsAutoTransferRecordEnabled","perUser","global","cameraPermissionAccepted","setCameraPermissionAccepted","isRequestingCamera","setIsRequestingCamera","theme","setTheme","useTheme","videoModalOpen","setVideoModalOpen","videoUrl","setVideoUrl","videoTitle","setVideoTitle","openVideo","url","title","isDark","setIsDark","prefersDark","monthlyLock","dailyLock","userDataService","remote","remoteFees","remoteReceiverInput","remoteLinesPin","remoteHidden","cleaned","handleReceiptNoteToggle","nextVal","handleTransferFeesToggle","handleLinesPinToggle","handleWithdrawSenderNameInputToggle","handleReceiverPhoneInputToggle","handleQuickActionVisibilityChange","actionId","label","hidden","next","adbDevices","setAdbDevices","selectedDevice","setSelectedDevice","deviceStatus","setDeviceStatus","wifiIp","setWifiIp","telegramChatId","setTelegramChatId","isZeroPlan","setIsZeroPlan","KNOWN_DEVICES_KEY","getKnownDevices","arr","addKnownDevice","set","getCurrentDeviceId","existing","uuid","getSessionDeviceTypeLabel","rawType","receiver","setReceiver","amount","setAmount","pinOpen","setPinOpen","transferStatus","setTransferStatus","bridgeLink","setBridgeLink","bridgeDeviceId","setBridgeDeviceId","SHOW_DEVICE_UTILS","SHOW_TRANSFER_UI","handleConnectWifi","api","target","res","err","list","filtered","saved","base","wifiCandidate","handleDailyLockToggle","handleMonthlyLockToggle","handleWalletSelectionPinToggle","handleDebtsPinToggle","handleShopExpensesPinToggle","handleFactoryReset","zero","rawLocalPlan","planLocalStr","remoteSub","getUserSubscription","rawRemotePlan","planRemoteStr","getAppDownloads","handleInputChange","name","handleAvatarSelect","avatarId","Preferences","__vitePreload","n","event","handleRefreshSubscription","PlayCircle","nextTheme","Switch","checked","runtimeDesktopVersion","setRuntimeDesktopVersion","React","version","localVersion","isElectronEnv","i","testCode","getUssdCode","e1","maybeIp","Save","s","isCurrent","typeLabel","formatDate","DialogDescription","DialogFooter","Minus","action","isHidden","Crown","RefreshCw","getSubscriptionStatusColor","getPlanDisplayName","getDaysRemaining","pinDigits","receiverDigits","amountInt","pinCode","getUssdCodeWithPin","openUssdDeepLink","ArrowLeft","VideoModal"],"ignoreList":[0,1,2,3,4],"sources":["../../node_modules/lucide-react/dist/esm/icons/ban.js","../../node_modules/lucide-react/dist/esm/icons/code.js","../../node_modules/lucide-react/dist/esm/icons/moon.js","../../node_modules/lucide-react/dist/esm/icons/sun.js","../../node_modules/lucide-react/dist/esm/icons/type.js","../../src/components/AvatarSelector.tsx","../../src/components/PinModal.tsx","../../src/components/MasterPinManagement.tsx","../../src/utils/walletSelectionPinService.ts","../../src/components/ResellerManagement.tsx","../../src/pages/ProfileSettingsPage.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M4.929 4.929 19.07 19.071\", key: \"196cmz\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }]\n];\nconst Ban = createLucideIcon(\"ban\", __iconNode);\n\nexport { __iconNode, Ban as default };\n//# sourceMappingURL=ban.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m16 18 6-6-6-6\", key: \"eg8j8\" }],\n  [\"path\", { d: \"m8 6-6 6 6 6\", key: \"ppft3o\" }]\n];\nconst Code = createLucideIcon(\"code\", __iconNode);\n\nexport { __iconNode, Code as default };\n//# sourceMappingURL=code.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401\",\n      key: \"kfwtm\"\n    }\n  ]\n];\nconst Moon = createLucideIcon(\"moon\", __iconNode);\n\nexport { __iconNode, Moon as default };\n//# sourceMappingURL=moon.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"4\", key: \"4exip2\" }],\n  [\"path\", { d: \"M12 2v2\", key: \"tus03m\" }],\n  [\"path\", { d: \"M12 20v2\", key: \"1lh1kg\" }],\n  [\"path\", { d: \"m4.93 4.93 1.41 1.41\", key: \"149t6j\" }],\n  [\"path\", { d: \"m17.66 17.66 1.41 1.41\", key: \"ptbguv\" }],\n  [\"path\", { d: \"M2 12h2\", key: \"1t8f8n\" }],\n  [\"path\", { d: \"M20 12h2\", key: \"1q8mjw\" }],\n  [\"path\", { d: \"m6.34 17.66-1.41 1.41\", key: \"1m8zz5\" }],\n  [\"path\", { d: \"m19.07 4.93-1.41 1.41\", key: \"1shlcs\" }]\n];\nconst Sun = createLucideIcon(\"sun\", __iconNode);\n\nexport { __iconNode, Sun as default };\n//# sourceMappingURL=sun.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 4v16\", key: \"1654pz\" }],\n  [\"path\", { d: \"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2\", key: \"e0r10z\" }],\n  [\"path\", { d: \"M9 20h6\", key: \"s66wpe\" }]\n];\nconst Type = createLucideIcon(\"type\", __iconNode);\n\nexport { __iconNode, Type as default };\n//# sourceMappingURL=type.js.map\n","import React, { useState } from 'react';\r\nimport { avatarCollection } from '../utils/avatars';\r\n\r\ninterface AvatarSelectorProps {\r\n  selectedAvatarId?: string;\r\n  onAvatarSelect: (avatarId: string) => void;\r\n  className?: string;\r\n}\r\n\r\nconst AvatarSelector: React.FC<AvatarSelectorProps> = ({\r\n  selectedAvatarId,\r\n  onAvatarSelect,\r\n  className = ''\r\n}) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  const selectedAvatar = avatarCollection.find(avatar => avatar.id === selectedAvatarId);\r\n\r\n  return (\r\n    <div className={`relative flex flex-col items-center ${className}`}>\r\n      {/*     */}\r\n      <button\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"w-20 h-20 rounded-full border-2 border-blue-500 hover:border-blue-600 transition-all duration-200 bg-white shadow-md hover:shadow-lg overflow-hidden p-0 flex items-center justify-center\"\r\n        type=\"button\"\r\n      >\r\n        {selectedAvatar ? (\r\n          selectedAvatar.component\r\n        ) : (\r\n          <svg className=\"w-12 h-12 text-gray-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n            <path fillRule=\"evenodd\" d=\"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z\" clipRule=\"evenodd\" />\r\n          </svg>\r\n        )}\r\n      </button>\r\n\r\n      {/*   */}\r\n      <p className=\"text-sm text-gray-600 mt-2 text-center\">\r\n          \r\n      </p>\r\n\r\n      {/*    */}\r\n      {isOpen && (\r\n        <div className=\"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 bg-white rounded-lg shadow-xl border border-gray-200 p-4 z-50 min-w-max\">\r\n          <div className=\"grid grid-cols-5 gap-3\">\r\n            {avatarCollection.map((avatar) => (\r\n              <button\r\n                key={avatar.id}\r\n                onClick={() => {\r\n                  onAvatarSelect(avatar.id);\r\n                  setIsOpen(false);\r\n                }}\r\n                className={`w-16 h-16 rounded-full border-2 transition-all duration-200 hover:scale-105 overflow-hidden p-0 flex items-center justify-center ${\r\n                  selectedAvatarId === avatar.id\r\n                    ? 'border-blue-500 ring-2 ring-blue-200'\r\n                    : 'border-gray-300 hover:border-blue-400'\r\n                }`}\r\n                type=\"button\"\r\n                title={avatar.name}\r\n              >\r\n                {avatar.component}\r\n              </button>\r\n            ))}\r\n          </div>\r\n          \r\n          {/*   */}\r\n          <button\r\n            onClick={() => setIsOpen(false)}\r\n            className=\"mt-3 w-full py-2 text-sm text-gray-500 hover:text-gray-700 transition-colors\"\r\n            type=\"button\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/*        */}\r\n      {isOpen && (\r\n        <div\r\n          className=\"fixed inset-0 z-40\"\r\n          onClick={() => setIsOpen(false)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AvatarSelector;\r\n","import React, { useState } from 'react';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Shield, Lock, Send, Smartphone, User } from 'lucide-react';\nimport { cn } from \"@/lib/utils\";\n\ntype Props = {\n  open: boolean;\n  onClose: () => void;\n  onSubmit: (deviceId: string, pin: string) => void;\n  deviceId: string | null;\n  recipientMsisdn?: string;\n  recipientName?: string;\n  helperMessage?: string;\n};\n\nexport default function PinModal({ open, onClose, onSubmit, deviceId, recipientMsisdn, recipientName, helperMessage }: Props) {\n  const [pin, setPin] = useState('');\n\n  const handleSubmit = () => {\n    onSubmit(deviceId || '', pin);\n    setPin('');\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={(val) => !val && onClose()}>\n      <DialogContent className=\"sm:max-w-md border-t-4 border-t-red-600 shadow-2xl\">\n        <DialogHeader className=\"items-center space-y-2 pb-2\">\n          <div className=\"h-12 w-12 rounded-full bg-red-100 flex items-center justify-center mb-2\">\n            <Lock className=\"h-6 w-6 text-red-600\" />\n          </div>\n          <DialogTitle className=\"text-xl font-bold text-center text-gray-900\">\n              \n          </DialogTitle>\n          <p className=\"text-sm text-center text-gray-500\">\n                \n          </p>\n        </DialogHeader>\n\n        <div className=\"space-y-6 py-4\">\n          {/* Recipient Info Card */}\n          <div className=\"bg-gray-50 p-4 rounded-xl border border-gray-100 space-y-3\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm text-gray-500 flex items-center gap-1.5\">\n                <Smartphone className=\"w-4 h-4\" />\n                 \n              </span>\n              <span className=\"font-mono font-bold text-lg text-gray-900\" dir=\"ltr\">\n                {recipientMsisdn || '---'}\n              </span>\n            </div>\n            \n            {recipientName && (\n              <div className=\"flex items-center justify-between pt-2 border-t border-gray-200\">\n                <span className=\"text-sm text-gray-500 flex items-center gap-1.5\">\n                  <User className=\"w-4 h-4\" />\n                   \n                </span>\n                <span className=\"font-bold text-base text-emerald-700\">\n                  {recipientName}\n                </span>\n              </div>\n            )}\n          </div>\n\n          {/* Helper Message */}\n          {helperMessage && (\n            <div className=\"text-center p-2 bg-yellow-50 text-yellow-700 text-sm rounded-lg border border-yellow-100\">\n              {helperMessage}\n            </div>\n          )}\n\n          {/* PIN Input */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"pin-input\" className=\"sr-only\"> </Label>\n            <div className=\"relative\">\n              <Input\n                id=\"pin-input\"\n                type=\"password\"\n                value={pin}\n                onChange={(e) => setPin(e.target.value)}\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter') handleSubmit();\n                }}\n                className=\"text-center text-2xl font-bold tracking-[0.5em] h-14 border-2 focus-visible:ring-red-500 focus-visible:border-red-500 transition-all\"\n                placeholder=\"\"\n                autoFocus\n                autoComplete=\"off\"\n              />\n              <Shield className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-300 w-5 h-5\" />\n            </div>\n          </div>\n        </div>\n\n        {/* Actions */}\n        <div className=\"flex gap-3 mt-2\">\n          <Button \n            variant=\"outline\" \n            onClick={onClose}\n            className=\"flex-1 h-11 text-gray-700 hover:bg-gray-50 border-gray-200\"\n          >\n            \n          </Button>\n          <Button \n            onClick={handleSubmit}\n            className=\"flex-1 h-11 bg-red-600 hover:bg-red-700 text-white shadow-md shadow-red-200 transition-all\"\n            disabled={!pin}\n          >\n            <Send className=\"w-4 h-4 ml-2\" />\n             \n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import React, { useEffect, useState } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Shield, Plus, Edit } from 'lucide-react';\r\nimport { MasterPinDialog } from '@/components/MasterPinDialog';\r\nimport { MasterPinService } from '@/utils/masterPinService';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport PasswordConfirmDialog from '@/components/PasswordConfirmDialog';\r\nimport { useFirebaseAuth } from '@/contexts/FirebaseAuthContext';\r\n\r\ninterface MasterPinManagementProps {\r\n  userId?: string;\r\n}\r\n\r\nexport const MasterPinManagement: React.FC<MasterPinManagementProps> = ({\r\n  userId\r\n}) => {\r\n  const { user, profile } = useFirebaseAuth();\r\n  const effectiveUserId = userId ?? user?.uid;\r\n  const [masterPinDialogOpen, setMasterPinDialogOpen] = useState(false);\r\n  const [masterPinMode, setMasterPinMode] = useState<'verify' | 'create' | 'change'>('create');\r\n  const [isPasswordConfirmOpen, setIsPasswordConfirmOpen] = useState(false);\r\n  const { toast } = useToast();\r\n\r\n  const [hasMasterPin, setHasMasterPin] = useState<boolean>(false);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    (async () => {\r\n      try {\r\n        const has = await MasterPinService.hasMasterPin(effectiveUserId);\r\n        if (mounted) setHasMasterPin(!!has);\r\n      } catch {\r\n        if (mounted) setHasMasterPin(false);\r\n      }\r\n    })();\r\n    return () => { mounted = false; };\r\n  }, [effectiveUserId]);\r\n\r\n  const getChangeCountKey = () => effectiveUserId ? `master_pin_change_count_${effectiveUserId}` : 'master_pin_change_count';\r\n  const getChangeCount = () => {\r\n    try {\r\n      const raw = localStorage.getItem(getChangeCountKey());\r\n      return raw ? parseInt(raw, 10) : 0;\r\n    } catch {\r\n      return 0;\r\n    }\r\n  };\r\n  const incrementChangeCount = () => {\r\n    try {\r\n      const count = getChangeCount() + 1;\r\n      localStorage.setItem(getChangeCountKey(), String(count));\r\n    } catch {}\r\n  };\r\n\r\n  const handleCreateOrChangeMasterPin = async () => {\r\n    try {\r\n      const latestHas = await MasterPinService.hasMasterPin(effectiveUserId);\r\n      setHasMasterPin(!!latestHas);\r\n      setMasterPinMode(latestHas ? 'change' : 'create');\r\n      setMasterPinDialogOpen(true);\r\n    } catch {\r\n      setMasterPinMode('create');\r\n      setMasterPinDialogOpen(true);\r\n    }\r\n  };\r\n\r\n  const handleMasterPinSuccess = () => {\r\n    setMasterPinDialogOpen(false);\r\n    if (masterPinMode === 'change') {\r\n      incrementChangeCount();\r\n    }\r\n    //              \r\n    if (masterPinMode === 'create') {\r\n      setHasMasterPin(true);\r\n    }\r\n    toast({\r\n      title: \" \",\r\n      description: hasMasterPin ? \"    \" : \"    \",\r\n    });\r\n  };\r\n\r\n  const handleMasterPinCancel = () => {\r\n    setMasterPinDialogOpen(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        variant=\"outline\"\r\n        size=\"sm\"\r\n        onClick={handleCreateOrChangeMasterPin}\r\n        className=\"flex items-center gap-2 text-sm\"\r\n      >\r\n        <Shield className=\"h-4 w-4\" />\r\n        {hasMasterPin ? (\r\n          <>\r\n            <Edit className=\"h-4 w-4\" />\r\n               \r\n          </>\r\n        ) : (\r\n          <>\r\n            <Plus className=\"h-4 w-4\" />\r\n               \r\n          </>\r\n        )}\r\n      </Button>\r\n\r\n\r\n      <MasterPinDialog\r\n        open={masterPinDialogOpen}\r\n        onOpenChange={setMasterPinDialogOpen}\r\n        mode={masterPinMode}\r\n        onSuccess={handleMasterPinSuccess}\r\n        userId={effectiveUserId}\r\n        userRole={profile?.role}\r\n      />\r\n    </>\r\n  );\r\n};","/**\r\n *         / .\r\n *    localStorage        .\r\n */\r\n\r\nconst KEY_BASE = 'wallet_selection_pin_required';\r\n\r\nfunction getKey(userId?: string) {\r\n  return userId ? `${KEY_BASE}_${userId}` : KEY_BASE;\r\n}\r\n\r\nexport const walletSelectionPinService = {\r\n  isEnabled(userId?: string): boolean {\r\n    try {\r\n      const val = localStorage.getItem(getKey(userId));\r\n      return val === 'true';\r\n    } catch {\r\n      return false;\r\n    }\r\n  },\r\n  setEnabled(enabled: boolean, userId?: string): void {\r\n    try {\r\n      localStorage.setItem(getKey(userId), enabled ? 'true' : 'false');\r\n    } catch {}\r\n  }\r\n};","import React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { useToast } from '@/hooks/use-toast';\nimport { useFirebaseAuth } from '@/contexts/FirebaseAuthContext';\nimport { db, firebaseConfig } from '@/firebase';\nimport { collection, addDoc, query, where, onSnapshot, orderBy, serverTimestamp, deleteDoc, doc, setDoc, getFirestore, updateDoc } from 'firebase/firestore';\nimport { Users, Plus, Loader2, Trash2, CheckCircle, Clock, XCircle, AlertTriangle, Ban, DollarSign } from 'lucide-react';\nimport { initializeApp, deleteApp } from 'firebase/app';\nimport { getAuth, createUserWithEmailAndPassword, signOut } from 'firebase/auth';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { SubscriptionPlan } from '@/utils/subscriptionService';\nimport PasswordConfirmDialog from '@/components/PasswordConfirmDialog';\n\ninterface ResellerAccount {\n  id: string;\n  uid?: string;\n  email: string;\n  password?: string;\n  phone?: string;\n  status: 'pending' | 'active' | 'inactive';\n  packageName?: string;\n  ownerId: string;\n  createdAt: any;\n  startDate?: any;\n  endDate?: any;\n  deletionRequested?: boolean;\n  deletionReason?: string;\n  deletionStatus?: 'pending' | 'rejected';\n  cancelRequested?: boolean;\n  cancelReason?: string;\n  cancelStatus?: 'pending' | 'rejected';\n}\n\nconst PLANS = [\n  { value: SubscriptionPlan.MONTHLY, label: ' ' },\n  { value: SubscriptionPlan.QUARTERLY, label: '  ' },\n  { value: SubscriptionPlan.HALF_YEARLY, label: '  ' },\n  { value: SubscriptionPlan.YEARLY, label: ' ' },\n  { value: SubscriptionPlan.LIFETIME, label: '  ' },\n];\n\nexport const ResellerManagement = () => {\n  const { user } = useFirebaseAuth();\n  const { toast } = useToast();\n  const [accounts, setAccounts] = useState<ResellerAccount[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [isResellerEnabled, setIsResellerEnabled] = useState(false);\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [isPricingDialogOpen, setIsPricingDialogOpen] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [formData, setFormData] = useState({ email: '', password: '', phone: '', packageName: '' });\n\n  // Delete Request States\n  const [isDeleteRequestOpen, setIsDeleteRequestOpen] = useState(false);\n  const [deleteReason, setDeleteReason] = useState('');\n  const [selectedAccountForDelete, setSelectedAccountForDelete] = useState<string | null>(null);\n  const [isDeleteSubmitting, setIsDeleteSubmitting] = useState(false);\n\n  // Cancel Package Request States\n  const [isCancelRequestOpen, setIsCancelRequestOpen] = useState(false);\n  const [cancelReason, setCancelReason] = useState('');\n  const [selectedAccountForCancel, setSelectedAccountForCancel] = useState<string | null>(null);\n  const [isCancelSubmitting, setIsCancelSubmitting] = useState(false);\n\n  const [isAccountsLocked, setIsAccountsLocked] = useState(true);\n  const [isPasswordDialogOpen, setIsPasswordDialogOpen] = useState(false);\n\n  useEffect(() => {\n    if (!user) return;\n\n    // 1. Check if reseller system is enabled for this user\n    const userDocRef = doc(db, 'users', user.uid);\n    const unsubscribeUser = onSnapshot(userDocRef, (docSnap) => {\n      if (docSnap.exists()) {\n        const data = docSnap.data();\n        setIsResellerEnabled(data.isResellerEnabled === true);\n      }\n    });\n\n    // 2. Fetch reseller accounts\n    const q = query(\n      collection(db, 'reseller_requests'),\n      where('ownerId', '==', user.uid)\n    );\n\n    const unsubscribeAccounts = onSnapshot(q, (snapshot) => {\n      const docs = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as ResellerAccount));\n      //         \n      docs.sort((a, b) => {\n        const timeA = a.createdAt?.seconds || 0;\n        const timeB = b.createdAt?.seconds || 0;\n        return timeB - timeA;\n      });\n      setAccounts(docs);\n      setLoading(false);\n    }, (error) => {\n      console.error(\"Error fetching reseller accounts:\", error);\n      setLoading(false);\n    });\n\n    return () => {\n      unsubscribeUser();\n      unsubscribeAccounts();\n    };\n  }, [user]);\n\n  const generateReferralCode = (userId: string) => {\n    const timestamp = Date.now().toString(36);\n    const userHash = userId.slice(-6);\n    return `REF_${userHash}_${timestamp}`.toUpperCase();\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!user) {\n      toast({ title: '', description: '   ', variant: 'destructive' });\n      return;\n    }\n    if (!formData.email || !formData.password || !formData.phone || !formData.packageName) {\n      toast({ title: '', description: '   ', variant: 'destructive' });\n      return;\n    }\n\n    setIsSubmitting(true);\n    let secondaryApp: any = null;\n\n    try {\n      // 1.    Firebase Auth   \n      //          \n      secondaryApp = initializeApp(firebaseConfig, \"SecondaryApp\");\n      const secondaryAuth = getAuth(secondaryApp);\n      const secondaryDb = getFirestore(secondaryApp);\n      \n      const userCredential = await createUserWithEmailAndPassword(secondaryAuth, formData.email, formData.password);\n      const newUser = userCredential.user;\n      const userReferralCode = generateReferralCode(newUser.uid);\n      \n      // 2.         (  )\n      //  secondaryDb      \n      \n      // .   \n      await setDoc(doc(secondaryDb, 'users', newUser.uid), {\n        email: formData.email,\n        displayName: ' ',\n        phone: formData.phone,\n        shopName: null,\n        isActive: false, //      \n        role: 'merchant',\n        referralCode: userReferralCode,\n        ownerId: user.uid, //    ()  \n        createdAt: serverTimestamp(),\n        updatedAt: serverTimestamp(),\n        lastLogin: null\n      });\n\n      // .    \n      const shopRef = await addDoc(collection(secondaryDb, 'shops'), {\n        name: ' ',\n        ownerId: newUser.uid,\n        createdAt: serverTimestamp(),\n        updatedAt: serverTimestamp(),\n        isActive: true\n      });\n\n      // .    (Profile)\n      await setDoc(doc(secondaryDb, 'profiles', newUser.uid), {\n        userId: newUser.uid,\n        shopId: shopRef.id,\n        role: 'merchant',\n        fullName: ' ',\n        phone: formData.phone,\n        referralCode: userReferralCode,\n        createdAt: serverTimestamp(),\n        updatedAt: serverTimestamp()\n      });\n\n      //     \n      await signOut(secondaryAuth);\n\n      // 3.     (   )\n      //  db  \n      await addDoc(collection(db, 'reseller_requests'), {\n        ownerId: user.uid,\n        uid: newUser.uid, //     \n        email: formData.email,\n        password: formData.password, //        \n        phone: formData.phone,\n        packageName: formData.packageName,\n        shopId: shopRef.id,\n        status: 'pending',\n        createdAt: serverTimestamp(),\n      });\n      \n      toast({ title: ' ', description: '      ' });\n      setIsDialogOpen(false);\n      setFormData({ email: '', password: '', phone: '', packageName: '' });\n    } catch (error: any) {\n      console.error(\"Error adding account:\", error);\n      let errorMessage = '    ';\n      if (error.code === 'auth/email-already-in-use') {\n        errorMessage = '   ';\n      } else if (error.code === 'auth/weak-password') {\n        errorMessage = '   ';\n      } else if (error.code === 'auth/invalid-email') {\n        errorMessage = '   ';\n      }\n      toast({ title: '', description: errorMessage, variant: 'destructive' });\n    } finally {\n      if (secondaryApp) {\n        try {\n          await deleteApp(secondaryApp);\n        } catch (e) {\n          console.error(\"Error deleting secondary app:\", e);\n        }\n      }\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleCancelClick = (account: ResellerAccount) => {\n    setSelectedAccountForCancel(account.id);\n    setCancelReason('');\n    setIsCancelRequestOpen(true);\n  };\n\n  const handleSubmitCancelRequest = async () => {\n    if (!selectedAccountForCancel) return;\n    if (!cancelReason.trim()) {\n      toast({ title: '', description: '   ', variant: 'destructive' });\n      return;\n    }\n\n    setIsCancelSubmitting(true);\n    try {\n      await updateDoc(doc(db, 'reseller_requests', selectedAccountForCancel), {\n        cancelRequested: true,\n        cancelReason: cancelReason,\n        cancelStatus: 'pending'\n      });\n      toast({ title: ' ', description: '      ' });\n      setIsCancelRequestOpen(false);\n    } catch (error) {\n      console.error(\"Error submitting cancel request:\", error);\n      toast({ title: '', description: '    ', variant: 'destructive' });\n    } finally {\n      setIsCancelSubmitting(false);\n    }\n  };\n\n  const handleDeleteClick = (account: ResellerAccount) => {\n    // If pending, allow direct delete (cancel request)\n    if (account.status === 'pending') {\n      if (window.confirm('       ')) {\n        handleDelete(account.id, account.uid);\n      }\n      return;\n    }\n\n    // Otherwise open delete request dialog\n    setSelectedAccountForDelete(account.id);\n    setDeleteReason('');\n    setIsDeleteRequestOpen(true);\n  };\n\n  const handleSubmitDeleteRequest = async () => {\n    if (!selectedAccountForDelete) return;\n    if (!deleteReason.trim()) {\n      toast({ title: '', description: '   ', variant: 'destructive' });\n      return;\n    }\n\n    setIsDeleteSubmitting(true);\n    try {\n      await updateDoc(doc(db, 'reseller_requests', selectedAccountForDelete), {\n        deletionRequested: true,\n        deletionReason: deleteReason,\n        deletionStatus: 'pending'\n      });\n      toast({ title: ' ', description: '     ' });\n      setIsDeleteRequestOpen(false);\n    } catch (error) {\n      console.error(\"Error submitting delete request:\", error);\n      toast({ title: '', description: '    ', variant: 'destructive' });\n    } finally {\n      setIsDeleteSubmitting(false);\n    }\n  };\n\n  const handleDelete = async (id: string, uid?: string) => {\n    try {\n      // 1.   \n      await deleteDoc(doc(db, 'reseller_requests', id));\n      \n      // 2.      users   uid\n      if (uid) {\n        try {\n          await deleteDoc(doc(db, 'users', uid));\n        } catch (userError) {\n          console.error(\"Error deleting user doc:\", userError);\n          //       \n        }\n      }\n\n      toast({ title: ' ', description: '   ' });\n    } catch (error) {\n      console.error(\"Error deleting request:\", error);\n      toast({ title: '', description: '   ', variant: 'destructive' });\n    }\n  };\n\n  const getStatusBadge = (status: string, packageName?: string) => {\n    switch (status) {\n      case 'active':\n        return (\n          <div className=\"flex items-center gap-1 text-green-600 bg-green-50 px-2 py-1 rounded-full text-xs\">\n            <CheckCircle className=\"w-3 h-3\" />\n            <span> {packageName ? `- ${packageName}` : ''}</span>\n          </div>\n        );\n      case 'pending':\n        return (\n          <div className=\"flex items-center gap-1 text-yellow-600 bg-yellow-50 px-2 py-1 rounded-full text-xs\">\n            <Clock className=\"w-3 h-3\" />\n            <span> </span>\n          </div>\n        );\n      case 'inactive':\n        return (\n          <div className=\"flex items-center gap-1 text-red-600 bg-red-50 px-2 py-1 rounded-full text-xs\">\n            <XCircle className=\"w-3 h-3\" />\n            <span> </span>\n          </div>\n        );\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <Card className=\"shadow-lg mb-6 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 relative overflow-hidden\">\n      <CardHeader className=\"flex flex-row items-center justify-between\">\n        <CardTitle className=\"flex items-center gap-2 dark:text-white\">\n          <Users className=\"h-5 w-5\" />\n           \n        </CardTitle>\n        <div className=\"flex items-center gap-2\">\n          <Button\n            size=\"sm\"\n            variant=\"outline\"\n            className=\"border-gray-300 text-gray-700 hover:bg-gray-100 dark:border-gray-700 dark:text-gray-200 dark:hover:bg-gray-800\"\n            onClick={() => {\n              if (isAccountsLocked) {\n                setIsPasswordDialogOpen(true);\n              } else {\n                setIsAccountsLocked(true);\n              }\n            }}\n          >\n            {isAccountsLocked ? ' ' : ' '}\n          </Button>\n          <Button \n            size=\"sm\"\n            onClick={() => setIsPricingDialogOpen(true)}\n            className=\"bg-green-600 hover:bg-green-700 text-white gap-2 shadow-sm\"\n          >\n            <DollarSign className=\"w-4 h-4\" />\n             \n          </Button>\n          <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n            <DialogTrigger asChild>\n              <Button size=\"sm\" className=\"gap-2 bg-blue-600 hover:bg-blue-700 text-white shadow-sm\">\n                <Plus className=\"h-4 w-4\" />\n                 \n              </Button>\n            </DialogTrigger>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>   </DialogTitle>\n            </DialogHeader>\n            <form onSubmit={handleSubmit} className=\"space-y-4 mt-4\">\n              <div className=\"space-y-2\">\n                <Label> </Label>\n                <Input \n                  type=\"email\" \n                  value={formData.email}\n                  onChange={(e) => setFormData(prev => ({ ...prev, email: e.target.value }))}\n                  placeholder=\"email@example.com\"\n                  required\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label> </Label>\n                <Input \n                  type=\"tel\" \n                  value={formData.phone}\n                  onChange={(e) => setFormData(prev => ({ ...prev, phone: e.target.value }))}\n                  placeholder=\"01xxxxxxxxx\"\n                  required\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label> </Label>\n                <Select\n                  value={formData.packageName}\n                  onValueChange={(value) => setFormData(prev => ({ ...prev, packageName: value }))}\n                  required\n                >\n                  <SelectTrigger className=\"text-right\" dir=\"rtl\">\n                    <SelectValue placeholder=\" \" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {PLANS.map((plan) => (\n                      <SelectItem key={plan.value} value={plan.value} className=\"text-right\" dir=\"rtl\">\n                        {plan.label}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n              <div className=\"space-y-2\">\n                <Label> </Label>\n                <Input \n                  type=\"text\" \n                  value={formData.password}\n                  onChange={(e) => setFormData(prev => ({ ...prev, password: e.target.value }))}\n                  placeholder=\"  \"\n                  required\n                />\n              </div>\n              <Button type=\"submit\" className=\"w-full bg-blue-600 hover:bg-blue-700 text-white\" disabled={isSubmitting}>\n                {isSubmitting ? <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> : null}\n                 \n              </Button>\n            </form>\n          </DialogContent>\n        </Dialog>\n        </div>\n      </CardHeader>\n      <CardContent>\n        {loading ? (\n          <div className=\"text-center py-4 text-gray-500\"> ...</div>\n        ) : accounts.length === 0 ? (\n          <div className=\"text-center py-8 text-gray-500 bg-gray-50 rounded-lg border border-dashed border-gray-200\">\n                \n          </div>\n        ) : (\n          <div className=\"relative\">\n            <div\n              className={`space-y-3 transition ${isAccountsLocked ? 'blur-sm pointer-events-none select-none' : ''}`}\n            >\n              {accounts.map((account) => (\n                <div key={account.id} className=\"flex items-center justify-between p-3 rounded-lg border border-gray-100 bg-gray-50/50 hover:bg-gray-50 transition-colors\">\n                  <div className=\"space-y-1\">\n                    <div className=\"font-medium text-sm text-gray-900 dark:text-gray-100\">{account.email}</div>\n                    <div className=\"text-xs text-gray-400 flex flex-col gap-0.5\">\n                      {account.status === 'active' && account.startDate && account.endDate ? (\n                        <>\n                          <span className=\"text-green-600\">: {new Date(account.startDate.seconds * 1000).toLocaleDateString('en-GB')}</span>\n                          <span className=\"text-red-500\">: {new Date(account.endDate.seconds * 1000).toLocaleDateString('en-GB')}</span>\n                        </>\n                      ) : (\n                        <span>{account.createdAt?.seconds ? new Date(account.createdAt.seconds * 1000).toLocaleDateString('en-GB') : ''}</span>\n                      )}\n                    </div>\n                  </div>\n                  <div className=\"flex items-center gap-3\">\n                    {getStatusBadge(account.status, account.packageName)}\n                    {account.deletionStatus === 'rejected' && (\n                      <div className=\"flex items-center gap-1 text-red-600 bg-red-50 px-2 py-1 rounded-full text-xs border border-red-100\">\n                        <XCircle className=\"w-3 h-3\" />\n                        <span>   </span>\n                      </div>\n                    )}\n                    {account.deletionRequested && account.deletionStatus === 'pending' && (\n                      <div className=\"flex items-center gap-1 text-orange-600 bg-orange-50 px-2 py-1 rounded-full text-xs border border-orange-100\">\n                        <Clock className=\"w-3 h-3\" />\n                        <span> </span>\n                      </div>\n                    )}\n                    {account.cancelRequested && account.cancelStatus === 'pending' && (\n                      <div className=\"flex items-center gap-1 text-orange-600 bg-orange-50 px-2 py-1 rounded-full text-xs border border-orange-100\">\n                        <Clock className=\"w-3 h-3\" />\n                        <span>  </span>\n                      </div>\n                    )}\n                    {account.cancelStatus === 'rejected' && (\n                      <div className=\"flex items-center gap-1 text-red-600 bg-red-50 px-2 py-1 rounded-full text-xs border border-red-100\">\n                        <XCircle className=\"w-3 h-3\" />\n                        <span>   </span>\n                      </div>\n                    )}\n                    {account.status === 'active' && (\n                      <Button \n                        variant=\"ghost\" \n                        size=\"icon\" \n                        className=\"text-orange-500 hover:text-orange-700 hover:bg-orange-50 h-8 w-8\"\n                        onClick={() => handleCancelClick(account)}\n                        disabled={account.cancelRequested && account.cancelStatus === 'pending'}\n                        title=\" \"\n                      >\n                        <Ban className=\"h-4 w-4\" />\n                      </Button>\n                    )}\n                    <Button \n                      variant=\"ghost\" \n                      size=\"icon\" \n                      className=\"text-red-500 hover:text-red-700 hover:bg-red-50 h-8 w-8\"\n                      onClick={() => handleDeleteClick(account)}\n                      disabled={account.deletionRequested && account.deletionStatus === 'pending'}\n                    >\n                      <Trash2 className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </div>\n              ))}\n            </div>\n            {isAccountsLocked && (\n              <div className=\"absolute inset-0 flex flex-col items-center justify-center bg-white/70 dark:bg-slate-900/70 z-10\">\n                <p className=\"mb-3 text-sm text-gray-700 dark:text-gray-200 text-center\">\n                         \n                </p>\n                <Button\n                  size=\"sm\"\n                  className=\"bg-emerald-600 hover:bg-emerald-700 text-white\"\n                  onClick={() => setIsPasswordDialogOpen(true)}\n                >\n                     \n                </Button>\n              </div>\n            )}\n          </div>\n        )}\n      </CardContent>\n\n      <PasswordConfirmDialog\n        open={isPasswordDialogOpen}\n        onOpenChange={setIsPasswordDialogOpen}\n        title=\"  \"\n        description=\"         \"\n        onSuccess={() => setIsAccountsLocked(false)}\n      />\n\n      {/* Delete Request Dialog */}\n      <Dialog open={isDeleteRequestOpen} onOpenChange={setIsDeleteRequestOpen}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center gap-2 text-red-600\">\n              <AlertTriangle className=\"h-5 w-5\" />\n                \n            </DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <p className=\"text-sm text-gray-600\">\n                     .      .\n            </p>\n            <div className=\"space-y-2\">\n              <Label> </Label>\n              <Textarea \n                value={deleteReason}\n                onChange={(e) => setDeleteReason(e.target.value)}\n                placeholder=\"  ...\"\n                rows={4}\n              />\n            </div>\n            <Button \n              onClick={handleSubmitDeleteRequest} \n              className=\"w-full bg-red-600 hover:bg-red-700 text-white\"\n              disabled={isDeleteSubmitting}\n            >\n              {isDeleteSubmitting ? <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> : null}\n                \n            </Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* Cancel Package Request Dialog */}\n      <Dialog open={isCancelRequestOpen} onOpenChange={setIsCancelRequestOpen}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center gap-2 text-orange-600\">\n              <Ban className=\"h-5 w-5\" />\n                \n            </DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <p className=\"text-sm text-gray-600\">\n                      .      .\n              <br />\n              <span className=\"text-xs text-red-500 font-semibold\">:       .</span>\n            </p>\n            <div className=\"space-y-2\">\n              <Label> </Label>\n              <Textarea \n                value={cancelReason}\n                onChange={(e) => setCancelReason(e.target.value)}\n                placeholder=\"  ...\"\n                rows={4}\n              />\n            </div>\n            <Button \n              onClick={handleSubmitCancelRequest} \n              className=\"w-full bg-orange-600 hover:bg-orange-700 text-white\"\n              disabled={isCancelSubmitting}\n            >\n              {isCancelSubmitting ? <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> : null}\n                \n            </Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n      <Dialog open={isPricingDialogOpen} onOpenChange={setIsPricingDialogOpen}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle className=\"text-center text-xl font-bold mb-4\">  </DialogTitle>\n          </DialogHeader>\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full text-right border-collapse\">\n              <thead>\n                <tr className=\"bg-gray-100\">\n                  <th className=\"p-3 border text-gray-700\"> </th>\n                  <th className=\"p-3 border text-blue-600\">  </th>\n                  <th className=\"p-3 border text-red-600\"> </th>\n                  <th className=\"p-3 border text-green-600\"> </th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr>\n                  <td className=\"p-3 border font-medium\"> </td>\n                  <td className=\"p-3 border\">200 .</td>\n                  <td className=\"p-3 border\">150 .</td>\n                  <td className=\"p-3 border font-bold text-green-600\">50 .</td>\n                </tr>\n                <tr>\n                  <td className=\"p-3 border font-medium\">  </td>\n                  <td className=\"p-3 border\">450 .</td>\n                  <td className=\"p-3 border\">350 .</td>\n                  <td className=\"p-3 border font-bold text-green-600\">100 .</td>\n                </tr>\n                <tr>\n                  <td className=\"p-3 border font-medium\">  </td>\n                  <td className=\"p-3 border\">750 .</td>\n                  <td className=\"p-3 border\">600 .</td>\n                  <td className=\"p-3 border font-bold text-green-600\">150 .</td>\n                </tr>\n                <tr>\n                  <td className=\"p-3 border font-medium\"> </td>\n                  <td className=\"p-3 border\">1450 .</td>\n                  <td className=\"p-3 border\">1250 .</td>\n                  <td className=\"p-3 border font-bold text-green-600\">200 .</td>\n                </tr>\n                <tr>\n                  <td className=\"p-3 border font-medium\">  </td>\n                  <td className=\"p-3 border\">4000 .</td>\n                  <td className=\"p-3 border\">3700 .</td>\n                  <td className=\"p-3 border font-bold text-green-600\">300 .</td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </Card>\n  );\n};\n","import React, { useState, useEffect } from 'react';\nimport { Slider } from '@/components/ui/slider';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { ArrowLeft, Save, User, Crown, Calendar, Clock, RefreshCw, Shield, Type, Minus, Plus, Send, Moon, Sun, Code, Camera, Loader2, ExternalLink, PlayCircle } from 'lucide-react';\nimport { useNavigate } from 'react-router-dom';\nimport { useToast } from '@/hooks/use-toast';\nimport { useFirebaseAuth } from '@/contexts/FirebaseAuthContext';\nimport { useFontSize } from '@/contexts/FontSizeContext';\nimport AvatarSelector from '@/components/AvatarSelector';\nimport { getAppDownloads, type AppDownloads } from '@/utils/appDownloadService';\nimport PinModal from '@/components/PinModal';\nimport { MasterPinManagement } from '@/components/MasterPinManagement';\nimport { formatDate, getDaysRemaining, getPlanDisplayName, getSubscriptionStatusColor, SubscriptionPlan, getUserSubscription } from '@/utils/subscriptionService';\nimport { Switch } from '@/components/ui/switch';\nimport { MasterPinDialog } from '@/components/MasterPinDialog';\nimport { openUssdDeepLink, sendTransferDeepLink, getUssdCode, getUssdCodeWithPin, getUssdCodeBySender } from '@/utils/ussdDialer';\nimport { walletSelectionPinService } from '@/utils/walletSelectionPinService';\nimport { userDataService } from '@/integrations/firebase/services';\nimport { VideoModal } from '@/components/VideoModal';\nimport { useTheme } from 'next-themes';\nimport { Capacitor } from '@capacitor/core';\nimport { db } from '@/firebase';\nimport { doc, setDoc, collection, query, where, getDocs, updateDoc } from 'firebase/firestore';\nimport { ResellerManagement } from '@/components/ResellerManagement';\nimport { BackupManager } from '@/components/BackupManager';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogFooter } from '@/components/ui/dialog';\n\nconst QUICK_ACTION_OPTIONS = [\n  { id: 'installment', label: '', color: '#7C3AED' },\n  { id: 'maintenance', label: '', color: '#0EA5E9' },\n  { id: 'machine', label: '', color: '#F59E0B' },\n  { id: 'credit-cards', label: ' ', color: '#8B5CF6' },\n  { id: 'sales', label: '', color: '#F59E0B' },\n  { id: 'shop-expenses', label: ' ', color: '#F97316' },\n  { id: 'deficiencies', label: '', color: '#DB2777' },\n  { id: 'my-client-numbers', label: '', color: '#22C55E' },\n  { id: 'branch-management', label: ' ', color: '#14B8A6' },\n  { id: 'add-wallet', label: ' ', color: '#EF4444' },\n  { id: 'cashier-shift', label: ' ', color: '#3B82F6' },\n  { id: 'store', label: '', color: '#3B82F6' },\n  { id: 'calculator', label: '', color: '#8B5CF6' },\n  { id: 'telegram', label: '', color: '#0EA5E9' },\n  { id: 'debts', label: '', color: '#EC4899' }\n];\n\nconst ProfileSettingsPage: React.FC<{ onBack?: () => void; eyeComfortMode?: boolean; setEyeComfortMode?: (v: boolean) => void }> = ({ onBack, eyeComfortMode, setEyeComfortMode }) => {\n  const navigate = useNavigate();\n  const { toast } = useToast();\n  const { user, profile, updateUserProfile, updateAvatarId, refreshProfile, userSubscription, isSubscriptionActive, checkSubscriptionStatus, signOut } = useFirebaseAuth();\n  const { fontSize, setFontSize, isMobile } = useFontSize();\n  const [appDownloads, setAppDownloads] = useState<AppDownloads | null>(null);\n  \n  const [formData, setFormData] = useState({\n    fullName: profile?.fullName || '',\n    phone: profile?.phone || '',\n    sim1Number: '',\n    sim2Number: '',\n    avatarId: profile?.avatarId || ''\n  });\n\n  useEffect(() => {\n    try {\n      const uid = user?.uid || 'default';\n      const s1 = localStorage.getItem(`sim1Number_${uid}`) || localStorage.getItem('sim1Number') || '';\n      const s2 = localStorage.getItem(`sim2Number_${uid}`) || localStorage.getItem('sim2Number') || '';\n      setFormData(prev => ({\n        ...prev,\n        sim1Number: s1,\n        sim2Number: s2\n      }));\n    } catch {}\n  }, [user?.uid]);\n\n  useEffect(() => {\n    let cancelled = false;\n    const loadSessions = async () => {\n      if (!user?.uid) {\n        setSessions([]);\n        return;\n      }\n      setSessionsLoading(true);\n      try {\n        const colRef = collection(db, 'userSessions');\n        const q = query(colRef, where('userId', '==', user.uid));\n        const snap = await getDocs(q);\n        const now = Date.now();\n        const ttlMs = 1000 * 60 * 60 * 24;\n        const items = snap.docs.map((d) => {\n          const data: any = d.data();\n          const forcedLogout = data.forcedLogout === true;\n          let createdAt: Date | undefined;\n          let lastSeen: Date | undefined;\n          try {\n            const rawCreated = data.createdAt;\n            createdAt = rawCreated && typeof rawCreated.toDate === 'function' ? rawCreated.toDate() : rawCreated ? new Date(rawCreated) : undefined;\n          } catch {\n            createdAt = undefined;\n          }\n          try {\n            const rawLast = data.lastSeen;\n            lastSeen = rawLast && typeof rawLast.toDate === 'function' ? rawLast.toDate() : rawLast ? new Date(rawLast) : createdAt;\n          } catch {\n            lastSeen = createdAt;\n          }\n          return {\n            id: d.id,\n            deviceId: String(data.deviceId || ''),\n            deviceName: data.deviceName ? String(data.deviceName) : undefined,\n            deviceType: data.deviceType ? String(data.deviceType) : undefined,\n            createdAt,\n            lastSeen,\n            forcedLogout\n          };\n        }).filter((item) => {\n          if ((item as any).forcedLogout) return false;\n          if (!item.lastSeen) return false;\n          const t = item.lastSeen.getTime();\n          if (!t || isNaN(t)) return false;\n          return now - t < ttlMs;\n        }).sort((a, b) => {\n          const ta = a.createdAt instanceof Date ? a.createdAt.getTime() : 0;\n          const tb = b.createdAt instanceof Date ? b.createdAt.getTime() : 0;\n          return tb - ta;\n        });\n        if (!cancelled) {\n          setSessions(items);\n        }\n      } catch {\n        if (!cancelled) {\n          setSessions([]);\n        }\n      } finally {\n        if (!cancelled) {\n          setSessionsLoading(false);\n        }\n      }\n    };\n    loadSessions();\n    return () => {\n      cancelled = true;\n    };\n  }, [user?.uid]);\n  \n  const [loading, setLoading] = useState(false);\n  const [isRefreshing, setIsRefreshing] = useState(false);\n  const [isDailyReportsLockEnabled, setIsDailyReportsLockEnabled] = useState<boolean>(false);\n  const [isDailyLockTogglePinOpen, setIsDailyLockTogglePinOpen] = useState<boolean>(false);\n  const [pendingDailyLockValue, setPendingDailyLockValue] = useState<boolean | null>(null);\n  const [isMonthlyReportsLockEnabled, setIsMonthlyReportsLockEnabled] = useState<boolean>(() => {\n    try {\n      const key = user?.uid ? `monthlyReportsLock_v4_${user.uid}` : 'monthlyReportsLock_v4';\n      const v = localStorage.getItem(key) ?? localStorage.getItem('monthlyReportsLock_v4');\n      return v === null ? true : v === 'true';\n    } catch {\n      return true;\n    }\n  });\n  const [isMonthlyLockTogglePinOpen, setIsMonthlyLockTogglePinOpen] = useState<boolean>(false);\n  const [pendingMonthlyLockValue, setPendingMonthlyLockValue] = useState<boolean | null>(null);\n  const [isWalletSelectionPinEnabled, setIsWalletSelectionPinEnabled] = useState<boolean>(false);\n  const [isWalletSelectionPinToggleOpen, setIsWalletSelectionPinToggleOpen] = useState<boolean>(false);\n  const [pendingWalletSelectionPinValue, setPendingWalletSelectionPinValue] = useState<boolean | null>(null);\n  const [isDebtsPinRequired, setIsDebtsPinRequired] = useState<boolean>(() => {\n    try {\n      const key = user?.uid ? `debtsPinRequired_${user?.uid}` : 'debtsPinRequired';\n      const v = localStorage.getItem(key) ?? localStorage.getItem('debtsPinRequired');\n      return v === 'true';\n    } catch { return false; }\n  });\n  const [isDebtsPinToggleOpen, setIsDebtsPinToggleOpen] = useState<boolean>(false);\n  const [pendingDebtsPinValue, setPendingDebtsPinValue] = useState<boolean | null>(null);\n  const [isShopExpensesPinRequired, setIsShopExpensesPinRequired] = useState<boolean>(() => {\n    try {\n      const key = user?.uid ? `shopExpensesPinRequired_${user?.uid}` : 'shopExpensesPinRequired';\n      const v = localStorage.getItem(key) ?? localStorage.getItem('shopExpensesPinRequired');\n      return v === 'true';\n    } catch { return false; }\n  });\n  const [isShopExpensesPinToggleOpen, setIsShopExpensesPinToggleOpen] = useState<boolean>(false);\n  const [pendingShopExpensesPinValue, setPendingShopExpensesPinValue] = useState<boolean | null>(null);\n  const isAndroidNative = Capacitor?.isNativePlatform && Capacitor.getPlatform() === 'android';\n  const [isReceiptNoteEnabled, setIsReceiptNoteEnabled] = useState<boolean>(() => {\n    try {\n      const key = user?.uid ? `receiptNoteEnabled_${user?.uid}` : 'receiptNoteEnabled';\n      const v = localStorage.getItem(key) ?? localStorage.getItem('receiptNoteEnabled');\n      return v === null ? true : v === 'true';\n    } catch {\n      return true;\n    }\n  });\n  const [sessions, setSessions] = useState<Array<{ id: string; deviceId: string; deviceName?: string; deviceType?: string; createdAt?: Date; lastSeen?: Date }>>([]);\n  const [sessionsLoading, setSessionsLoading] = useState<boolean>(false);\n  const [sessionToLogout, setSessionToLogout] = useState<string | null>(null);\n  const [isSessionLogoutPinOpen, setIsSessionLogoutPinOpen] = useState<boolean>(false);\n  const [isTransferFeesEnabled, setIsTransferFeesEnabled] = useState<boolean>(() => {\n    try {\n      const key = user?.uid ? `transferFeesEnabled_${user.uid}` : 'transferFeesEnabled';\n      const v = localStorage.getItem(key) ?? localStorage.getItem('transferFeesEnabled');\n      return v === null ? true : v === 'true';\n    } catch {\n      return true;\n    }\n  });\n  const [isWithdrawSenderNameInputEnabled, setIsWithdrawSenderNameInputEnabled] = useState<boolean>(() => {\n    try {\n      const key = user?.uid ? `withdrawSenderNameInputEnabled_${user?.uid}` : 'withdrawSenderNameInputEnabled';\n      const v = localStorage.getItem(key) ?? localStorage.getItem('withdrawSenderNameInputEnabled');\n      return v === null ? false : v === 'true';\n    } catch {\n      return false;\n    }\n  });\n\n  const [isLinesPinEnabled, setIsLinesPinEnabled] = useState<boolean>(() => {\n    try {\n      const key = user?.uid ? `linesPinEnabled_${user.uid}` : 'linesPinEnabled';\n      const v = localStorage.getItem(key) ?? localStorage.getItem('linesPinEnabled');\n      return v === 'true';\n    } catch {\n      return false;\n    }\n  });\n  const [isLinesPinToggleOpen, setIsLinesPinToggleOpen] = useState<boolean>(false);\n  const [pendingLinesPinValue, setPendingLinesPinValue] = useState<boolean | null>(null);\n  const [isRestrictedSettingsHelpOpen, setIsRestrictedSettingsHelpOpen] = useState<boolean>(false);\n\n  const [isFactoryResetPinOpen, setIsFactoryResetPinOpen] = useState<boolean>(false);\n  const [isFactoryResetConfirmOpen, setIsFactoryResetConfirmOpen] = useState<boolean>(false);\n  const [isFactoryResetProcessing, setIsFactoryResetProcessing] = useState<boolean>(false);\n  const [excludeProductsFromReset, setExcludeProductsFromReset] = useState<boolean>(true); // Default to exclude\n  const [isSmsReadingEnabled, setIsSmsReadingEnabled] = useState<boolean>(() => {\n    try {\n      const v = (profile as any)?.smsReadingEnabled;\n      return v === undefined ? false : !!v;\n    } catch {\n      return false;\n    }\n  });\n  const [isSmsAutoRegisterEnabled, setIsSmsAutoRegisterEnabled] = useState<boolean>(() => {\n    try {\n      const v = (profile as any)?.smsAutoRegisterEnabled;\n      return v === undefined ? false : !!v;\n    } catch {\n      return false;\n    }\n  });\n  const [isReceiverPhoneInputEnabled, setIsReceiverPhoneInputEnabled] = useState<boolean>(() => {\n    try {\n      const key = user?.uid ? `receiverPhoneInputEnabled_${user?.uid}` : 'receiverPhoneInputEnabled';\n      const v = localStorage.getItem(key) ?? localStorage.getItem('receiverPhoneInputEnabled');\n      return v === null ? true : v === 'true';\n    } catch {\n      return true;\n    }\n  });\n  const [smsAutoConfirmDuration, setSmsAutoConfirmDuration] = useState<number>(5);\n  const [hiddenQuickActions, setHiddenQuickActions] = useState<string[]>(() => {\n    try {\n      const uid = user?.uid || 'default';\n      const raw = localStorage.getItem(`hiddenQuickActions_${uid}`) ?? localStorage.getItem('hiddenQuickActions');\n      const parsed = raw ? JSON.parse(raw) : [];\n      if (!Array.isArray(parsed)) return [];\n      return parsed.filter((x: any) => typeof x === 'string');\n    } catch {\n      return [];\n    }\n  });\n\n  const [isAutoTransferRecordEnabled, setIsAutoTransferRecordEnabled] = useState<boolean>(() => {\n    try {\n      const uid = user?.uid || undefined;\n      const perUser = uid ? localStorage.getItem(`autoTransferRecord_${uid}`) : null;\n      const global = localStorage.getItem('autoTransferRecord');\n      const v = perUser ?? global;\n      return v === 'true';\n    } catch {\n      return false;\n    }\n  });\n\n  useEffect(() => {\n    if (isAndroidNative && (window as any).CashyAndroid && typeof (window as any).CashyAndroid.setAutoTransferRecord === 'function') {\n      (window as any).CashyAndroid.setAutoTransferRecord(isAutoTransferRecordEnabled);\n    }\n  }, [isAndroidNative, isAutoTransferRecordEnabled]);\n\n  const handleAutoTransferRecordToggle = (nextVal: boolean) => {\n    setIsAutoTransferRecordEnabled(nextVal);\n    try {\n      const uid = user?.uid || undefined;\n      if (uid) {\n        localStorage.setItem(`autoTransferRecord_${uid}`, nextVal ? 'true' : 'false');\n      }\n      localStorage.setItem('autoTransferRecord', nextVal ? 'true' : 'false');\n      if (isAndroidNative && (window as any).CashyAndroid && typeof (window as any).CashyAndroid.setAutoTransferRecord === 'function') {\n        (window as any).CashyAndroid.setAutoTransferRecord(nextVal);\n      }\n    } catch {}\n    toast({\n      title: nextVal ? '   ' : '   ',\n      description: nextVal ? '      .' : '      .',\n    });\n  };\n\n  //         \n  const [cameraPermissionAccepted, setCameraPermissionAccepted] = useState<boolean>(() => {\n    try {\n      const uid = user?.uid || undefined;\n      const key = uid ? `camera_permission_${uid}` : 'camera_permission';\n      return localStorage.getItem(key) === 'true';\n    } catch {\n      return false;\n    }\n  });\n  const [isRequestingCamera, setIsRequestingCamera] = useState(false);\n\n  const requestCameraPermission = async () => {\n    setIsRequestingCamera(true);\n    try {\n      const isAndroid = Capacitor.isNativePlatform() && Capacitor.getPlatform() === 'android';\n      \n      if (isAndroid && (window as any).cordova?.plugins?.permissions) {\n        const permissions = (window as any).cordova.plugins.permissions;\n        await new Promise<void>((resolve, reject) => {\n          permissions.requestPermission(\n            permissions.CAMERA, \n            (status: any) => {\n              if (status && status.hasPermission) {\n                resolve();\n              } else {\n                reject(new Error('      '));\n              }\n            }, \n            (err: any) => reject(new Error('  : ' + JSON.stringify(err)))\n          );\n        });\n      } else {\n        if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n          throw new Error('    ');\n        }\n        const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } });\n        stream.getTracks().forEach(t => { try { t.stop(); } catch {} });\n      }\n\n      setCameraPermissionAccepted(true);\n      try {\n        const uid = user?.uid || undefined;\n        const key = uid ? `camera_permission_${uid}` : 'camera_permission';\n        localStorage.setItem(key, 'true');\n      } catch {}\n      toast({ title: '  ', description: '     .' });\n    } catch (err: any) {\n      setCameraPermissionAccepted(false);\n      try {\n        const uid = user?.uid || undefined;\n        const key = uid ? `camera_permission_${uid}` : 'camera_permission';\n        localStorage.setItem(key, 'false');\n      } catch {}\n      toast({ title: '   ', description: err?.message || '      .', variant: 'destructive' });\n    } finally {\n      setIsRequestingCamera(false);\n    }\n  };\n\n  const clearCameraPermission = () => {\n    setCameraPermissionAccepted(false);\n    try {\n      const uid = user?.uid || undefined;\n      const key = uid ? `camera_permission_${uid}` : 'camera_permission';\n      localStorage.removeItem(key);\n    } catch {}\n    toast({ title: '  ', description: '      .' });\n  };\n\n  const { theme, setTheme } = useTheme();\n  \n  // Video Modal State\n  const [videoModalOpen, setVideoModalOpen] = useState(false);\n  const [videoUrl, setVideoUrl] = useState('');\n  const [videoTitle, setVideoTitle] = useState('');\n\n  const openVideo = (url: string, title: string) => {\n    setVideoUrl(url);\n    setVideoTitle(title);\n    setVideoModalOpen(true);\n  };\n  const [isDark, setIsDark] = useState<boolean>(false);\n\n  useEffect(() => {\n    try {\n      const t = theme || (localStorage.getItem('theme') || 'system');\n      const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;\n      setIsDark(t === 'dark' || (t === 'system' && prefersDark));\n    } catch {}\n  }, [theme]);\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const uid = user?.uid || '';\n        if (!uid) return;\n        \n        // Sync local settings based on user ID\n        const monthlyLock = localStorage.getItem(`monthlyReportsLock_v4_${uid}`) ?? localStorage.getItem('monthlyReportsLock_v4');\n        if (monthlyLock !== null) {\n          setIsMonthlyReportsLockEnabled(monthlyLock === 'true');\n        }\n\n        const dailyLock = localStorage.getItem(`dailyReportsLockEnabled_${uid}`) ?? localStorage.getItem('dailyReportsLockEnabled');\n        setIsDailyReportsLockEnabled(dailyLock === 'true');\n\n        const data = await userDataService.getUserData(uid);\n        const remote: any = (data as any)?.withdrawSenderNameInputEnabled;\n        if (typeof remote === 'boolean') {\n          setIsWithdrawSenderNameInputEnabled(remote);\n          try { localStorage.setItem(`withdrawSenderNameInputEnabled_${uid}`, remote ? 'true' : 'false'); } catch {}\n        }\n        const remoteFees: any = (data as any)?.transferFeesEnabled;\n        if (typeof remoteFees === 'boolean') {\n          setIsTransferFeesEnabled(remoteFees);\n          try { localStorage.setItem(`transferFeesEnabled_${uid}`, remoteFees ? 'true' : 'false'); } catch {}\n        }\n\n        const remoteReceiverInput: any = (data as any)?.receiverPhoneInputEnabled;\n        if (typeof remoteReceiverInput === 'boolean') {\n          setIsReceiverPhoneInputEnabled(remoteReceiverInput);\n          try { localStorage.setItem(`receiverPhoneInputEnabled_${uid}`, remoteReceiverInput ? 'true' : 'false'); } catch {}\n        }\n        \n        const remoteLinesPin: any = (data as any)?.linesPinEnabled;\n        if (typeof remoteLinesPin === 'boolean') {\n          setIsLinesPinEnabled(remoteLinesPin);\n          try { localStorage.setItem(`linesPinEnabled_${uid}`, remoteLinesPin ? 'true' : 'false'); } catch {}\n        }\n\n        const remoteHidden: any = (data as any)?.hiddenQuickActions;\n        if (Array.isArray(remoteHidden)) {\n          const cleaned = remoteHidden.map((id: any) => String(id));\n          setHiddenQuickActions(cleaned);\n          try {\n            localStorage.setItem(`hiddenQuickActions_${uid}`, JSON.stringify(cleaned));\n            localStorage.setItem('hiddenQuickActions', JSON.stringify(cleaned));\n          } catch {}\n        }\n      } catch {}\n    })();\n  }, [user?.uid]);\n\n  const handleReceiptNoteToggle = (nextVal: boolean) => {\n    setIsReceiptNoteEnabled(nextVal);\n    try {\n      if (user?.uid) {\n        localStorage.setItem(`receiptNoteEnabled_${user.uid}`, nextVal ? 'true' : 'false');\n      }\n      localStorage.setItem('receiptNoteEnabled', nextVal ? 'true' : 'false');\n    } catch {}\n    toast({\n      title: nextVal ? '  ' : '   ',\n      description: nextVal ? '    .' : '      .',\n    });\n  };\n\n  const handleTransferFeesToggle = (nextVal: boolean) => {\n    setIsTransferFeesEnabled(nextVal);\n    try {\n      if (user?.uid) {\n        localStorage.setItem(`transferFeesEnabled_${user.uid}`, nextVal ? 'true' : 'false');\n        userDataService.updateUserData(user.uid, { transferFeesEnabled: nextVal });\n      }\n      localStorage.setItem('transferFeesEnabled', nextVal ? 'true' : 'false');\n    } catch {}\n    toast({\n      title: nextVal ? '   ' : '   ',\n      description: nextVal ? '       .' : '          .',\n    });\n  };\n\n  const handleLinesPinToggle = (nextVal: boolean) => {\n    setPendingLinesPinValue(nextVal);\n    setIsLinesPinToggleOpen(true);\n  };\n\n  const handleWithdrawSenderNameInputToggle = (nextVal: boolean) => {\n    setIsWithdrawSenderNameInputEnabled(nextVal);\n    try {\n      if (user?.uid) {\n        localStorage.setItem(`withdrawSenderNameInputEnabled_${user.uid}`, nextVal ? 'true' : 'false');\n        userDataService.updateUserData(user.uid, { withdrawSenderNameInputEnabled: nextVal });\n      }\n      localStorage.setItem('withdrawSenderNameInputEnabled', nextVal ? 'true' : 'false');\n    } catch {}\n    toast({\n      title: nextVal ? '   ' : '    ',\n      description: nextVal ? '       .' : '        .',\n    });\n  };\n  const handleReceiverPhoneInputToggle = (nextVal: boolean) => {\n    setIsReceiverPhoneInputEnabled(nextVal);\n    try {\n      if (user?.uid) {\n        localStorage.setItem(`receiverPhoneInputEnabled_${user.uid}`, nextVal ? 'true' : 'false');\n        userDataService.updateUserData(user.uid, { receiverPhoneInputEnabled: nextVal });\n      }\n      localStorage.setItem('receiverPhoneInputEnabled', nextVal ? 'true' : 'false');\n    } catch {}\n    toast({\n      title: nextVal ? '   ' : '    ',\n      description: nextVal ? '      .' : '       .',\n    });\n  };\n  const handleSmsReadingToggle = async (nextVal: boolean) => {\n    setIsSmsReadingEnabled(nextVal);\n    try {\n      localStorage.setItem('smsReadingEnabled', nextVal ? 'true' : 'false');\n      await updateUserProfile({ smsReadingEnabled: nextVal });\n    } catch {}\n    toast({\n      title: nextVal ? '    SMS' : '    SMS',\n      description: nextVal ? '     .' : '       .',\n    });\n  };\n\n  const handleSmsAutoRegisterToggle = async (nextVal: boolean) => {\n    setIsSmsAutoRegisterEnabled(nextVal);\n    try {\n      if (user?.uid) {\n        localStorage.setItem(`smsAutoRegisterEnabled_${user.uid}`, nextVal ? 'true' : 'false');\n      }\n      localStorage.setItem('smsAutoRegisterEnabled', nextVal ? 'true' : 'false');\n      await updateUserProfile({ smsAutoRegisterEnabled: nextVal });\n    } catch {}\n    toast({\n      title: nextVal ? '   ' : '   ',\n      description: nextVal ? '       .' : '     .',\n    });\n  };\n\n  const handleQuickActionVisibilityChange = (actionId: string, label: string, hidden: boolean) => {\n    setHiddenQuickActions(prev => {\n      const next = (() => {\n        if (hidden) {\n          if (prev.includes(actionId)) return prev;\n          return [...prev, actionId];\n        } else {\n          return prev.filter(id => id !== actionId);\n        }\n      })();\n      try {\n        const uid = user?.uid || 'default';\n        localStorage.setItem(`hiddenQuickActions_${uid}`, JSON.stringify(next));\n        localStorage.setItem('hiddenQuickActions', JSON.stringify(next));\n        if (user?.uid) {\n          userDataService.updateUserData(user.uid, { hiddenQuickActions: next });\n        }\n        try {\n          window.dispatchEvent(new CustomEvent('hiddenQuickActionsChanged', { detail: { hiddenQuickActions: next } }));\n        } catch {}\n      } catch {}\n      try {\n        toast({\n          title: hidden ? '     ' : '     ',\n          description: `: ${label}`,\n        });\n      } catch {}\n      return next;\n    });\n  };\n\n\n  //   ADB    \n  const [adbDevices, setAdbDevices] = useState<Array<{ id: string; model?: string; name?: string; type?: string }>>([]);\n  const [selectedDevice, setSelectedDevice] = useState<string>(() => {\n    try { return localStorage.getItem('cashySelectedDevice') || ''; } catch { return ''; }\n  });\n  const [deviceStatus, setDeviceStatus] = useState<string>('');\n  const [wifiIp, setWifiIp] = useState<string>(() => {\n    try {\n      const raw = localStorage.getItem('cashyWifiIp') || '';\n      return raw.split(':')[0] || '';\n    } catch { return ''; }\n  });\n  const [telegramChatId, setTelegramChatId] = useState<string>('');\n  const [isZeroPlan, setIsZeroPlan] = useState<boolean>(false);\n  //    ( )\n  const KNOWN_DEVICES_KEY = 'cashyKnownDevices';\n  const getKnownDevices = (): string[] => {\n    try {\n      const raw = localStorage.getItem(KNOWN_DEVICES_KEY);\n      const arr = raw ? JSON.parse(raw) : [];\n      return Array.isArray(arr) ? arr.filter((x) => typeof x === 'string') : [];\n    } catch { return []; }\n  };\n  const addKnownDevice = (id: string) => {\n    try {\n      const set = new Set(getKnownDevices());\n      set.add(id);\n      localStorage.setItem(KNOWN_DEVICES_KEY, JSON.stringify(Array.from(set)));\n    } catch {}\n  };\n\n  const getCurrentDeviceId = () => {\n    try {\n      const key = 'device_id';\n      const existing = localStorage.getItem(key);\n      if (existing && existing.length > 0) return existing;\n      const uuid = typeof crypto !== 'undefined' && (crypto as any).randomUUID ? (crypto as any).randomUUID() : `dev-${Math.random().toString(36).slice(2)}-${Date.now()}`;\n      localStorage.setItem(key, uuid);\n      return uuid;\n    } catch {\n      return 'unknown-device';\n    }\n  };\n\n  const getSessionDeviceTypeLabel = (rawType?: string) => {\n    const t = String(rawType || '').toLowerCase();\n    if (t === 'desktop') return '  ';\n    if (t === 'web') return '  ';\n    if (t === 'mobile-web') return ' ';\n    if (t === 'android') return ' ';\n    return ' ';\n  };\n  \n  \n  //     USSD +   PIN\n  const [receiver, setReceiver] = useState<string>('');\n  const [amount, setAmount] = useState<string>('');\n  const [pinOpen, setPinOpen] = useState<boolean>(false);\n  const [transferStatus, setTransferStatus] = useState<string>('');\n  //   Cashy Bridge (  +  )\n  const [bridgeLink, setBridgeLink] = useState<string>(() => String((profile as any)?.bridgeLink || ''));\n  const [bridgeDeviceId, setBridgeDeviceId] = useState<string>(() => String((profile as any)?.bridgeDeviceId || ''));\n\n  //    ( IP    )    \n  const SHOW_DEVICE_UTILS = (() => {\n    if (isAndroidNative) return false;\n    const isElectron = typeof window !== 'undefined' && (\n      (window as any).electronAPI ||\n      window.location.protocol === 'file:' ||\n      (typeof navigator !== 'undefined' && navigator.userAgent.toLowerCase().includes('electron'))\n    );\n    return isElectron && !isMobile;\n  })();\n  const SHOW_TRANSFER_UI = false;\n\n\n  //        \n  const getSelectedWalletPhone = (): string => {\n    try {\n      const selectedKey = `selectedWallet_${user?.uid || 'default'}`;\n      const walletsKey = `wallets_${user?.uid || 'default'}`;\n      const selectedId = localStorage.getItem(selectedKey);\n      const raw = localStorage.getItem(walletsKey);\n      const list = raw ? JSON.parse(raw) : [];\n      if (selectedId && Array.isArray(list)) {\n        const w = list.find((x: any) => x && x.id === selectedId);\n        return (w?.phone || '').toString();\n      }\n      return '';\n    } catch {\n      return '';\n    }\n  };\n\n  useEffect(() => {\n    //         \n    setBridgeLink(String((profile as any)?.bridgeLink || ''));\n    setBridgeDeviceId(String((profile as any)?.bridgeDeviceId || ''));\n  }, [profile?.bridgeLink, profile?.bridgeDeviceId]);\n\n  useEffect(() => {\n    try {\n      const v = (profile as any)?.smsReadingEnabled;\n      if (v !== undefined) setIsSmsReadingEnabled(!!v);\n    } catch {}\n  }, [(profile as any)?.smsReadingEnabled]);\n\n  useEffect(() => {\n    try {\n      const v = (profile as any)?.smsAutoRegisterEnabled;\n      if (v !== undefined) setIsSmsAutoRegisterEnabled(!!v);\n    } catch {}\n  }, [(profile as any)?.smsAutoRegisterEnabled]);\n\n  useEffect(() => {\n    try {\n      const v = (profile as any)?.smsAutoConfirmDuration;\n      if (typeof v === 'number') setSmsAutoConfirmDuration(v);\n    } catch {}\n  }, [(profile as any)?.smsAutoConfirmDuration]);\n\n  const handleConnectWifi = async () => {\n    try {\n      const api: any = (window as any).electronAPI;\n      if (!api || typeof api.connectWifi !== 'function') {\n        setDeviceStatus('        ');\n        return;\n      }\n      if (!wifiIp.trim()) {\n        setDeviceStatus('   IP   (: 192.168.1.8:5555)');\n        return;\n      }\n      setDeviceStatus('    WiFi...');\n      const target = `${wifiIp.trim()}:5555`;\n      const res = await api.connectWifi(target);\n      setDeviceStatus(`  : ${String(res || '').trim() || ''}`);\n      addKnownDevice(target);\n      setSelectedDevice(target);\n    } catch (err: any) {\n      setDeviceStatus(`  : ${err?.message || String(err)}`);\n    }\n  };\n\n  useEffect(() => {\n    try { localStorage.setItem('cashyWifiIp', `${wifiIp || ''}:5555`); } catch {}\n  }, [wifiIp]);\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const uid = user?.uid || '';\n        if (!uid) return;\n        const data = await userDataService.getUserData(uid);\n        const val = String((data as any)?.telegramChatId || '').trim();\n        setTelegramChatId(val);\n      } catch {}\n    })();\n  }, [user?.uid]);\n\n  useEffect(() => {\n    const api: any = (window as any).electronAPI;\n    if (api && typeof api.onAdbDevices === 'function') {\n      api.onAdbDevices((list: Array<{ id: string; model?: string; name?: string; type?: string }>) => {\n        const devices = Array.isArray(list) ? list : [];\n        //    (USB  WiFi)  \n        const filtered = devices;\n        setAdbDevices(filtered);\n        //          \n        const saved = (() => { try { return localStorage.getItem('cashySelectedDevice') || ''; } catch { return ''; } })();\n        const existsExact = saved && filtered.some(d => d.id === saved);\n        if (existsExact) {\n          setSelectedDevice(saved);\n        } else {\n          //     USB  WiFi     \n          const base = saved ? String(saved).split(':')[0] : '';\n          const wifiCandidate = base\n            ? filtered.find(d => (d.id.startsWith(base) || d.id.includes(base)) && String(d.type).toLowerCase().includes('wifi'))\n            : undefined;\n          if (wifiCandidate?.id) {\n            setSelectedDevice(wifiCandidate.id);\n          } else if (!selectedDevice && filtered[0]?.id) {\n            setSelectedDevice(filtered[0].id);\n          }\n        }\n      });\n    }\n  }, []);\n\n  \n\n  useEffect(() => {\n    try {\n      if (selectedDevice) localStorage.setItem('cashySelectedDevice', selectedDevice);\n    } catch {}\n  }, [selectedDevice]);\n\n  useEffect(() => {\n    try {\n      const key = user?.uid ? `dailyReportsLockEnabled_${user.uid}` : 'dailyReportsLockEnabled';\n      const v = localStorage.getItem(key) ?? localStorage.getItem('dailyReportsLockEnabled');\n      setIsDailyReportsLockEnabled(v === 'true');\n    } catch {}\n  }, [user?.uid]);\n\n\n\n  useEffect(() => {\n    if (isAndroidNative) {\n      try {\n        const val = localStorage.getItem('autoTransferRecord') === 'true';\n        if ((window as any).Android && typeof (window as any).Android.setAutoTransferRecord === 'function') {\n          (window as any).Android.setAutoTransferRecord(val);\n        }\n      } catch {}\n    }\n  }, [isAndroidNative]);\n\n  //        \n  useEffect(() => {\n    try {\n      setIsWalletSelectionPinEnabled(walletSelectionPinService.isEnabled(user?.uid));\n    } catch {}\n  }, [user?.uid]);\n\n  const handleDailyLockToggle = (next: boolean) => {\n    setPendingDailyLockValue(next);\n    setIsDailyLockTogglePinOpen(true);\n  };\n\n  const handleMonthlyLockToggle = (next: boolean) => {\n    setPendingMonthlyLockValue(next);\n    setIsMonthlyLockTogglePinOpen(true);\n  };\n\n  const handleWalletSelectionPinToggle = (next: boolean) => {\n    setPendingWalletSelectionPinValue(next);\n    setIsWalletSelectionPinToggleOpen(true);\n  };\n\n  const handleDebtsPinToggle = (next: boolean) => {\n    setPendingDebtsPinValue(next);\n    setIsDebtsPinToggleOpen(true);\n  };\n  const handleShopExpensesPinToggle = (next: boolean) => {\n    setPendingShopExpensesPinValue(next);\n    setIsShopExpensesPinToggleOpen(true);\n  };\n\n  const handleFactoryReset = async () => {\n    if (!user?.uid) {\n      toast({\n        title: '   ',\n        description: '        .',\n        variant: 'destructive',\n      });\n      return;\n    }\n\n    setIsFactoryResetProcessing(true);\n    try {\n      const res = await userDataService.factoryResetUserData(user.uid, { excludeProducts: excludeProductsFromReset });\n      const data: any = res || {};\n\n      if (data.success === false) {\n        toast({\n          title: '     ',\n          description: '          .',\n          variant: 'destructive',\n        });\n      } else {\n        toast({\n          title: '   ',\n          description: '         .',\n        });\n      }\n\n      setIsFactoryResetConfirmOpen(false);\n\n      try {\n        await signOut();\n      } catch {}\n    } catch (error) {\n      console.error('factoryResetUserData error:', error);\n      toast({\n        title: '   ',\n        description: '      .    .',\n        variant: 'destructive',\n      });\n    } finally {\n      setIsFactoryResetProcessing(false);\n    }\n  };\n\n  //      \n  useEffect(() => {\n    const refreshSubscriptionData = async () => {\n      try {\n        //  force=true          \n        await checkSubscriptionStatus(true);\n        console.log('       ');\n      } catch (error) {\n        console.error('    :', error);\n      }\n    };\n\n    refreshSubscriptionData();\n  }, [checkSubscriptionStatus]);\n\n  useEffect(() => {\n    (async () => {\n      try {\n        let zero = false;\n        const rawLocalPlan: any = (userSubscription as any)?.subscription?.planType ?? (userSubscription as any)?.planType ?? null;\n        const planLocalStr = typeof rawLocalPlan === 'string' ? rawLocalPlan.toLowerCase() : null;\n        if (rawLocalPlan === SubscriptionPlan.ZERO || planLocalStr === 'zero' || rawLocalPlan === 0 || planLocalStr === '0') {\n          zero = true;\n        } else if (user?.uid) {\n          const remoteSub: any = await getUserSubscription(user.uid);\n          const rawRemotePlan: any = remoteSub?.planType ?? remoteSub?.plan ?? null;\n          const planRemoteStr = typeof rawRemotePlan === 'string' ? rawRemotePlan.toLowerCase() : null;\n          if (rawRemotePlan === SubscriptionPlan.ZERO || planRemoteStr === 'zero' || rawRemotePlan === 0 || planRemoteStr === '0') zero = true;\n        }\n        setIsZeroPlan(zero);\n      } catch { setIsZeroPlan(false); }\n    })();\n  }, [user?.uid, (userSubscription as any)?.subscription?.planType, (userSubscription as any)?.planType]);\n\n  //          \n  useEffect(() => {\n    const loadDownloads = async () => {\n      try {\n        const data = await getAppDownloads();\n        setAppDownloads(data);\n      } catch (e) {\n        console.warn('   ', e);\n      }\n    };\n    loadDownloads();\n  }, []);\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const handleAvatarSelect = (avatarId: string) => {\n    setFormData(prev => ({\n      ...prev,\n      avatarId\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n\n    try {\n      //      ( )\n      try {\n        const uid = user?.uid || 'default';\n        const s1 = String(formData.sim1Number || '').trim();\n        const s2 = String(formData.sim2Number || '').trim();\n        localStorage.setItem(`sim1Number_${uid}`, s1);\n        localStorage.setItem(`sim2Number_${uid}`, s2);\n        localStorage.setItem('sim1Number', s1);\n        localStorage.setItem('sim2Number', s2);\n        try {\n          const { Preferences } = await import('@capacitor/preferences');\n          await Preferences.set({ key: 'sim1_number', value: s1 });\n          await Preferences.set({ key: 'sim2_number', value: s2 });\n        } catch {}\n        \n        // Dispatch event for other components to update immediately\n        try {\n          const event = new CustomEvent('simNumbersChanged', { \n            detail: { sim1: s1, sim2: s2 } \n          });\n          window.dispatchEvent(event);\n        } catch {}\n      } catch {}\n\n      //       \n      //     (     )\n      await updateUserProfile({\n        fullName: formData.fullName,\n        phone: formData.phone,\n        smsAutoConfirmDuration: smsAutoConfirmDuration\n      });\n\n      //      \n      if (formData.avatarId !== profile?.avatarId) {\n        await updateAvatarId(formData.avatarId);\n      }\n\n      if (user?.uid) {\n        try {\n          await userDataService.updateUserData(user.uid, {\n            telegramChatId: isZeroPlan ? null : (telegramChatId.trim() || null)\n          });\n        } catch {}\n      }\n      await refreshProfile();\n\n      toast({\n        title: \"  \",\n        description: \"     \",\n      });\n\n      navigate('/user/dashboard', { replace: true });\n    } catch (error) {\n      console.error('Error updating profile:', error);\n      toast({\n        title: \"  \",\n        description: \"    \",\n        variant: \"destructive\",\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    try {\n      const uid = user?.uid || 'default';\n      const s1 = (localStorage.getItem(`sim1Number_${uid}`) ?? localStorage.getItem('sim1Number') ?? '') || '';\n      const s2 = (localStorage.getItem(`sim2Number_${uid}`) ?? localStorage.getItem('sim2Number') ?? '') || '';\n      setFormData(prev => ({ ...prev, sim1Number: s1, sim2Number: s2 }));\n    } catch {}\n  }, [user?.uid]);\n\n  const handleRefreshSubscription = async () => {\n    setIsRefreshing(true);\n    try {\n      //     \n      await refreshProfile();\n      await checkSubscriptionStatus();\n      \n      console.log('    :', {\n        userSubscription,\n        isSubscriptionActive\n      });\n      \n      toast({\n        title: \"   \",\n        description: \"    \",\n      });\n    } catch (error) {\n      console.error('Error refreshing subscription:', error);\n      toast({\n        title: \"  \",\n        description: \"     \",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsRefreshing(false);\n    }\n  };\n\n  return (\n    <div className=\"h-[100dvh] overflow-y-auto p-4 relative bg-gray-50 dark:bg-slate-950 no-scrollbar\">\n      <div className=\"max-w-2xl mx-auto\">\n        {/* Header */}\n        <div className=\"flex items-center gap-4 mb-6\">\n{/* Back button removed as per request */}\n          <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\"> </h1>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={() => openVideo('https://www.youtube.com/watch?v=Nba0j72EAgo', '  ')}\n            className=\"gap-1 px-2 text-rose-600 hover:text-rose-700 hover:bg-rose-50 mx-2\"\n          >\n            <PlayCircle className=\"h-4 w-4\" />\n            <span className=\"text-xs font-medium\">  </span>\n          </Button>\n</div>\n\n        {/* Theme Toggle */}\n        <Card className=\"shadow-lg mb-6 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 dark:text-white\">\n              {isDark ? <Moon className=\"h-5 w-5\" /> : <Sun className=\"h-5 w-5\" />}\n               \n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex items-center justify-between\">\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">/   </p>\n              <Button\n                type=\"button\"\n                onClick={() => {\n                  const next = !isDark;\n                  setIsDark(next);\n                  const nextTheme = next ? 'dark' : 'light';\n                  try { localStorage.setItem('theme', nextTheme); } catch {}\n                  setTheme(nextTheme);\n                  try {\n                    if (user?.uid) {\n                      setDoc(doc(db, 'userSettings', user.uid), { darkMode: nextTheme }, { merge: true });\n                    }\n                  } catch {}\n                  toast({ title: next ? '   ' : '   ' });\n                }}\n                className={isDark ? \"px-4 bg-slate-800 text-white hover:bg-slate-700\" : \"px-4 bg-black text-white hover:bg-gray-800\"}\n              >\n                {isDark ? '  ' : '  '}\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Eye Comfort Toggle */}\n        {setEyeComfortMode && (\n          <Card className=\"shadow-lg mb-6 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2 dark:text-white\">\n                <Sun className={`h-5 w-5 ${eyeComfortMode ? 'text-orange-500 fill-orange-500' : 'text-gray-500'}`} />\n                  \n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"flex items-center justify-between\">\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">     </p>\n                <Switch\n                  checked={eyeComfortMode}\n                  onCheckedChange={(checked) => {\n                    setEyeComfortMode(checked);\n                    toast({\n                      title: checked ? '    ' : '    ',\n                      description: checked ? '     .' : '   .',\n                    });\n                  }}\n                  className=\"data-[state=checked]:bg-orange-500\"\n                />\n              </div>\n            </CardContent>\n          </Card>\n        )}\n\n        {/* App Version Badge */}\n        <div className=\"mb-4\">\n          {(() => {\n            const isElectron = typeof window !== 'undefined' && !isAndroidNative && (\n              (window as any).electronAPI ||\n              window.location.protocol === 'file:' ||\n              (typeof navigator !== 'undefined' && navigator.userAgent.toLowerCase().includes('electron'))\n            );\n            const [runtimeDesktopVersion, setRuntimeDesktopVersion] = React.useState<string | undefined>(undefined);\n            React.useEffect(() => {\n              try {\n                const api: any = (window as any).electronAPI;\n                if (api && typeof api.appVersion === 'function') {\n                  api.appVersion().then((v: any) => {\n                    if (typeof v === 'string' && !v.startsWith('err:')) setRuntimeDesktopVersion(v);\n                  }).catch(() => {});\n                }\n              } catch {}\n            }, []);\n            const version = (() => {\n              const localVersion = (import.meta as any)?.env?.VITE_APP_VERSION as string | undefined;\n              const isElectronEnv = typeof window !== 'undefined' && ((window as any).electronAPI || window.location.protocol === 'file:' || (typeof navigator !== 'undefined' && navigator.userAgent.toLowerCase().includes('electron')));\n              if (isElectronEnv && (profile as any)?.desktopInstalledVersion) return (profile as any)?.desktopInstalledVersion;\n              if (isElectronEnv && runtimeDesktopVersion) return runtimeDesktopVersion;\n              if (localVersion) return localVersion;\n              if (!appDownloads && !profile) return undefined;\n              if (isMobile) return (profile as any)?.androidInstalledVersion || (profile as any)?.lastAckAndroidVersion || appDownloads?.androidVersion || appDownloads?.pcVersion;\n              if (isElectronEnv) return appDownloads?.pcVersion || appDownloads?.androidVersion;\n              return appDownloads?.pcVersion || appDownloads?.androidVersion;\n            })();\n            const label = isMobile ? '  ()' : '  ()';\n            return (\n              <div className=\"inline-flex items-center gap-2 rounded-lg border border-indigo-200 bg-indigo-50 px-3 py-2 text-sm text-indigo-700\">\n                <span className=\"font-semibold\">{label}:</span>\n                <span className=\"rounded-md bg-white px-2 py-1 border border-indigo-200\">\n                  {version ? `v${version}` : ' '}\n                </span>\n              </div>\n            );\n          })()}\n        </div>\n\n        {/* Profile Settings Card */}\n      <Card className=\"shadow-lg mb-6 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 dark:text-white\">\n              <User className=\"h-5 w-5\" />\n                \n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <form onSubmit={handleSubmit} className=\"space-y-6\">\n              {/* Avatar Selection */}\n              <div className=\"space-y-2\">\n                <Label className=\"dark:text-white\"> </Label>\n                <div className=\"flex justify-center\">\n                  <AvatarSelector\n                    selectedAvatarId={formData.avatarId}\n                    onAvatarSelect={handleAvatarSelect}\n                  />\n                </div>\n              </div>\n\n              {/* Full Name */}\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"fullName\"> </Label>\n                <Input\n                  id=\"fullName\"\n                  name=\"fullName\"\n                  type=\"text\"\n                  value={formData.fullName}\n                  onChange={handleInputChange}\n                  placeholder=\"  \"\n                  className=\"text-right\"\n                />\n              </div>\n\n              {/* Phone */}\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"phone\"> </Label>\n              <Input\n                id=\"phone\"\n                name=\"phone\"\n                type=\"tel\"\n                value={formData.phone}\n                onChange={handleInputChange}\n                placeholder=\"  \"\n                className=\"text-right\"\n              />\n            </div>\n\n            \n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"telegramChatId\">Telegram Chat ID</Label>\n              <Input\n                id=\"telegramChatId\"\n                name=\"telegramChatId\"\n                type=\"text\"\n                value={telegramChatId}\n                onChange={(e) => { if (!isZeroPlan) setTelegramChatId(e.target.value); }}\n                disabled={isZeroPlan}\n                readOnly={isZeroPlan}\n                placeholder=\" Chat ID\"\n                className=\"text-right\"\n              />\n              \n              \n            </div>\n\n              {/* Device Selection */}\n              <div className=\"space-y-2\">\n                <Label>   </Label>\n              <select\n                value={selectedDevice}\n                onChange={(e) => setSelectedDevice(e.target.value)}\n                className=\"border rounded-md p-2 w-full text-right\"\n              >\n                <option value=\"\">   </option>\n                {adbDevices.map((d, i) => (\n                  <option key={i} value={d.id}>\n                    {(d.model || d.name || 'Android')} ({d.type || 'USB/WiFi'})  {d.id}\n                  </option>\n                ))}\n              </select>\n              {SHOW_DEVICE_UTILS && (\n                <div className=\"space-y-2\">\n                  <div className=\"flex gap-2\">\n                    <Button\n                      type=\"button\"\n                      variant=\"default\"\n                      onClick={async () => {\n                        try {\n                          if (!selectedDevice) {\n                            setDeviceStatus('   ');\n                            return;\n                          }\n                          const api: any = (window as any).electronAPI;\n                          if (!api || typeof api.sendUssd !== 'function') {\n                            setDeviceStatus('        ');\n                            return;\n                          }\n                          const testCode = getUssdCode('01000000000', 10) || '*9*7*01000000000*10#';\n                          try {\n                            await api.sendUssd(selectedDevice, testCode);\n                          } catch (e1: any) {\n                            const maybeIp = selectedDevice.includes(':') ? selectedDevice.split(':').slice(0,2).join(':') : '';\n                            if (maybeIp && typeof api.connectWifi === 'function') {\n                              await api.connectWifi(maybeIp);\n                              await api.sendUssd(selectedDevice, testCode);\n                            } else {\n                              throw e1;\n                            }\n                          }\n                          setDeviceStatus(`      ${selectedDevice}`);\n                        } catch (err) {\n                          console.error('USSD test error:', err);\n                          setDeviceStatus('    ');\n                        }\n                      }}\n                    >\n                         \n                    </Button>\n                    <div className=\"flex items-center gap-2 flex-1\">\n                      <Input\n                        value={wifiIp}\n                        onChange={(e) => {\n                          const raw = e.target.value || '';\n                          const base = raw.split(':')[0];\n                          const cleaned = base.replace(/[^\\d.]/g, '');\n                          setWifiIp(cleaned);\n                        }}\n                        placeholder=\": 192.168.1.8\"\n                        className=\"flex-1 text-right\"\n                      />\n                      <div className=\"px-2 h-9 flex items-center rounded-md border bg-gray-50 text-xs text-gray-600 whitespace-nowrap\">\n                        :5555\n                      </div>\n                    </div>\n                    <Button type=\"button\" variant=\"outline\" onClick={handleConnectWifi}>\n                         WiFi\n                    </Button>\n                  </div>\n                  \n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    className=\"w-full border-red-200 bg-red-50 text-red-600 hover:bg-red-100 hover:text-red-700 flex items-center justify-center gap-2\"\n                    onClick={() => openVideo('https://www.youtube.com/watch?v=yAjdqhsJkTo', '  ')}\n                  >\n                    <PlayCircle className=\"h-4 w-4\" />\n                       ()\n                  </Button>\n                  \n                  {!(window as any).electronAPI && (\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    className=\"w-full border-red-200 bg-red-50 text-red-600 hover:bg-red-100 hover:text-red-700 flex items-center justify-center gap-2\"\n                    onClick={() => openVideo('https://www.youtube.com/watch?v=CdrZ4m9LtE4', '     ')}\n                  >\n                    <PlayCircle className=\"h-4 w-4\" />\n                          ()\n                  </Button>\n                  )}\n                </div>\n              )}\n              {/*     USSD   PIN */}\n              {SHOW_TRANSFER_UI && (\n              <div className=\"mt-4 p-3 bg-gray-50 rounded-lg border space-y-3\">\n                <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-2\">\n                  <div className=\"flex items-center gap-2\">\n                    <Input\n                      value={receiver}\n                      onChange={(e) => setReceiver(e.target.value)}\n                      placeholder=\" \"\n                      className=\"text-right flex-1\"\n                    />\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <Input\n                      value={amount}\n                      onChange={(e) => setAmount(e.target.value)}\n                      placeholder=\"\"\n                      className=\"text-right flex-1\"\n                    />\n                  </div>\n                  <Button\n                    type=\"button\"\n                    className=\"w-full flex items-center gap-2\"\n                    onClick={async () => {\n                      try {\n                        setTransferStatus('');\n                        const receiverDigits = String(receiver || '').replace(/\\D/g, '');\n                        const amountInt = Math.max(1, Math.round(Number(String(amount || '0').replace(/\\D/g, '')) || 0));\n                        const senderPhone = getSelectedWalletPhone();\n                        if (!senderPhone) {\n                          setTransferStatus('     ');\n                          return;\n                        }\n                        const code = getUssdCodeBySender(senderPhone, receiverDigits, amountInt);\n                        if (!code) {\n                          setTransferStatus('       ');\n                          return;\n                        }\n                        const api: any = (window as any).electronAPI;\n                        if (api && typeof api.sendUssd === 'function' && selectedDevice) {\n                          try { /*       */ } catch {}\n                          //  :   ADB     \n                          try {\n                            const pick = typeof api.pickSimAutomatically === 'function'\n                              ? await api.pickSimAutomatically(selectedDevice, senderPhone)\n                              : { deviceId: selectedDevice, slot: 0 };\n                            const decoratedId = `${pick.deviceId}:sim${pick.slot}`;\n                            await api.sendUssd(decoratedId, code);\n                          } catch (e1: any) {\n                            try {\n                              //       \n                              await api.sendUssd(selectedDevice, code);\n                            } catch (e2: any) {\n                              //     WiFi         IP:PORT\n                              const maybeIp = selectedDevice.includes(':') ? selectedDevice.split(':').slice(0,2).join(':') : '';\n                              if (maybeIp && typeof api.connectWifi === 'function') {\n                                try {\n                                  await api.connectWifi(maybeIp);\n                                  await api.sendUssd(selectedDevice, code);\n                                } catch (e3: any) {\n                                  throw e3;\n                                }\n                              } else {\n                                throw e2;\n                              }\n                            }\n                          }\n                          setTransferStatus(`    : ${code}`);\n                          setPinOpen(true);\n                        } else {\n                          // :       USSD\n                          openUssdDeepLink(code);\n                          setTransferStatus(`     : ${code}`);\n                          setPinOpen(true);\n                        }\n                      } catch (err: any) {\n                        console.error('USSD send error:', err);\n                        setTransferStatus(`  : ${err?.message || String(err)}`);\n                        //   :    Wireless debugging  adb connect\n                        setDeviceStatus('   .    \"  WiFi\"   Wireless debugging     ADB.');\n                      }\n                    }}\n                  >\n                    <Send className=\"h-4 w-4\" />\n                     \n                  </Button>\n                </div>\n                {transferStatus && (\n                  <p className=\"text-center text-sm mt-2\">{transferStatus}</p>\n                )}\n                <div className=\"text-xs text-gray-500 text-right\">\n                              .\n                </div>\n              </div>\n              )}\n              {/*    (ngrok)  */}\n              {SHOW_TRANSFER_UI && (\n              <div className=\"mt-4 p-3 bg-white rounded-lg border space-y-3\">\n                <p className=\"text-sm text-gray-600 text-right\">\n                        :    (ngrok)    .\n                </p>\n                <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-2\">\n                  <Input\n                    value={bridgeLink}\n                    onChange={(e) => setBridgeLink(e.target.value)}\n                    placeholder=\"  (: https://xxxx.ngrok-free.app)\"\n                    className=\"text-right\"\n                  />\n                  <Input\n                    value={bridgeDeviceId}\n                    onChange={(e) => setBridgeDeviceId(e.target.value)}\n                    placeholder=\"  ()\"\n                    className=\"text-right\"\n                  />\n                  <Button\n                    type=\"button\"\n                    variant=\"default\"\n                    onClick={async () => {\n                      try {\n                        await updateUserProfile({ bridgeLink: bridgeLink || '', bridgeDeviceId: bridgeDeviceId || '' });\n                        toast({ title: ' ', description: '    ' });\n                      } catch (err: any) {\n                        toast({ title: ' ', description: err?.message || String(err), variant: 'destructive' });\n                      }\n                    }}\n                  >\n                      \n                  </Button>\n                </div>\n              </div>\n              )}\n              {SHOW_DEVICE_UTILS && deviceStatus && (\n                <p className=\"text-center text-sm mt-3\">{deviceStatus}</p>\n              )}\n\n              </div>\n\n              {/* Email (read-only) */}\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"email\"> </Label>\n                <Input\n                  id=\"email\"\n                  name=\"email\"\n                  type=\"email\"\n                  value={user?.email || ''}\n                  readOnly\n                  placeholder=\"  \"\n                  className=\"text-right\"\n                />\n              </div>\n\n              {/* Submit Button */}\n              <Button\n                type=\"submit\"\n                disabled={loading}\n                className=\"w-full h-12 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white font-medium transition-all duration-300\"\n              >\n                {loading ? (\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\n                     ...\n                  </div>\n                ) : (\n                  <div className=\"flex items-center gap-2\">\n                    <Save className=\"h-4 w-4\" />\n                     \n                  </div>\n                )}\n              </Button>\n            </form>\n          </CardContent>\n        </Card>\n\n        \n\n        <Card className=\"shadow-lg mb-6 bg-white border border-gray-200\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Shield className=\"h-5 w-5\" />\n                \n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h3 className=\"font-medium text-gray-800 mb-1\">  </h3>\n                <p className=\"text-sm text-gray-600\">     </p>\n              </div>\n              <MasterPinManagement />\n            </div>\n\n            <div className=\"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-3\">\n              <div className=\"flex items-center justify-between rounded-2xl border border-gray-200 bg-white px-4 py-2 shadow-sm hover:shadow-md transition\">\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"inline-flex h-2.5 w-2.5 rounded-full bg-blue-500\" />\n                  <span className=\"text-sm font-medium text-gray-800\">\n                      \n                  </span>\n                </div>\n                <Switch\n                  checked={isDailyReportsLockEnabled}\n                  onCheckedChange={handleDailyLockToggle}\n                  className=\"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-red-500\"\n                />\n              </div>\n\n              <div className=\"flex items-center justify-between rounded-2xl border border-gray-200 bg-white px-4 py-2 shadow-sm hover:shadow-md transition\">\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"inline-flex h-2.5 w-2.5 rounded-full bg-indigo-500\" />\n                  <span className=\"text-sm font-medium text-gray-800\">\n                      \n                  </span>\n                </div>\n                <Switch\n                  checked={isMonthlyReportsLockEnabled}\n                  onCheckedChange={handleMonthlyLockToggle}\n                  className=\"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-red-500\"\n                />\n              </div>\n\n              <div className=\"flex items-center justify-between rounded-2xl border border-gray-200 bg-white px-4 py-2 shadow-sm hover:shadow-md transition\">\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"inline-flex h-2.5 w-2.5 rounded-full bg-emerald-500\" />\n                  <span className=\"text-sm font-medium text-gray-800\">\n                         \n                  </span>\n                </div>\n                <Switch\n                  checked={isWalletSelectionPinEnabled}\n                  onCheckedChange={handleWalletSelectionPinToggle}\n                  className=\"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-red-500\"\n                />\n              </div>\n\n              <div className=\"flex items-center justify-between rounded-2xl border border-gray-200 bg-white px-4 py-2 shadow-sm hover:shadow-md transition\">\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"inline-flex h-2.5 w-2.5 rounded-full bg-red-500\" />\n                  <span className=\"text-sm font-medium text-gray-800\">\n                         \n                  </span>\n                </div>\n                <Switch\n                  checked={isDebtsPinRequired}\n                  onCheckedChange={handleDebtsPinToggle}\n                  className=\"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-red-500\"\n                />\n              </div>\n\n              <div className=\"flex items-center justify-between rounded-2xl border border-gray-200 bg-white px-4 py-2 shadow-sm hover:shadow-md transition\">\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"inline-flex h-2.5 w-2.5 rounded-full bg-orange-500\" />\n                  <span className=\"text-sm font-medium text-gray-800\">\n                         \n                  </span>\n                </div>\n                <Switch\n                  checked={isShopExpensesPinRequired}\n                  onCheckedChange={handleShopExpensesPinToggle}\n                  className=\"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-red-500\"\n                />\n              </div>\n\n              <div className=\"flex items-center justify-between rounded-2xl border border-gray-200 bg-white px-4 py-2 shadow-sm hover:shadow-md transition\">\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"inline-flex h-2.5 w-2.5 rounded-full bg-purple-500\" />\n                  <span className=\"text-sm font-medium text-gray-800\">\n                         \n                  </span>\n                </div>\n                <Switch\n                  checked={isLinesPinEnabled}\n                  onCheckedChange={handleLinesPinToggle}\n                  className=\"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-red-500\"\n                />\n              </div>\n\n              <div className=\"flex items-center justify-between rounded-2xl border border-gray-200 bg-white px-4 py-2 shadow-sm hover:shadow-md transition\">\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"inline-flex h-2.5 w-2.5 rounded-full bg-yellow-500\" />\n                  <span className=\"text-sm font-medium text-gray-800\">\n                      \n                  </span>\n                </div>\n                <Switch\n                  checked={isReceiptNoteEnabled}\n                  onCheckedChange={handleReceiptNoteToggle}\n                  className=\"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-red-500\"\n                />\n              </div>\n\n              <div className=\"flex items-center justify-between rounded-2xl border border-gray-200 bg-white px-4 py-2 shadow-sm hover:shadow-md transition\">\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"inline-flex h-2.5 w-2.5 rounded-full bg-orange-500\" />\n                  <span className=\"text-sm font-medium text-gray-800\">\n                      \n                  </span>\n                </div>\n                <Switch\n                  checked={isTransferFeesEnabled}\n                  onCheckedChange={handleTransferFeesToggle}\n                  className=\"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-red-500\"\n                />\n              </div>\n\n              <div className=\"flex items-center justify-between rounded-2xl border border-gray-200 bg-white px-4 py-2 shadow-sm hover:shadow-md transition\">\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"inline-flex h-2.5 w-2.5 rounded-full bg-teal-500\" />\n                  <span className=\"text-sm font-medium text-gray-800\">\n                         \n                  </span>\n                </div>\n                <Switch\n                  checked={isWithdrawSenderNameInputEnabled}\n                  onCheckedChange={handleWithdrawSenderNameInputToggle}\n                  className=\"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-red-500\"\n                />\n              </div>\n\n              <div className=\"flex items-center justify-between rounded-2xl border border-gray-200 bg-white px-4 py-2 shadow-sm hover:shadow-md transition\">\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"inline-flex h-2.5 w-2.5 rounded-full bg-blue-500\" />\n                  <span className=\"text-sm font-medium text-gray-800\">\n                         \n                  </span>\n                </div>\n                <Switch\n                  checked={isReceiverPhoneInputEnabled}\n                  onCheckedChange={handleReceiverPhoneInputToggle}\n                  className=\"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-red-500\"\n                />\n              </div>\n\n              {/* SMS Reading Toggle & Video - Hidden based on user request */}\n              {/* <div className=\"flex flex-col rounded-2xl border border-gray-200 bg-white shadow-sm hover:shadow-md transition overflow-hidden\">\n                <div className=\"flex items-center justify-between px-4 py-2\">\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"inline-flex h-2.5 w-2.5 rounded-full bg-purple-500\" />\n                    <span className=\"text-sm font-medium text-gray-800\">\n                        SMS  \n                    </span>\n                  </div>\n                  <Switch\n                    checked={isSmsReadingEnabled}\n                    onCheckedChange={handleSmsReadingToggle}\n                    className=\"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-red-500\"\n                  />\n                </div>\n                <button\n                  type=\"button\"\n                  onClick={() => openVideo('https://www.youtube.com/watch?v=CdrZ4m9LtE4', '    ')}\n                  className=\"w-full py-2 bg-purple-50 hover:bg-purple-100 text-purple-700 text-xs font-medium flex items-center justify-center gap-2 transition-colors border-t border-purple-100\"\n                >\n                  <PlayCircle className=\"h-3.5 w-3.5\" />\n                       ()\n                </button>\n              </div> */}\n\n              {/* Slider for Auto Confirm Duration - Hidden based on user request */}\n              {/* \n              {isSmsAutoRegisterEnabled && (\n                <div className=\"flex flex-col rounded-2xl border border-gray-200 bg-white shadow-sm hover:shadow-md transition p-4\">\n                  <div className=\"flex items-center justify-between mb-4\">\n                    <Label className=\"text-sm font-medium text-gray-700\">    </Label>\n                    <span className=\"text-sm font-bold text-emerald-600 bg-emerald-50 px-2 py-1 rounded-md border border-emerald-100\">\n                      {smsAutoConfirmDuration} \n                    </span>\n                  </div>\n                  <Slider\n                    value={[smsAutoConfirmDuration]}\n                    onValueChange={(vals) => setSmsAutoConfirmDuration(vals[0])}\n                    min={3}\n                    max={30}\n                    step={1}\n                    className=\"w-full\"\n                    dir=\"ltr\"\n                  />\n                  <p className=\"text-xs text-gray-500 mt-3\">\n                             ( 3  30 ).\n                  </p>\n                </div>\n              )}\n              */}\n\n              {/* Auto Transfer Record Toggle - Hidden by request */}\n              {/* {isAndroidNative && (\n              <div className=\"flex flex-col rounded-2xl border border-gray-200 bg-white shadow-sm hover:shadow-md transition overflow-hidden\">\n                <div className=\"flex items-center justify-between px-4 py-2\">\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"inline-flex h-2.5 w-2.5 rounded-full bg-blue-600\" />\n                    <span className=\"text-sm font-medium text-gray-800\">\n                          \n                    </span>\n                  </div>\n                  <Switch\n                    checked={isAutoTransferRecordEnabled}\n                    onCheckedChange={handleAutoTransferRecordToggle}\n                    className=\"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-red-500\"\n                  />\n                </div>\n              </div>\n              )} */}\n            </div>\n\n            <div className=\"mt-6 border-t pt-4\">\n              <h3 className=\"font-medium text-gray-800 mb-2\">\n                   \n              </h3>\n              <p className=\"text-sm text-gray-600 mb-3\">\n                                 .\n              </p>\n              <div className=\"space-y-2 max-h-[300px] overflow-y-auto pr-1\">\n                {sessionsLoading && (\n                  <div className=\"text-sm text-gray-600\">\n                       ...\n                  </div>\n                )}\n                {!sessionsLoading && sessions.length === 0 && (\n                  <div className=\"text-sm text-gray-500\">\n                        .\n                  </div>\n                )}\n                {!sessionsLoading && sessions.length > 0 && (\n                  sessions.map((s) => {\n                    const isCurrent = s.deviceId && s.deviceId === getCurrentDeviceId();\n                    const typeLabel = getSessionDeviceTypeLabel(s.deviceType);\n                    return (\n                      <div\n                        key={s.id}\n                        className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between rounded-xl border border-gray-200 bg-white px-3 py-2 shadow-sm\"\n                      >\n                        <div className=\"space-y-1\">\n                          <div className=\"flex items-center gap-2\">\n                            <span className=\"text-sm font-medium text-gray-800\">\n                              {s.deviceName || '  '}\n                            </span>\n                            {isCurrent && (\n                              <span className=\"text-xs px-2 py-0.5 rounded-full bg-emerald-100 text-emerald-700\">\n                                 \n                              </span>\n                            )}\n                          </div>\n                          <div className=\"text-xs text-gray-600\">\n                            : {typeLabel}  : {s.deviceId || ' '}\n                          </div>\n                          {s.lastSeen && (\n                            <div className=\"text-xs text-gray-500\">\n                               : {formatDate(s.lastSeen)}\n                            </div>\n                          )}\n                        </div>\n                        <div className=\"mt-2 sm:mt-0 flex items-center gap-2\">\n                          <Button\n                            type=\"button\"\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => {\n                              setSessionToLogout(s.id);\n                              setIsSessionLogoutPinOpen(true);\n                            }}\n                            className=\"text-red-600 border-red-300 hover:bg-red-50\"\n                          >\n                               \n                          </Button>\n                        </div>\n                      </div>\n                    );\n                  })\n                )}\n              </div>\n            </div>\n\n            <div className=\"mt-6 bg-red-50 border border-red-200 rounded-2xl p-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3\">\n              <div>\n                <h4 className=\"font-semibold text-red-700 mb-1\">  </h4>\n                <p className=\"text-sm text-red-600\">\n                              .      .\n                </p>\n              </div>\n              <Button\n                type=\"button\"\n                variant=\"destructive\"\n                className=\"bg-red-600 hover:bg-red-700 text-white\"\n                onClick={() => setIsFactoryResetPinOpen(true)}\n              >\n                  \n              </Button>\n            </div>\n\n\n\n            <MasterPinDialog\n              open={isSessionLogoutPinOpen}\n              userId={user?.uid}\n              onOpenChange={(open) => {\n                setIsSessionLogoutPinOpen(open);\n                if (!open) {\n                  setSessionToLogout(null);\n                }\n              }}\n              mode=\"verify\"\n              title=\"   \"\n              description=\"         .\"\n              onSuccess={async () => {\n                if (sessionToLogout) {\n                  try {\n                    await updateDoc(doc(db, 'userSessions', sessionToLogout), { forcedLogout: true });\n                    setSessions((prev) => prev.filter((s) => s.id !== sessionToLogout));\n                    toast({\n                      title: '   ',\n                      description: '       .',\n                    });\n                  } catch {\n                    toast({\n                      title: '   ',\n                      description: '     .',\n                      variant: 'destructive',\n                    });\n                  }\n                }\n                setSessionToLogout(null);\n                setIsSessionLogoutPinOpen(false);\n              }}\n            />\n\n            <MasterPinDialog\n              open={isDailyLockTogglePinOpen}\n              userId={user?.uid}\n              onOpenChange={setIsDailyLockTogglePinOpen}\n              mode=\"verify\"\n              title=\" \"\n              description=\"         \"\n              onSuccess={() => {\n                if (pendingDailyLockValue !== null) {\n                  const nextVal = pendingDailyLockValue;\n                  setIsDailyReportsLockEnabled(nextVal);\n                  try {\n                    localStorage.setItem('dailyReportsLockEnabled', nextVal ? 'true' : 'false');\n                    if (user?.uid) {\n                      localStorage.setItem(`dailyReportsLockEnabled_${user.uid}`, nextVal ? 'true' : 'false');\n                    }\n                  } catch {}\n                  toast({\n                    title: nextVal ? '    ' : '    ',\n                    description: nextVal ? '       .' : '       .',\n                  });\n                }\n                setIsDailyLockTogglePinOpen(false);\n                setPendingDailyLockValue(null);\n              }}\n            />\n\n            <MasterPinDialog\n              open={isMonthlyLockTogglePinOpen}\n              userId={user?.uid}\n              onOpenChange={setIsMonthlyLockTogglePinOpen}\n              mode=\"verify\"\n              title=\" \"\n              description=\"         \"\n              onSuccess={() => {\n                if (pendingMonthlyLockValue !== null) {\n                  const nextVal = pendingMonthlyLockValue;\n                  setIsMonthlyReportsLockEnabled(nextVal);\n                  try {\n                    localStorage.setItem('monthlyReportsLock_v4', nextVal ? 'true' : 'false');\n                    if (user?.uid) {\n                      localStorage.setItem(`monthlyReportsLock_v4_${user.uid}`, nextVal ? 'true' : 'false');\n                    }\n                    try { window.dispatchEvent(new CustomEvent('monthlyReportsLockChanged', { detail: { enabled: nextVal } })); } catch {}\n                  } catch {}\n                  toast({\n                    title: nextVal ? '    ' : '    ',\n                    description: nextVal ? '       .' : '       .',\n                  });\n                }\n                setIsMonthlyLockTogglePinOpen(false);\n                setPendingMonthlyLockValue(null);\n              }}\n            />\n\n            <MasterPinDialog\n              open={isWalletSelectionPinToggleOpen}\n              userId={user?.uid}\n              onOpenChange={setIsWalletSelectionPinToggleOpen}\n              mode=\"verify\"\n              title=\"      \"\n              description=\"            \"\n              onSuccess={() => {\n                if (pendingWalletSelectionPinValue !== null) {\n                  const nextVal = pendingWalletSelectionPinValue;\n                  setIsWalletSelectionPinEnabled(nextVal);\n                  try {\n                    walletSelectionPinService.setEnabled(nextVal, user?.uid);\n                  } catch {}\n                  toast({\n                    title: nextVal ? '    ' : '    ',\n                    description: nextVal ? '      .' : '      .',\n                  });\n                }\n                setIsWalletSelectionPinToggleOpen(false);\n                setPendingWalletSelectionPinValue(null);\n              }}\n            />\n\n            <MasterPinDialog\n              open={isDebtsPinToggleOpen}\n              userId={user?.uid}\n              onOpenChange={setIsDebtsPinToggleOpen}\n              mode=\"verify\"\n              title=\"      \"\n              description=\"            \"\n              onSuccess={async () => {\n                if (pendingDebtsPinValue !== null) {\n                  const nextVal = pendingDebtsPinValue;\n                  setIsDebtsPinRequired(nextVal);\n                  try {\n                    const key = user?.uid ? `debtsPinRequired_${user?.uid}` : 'debtsPinRequired';\n                    localStorage.setItem(key, String(nextVal));\n                    localStorage.setItem('debtsPinRequired', String(nextVal));\n                    if (user?.uid) await userDataService.updateUserData(user.uid, { debtsPinRequired: nextVal });\n                  } catch {}\n                  toast({\n                    title: nextVal ? '     ' : '     ',\n                    description: nextVal ? '       .' : '       .',\n                  });\n                }\n                setPendingDebtsPinValue(null);\n                setIsDebtsPinToggleOpen(false);\n              }}\n            />\n\n            <MasterPinDialog\n              open={isShopExpensesPinToggleOpen}\n              userId={user?.uid}\n              onOpenChange={setIsShopExpensesPinToggleOpen}\n              mode=\"verify\"\n              title=\"      \"\n              description=\"            \"\n              onSuccess={async () => {\n                if (pendingShopExpensesPinValue !== null) {\n                  const nextVal = pendingShopExpensesPinValue;\n                  setIsShopExpensesPinRequired(nextVal);\n                  try {\n                    const key = user?.uid ? `shopExpensesPinRequired_${user?.uid}` : 'shopExpensesPinRequired';\n                    localStorage.setItem(key, String(nextVal));\n                    localStorage.setItem('shopExpensesPinRequired', String(nextVal));\n                    if (user?.uid) await userDataService.updateUserData(user.uid, { shopExpensesPinRequired: nextVal });\n                  } catch {}\n                  toast({\n                    title: nextVal ? '     ' : '     ',\n                    description: nextVal ? '        .' : '       .',\n                  });\n                }\n                setPendingShopExpensesPinValue(null);\n                setIsShopExpensesPinToggleOpen(false);\n              }}\n            />\n\n            <MasterPinDialog\n              open={isLinesPinToggleOpen}\n              userId={user?.uid}\n              onOpenChange={setIsLinesPinToggleOpen}\n              mode=\"verify\"\n              title=\"      \"\n              description=\"            \"\n              onSuccess={async () => {\n                if (pendingLinesPinValue !== null) {\n                  const nextVal = pendingLinesPinValue;\n                  setIsLinesPinEnabled(nextVal);\n                  try {\n                    if (user?.uid) {\n                      localStorage.setItem(`linesPinEnabled_${user.uid}`, nextVal ? 'true' : 'false');\n                      userDataService.updateUserData(user.uid, { linesPinEnabled: nextVal });\n                    }\n                    localStorage.setItem('linesPinEnabled', nextVal ? 'true' : 'false');\n                  } catch {}\n                  toast({\n                    title: nextVal ? '    ' : '    ',\n                    description: nextVal ? '       .' : '        .',\n                  });\n                }\n                setPendingLinesPinValue(null);\n                setIsLinesPinToggleOpen(false);\n              }}\n            />\n\n            <MasterPinDialog\n              open={isFactoryResetPinOpen}\n              userId={user?.uid}\n              onOpenChange={setIsFactoryResetPinOpen}\n              mode=\"verify\"\n              title=\"    \"\n              description=\"           .\"\n              onSuccess={() => {\n                setIsFactoryResetPinOpen(false);\n                setIsFactoryResetConfirmOpen(true);\n              }}\n            />\n\n            <Dialog\n              open={isFactoryResetConfirmOpen}\n              onOpenChange={(open) => {\n                if (isFactoryResetProcessing) return;\n                setIsFactoryResetConfirmOpen(open);\n              }}\n            >\n              <DialogContent className=\"max-w-md\">\n                <DialogHeader>\n                  <DialogTitle className=\"text-red-600\">\n                       \n                  </DialogTitle>\n                  <DialogDescription className=\"text-right\">\n                                .\n                           .\n                  </DialogDescription>\n                </DialogHeader>\n\n                <div className=\"mt-3 space-y-2 text-sm text-right\">\n                  <p className=\"text-gray-700\">\n                     :\n                  </p>\n                  <ul className=\"list-disc pr-5 space-y-1 text-gray-700\">\n                    <li>   </li>\n                    <li>     </li>\n                    <li>    </li>\n                    <li>   </li>\n                  </ul>\n                  <p className=\"text-red-600 font-semibold\">\n                             .\n                  </p>\n                  \n                  <div className=\"flex items-center gap-2 mt-4 pt-2 border-t border-gray-100\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"excludeProducts\"\n                      checked={excludeProductsFromReset}\n                      onChange={(e) => setExcludeProductsFromReset(e.target.checked)}\n                      className=\"h-4 w-4 text-red-600 border-gray-300 rounded focus:ring-red-500\"\n                    />\n                    <label htmlFor=\"excludeProducts\" className=\"text-sm font-medium text-gray-700 cursor-pointer select-none\">\n                            ( )\n                    </label>\n                  </div>\n                </div>\n\n                <DialogFooter className=\"mt-4\">\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    onClick={() => setIsFactoryResetConfirmOpen(false)}\n                    disabled={isFactoryResetProcessing}\n                  >\n                    \n                  </Button>\n                  <Button\n                    type=\"button\"\n                    variant=\"destructive\"\n                    onClick={handleFactoryReset}\n                    disabled={isFactoryResetProcessing}\n                    className=\"flex items-center gap-2\"\n                  >\n                    {isFactoryResetProcessing && (\n                      <Loader2 className=\"h-4 w-4 animate-spin\" />\n                    )}\n                       \n                  </Button>\n                </DialogFooter>\n              </DialogContent>\n            </Dialog>\n          </CardContent>\n        </Card>\n\n        {/*        */}\n\n        {/* Font Size Settings Card - Visible on   */}\n      <Card className=\"shadow-lg mb-6 bg-white border border-gray-200\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Type className=\"h-5 w-5\" />\n                 \n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                <div>\n                  <h3 className=\"font-medium text-gray-800 mb-1\">  </h3>\n                  <p className=\"text-sm text-gray-600\">         </p>\n                </div>\n                \n                <div className=\"flex items-center justify-between bg-gray-50 p-4 rounded-lg\">\n                  <div className=\"flex items-center gap-3\">\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => setFontSize('small')}\n                      className={`flex items-center gap-2 ${fontSize === 'small' ? 'bg-blue-100 border-blue-300 text-blue-700' : ''}`}\n                    >\n                      <Minus className=\"h-4 w-4\" />\n                      \n                    </Button>\n                    \n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => setFontSize('medium')}\n                      className={`flex items-center gap-2 ${fontSize === 'medium' ? 'bg-blue-100 border-blue-300 text-blue-700' : ''}`}\n                    >\n                      <Type className=\"h-4 w-4\" />\n                      \n                    </Button>\n                    \n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => setFontSize('large')}\n                      className={`flex items-center gap-2 ${fontSize === 'large' ? 'bg-blue-100 border-blue-300 text-blue-700' : ''}`}\n                    >\n                      <Plus className=\"h-4 w-4\" />\n                      \n                    </Button>\n                  </div>\n                </div>\n                \n                <div className=\"text-sm text-gray-500 bg-blue-50 p-3 rounded-lg border border-blue-200\">\n                  <p>                  .</p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n        <Card className=\"shadow-lg mb-6 bg-white border border-gray-200\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Code className=\"h-5 w-5\" />\n                \n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-sm text-gray-600 mb-3\">\n                       .\n            </p>\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\n              {QUICK_ACTION_OPTIONS.map(action => {\n                const isHidden = hiddenQuickActions.includes(action.id);\n                return (\n                  <div\n                    key={action.id}\n                    className=\"flex items-center justify-between rounded-2xl border border-gray-200 bg-white px-4 py-2 shadow-sm hover:shadow-md transition\"\n                  >\n                    <div className=\"flex items-center gap-2\">\n                      <span\n                        className=\"inline-flex h-2.5 w-2.5 rounded-full\"\n                        style={{ backgroundColor: action.color }}\n                      />\n                      <span className=\"text-sm font-medium text-gray-800\">\n                        {action.label}\n                      </span>\n                    </div>\n                    <Switch\n                      checked={isHidden}\n                      onCheckedChange={nextVal => handleQuickActionVisibilityChange(action.id, action.label, nextVal)}\n                      className=\"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-red-500\"\n                    />\n                  </div>\n                );\n              })}\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Reseller Management */}\n        <ResellerManagement />\n\n        {/* Subscription Information Card */}\n      <Card className=\"shadow-lg bg-white border border-gray-200\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-2\">\n                <Crown className=\"h-5 w-5 text-yellow-500\" />\n                 \n              </div>\n              <Button\n                onClick={handleRefreshSubscription}\n                disabled={isRefreshing}\n                variant=\"outline\"\n                size=\"sm\"\n                className=\"flex items-center gap-2\"\n              >\n                <RefreshCw className={`w-4 h-4 ${isRefreshing ? 'animate-spin' : ''}`} />\n                {isRefreshing ? ' ...' : ''}\n              </Button>\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {/* Subscription Status */}\n            {isSubscriptionActive && userSubscription?.subscription ? (\n              <div>\n                <div className=\"p-6 rounded-lg bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200\">\n                  <div className=\"flex items-center justify-between mb-4\">\n                    <div className=\"flex items-center gap-3\">\n                      <Crown className=\"h-6 w-6 text-green-500\" />\n                      <h3 className=\"text-lg font-semibold text-gray-800\"> </h3>\n                    </div>\n                    <div className=\"flex items-center gap-2 bg-green-100 px-3 py-1 rounded-full\">\n                      <div className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></div>\n                      <span className=\"text-green-700 font-medium text-sm\"></span>\n                    </div>\n                  </div>\n                  \n                  {/* Plan Type Display */}\n                  <div className=\"mb-4 p-4 bg-white/70 rounded-lg border border-green-100\">\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-gray-600 font-medium\"> :</span>\n                      <span className={`font-bold text-lg ${getSubscriptionStatusColor(userSubscription.subscription)}`}>\n                        {getPlanDisplayName(userSubscription.subscription.planType)}\n                      </span>\n                    </div>\n                  </div>\n                  \n                  <div className=\"text-lg font-medium text-gray-700 leading-relaxed\">\n                    {userSubscription.subscription.planType === 'monthly' && (\n                      <p>\n                            <span className=\"font-bold text-green-600\">{formatDate(userSubscription.subscription.startDate)}</span>   <span className=\"font-bold text-green-600\">{formatDate(userSubscription.subscription.endDate)}</span>\n                      </p>\n                    )}\n                    \n                    {userSubscription.subscription.planType === 'quarterly' && (\n                      <p>\n                             <span className=\"font-bold text-green-600\">{formatDate(userSubscription.subscription.startDate)}</span>   <span className=\"font-bold text-green-600\">{formatDate(userSubscription.subscription.endDate)}</span>\n                      </p>\n                    )}\n                    \n                    {userSubscription.subscription.planType === 'yearly' && (\n                      <p>\n                            <span className=\"font-bold text-green-600\">{formatDate(userSubscription.subscription.startDate)}</span>   <span className=\"font-bold text-green-600\">{formatDate(userSubscription.subscription.endDate)}</span>\n                      </p>\n                    )}\n                    \n                    {userSubscription.subscription.planType === 'lifetime' && (\n                      <>\n                        <p className=\"text-yellow-600 font-bold\">\n                              -   \n                        </p>\n                        <div className=\"mt-2 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded-lg p-2\">\n                          :  200        \n                        </div>\n                        {userSubscription.subscription.startDate && (\n                          <p className=\"mt-2 text-sm text-gray-700\">\n                               <span className=\"font-bold text-green-600\">{formatDate(userSubscription.subscription.startDate)}</span>\n                          </p>\n                        )}\n                      </>\n                    )}\n                  </div>\n\n                  {/* Additional Info for Active Subscriptions */}\n                  {isSubscriptionActive && userSubscription.subscription.planType !== 'lifetime' && userSubscription.subscription.planType !== 'zero' && (\n                    <div className=\"mt-4 p-3 bg-white/50 rounded-lg border border-green-100\">\n                      <p className=\"text-sm text-gray-600\">\n                         <span className=\"font-semibold text-green-600\">{getDaysRemaining(userSubscription.subscription)}</span>    \n                      </p>\n                    </div>\n                  )}\n                </div>\n              </div>\n            ) : (\n              <div className=\"text-center py-8\">\n                <div className=\"p-6 rounded-lg bg-gradient-to-r from-red-50 to-orange-50 border border-red-200\">\n                  <div className=\"flex items-center justify-between mb-4\">\n                    <div className=\"flex items-center gap-3\">\n                      <Crown className=\"h-6 w-6 text-red-500\" />\n                      <h3 className=\"text-lg font-semibold text-gray-800\"> </h3>\n                    </div>\n                    <div className=\"flex items-center gap-2 bg-red-100 px-3 py-1 rounded-full\">\n                      <div className=\"w-2 h-2 bg-red-500 rounded-full\"></div>\n                      <span className=\"text-red-700 font-medium text-sm\"> </span>\n                    </div>\n                  </div>\n                  \n                  <div className=\"mb-4 p-4 bg-white/70 rounded-lg border border-red-100\">\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-gray-600 font-medium\"> :</span>\n                      <span className=\"font-bold text-lg text-gray-500\">\n                          \n                      </span>\n                    </div>\n                  </div>\n                  \n                  <p className=\"text-gray-600 text-lg font-medium\">   </p>\n                  <p className=\"text-gray-500 text-sm mt-2\">    </p>\n                  <div className=\"mt-3 bg-blue-50 p-4 rounded-lg border border-blue-200\">\n                    <div className=\"flex items-center justify-center gap-2\">\n                      <span className=\"text-sm font-semibold text-blue-700\">  :</span>\n                      <a\n                        href=\"mailto:info@cashy-link.com\"\n                        className=\"text-sm font-bold text-blue-600 hover:text-blue-700 underline\"\n                      >\n                        info@cashy-link.com\n                      </a>\n                    </div>\n                    <p className=\"text-xs text-blue-600 mt-2 text-center\">     </p>\n                  </div>\n                </div>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Backup Manager - Hidden per user request */}\n        {/* <div className=\"mb-6\">\n          <BackupManager />\n        </div> */}\n\n        {/* Developer Info Card */}\n        <Card className=\"shadow-lg mt-6 bg-gradient-to-br from-indigo-50 to-blue-50 border border-blue-100 dark:bg-slate-900 dark:border-slate-800\">\n          <CardContent className=\"pt-6 text-center\">\n             <div className=\"mb-2 flex justify-center\">\n                <div className=\"p-3 bg-blue-100 rounded-full dark:bg-slate-800\">\n                  <Code className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n                </div>\n             </div>\n             <h3 className=\"text-xl font-bold text-gray-900 mb-3 dark:text-white\"> </h3>\n             <div className=\"space-y-3\">\n               <p className=\"text-lg font-bold bg-gradient-to-r from-blue-700 to-indigo-700 dark:from-blue-400 dark:to-indigo-400 bg-clip-text text-transparent leading-relaxed\">\n                      /   \n               </p>\n               <div className=\"flex flex-col items-center gap-1\">\n                 <p className=\"text-base font-semibold text-gray-800 dark:text-gray-200\">\n                       \n                 </p>\n                 <a href=\"tel:01000392539\" className=\"text-xl font-black text-blue-600 dark:text-blue-400 tracking-wider hover:underline\" dir=\"ltr\">\n                   01000392539\n                 </a>\n               </div>\n               <p className=\"text-sm text-red-600 dark:text-red-400 font-bold bg-red-50 dark:bg-red-900/20 py-1 px-3 rounded-full inline-block\">\n                     \n               </p>\n             </div>\n          </CardContent>\n        </Card>\n\n      </div>\n      <div className=\"mt-6 flex items-center justify-center\">\n        <Button variant=\"outline\" onClick={() => navigate('/privacy-policy')}> </Button>\n      </div>\n      {/*          */}\n      <PinModal\n        open={pinOpen}\n        onClose={() => setPinOpen(false)}\n        deviceId={selectedDevice || null}\n        onSubmit={async (deviceId, pin) => {\n          try {\n            const api: any = (window as any).electronAPI;\n            const pinDigits = String(pin || '').replace(/\\D/g, '');\n            if (api && typeof api.enterPin === 'function' && selectedDevice) {\n              await api.enterPin(selectedDevice, pinDigits);\n              setPinOpen(false);\n            } else {\n              // :   PIN   USSD\n              const receiverDigits = String(receiver || '').replace(/\\D/g, '');\n              const amountInt = Math.max(1, Math.round(Number(String(amount || '0').replace(/\\D/g, '')) || 0));\n              const pinCode = getUssdCodeWithPin(receiverDigits, amountInt, pinDigits);\n              if (!pinCode) {\n                toast({ title: '  ', description: '    010/011/012/015', variant: 'destructive' });\n                return;\n              }\n              openUssdDeepLink(pinCode);\n              setPinOpen(false);\n            }\n          } catch (err: any) {\n            console.error('PIN enter error:', err);\n            toast({ title: '   ', description: err?.message || String(err), variant: 'destructive' });\n          }\n        }}\n      />\n      {/* Floating Red Back Button */}\n      <div className=\"fixed bottom-6 right-6 z-50\">\n        <Button\n          onClick={() => {\n            if (onBack) {\n              onBack();\n            } else {\n              navigate(-1);\n            }\n          }}\n          className=\"rounded-full w-14 h-14 bg-red-600 hover:bg-red-700 text-white shadow-lg flex items-center justify-center\"\n          size=\"icon\"\n        >\n          <ArrowLeft className=\"h-6 w-6\" />\n        </Button>\n      </div>\n      <VideoModal\n        isOpen={videoModalOpen}\n        onClose={() => setVideoModalOpen(false)}\n        videoUrl={videoUrl}\n        title={videoTitle}\n      />\n    </div>\n  );\n};\n\nexport default ProfileSettingsPage;\n"],"file":"assets/ProfileSettingsPage-DnVs4YJB.js"}