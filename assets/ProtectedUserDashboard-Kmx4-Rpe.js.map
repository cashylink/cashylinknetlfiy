{"version":3,"mappings":"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","names":["LEGACY_STORAGE_KEY","UserBroadcastModal","user","profile","isSubscriptionActive","userSubscription","useFirebaseAuth","broadcast","setBroadcast","useState","open","setOpen","mounted","setMounted","remoteDismissed","setRemoteDismissed","location","useLocation","navigate","useNavigate","storageKey","useMemo","audienceKeys","keys","isAdminRoute","useEffect","ref","doc","db","unsub","onSnapshot","snap","data","arr","raw","localArr","union","err","unsubscribe","subscribeToActiveBroadcasts","b","rawNew","rawLegacy","arrNew","arrLegacy","dismissed","id","alreadyDismissed","handleClose","dismissedRaw","updateDoc","arrayUnion","e","jsxs","jsx","X","url","ExternalLink","LinkIcon","KEY_BASE","SESSION_KEY_BASE","getKey","userId","getSessionKey","quickLoginService","enabled","UserDashboardPageLazy","React","__vitePreload","ProtectedUserDashboard","loading","refreshProfile","checkSubscriptionStatus","isAuthenticated","setIsAuthenticated","isQuickLoginDialogOpen","setIsQuickLoginDialogOpen","toast","useToast","hydrationReady","setHydrationReady","handleSubscriptionUpdate","event","isActive","branchActive","_a","trialActive","_b","quickEnabled","sessionVerified","timer","pulse","isElectronEnv","Capacitor","LogoLoader","MasterPinDialog","Fragment"],"ignoreList":[],"sources":["../../src/components/UserBroadcastModal.tsx","../../src/utils/quickLoginService.ts","../../src/components/ProtectedUserDashboard.tsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\r\nimport { X } from 'lucide-react';\r\nimport { Link as LinkIcon, ExternalLink } from 'lucide-react';\r\nimport { subscribeToActiveBroadcasts, type Broadcast } from '@/utils/broadcastService';\r\nimport { useFirebaseAuth } from '@/contexts/FirebaseAuthContext';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { db } from '@/firebase';\r\nimport { doc, onSnapshot, updateDoc, arrayUnion } from 'firebase/firestore';\r\n\r\n// Ù…ÙØªØ§Ø­ ØªØ®Ø²ÙŠÙ† Ù…Ø­Ù„ÙŠ ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ø¶Ù…Ø§Ù† Ø«Ø¨Ø§Øª Ø§Ù„Ø¥Ø®ÙØ§Ø¡ Ù„ÙƒÙ„ Ù…Ø³ØªØ®Ø¯Ù…\r\n// ÙŠØªÙ… Ø£ÙŠØ¶Ø§Ù‹ Ø¯Ø¹Ù… Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ù‚Ø¯ÙŠÙ… Ù„Ø¥ØªÙ…Ø§Ù… Ø§Ù„ØªØ±Ø­ÙŠÙ„ Ø¨Ø³Ù„Ø§Ø³Ø©\r\nconst LEGACY_STORAGE_KEY = 'dismissedBroadcastIds';\r\n\r\nexport const UserBroadcastModal: React.FC = () => {\r\n  const { user, profile, isSubscriptionActive, userSubscription } = useFirebaseAuth();\r\n  const [broadcast, setBroadcast] = useState<Broadcast | null>(null);\r\n  const [open, setOpen] = useState(false);\r\n  const [mounted, setMounted] = useState(false); // Ù„Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„Ø³Ù„Ø³\r\n  const [remoteDismissed, setRemoteDismissed] = useState<string[]>([]);\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  const storageKey = useMemo(() => `dismissedBroadcastIds:${user?.uid || 'global'}`,[user?.uid]);\r\n\r\n  const audienceKeys = useMemo(() => {\r\n    const keys = ['global'];\r\n    if (profile?.shopId) keys.push(`shop:${profile.shopId}`);\r\n    if (user?.uid) keys.push(`user:${user.uid}`);\r\n    return keys;\r\n  }, [profile?.shopId, user?.uid]);\r\n\r\n  const isAdminRoute = location.pathname.startsWith('/admin');\r\n\r\n  // Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ø¨Ù…Ù„Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ø¬Ù„Ø¨ Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© ÙÙŠ Firestore\r\n  useEffect(() => {\r\n    if (!user?.uid) return;\r\n    const ref = doc(db, 'users', user.uid);\r\n    const unsub = onSnapshot(ref, (snap) => {\r\n      const data = snap.data() as any;\r\n      const arr = Array.isArray(data?.dismissedBroadcastIds) ? data.dismissedBroadcastIds : [];\r\n      setRemoteDismissed(arr);\r\n      // Ù…Ø²Ø§Ù…Ù†Ø© Ù…Ø¹ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ Ù„Ø¶Ù…Ø§Ù† Ø§ØªØ­Ø§Ø¯ Ø§Ù„Ù‚ÙŠÙ…\r\n      try {\r\n        const raw = localStorage.getItem(storageKey);\r\n        const localArr = raw ? JSON.parse(raw) : [];\r\n        const union = Array.from(new Set([...(Array.isArray(localArr) ? localArr : []), ...arr]));\r\n        localStorage.setItem(storageKey, JSON.stringify(union));\r\n        localStorage.setItem(LEGACY_STORAGE_KEY, JSON.stringify(union));\r\n      } catch {}\r\n    }, (err) => {\r\n      console.error('UserBroadcastModal: onSnapshot user error', err);\r\n    });\r\n    return () => unsub();\r\n  }, [user?.uid, storageKey]);\r\n\r\n  useEffect(() => {\r\n    if (!user || isAdminRoute) return; // Ù†Ø´Ø· ÙÙ‚Ø· Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ† ÙˆØºÙŠØ± Ø§Ù„Ø£Ø¯Ù…Ù†\r\n\r\n    // Ø§Ù„Ø³Ù…Ø§Ø­ ÙÙ‚Ø· Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…ÙØ¹Ù„ÙŠÙ† Ø£Ùˆ Ø¹Ù„Ù‰ ØªØ¬Ø±Ø¨Ø© Ù…Ø¬Ø§Ù†ÙŠØ© Ù†Ø´Ø·Ø©\r\n    const isEligible = (profile?.approved === true) || isSubscriptionActive || (userSubscription as any)?.isOnFreeTrial === true;\r\n    if (!isEligible) return;\r\n\r\n    const unsubscribe = subscribeToActiveBroadcasts(audienceKeys, (b) => {\r\n      // Ù„Ø§ Ù†ØºÙ„Ù‚ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ ØºÙŠØ§Ø¨ Ø¨Ø« Ù†Ø´Ø·Ø› Ù†Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©\r\n      if (!b) {\r\n        return;\r\n      }\r\n      setBroadcast(b);\r\n      try {\r\n        const rawNew = localStorage.getItem(storageKey);\r\n        const rawLegacy = localStorage.getItem(LEGACY_STORAGE_KEY);\r\n        const arrNew = rawNew ? JSON.parse(rawNew) as any : [];\r\n        const arrLegacy = rawLegacy ? JSON.parse(rawLegacy) as any : [];\r\n        const dismissed: string[] = Array.isArray(arrNew) ? [...arrNew] : [];\r\n        if (Array.isArray(arrLegacy)) {\r\n          for (const id of arrLegacy) {\r\n            if (!dismissed.includes(id)) dismissed.push(id);\r\n          }\r\n        }\r\n        // Ø¯Ù…Ø¬ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© Ù…Ù† Firestore\r\n        if (Array.isArray(remoteDismissed)) {\r\n          for (const id of remoteDismissed) {\r\n            if (!dismissed.includes(id)) dismissed.push(id);\r\n          }\r\n        }\r\n        const alreadyDismissed = b.id && dismissed.includes(b.id);\r\n        setOpen(!alreadyDismissed);\r\n        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø¹Ù†Ø¯ ÙˆØµÙˆÙ„ Ø¨Ø« Ø¬Ø¯ÙŠØ¯\r\n        setMounted(false);\r\n        requestAnimationFrame(() => setMounted(true));\r\n      } catch {\r\n        setOpen(true);\r\n        setMounted(true);\r\n      }\r\n    });\r\n    return () => unsubscribe();\r\n  }, [user, audienceKeys, isAdminRoute, profile?.approved, isSubscriptionActive, userSubscription, remoteDismissed]);\r\n\r\n  const handleClose = async () => {\r\n    setOpen(false);\r\n    try {\r\n      const dismissedRaw = localStorage.getItem(storageKey);\r\n      const dismissed = dismissedRaw ? JSON.parse(dismissedRaw) as string[] : [];\r\n      const id = broadcast?.id;\r\n      if (id && !dismissed.includes(id)) {\r\n        dismissed.push(id);\r\n        localStorage.setItem(storageKey, JSON.stringify(dismissed));\r\n        // ÙƒØªØ§Ø¨Ø© Ù„Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ù‚Ø¯ÙŠÙ… Ø£ÙŠØ¶Ø§Ù‹ Ù„Ø¶Ù…Ø§Ù† Ø§Ù„ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø£ÙŠ Ù‚Ø±Ø§Ø¡Ø§Øª Ø³Ø§Ø¨Ù‚Ø©\r\n        try {\r\n          localStorage.setItem(LEGACY_STORAGE_KEY, JSON.stringify(dismissed));\r\n        } catch {}\r\n        // ØªØ­Ø¯ÙŠØ« Firestore Ù„ÙŠØµØ¨Ø­ Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ Ù…Ø´ØªØ±ÙƒÙ‹Ø§ Ø¨ÙŠÙ† Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©\r\n        try {\r\n          if (user?.uid) {\r\n            await updateDoc(doc(db, 'users', user.uid), { dismissedBroadcastIds: arrayUnion(id) });\r\n          }\r\n        } catch (e) {\r\n          console.warn('UserBroadcastModal: failed to update dismissedBroadcastIds in Firestore', e);\r\n        }\r\n      }\r\n    } catch {}\r\n  };\r\n\r\n  if (!open || !broadcast) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-[9999]\">\r\n      <div\r\n        className={`absolute inset-0 transition-opacity duration-300 ease-out ${mounted ? 'opacity-100' : 'opacity-0'} bg-black/20 dark:bg-black/20`}\r\n      />\r\n\r\n      {/* ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ù…Ø¹ Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø£Ù†ÙŠÙ‚ */}\r\n      <div\r\n        className={`absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[92%] sm:w-auto sm:min-w-[380px] sm:max-w-md md:max-w-lg bg-white shadow-2xl rounded-2xl border border-gray-100 ring-1 ring-black/5 transition-all duration-300 ease-out ${mounted ? 'opacity-100 scale-100' : 'opacity-0 scale-95'}`}\r\n      >\r\n        {/* Ø±Ø£Ø³ Ø¨ØªØ¯Ø±Ø¬ Ù„ÙˆÙ†ÙŠ Ø¬Ø°Ø§Ø¨ */}\r\n        <div className=\"relative overflow-hidden rounded-t-2xl\">\r\n          <div className=\"bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 relative\">\r\n            <button\r\n              aria-label=\"Ø¥ØºÙ„Ø§Ù‚\"\r\n              onClick={handleClose}\r\n              className=\"absolute top-3 right-3 p-2 rounded-full bg-white/10 hover:bg-white/20\"\r\n            >\r\n              <X className=\"w-5 h-5 text-white\" />\r\n            </button>\r\n            <div className=\"p-4\">\r\n              <h3 className=\"text-base sm:text-lg font-semibold text-white tracking-wide text-center\">\r\n                {broadcast.title || 'Ø¥Ø´Ø¹Ø§Ø±'}\r\n              </h3>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */}\r\n        <div className=\"p-5\">\r\n          <div className=\"flex items-start justify-between gap-3\">\r\n            <p className=\"text-gray-700 leading-relaxed text-sm sm:text-base\">\r\n              {broadcast.message}\r\n            </p>\r\n            {/* Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø±Ø§Ø¨Ø· Ø¥Ù† ÙˆÙØ¬Ø¯ */}\r\n            {broadcast.linkUrl && (\r\n              <button\r\n                aria-label=\"ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø·\"\r\n                title=\"ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø·\"\r\n                onClick={() => {\r\n                  const url = broadcast.linkUrl as string;\r\n                  if (/^https?:\\/\\//i.test(url)) {\r\n                    window.open(url, '_blank', 'noopener');\r\n                  } else {\r\n                    navigate(url);\r\n                  }\r\n                }}\r\n                className=\"shrink-0 inline-flex items-center gap-2 px-3 py-2 rounded-md bg-indigo-600 text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-400 whitespace-nowrap\"\r\n              >\r\n                {/^https?:\\/\\//i.test(broadcast.linkUrl) ? (\r\n                  <ExternalLink className=\"w-6 h-6\" />\r\n                ) : (\r\n                  <LinkIcon className=\"w-6 h-6\" />\r\n                )}\r\n                <span className=\"text-xs sm:text-sm font-semibold\">ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø·</span>\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserBroadcastModal;","// Ø®Ø¯Ù…Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹: Ø­ÙØ¸ ØªÙØ¶ÙŠÙ„ Ø·Ù„Ø¨ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ ÙÙ‚Ø· Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚\r\n// ØªØ®Ø²ÙŠÙ† Ø§Ù„ØªÙØ¹ÙŠÙ„ ÙÙŠ localStorageØŒ ÙˆØ§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© ÙÙŠ sessionStorage\r\n\r\nconst KEY_BASE = 'quick_login_enabled';\r\nconst SESSION_KEY_BASE = 'quick_login_session_verified';\r\n\r\nfunction getKey(userId?: string) {\r\n  return userId ? `${KEY_BASE}_${userId}` : KEY_BASE;\r\n}\r\n\r\nfunction getSessionKey(userId?: string) {\r\n  return userId ? `${SESSION_KEY_BASE}_${userId}` : SESSION_KEY_BASE;\r\n}\r\n\r\nexport const quickLoginService = {\r\n  isEnabled(userId?: string): boolean {\r\n    try {\r\n      const val = localStorage.getItem(getKey(userId));\r\n      return val === 'true';\r\n    } catch {\r\n      return false;\r\n    }\r\n  },\r\n\r\n  setEnabled(enabled: boolean, userId?: string): void {\r\n    try {\r\n      localStorage.setItem(getKey(userId), enabled ? 'true' : 'false');\r\n      // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ØªØ­Ù‚Ù‚ Ø§Ù„Ø¬Ù„Ø³Ø© Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯\r\n      sessionStorage.removeItem(getSessionKey(userId));\r\n    } catch {}\r\n  },\r\n\r\n  isSessionVerified(userId?: string): boolean {\r\n    try {\r\n      return sessionStorage.getItem(getSessionKey(userId)) === 'true';\r\n    } catch {\r\n      return false;\r\n    }\r\n  },\r\n\r\n  markSessionVerified(userId?: string): void {\r\n    try {\r\n      sessionStorage.setItem(getSessionKey(userId), 'true');\r\n    } catch {}\r\n  }\r\n};","import React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useFirebaseAuth } from '@/contexts/FirebaseAuthContext';\r\nimport UserBroadcastModal from './UserBroadcastModal';\r\n// ØªÙ… Ø¥Ø²Ø§Ù„Ø© TrialOfferModal\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport LogoLoader from '@/components/LogoLoader';\r\nimport { MasterPinDialog } from '@/components/MasterPinDialog';\r\nimport { quickLoginService } from '@/utils/quickLoginService';\r\nimport { Capacitor } from '@capacitor/core';\r\n// ØµÙØ­Ø© Ø·Ù„Ø¨ Ø§Ù„ØªÙØ¹ÙŠÙ„ Ø³ÙŠØªÙ… ÙØªØ­Ù‡Ø§ Ø¹Ø¨Ø± Ø§Ù„ØªÙˆØ¬ÙŠÙ‡\r\n\r\nconst UserDashboardPageLazy = React.lazy(() => import('../pages/UserDashboardPage'));\r\n\r\nconst ProtectedUserDashboard = () => {\r\n  const navigate = useNavigate();\r\n  const { user, profile, loading, refreshProfile, isSubscriptionActive, userSubscription, checkSubscriptionStatus } = useFirebaseAuth();\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [isQuickLoginDialogOpen, setIsQuickLoginDialogOpen] = useState(false);\r\n  const { toast } = useToast();\r\n  const [hydrationReady, setHydrationReady] = useState(false);\r\n\r\n\r\n  // Ù…Ø³ØªÙ…Ø¹ Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ\r\n  useEffect(() => {\r\n    const handleSubscriptionUpdate = async (event: CustomEvent) => {\r\n      const { userId, isActive } = event.detail;\r\n      console.log('ğŸ”” ProtectedUserDashboard: Subscription update event received:', { userId, isActive, currentUserId: user?.uid });\r\n      \r\n      if (userId === user?.uid && isActive) {\r\n        console.log('âœ… ProtectedUserDashboard: Subscription activated for current user, refreshing status');\r\n        await checkSubscriptionStatus();\r\n        setIsAuthenticated(true);\r\n        toast({\r\n          title: \"ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ\",\r\n          description: \"Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…!\",\r\n        });\r\n      }\r\n    };\r\n\r\n    window.addEventListener('userSubscriptionUpdated', handleSubscriptionUpdate as EventListener);\r\n    \r\n    return () => {\r\n      window.removeEventListener('userSubscriptionUpdated', handleSubscriptionUpdate as EventListener);\r\n    };\r\n  }, [user?.uid, checkSubscriptionStatus, toast]);\r\n\r\n  useEffect(() => {\r\n    console.log('ProtectedUserDashboard - useEffect triggered', { \r\n      loading, \r\n      user: user ? 'exists' : 'null', \r\n      profile: profile ? { role: profile.role, approved: profile.approved } : 'null',\r\n      isSubscriptionActive,\r\n      userSubscription: userSubscription ? 'exists' : 'null'\r\n    });\r\n    \r\n    if (!loading) {\r\n      if (!user) {\r\n        console.log('ProtectedUserDashboard - No user, redirecting to login');\r\n        // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø¥Ù„Ù‰ ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…\r\n        navigate('/user/login');\r\n      } else if (profile) {\r\n        console.log('ProtectedUserDashboard - Profile found:', { \r\n          role: profile.role, \r\n          approved: profile.approved,\r\n          isSubscriptionActive,\r\n          hasSubscription: !!userSubscription?.subscription\r\n        });\r\n        \r\n        // Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø¥Ù„Ù‰ ØµÙØ­Ø© Ø·Ù„Ø¨ Ø§Ù„ØªÙØ¹ÙŠÙ„ Ø¹Ù†Ø¯ Ø§Ù„ØªØ¹Ø·ÙŠÙ„\r\n        // ÙŠØªÙ… Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ ÙÙ‚Ø· Ø¨Ø¹Ø¯ ØªÙˆÙØ± Ù‚Ø±Ø§Ø¡Ø© ÙˆØ«ÙŠÙ‚Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (userSubscription)\r\n        if (userSubscription) {\r\n          const branchActive = userSubscription?.branchPackage?.status === 'active';\r\n          const trialActive = (userSubscription as any)?.isOnFreeTrial === true;\r\n          const active = !!isSubscriptionActive || !!(userSubscription?.subscription?.isActive === true) || trialActive;\r\n          const shouldGoPending = !active && !branchActive;\r\n          if (shouldGoPending) {\r\n            try { navigate('/user/pending-approval', { replace: true }); } catch {}\r\n            return;\r\n          }\r\n        }\r\n\r\n        if (profile.role === \"user\") {\r\n          setIsAuthenticated(true);\r\n        }\r\n        \r\n        console.log('ProtectedUserDashboard - User approved or admin, checking quick-login gate');\r\n\r\n        // Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹: Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙØ¹Ù„Ø§Ù‹ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ ÙˆÙ„Ù… ÙŠØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø¬Ù„Ø³Ø©ØŒ Ø§Ø·Ù„Ø¨ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ\r\n        const quickEnabled = quickLoginService.isEnabled(user?.uid);\r\n        const sessionVerified = quickLoginService.isSessionVerified(user?.uid);\r\n\r\n        if (quickEnabled && !sessionVerified) {\r\n          try { quickLoginService.markSessionVerified(user?.uid); } catch {}\r\n          setIsQuickLoginDialogOpen(false);\r\n          setIsAuthenticated(true);\r\n        } else {\r\n          setIsAuthenticated(true);\r\n        }\r\n      }\r\n    }\r\n  }, [user, profile, loading, navigate, isSubscriptionActive, userSubscription]);\r\n\r\n  useEffect(() => {\r\n    let timer: any = null;\r\n    if (!loading && !!user) {\r\n      setHydrationReady(true);\r\n    } else if (user) {\r\n      timer = setTimeout(() => setHydrationReady(true), 3000);\r\n    }\r\n    return () => { try { clearTimeout(timer); } catch {} };\r\n  }, [loading, user]);\r\n\r\n  useEffect(() => {\r\n    if (loading) return;\r\n    if (!user) return;\r\n    if (!hydrationReady) return;\r\n    if (!userSubscription) return;\r\n    const branchActive = userSubscription?.branchPackage?.status === 'active';\r\n    const trialActive = (userSubscription as any)?.isOnFreeTrial === true;\r\n    const active = !!isSubscriptionActive || !!(userSubscription?.subscription?.isActive === true) || trialActive;\r\n    if (!active && !branchActive) {\r\n      try { navigate('/user/pending-approval'); } catch {}\r\n    }\r\n  }, [loading, user, userSubscription, isSubscriptionActive, navigate, hydrationReady]);\r\n\r\n  useEffect(() => {\r\n    if (loading) return;\r\n    if (!user) return;\r\n    if (!hydrationReady) return;\r\n    const pulse = setInterval(async () => {\r\n      try { await checkSubscriptionStatus(); } catch {}\r\n      const branchActive = userSubscription?.branchPackage?.status === 'active';\r\n      const trialActive = (userSubscription as any)?.isOnFreeTrial === true;\r\n      const active = !!isSubscriptionActive || !!(userSubscription?.subscription?.isActive === true) || trialActive;\r\n      if (!active && !branchActive) {\r\n        try { navigate('/user/pending-approval', { replace: true }); } catch {}\r\n      }\r\n    }, 1000);\r\n    return () => clearInterval(pulse);\r\n  }, [loading, user, userSubscription, isSubscriptionActive, checkSubscriptionStatus, navigate, hydrationReady]);\r\n\r\n  const isElectronEnv = (typeof window !== 'undefined' && (((window as any).electronAPI) || (typeof navigator !== 'undefined' && navigator.userAgent.toLowerCase().includes('electron')) || (typeof window !== 'undefined' && window.location && window.location.protocol === 'file:')));\r\n  const isAndroidNative = Capacitor?.isNativePlatform && Capacitor.getPlatform() === 'android';\r\n\r\n  // Ø¥Ø¸Ù‡Ø§Ø± Ù…Ø­Ù…Ù‘Ù„ Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± Ø¯Ø§Ø¦Ù…Ù‹Ø§ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ù…ÙŠÙ„ØŒ ÙˆØ¹Ù„Ù‰ Ø§Ù„Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯ ÙÙ‚Ø· Ø¥Ø°Ø§ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù…\r\n  if (loading && (isElectronEnv || !user)) {\r\n    return <LogoLoader />;\r\n  }\r\n\r\n  if (!hydrationReady) {\r\n    return <LogoLoader />;\r\n  }\r\n\r\n  // ÙÙŠ Ø­Ø§Ù„Ø© Ø¹Ø¯Ù… Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ø¨Ø³Ø¨Ø¨ Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹ØŒ Ø§Ø¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ ÙÙˆÙ‚ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„\r\n  if (!isAuthenticated) {\r\n    return (\r\n      <>\r\n        <LogoLoader />\r\n        <MasterPinDialog\r\n          open={isQuickLoginDialogOpen}\r\n          onOpenChange={(open) => setIsQuickLoginDialogOpen(open)}\r\n          mode=\"verify\"\r\n          title=\"Ø§Ù„ØªØ­Ù‚Ù‚ Ù„Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹\"\r\n          description=\"Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…\"\r\n          onSuccess={() => {\r\n            // ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¬Ù„Ø³Ø© Ù„Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø±Ø© ÙÙ‚Ø·\r\n            quickLoginService.markSessionVerified(user?.uid);\r\n            setIsQuickLoginDialogOpen(false);\r\n            setIsAuthenticated(true);\r\n          }}\r\n        />\r\n      </>\r\n    );\r\n  }\r\n\r\n  console.log('ProtectedUserDashboard - Render state:', { \r\n    isAuthenticated, \r\n    profileRole: profile?.role,\r\n    profileApproved: profile?.approved,\r\n    isSubscriptionActive,\r\n    hasSubscription: !!userSubscription?.subscription\r\n  });\r\n\r\n  console.log('ğŸ”¥ ProtectedUserDashboard - user:', user ? { uid: user.uid, email: user.email } : 'null');\r\n  console.log('ğŸ”¥ ProtectedUserDashboard - profile:', profile ? { userId: profile.userId, role: profile.role } : 'null');\r\n  console.log('ğŸ”¥ ProtectedUserDashboard - loading:', loading);\r\n  console.log('ğŸ”¥ ProtectedUserDashboard - About to render UserDashboardPage');\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      <React.Suspense fallback={<LogoLoader /> }>\r\n        <UserDashboardPageLazy />\r\n      </React.Suspense>\r\n      <UserBroadcastModal />\r\n      <MasterPinDialog\r\n        open={isQuickLoginDialogOpen}\r\n        onOpenChange={(open) => setIsQuickLoginDialogOpen(open)}\r\n        mode=\"verify\"\r\n        title=\"Ø§Ù„ØªØ­Ù‚Ù‚ Ù„Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹\"\r\n        description=\"Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…\"\r\n        onSuccess={() => {\r\n          quickLoginService.markSessionVerified(user?.uid);\r\n          setIsQuickLoginDialogOpen(false);\r\n          setIsAuthenticated(true);\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProtectedUserDashboard;\r\n"],"file":"assets/ProtectedUserDashboard-Kmx4-Rpe.js"}