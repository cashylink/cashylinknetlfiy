{"version":3,"file":"Index-27Mveu3n.js","sources":["../../src/pages/Index.tsx"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useFirebaseAuth } from \"@/contexts/FirebaseAuthContext\";\r\n\r\nconst Index = () => {\r\n  const { user, profile, loading } = useFirebaseAuth();\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    console.log('Index: useEffect triggered', { loading, user: user?.uid, profile: profile?.role });\r\n    \r\n    if (!loading) {\r\n      if (!user) {\r\n        console.log('Index: No user, navigating to landing');\r\n        navigate(\"/landing\");\r\n      } else if (profile) {\r\n        console.log('Index: Profile found, navigating based on role:', profile.role);\r\n        \r\n        // التحقق من حالة الموافقة للمستخدمين العاديين\r\n        if (profile.role === \"user\") {\r\n          navigate(\"/user/dashboard\");\r\n          return;\r\n        }\r\n        \r\n        if (profile.role === \"merchant\") {\r\n          navigate(\"/merchant\");\r\n        } else {\r\n          navigate(\"/landing\");\r\n          console.log('User role not supported:', profile.role);\r\n        }\r\n      } else {\r\n        console.log('Index: User exists but no profile yet, waiting...');\r\n      }\r\n    }\r\n  }, [user, profile, loading, navigate]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-background\">\r\n        <div className=\"text-center\">\r\n          <div className=\"h-8 w-8 animate-spin border-4 border-primary border-r-transparent rounded-full mx-auto mb-4\"></div>\r\n          <p className=\"text-muted-foreground\">جاري التحميل...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-background\">\r\n      <div className=\"text-center\">\r\n        <div className=\"h-8 w-8 animate-spin border-4 border-primary border-r-transparent rounded-full mx-auto mb-4\"></div>\r\n        <p className=\"text-muted-foreground\">جاري إعداد الحساب...</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Index;\r\n"],"names":["Index","user","profile","loading","useFirebaseAuth","navigate","useNavigate","useEffect","jsxs","jsx"],"mappings":"6DAIA,MAAMA,EAAQ,IAAM,CAClB,KAAM,CAAE,KAAAC,EAAM,QAAAC,EAAS,QAAAC,CAAA,EAAYC,EAAA,EAC7BC,EAAWC,EAAA,EA8BjB,OA5BAC,EAAAA,UAAU,IAAM,CAGd,GAFA,QAAQ,IAAI,6BAA8B,CAAE,QAAAJ,EAAS,KAAMF,GAAA,YAAAA,EAAM,IAAK,QAASC,GAAA,YAAAA,EAAS,IAAA,CAAM,EAE1F,CAACC,EACH,GAAI,CAACF,EACH,QAAQ,IAAI,uCAAuC,EACnDI,EAAS,UAAU,UACVH,EAAS,CAIlB,GAHA,QAAQ,IAAI,kDAAmDA,EAAQ,IAAI,EAGvEA,EAAQ,OAAS,OAAQ,CAC3BG,EAAS,iBAAiB,EAC1B,MACF,CAEIH,EAAQ,OAAS,WACnBG,EAAS,WAAW,GAEpBA,EAAS,UAAU,EACnB,QAAQ,IAAI,2BAA4BH,EAAQ,IAAI,EAExD,MACE,QAAQ,IAAI,mDAAmD,CAGrE,EAAG,CAACD,EAAMC,EAASC,EAASE,CAAQ,CAAC,EAEjCF,QAEC,MAAA,CAAI,UAAU,8DACb,SAAAK,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,6FAAA,CAA8F,EAC7GA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,iBAAA,CAAe,CAAA,CAAA,CACtD,CAAA,CACF,QAKD,MAAA,CAAI,UAAU,8DACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,6FAAA,CAA8F,EAC7GA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,sBAAA,CAAoB,CAAA,CAAA,CAC3D,CAAA,CACF,CAEJ"}